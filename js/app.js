!function t(e, n, r) {
    function i(a, s) {
        if (!n[a]) {
            if (!e[a]) {
                var l = "function" == typeof require && require;
                if (!s && l)
                    return l(a, !0);
                if (o)
                    return o(a, !0);
                var h = new Error("Cannot find module '" + a + "'");
                throw h.code = "MODULE_NOT_FOUND",
                h
            }
            var c = n[a] = {
                exports: {}
            };
            e[a][0].call(c.exports, function(t) {
                var n = e[a][1][t];
                return i(n ? n : t)
            }, c, c.exports, t, e, n, r)
        }
        return n[a].exports
    }
    for (var o = "function" == typeof require && require, a = 0; a < r.length; a++)
        i(r[a]);
    return i
}({
    1: [function(t, e, n) {
        function r() {
            c = !1,
            s.length ? h = s.concat(h) : u = -1,
            h.length && i()
        }
        function i() {
            if (!c) {
                var t = setTimeout(r);
                c = !0;
                for (var e = h.length; e; ) {
                    for (s = h,
                    h = []; ++u < e; )
                        s && s[u].run();
                    u = -1,
                    e = h.length
                }
                s = null ,
                c = !1,
                clearTimeout(t)
            }
        }
        function o(t, e) {
            this.fun = t,
            this.array = e
        }
        function a() {}
        var s, l = e.exports = {}, h = [], c = !1, u = -1;
        l.nextTick = function(t) {
            var e = new Array(arguments.length - 1);
            if (arguments.length > 1)
                for (var n = 1; n < arguments.length; n++)
                    e[n - 1] = arguments[n];
            h.push(new o(t,e)),
            1 !== h.length || c || setTimeout(i, 0)
        }
        ,
        o.prototype.run = function() {
            this.fun.apply(null , this.array)
        }
        ,
        l.title = "browser",
        l.browser = !0,
        l.env = {},
        l.argv = [],
        l.version = "",
        l.versions = {},
        l.on = a,
        l.addListener = a,
        l.once = a,
        l.off = a,
        l.removeListener = a,
        l.removeAllListeners = a,
        l.emit = a,
        l.binding = function(t) {
            throw new Error("process.binding is not supported")
        }
        ,
        l.cwd = function() {
            return "/"
        }
        ,
        l.chdir = function(t) {
            throw new Error("process.chdir is not supported")
        }
        ,
        l.umask = function() {
            return 0
        }
    }
    , {}],
    2: [function(t, e, n) {
        function r(t, e, n, r) {
            return n = window.getComputedStyle,
            r = n ? n(t) : t.currentStyle,
            r ? r[e.replace(/-(\w)/gi, function(t, e) {
                return e.toUpperCase()
            })] : void 0
        }
        e.exports = r
    }
    , {}],
    3: [function(t, e, n) {
        !function() {
            var n = function(t) {
                function e(t, e) {
                    if (t.indexOf)
                        return t.indexOf(e);
                    for (var n = t.length; n--; )
                        if (t[n] === e)
                            return n;
                    return -1
                }
                function n(t, n) {
                    var r = e(t, n);
                    -1 !== r && t.splice(r, 1)
                }
                function r(t, e) {
                    return "[object " + e + "]" === Object.prototype.toString.call(t)
                }
                function i(t) {
                    return r(t, "RegExp")
                }
                function o(t) {
                    return r(t, "Array")
                }
                function a(t) {
                    return "function" == typeof t
                }
                function s(t) {
                    var e;
                    return e = null === t || "null" === t ? null : "true" === t ? !0 : "false" === t ? !1 : t === f || "undefined" === t ? f : "" === t || isNaN(t) ? t : parseFloat(t)
                }
                function l(t) {
                    for (var e = t.length, n = []; e--; )
                        n[e] = s(t[e]);
                    return n
                }
                function h(t, e) {
                    for (var n, r, i, a, l = (t || "").replace("?", "").split("&"), h = -1, c = {}; r = l[++h]; )
                        n = r.indexOf("="),
                        a = r.substring(0, n),
                        i = decodeURIComponent(r.substring(n + 1)),
                        e !== !1 && (i = s(i)),
                        a in c ? o(c[a]) ? c[a].push(i) : c[a] = [c[a], i] : c[a] = i;
                    return c
                }
                function c() {
                    this.bypassed = new t.Signal,
                    this.routed = new t.Signal,
                    this._routes = [],
                    this._prevRoutes = [],
                    this._piped = [],
                    this.resetState()
                }
                function u(e, n, r, o) {
                    var a = i(e)
                      , s = o.patternLexer;
                    this._router = o,
                    this._pattern = e,
                    this._paramsIds = a ? null : s.getParamIds(e),
                    this._optionalParamsIds = a ? null : s.getOptionalParamsIds(e),
                    this._matchRegexp = a ? e : s.compilePattern(e, o.ignoreCase),
                    this.matched = new t.Signal,
                    this.switched = new t.Signal,
                    n && this.matched.add(n),
                    this._priority = r || 0
                }
                var p, d, f;
                return d = "" === /t(.+)?/.exec("t")[1],
                c.prototype = {
                    greedy: !1,
                    greedyEnabled: !0,
                    ignoreCase: !0,
                    ignoreState: !1,
                    shouldTypecast: !1,
                    normalizeFn: null ,
                    resetState: function() {
                        this._prevRoutes.length = 0,
                        this._prevMatchedRequest = null ,
                        this._prevBypassedRequest = null
                    },
                    create: function() {
                        return new c
                    },
                    addRoute: function(t, e, n) {
                        var r = new u(t,e,n,this);
                        return this._sortedInsert(r),
                        r
                    },
                    removeRoute: function(t) {
                        n(this._routes, t),
                        t._destroy()
                    },
                    removeAllRoutes: function() {
                        for (var t = this.getNumRoutes(); t--; )
                            this._routes[t]._destroy();
                        this._routes.length = 0
                    },
                    parse: function(t, e) {
                        if (t = t || "",
                        e = e || [],
                        this.ignoreState || t !== this._prevMatchedRequest && t !== this._prevBypassedRequest) {
                            var n, r = this._getMatchedRoutes(t), i = 0, o = r.length;
                            if (o)
                                for (this._prevMatchedRequest = t,
                                this._notifyPrevRoutes(r, t),
                                this._prevRoutes = r; o > i; )
                                    n = r[i],
                                    n.route.matched.dispatch.apply(n.route.matched, e.concat(n.params)),
                                    n.isFirst = !i,
                                    this.routed.dispatch.apply(this.routed, e.concat([t, n])),
                                    i += 1;
                            else
                                this._prevBypassedRequest = t,
                                this.bypassed.dispatch.apply(this.bypassed, e.concat([t]));
                            this._pipeParse(t, e)
                        }
                    },
                    _notifyPrevRoutes: function(t, e) {
                        for (var n, r = 0; n = this._prevRoutes[r++]; )
                            n.route.switched && this._didSwitch(n.route, t) && n.route.switched.dispatch(e)
                    },
                    _didSwitch: function(t, e) {
                        for (var n, r = 0; n = e[r++]; )
                            if (n.route === t)
                                return !1;
                        return !0
                    },
                    _pipeParse: function(t, e) {
                        for (var n, r = 0; n = this._piped[r++]; )
                            n.parse(t, e)
                    },
                    getNumRoutes: function() {
                        return this._routes.length
                    },
                    _sortedInsert: function(t) {
                        var e = this._routes
                          , n = e.length;
                        do
                            --n;
                        while (e[n] && t._priority <= e[n]._priority);e.splice(n + 1, 0, t)
                    },
                    _getMatchedRoutes: function(t) {
                        for (var e, n = [], r = this._routes, i = r.length; (e = r[--i]) && ((!n.length || this.greedy || e.greedy) && e.match(t) && n.push({
                            route: e,
                            params: e._getParamsArray(t)
                        }),
                        this.greedyEnabled || !n.length); )
                            ;
                        return n
                    },
                    pipe: function(t) {
                        this._piped.push(t)
                    },
                    unpipe: function(t) {
                        n(this._piped, t)
                    },
                    toString: function() {
                        return "[crossroads numRoutes:" + this.getNumRoutes() + "]"
                    }
                },
                p = new c,
                p.VERSION = "0.12.2",
                p.NORM_AS_ARRAY = function(t, e) {
                    return [e.vals_]
                }
                ,
                p.NORM_AS_OBJECT = function(t, e) {
                    return [e]
                }
                ,
                u.prototype = {
                    greedy: !1,
                    rules: void 0,
                    match: function(t) {
                        return t = t || "",
                        this._matchRegexp.test(t) && this._validateParams(t)
                    },
                    _validateParams: function(t) {
                        var e, n = this.rules, r = this._getParamsObject(t);
                        for (e in n)
                            if ("normalize_" !== e && n.hasOwnProperty(e) && !this._isValidParam(t, e, r))
                                return !1;
                        return !0
                    },
                    _isValidParam: function(t, n, r) {
                        var s = this.rules[n]
                          , l = r[n]
                          , h = !1
                          , c = 0 === n.indexOf("?");
                        return null == l && this._optionalParamsIds && -1 !== e(this._optionalParamsIds, n) ? h = !0 : i(s) ? (c && (l = r[n + "_"]),
                        h = s.test(l)) : o(s) ? (c && (l = r[n + "_"]),
                        h = this._isValidArrayRule(s, l)) : a(s) && (h = s(l, t, r)),
                        h
                    },
                    _isValidArrayRule: function(t, n) {
                        if (!this._router.ignoreCase)
                            return -1 !== e(t, n);
                        "string" == typeof n && (n = n.toLowerCase());
                        for (var r, i, o = t.length; o--; )
                            if (r = t[o],
                            i = "string" == typeof r ? r.toLowerCase() : r,
                            i === n)
                                return !0;
                        return !1
                    },
                    _getParamsObject: function(t) {
                        for (var n, r, i = this._router.shouldTypecast, o = this._router.patternLexer.getParamValues(t, this._matchRegexp, i), a = {}, l = o.length; l--; )
                            r = o[l],
                            this._paramsIds && (n = this._paramsIds[l],
                            0 === n.indexOf("?") && r && (a[n + "_"] = r,
                            r = h(r, i),
                            o[l] = r),
                            d && "" === r && -1 !== e(this._optionalParamsIds, n) && (r = void 0,
                            o[l] = r),
                            a[n] = r),
                            a[l] = r;
                        return a.request_ = i ? s(t) : t,
                        a.vals_ = o,
                        a
                    },
                    _getParamsArray: function(t) {
                        var e, n = this.rules ? this.rules.normalize_ : null ;
                        return n = n || this._router.normalizeFn,
                        e = n && a(n) ? n(t, this._getParamsObject(t)) : this._getParamsObject(t).vals_
                    },
                    interpolate: function(t) {
                        var e = this._router.patternLexer.interpolate(this._pattern, t);
                        if (!this._validateParams(e))
                            throw new Error("Generated string doesn't validate against `Route.rules`.");
                        return e
                    },
                    dispose: function() {
                        this._router.removeRoute(this)
                    },
                    _destroy: function() {
                        this.matched.dispose(),
                        this.switched.dispose(),
                        this.matched = this.switched = this._pattern = this._matchRegexp = null
                    },
                    toString: function() {
                        return '[Route pattern:"' + this._pattern + '", numListeners:' + this.matched.getNumListeners() + "]"
                    }
                },
                c.prototype.patternLexer = function() {
                    function t() {
                        var t, e;
                        for (t in f)
                            f.hasOwnProperty(t) && (e = f[t],
                            e.id = "__CR_" + t + "__",
                            e.save = "save"in e ? e.save.replace("{{id}}", e.id) : e.id,
                            e.rRestore = new RegExp(e.id,"g"))
                    }
                    function e(t, e) {
                        var n, r = [];
                        for (t.lastIndex = 0; n = t.exec(e); )
                            r.push(n[1]);
                        return r
                    }
                    function n(t) {
                        return e(d, t)
                    }
                    function r(t) {
                        return e(f.OP.rgx, t)
                    }
                    function i(t, e) {
                        return t = t || "",
                        t && (y === m ? t = t.replace(u, "") : y === v && (t = t.replace(p, "")),
                        t = a(t, "rgx", "save"),
                        t = t.replace(c, "\\$&"),
                        t = a(t, "rRestore", "res"),
                        y === m && (t = "\\/?" + t)),
                        y !== g && (t += "\\/?"),
                        new RegExp("^" + t + "$",e ? "i" : "")
                    }
                    function a(t, e, n) {
                        var r, i;
                        for (i in f)
                            f.hasOwnProperty(i) && (r = f[i],
                            t = t.replace(r[e], r[n]));
                        return t
                    }
                    function s(t, e, n) {
                        var r = e.exec(t);
                        return r && (r.shift(),
                        n && (r = l(r))),
                        r
                    }
                    function h(t, e) {
                        if (e = e || {},
                        "string" != typeof t)
                            throw new Error("Route pattern should be a string.");
                        var n = function(t, n) {
                            var r;
                            if (n = "?" === n.substr(0, 1) ? n.substr(1) : n,
                            null != e[n]) {
                                if ("object" == typeof e[n]) {
                                    var i, a = [];
                                    for (var s in e[n])
                                        if (i = e[n][s],
                                        o(i))
                                            for (var l in i)
                                                "[]" == s.slice(-2) ? a.push(encodeURI(s.slice(0, -2)) + "[]=" + encodeURI(i[l])) : a.push(encodeURI(s + "=" + i[l]));
                                        else
                                            a.push(encodeURI(s + "=" + i));
                                    r = "?" + a.join("&")
                                } else
                                    r = String(e[n]);
                                if (-1 === t.indexOf("*") && -1 !== r.indexOf("/"))
                                    throw new Error('Invalid value "' + r + '" for segment "' + t + '".')
                            } else {
                                if (-1 !== t.indexOf("{"))
                                    throw new Error("The segment " + t + " is required.");
                                r = ""
                            }
                            return r
                        };
                        return f.OS.trail || (f.OS.trail = new RegExp("(?:" + f.OS.id + ")+$")),
                        t.replace(f.OS.rgx, f.OS.save).replace(d, n).replace(f.OS.trail, "").replace(f.OS.rRestore, "/")
                    }
                    var c = /[\\.+*?\^$\[\](){}\/'#]/g
                      , u = /^\/|\/$/g
                      , p = /\/$/g
                      , d = /(?:\{|:)([^}:]+)(?:\}|:)/g
                      , f = {
                        OS: {
                            rgx: /([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,
                            save: "$1{{id}}$2",
                            res: "\\/?"
                        },
                        RS: {
                            rgx: /([:}])\/?(\{)/g,
                            save: "$1{{id}}$2",
                            res: "\\/"
                        },
                        RQ: {
                            rgx: /\{\?([^}]+)\}/g,
                            res: "\\?([^#]+)"
                        },
                        OQ: {
                            rgx: /:\?([^:]+):/g,
                            res: "(?:\\?([^#]*))?"
                        },
                        OR: {
                            rgx: /:([^:]+)\*:/g,
                            res: "(.*)?"
                        },
                        RR: {
                            rgx: /\{([^}]+)\*\}/g,
                            res: "(.+)"
                        },
                        RP: {
                            rgx: /\{([^}]+)\}/g,
                            res: "([^\\/?]+)"
                        },
                        OP: {
                            rgx: /:([^:]+):/g,
                            res: "([^\\/?]+)?/?"
                        }
                    }
                      , m = 1
                      , g = 2
                      , v = 3
                      , y = m;
                    return t(),
                    {
                        strict: function() {
                            y = g
                        },
                        loose: function() {
                            y = m
                        },
                        legacy: function() {
                            y = v
                        },
                        getParamIds: n,
                        getOptionalParamsIds: r,
                        getParamValues: s,
                        compilePattern: i,
                        interpolate: h
                    }
                }(),
                p
            };
            "function" == typeof define && define.amd ? define(["signals"], n) : "undefined" != typeof e && e.exports ? e.exports = n(t("signals")) : window.crossroads = n(window.signals)
        }()
    }
    , {
        signals: 4
    }],
    4: [function(t, e, n) {
        !function(t) {
            function n(t, e, n, r, i) {
                this._listener = e,
                this._isOnce = n,
                this.context = r,
                this._signal = t,
                this._priority = i || 0
            }
            function r(t, e) {
                if ("function" != typeof t)
                    throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}", e))
            }
            function i() {
                this._bindings = [],
                this._prevParams = null ;
                var t = this;
                this.dispatch = function() {
                    i.prototype.dispatch.apply(t, arguments)
                }
            }
            n.prototype = {
                active: !0,
                params: null ,
                execute: function(t) {
                    var e, n;
                    return this.active && this._listener && (n = this.params ? this.params.concat(t) : t,
                    e = this._listener.apply(this.context, n),
                    this._isOnce && this.detach()),
                    e
                },
                detach: function() {
                    return this.isBound() ? this._signal.remove(this._listener, this.context) : null
                },
                isBound: function() {
                    return !!this._signal && !!this._listener
                },
                isOnce: function() {
                    return this._isOnce
                },
                getListener: function() {
                    return this._listener
                },
                getSignal: function() {
                    return this._signal
                },
                _destroy: function() {
                    delete this._signal,
                    delete this._listener,
                    delete this.context
                },
                toString: function() {
                    return "[SignalBinding isOnce:" + this._isOnce + ", isBound:" + this.isBound() + ", active:" + this.active + "]"
                }
            },
            i.prototype = {
                VERSION: "1.0.0",
                memorize: !1,
                _shouldPropagate: !0,
                active: !0,
                _registerListener: function(t, e, r, i) {
                    var o, a = this._indexOfListener(t, r);
                    if (-1 !== a) {
                        if (o = this._bindings[a],
                        o.isOnce() !== e)
                            throw new Error("You cannot add" + (e ? "" : "Once") + "() then add" + (e ? "Once" : "") + "() the same listener without removing the relationship first.")
                    } else
                        o = new n(this,t,e,r,i),
                        this._addBinding(o);
                    return this.memorize && this._prevParams && o.execute(this._prevParams),
                    o
                },
                _addBinding: function(t) {
                    var e = this._bindings.length;
                    do
                        --e;
                    while (this._bindings[e] && t._priority <= this._bindings[e]._priority);this._bindings.splice(e + 1, 0, t)
                },
                _indexOfListener: function(t, e) {
                    for (var n, r = this._bindings.length; r--; )
                        if (n = this._bindings[r],
                        n._listener === t && n.context === e)
                            return r;
                    return -1
                },
                has: function(t, e) {
                    return -1 !== this._indexOfListener(t, e)
                },
                add: function(t, e, n) {
                    return r(t, "add"),
                    this._registerListener(t, !1, e, n)
                },
                addOnce: function(t, e, n) {
                    return r(t, "addOnce"),
                    this._registerListener(t, !0, e, n)
                },
                remove: function(t, e) {
                    r(t, "remove");
                    var n = this._indexOfListener(t, e);
                    return -1 !== n && (this._bindings[n]._destroy(),
                    this._bindings.splice(n, 1)),
                    t
                },
                removeAll: function() {
                    for (var t = this._bindings.length; t--; )
                        this._bindings[t]._destroy();
                    this._bindings.length = 0
                },
                getNumListeners: function() {
                    return this._bindings.length
                },
                halt: function() {
                    this._shouldPropagate = !1
                },
                dispatch: function(t) {
                    if (this.active) {
                        var e, n = Array.prototype.slice.call(arguments), r = this._bindings.length;
                        if (this.memorize && (this._prevParams = n),
                        r) {
                            e = this._bindings.slice(),
                            this._shouldPropagate = !0;
                            do
                                r--;
                            while (e[r] && this._shouldPropagate && e[r].execute(n) !== !1)
                        }
                    }
                },
                forget: function() {
                    this._prevParams = null
                },
                dispose: function() {
                    this.removeAll(),
                    delete this._bindings,
                    delete this._prevParams
                },
                toString: function() {
                    return "[Signal active:" + this.active + " numListeners:" + this.getNumListeners() + "]"
                }
            };
            var o = i;
            o.Signal = i,
            "function" == typeof define && define.amd ? define(function() {
                return o
            }) : "undefined" != typeof e && e.exports ? e.exports = o : t.signals = o
        }(this)
    }
    , {}],
    5: [function(t, e, n) {
        e.exports = t("./vendor/dat.gui"),
        e.exports.color = t("./vendor/dat.color")
    }
    , {
        "./vendor/dat.color": 6,
        "./vendor/dat.gui": 7
    }],
    6: [function(t, e, n) {
        var r = e.exports = r || {};
        r.color = r.color || {},
        r.utils = r.utils || {},
        r.utils.common = function() {
            var t = Array.prototype.forEach
              , e = Array.prototype.slice;
            return {
                BREAK: {},
                extend: function(t) {
                    return this.each(e.call(arguments, 1), function(e) {
                        for (var n in e)
                            this.isUndefined(e[n]) || (t[n] = e[n])
                    }, this),
                    t
                },
                defaults: function(t) {
                    return this.each(e.call(arguments, 1), function(e) {
                        for (var n in e)
                            this.isUndefined(t[n]) && (t[n] = e[n])
                    }, this),
                    t
                },
                compose: function() {
                    var t = e.call(arguments);
                    return function() {
                        for (var n = e.call(arguments), r = t.length - 1; r >= 0; r--)
                            n = [t[r].apply(this, n)];
                        return n[0]
                    }
                },
                each: function(e, n, r) {
                    if (t && e.forEach === t)
                        e.forEach(n, r);
                    else if (e.length === e.length + 0) {
                        for (var i = 0, o = e.length; o > i; i++)
                            if (i in e && n.call(r, e[i], i) === this.BREAK)
                                return
                    } else
                        for (var i in e)
                            if (n.call(r, e[i], i) === this.BREAK)
                                return
                },
                defer: function(t) {
                    setTimeout(t, 0)
                },
                toArray: function(t) {
                    return t.toArray ? t.toArray() : e.call(t)
                },
                isUndefined: function(t) {
                    return void 0 === t
                },
                isNull: function(t) {
                    return null === t
                },
                isNaN: function(t) {
                    return t !== t
                },
                isArray: Array.isArray || function(t) {
                    return t.constructor === Array
                }
                ,
                isObject: function(t) {
                    return t === Object(t)
                },
                isNumber: function(t) {
                    return t === t + 0
                },
                isString: function(t) {
                    return t === t + ""
                },
                isBoolean: function(t) {
                    return t === !1 || t === !0
                },
                isFunction: function(t) {
                    return "[object Function]" === Object.prototype.toString.call(t)
                }
            }
        }(),
        r.color.toString = function(t) {
            return function(e) {
                if (1 == e.a || t.isUndefined(e.a)) {
                    for (var n = e.hex.toString(16); n.length < 6; )
                        n = "0" + n;
                    return "#" + n
                }
                return "rgba(" + Math.round(e.r) + "," + Math.round(e.g) + "," + Math.round(e.b) + "," + e.a + ")"
            }
        }(r.utils.common),
        r.Color = r.color.Color = function(t, e, n, r) {
            function i(t, e, n) {
                Object.defineProperty(t, e, {
                    get: function() {
                        return "RGB" === this.__state.space ? this.__state[e] : (a(this, e, n),
                        this.__state[e])
                    },
                    set: function(t) {
                        "RGB" !== this.__state.space && (a(this, e, n),
                        this.__state.space = "RGB"),
                        this.__state[e] = t
                    }
                })
            }
            function o(t, e) {
                Object.defineProperty(t, e, {
                    get: function() {
                        return "HSV" === this.__state.space ? this.__state[e] : (s(this),
                        this.__state[e])
                    },
                    set: function(t) {
                        "HSV" !== this.__state.space && (s(this),
                        this.__state.space = "HSV"),
                        this.__state[e] = t
                    }
                })
            }
            function a(t, n, i) {
                if ("HEX" === t.__state.space)
                    t.__state[n] = e.component_from_hex(t.__state.hex, i);
                else {
                    if ("HSV" !== t.__state.space)
                        throw "Corrupted color state";
                    r.extend(t.__state, e.hsv_to_rgb(t.__state.h, t.__state.s, t.__state.v))
                }
            }
            function s(t) {
                var n = e.rgb_to_hsv(t.r, t.g, t.b);
                r.extend(t.__state, {
                    s: n.s,
                    v: n.v
                }),
                r.isNaN(n.h) ? r.isUndefined(t.__state.h) && (t.__state.h = 0) : t.__state.h = n.h
            }
            var l = function() {
                if (this.__state = t.apply(this, arguments),
                this.__state === !1)
                    throw "Failed to interpret color arguments";
                this.__state.a = this.__state.a || 1
            };
            return l.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"],
            r.extend(l.prototype, {
                toString: function() {
                    return n(this)
                },
                toOriginal: function() {
                    return this.__state.conversion.write(this)
                }
            }),
            i(l.prototype, "r", 2),
            i(l.prototype, "g", 1),
            i(l.prototype, "b", 0),
            o(l.prototype, "h"),
            o(l.prototype, "s"),
            o(l.prototype, "v"),
            Object.defineProperty(l.prototype, "a", {
                get: function() {
                    return this.__state.a
                },
                set: function(t) {
                    this.__state.a = t
                }
            }),
            Object.defineProperty(l.prototype, "hex", {
                get: function() {
                    return "HEX" !== !this.__state.space && (this.__state.hex = e.rgb_to_hex(this.r, this.g, this.b)),
                    this.__state.hex
                },
                set: function(t) {
                    this.__state.space = "HEX",
                    this.__state.hex = t
                }
            }),
            l
        }(r.color.interpret = function(t, e) {
            var n, r, i = function() {
                r = !1;
                var t = arguments.length > 1 ? e.toArray(arguments) : arguments[0];
                return e.each(o, function(i) {
                    return i.litmus(t) ? (e.each(i.conversions, function(i, o) {
                        return n = i.read(t),
                        r === !1 && n !== !1 ? (r = n,
                        n.conversionName = o,
                        n.conversion = i,
                        e.BREAK) : void 0
                    }),
                    e.BREAK) : void 0
                }),
                r
            }, o = [{
                litmus: e.isString,
                conversions: {
                    THREE_CHAR_HEX: {
                        read: function(t) {
                            var e = t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
                            return null === e ? !1 : {
                                space: "HEX",
                                hex: parseInt("0x" + e[1].toString() + e[1].toString() + e[2].toString() + e[2].toString() + e[3].toString() + e[3].toString())
                            }
                        },
                        write: t
                    },
                    SIX_CHAR_HEX: {
                        read: function(t) {
                            var e = t.match(/^#([A-F0-9]{6})$/i);
                            return null === e ? !1 : {
                                space: "HEX",
                                hex: parseInt("0x" + e[1].toString())
                            }
                        },
                        write: t
                    },
                    CSS_RGB: {
                        read: function(t) {
                            var e = t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
                            return null === e ? !1 : {
                                space: "RGB",
                                r: parseFloat(e[1]),
                                g: parseFloat(e[2]),
                                b: parseFloat(e[3])
                            }
                        },
                        write: t
                    },
                    CSS_RGBA: {
                        read: function(t) {
                            var e = t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);
                            return null === e ? !1 : {
                                space: "RGB",
                                r: parseFloat(e[1]),
                                g: parseFloat(e[2]),
                                b: parseFloat(e[3]),
                                a: parseFloat(e[4])
                            }
                        },
                        write: t
                    }
                }
            }, {
                litmus: e.isNumber,
                conversions: {
                    HEX: {
                        read: function(t) {
                            return {
                                space: "HEX",
                                hex: t,
                                conversionName: "HEX"
                            }
                        },
                        write: function(t) {
                            return t.hex
                        }
                    }
                }
            }, {
                litmus: e.isArray,
                conversions: {
                    RGB_ARRAY: {
                        read: function(t) {
                            return 3 != t.length ? !1 : {
                                space: "RGB",
                                r: t[0],
                                g: t[1],
                                b: t[2]
                            }
                        },
                        write: function(t) {
                            return [t.r, t.g, t.b]
                        }
                    },
                    RGBA_ARRAY: {
                        read: function(t) {
                            return 4 != t.length ? !1 : {
                                space: "RGB",
                                r: t[0],
                                g: t[1],
                                b: t[2],
                                a: t[3]
                            }
                        },
                        write: function(t) {
                            return [t.r, t.g, t.b, t.a]
                        }
                    }
                }
            }, {
                litmus: e.isObject,
                conversions: {
                    RGBA_OBJ: {
                        read: function(t) {
                            return e.isNumber(t.r) && e.isNumber(t.g) && e.isNumber(t.b) && e.isNumber(t.a) ? {
                                space: "RGB",
                                r: t.r,
                                g: t.g,
                                b: t.b,
                                a: t.a
                            } : !1
                        },
                        write: function(t) {
                            return {
                                r: t.r,
                                g: t.g,
                                b: t.b,
                                a: t.a
                            }
                        }
                    },
                    RGB_OBJ: {
                        read: function(t) {
                            return e.isNumber(t.r) && e.isNumber(t.g) && e.isNumber(t.b) ? {
                                space: "RGB",
                                r: t.r,
                                g: t.g,
                                b: t.b
                            } : !1
                        },
                        write: function(t) {
                            return {
                                r: t.r,
                                g: t.g,
                                b: t.b
                            }
                        }
                    },
                    HSVA_OBJ: {
                        read: function(t) {
                            return e.isNumber(t.h) && e.isNumber(t.s) && e.isNumber(t.v) && e.isNumber(t.a) ? {
                                space: "HSV",
                                h: t.h,
                                s: t.s,
                                v: t.v,
                                a: t.a
                            } : !1
                        },
                        write: function(t) {
                            return {
                                h: t.h,
                                s: t.s,
                                v: t.v,
                                a: t.a
                            }
                        }
                    },
                    HSV_OBJ: {
                        read: function(t) {
                            return e.isNumber(t.h) && e.isNumber(t.s) && e.isNumber(t.v) ? {
                                space: "HSV",
                                h: t.h,
                                s: t.s,
                                v: t.v
                            } : !1
                        },
                        write: function(t) {
                            return {
                                h: t.h,
                                s: t.s,
                                v: t.v
                            }
                        }
                    }
                }
            }];
            return i
        }(r.color.toString, r.utils.common), r.color.math = function() {
            var t;
            return {
                hsv_to_rgb: function(t, e, n) {
                    var r = Math.floor(t / 60) % 6
                      , i = t / 60 - Math.floor(t / 60)
                      , o = n * (1 - e)
                      , a = n * (1 - i * e)
                      , s = n * (1 - (1 - i) * e)
                      , l = [[n, s, o], [a, n, o], [o, n, s], [o, a, n], [s, o, n], [n, o, a]][r];
                    return {
                        r: 255 * l[0],
                        g: 255 * l[1],
                        b: 255 * l[2]
                    }
                },
                rgb_to_hsv: function(t, e, n) {
                    var r, i, o = Math.min(t, e, n), a = Math.max(t, e, n), s = a - o;
                    return 0 == a ? {
                        h: NaN,
                        s: 0,
                        v: 0
                    } : (i = s / a,
                    r = t == a ? (e - n) / s : e == a ? 2 + (n - t) / s : 4 + (t - e) / s,
                    r /= 6,
                    0 > r && (r += 1),
                    {
                        h: 360 * r,
                        s: i,
                        v: a / 255
                    })
                },
                rgb_to_hex: function(t, e, n) {
                    var r = this.hex_with_component(0, 2, t);
                    return r = this.hex_with_component(r, 1, e),
                    r = this.hex_with_component(r, 0, n)
                },
                component_from_hex: function(t, e) {
                    return t >> 8 * e & 255
                },
                hex_with_component: function(e, n, r) {
                    return r << (t = 8 * n) | e & ~(255 << t)
                }
            }
        }(), r.color.toString, r.utils.common)
    }
    , {}],
    7: [function(t, e, n) {
        var r = e.exports = r || {};
        r.gui = r.gui || {},
        r.utils = r.utils || {},
        r.controllers = r.controllers || {},
        r.dom = r.dom || {},
        r.color = r.color || {},
        r.utils.css = function() {
            return {
                load: function(t, e) {
                    e = e || document;
                    var n = e.createElement("link");
                    n.type = "text/css",
                    n.rel = "stylesheet",
                    n.href = t,
                    e.getElementsByTagName("head")[0].appendChild(n)
                },
                inject: function(t, e) {
                    e = e || document;
                    var n = document.createElement("style");
                    n.type = "text/css",
                    n.innerHTML = t,
                    e.getElementsByTagName("head")[0].appendChild(n)
                }
            }
        }(),
        r.utils.common = function() {
            var t = Array.prototype.forEach
              , e = Array.prototype.slice;
            return {
                BREAK: {},
                extend: function(t) {
                    return this.each(e.call(arguments, 1), function(e) {
                        for (var n in e)
                            this.isUndefined(e[n]) || (t[n] = e[n])
                    }, this),
                    t
                },
                defaults: function(t) {
                    return this.each(e.call(arguments, 1), function(e) {
                        for (var n in e)
                            this.isUndefined(t[n]) && (t[n] = e[n])
                    }, this),
                    t
                },
                compose: function() {
                    var t = e.call(arguments);
                    return function() {
                        for (var n = e.call(arguments), r = t.length - 1; r >= 0; r--)
                            n = [t[r].apply(this, n)];
                        return n[0]
                    }
                },
                each: function(e, n, r) {
                    if (t && e.forEach === t)
                        e.forEach(n, r);
                    else if (e.length === e.length + 0) {
                        for (var i = 0, o = e.length; o > i; i++)
                            if (i in e && n.call(r, e[i], i) === this.BREAK)
                                return
                    } else
                        for (var i in e)
                            if (n.call(r, e[i], i) === this.BREAK)
                                return
                },
                defer: function(t) {
                    setTimeout(t, 0)
                },
                toArray: function(t) {
                    return t.toArray ? t.toArray() : e.call(t)
                },
                isUndefined: function(t) {
                    return void 0 === t
                },
                isNull: function(t) {
                    return null === t
                },
                isNaN: function(t) {
                    return t !== t
                },
                isArray: Array.isArray || function(t) {
                    return t.constructor === Array
                }
                ,
                isObject: function(t) {
                    return t === Object(t)
                },
                isNumber: function(t) {
                    return t === t + 0
                },
                isString: function(t) {
                    return t === t + ""
                },
                isBoolean: function(t) {
                    return t === !1 || t === !0
                },
                isFunction: function(t) {
                    return "[object Function]" === Object.prototype.toString.call(t)
                }
            }
        }(),
        r.controllers.Controller = function(t) {
            var e = function(t, e) {
                this.initialValue = t[e],
                this.domElement = document.createElement("div"),
                this.object = t,
                this.property = e,
                this.__onChange = void 0,
                this.__onFinishChange = void 0
            };
            return t.extend(e.prototype, {
                onChange: function(t) {
                    return this.__onChange = t,
                    this
                },
                onFinishChange: function(t) {
                    return this.__onFinishChange = t,
                    this
                },
                setValue: function(t) {
                    return this.object[this.property] = t,
                    this.__onChange && this.__onChange.call(this, t),
                    this.updateDisplay(),
                    this
                },
                getValue: function() {
                    return this.object[this.property]
                },
                updateDisplay: function() {
                    return this
                },
                isModified: function() {
                    return this.initialValue !== this.getValue()
                }
            }),
            e
        }(r.utils.common),
        r.dom.dom = function(t) {
            function e(e) {
                if ("0" === e || t.isUndefined(e))
                    return 0;
                var n = e.match(i);
                return t.isNull(n) ? 0 : parseFloat(n[1])
            }
            var n = {
                HTMLEvents: ["change"],
                MouseEvents: ["click", "mousemove", "mousedown", "mouseup", "mouseover"],
                KeyboardEvents: ["keydown"]
            }
              , r = {};
            t.each(n, function(e, n) {
                t.each(e, function(t) {
                    r[t] = n
                })
            });
            var i = /(\d+(\.\d+)?)px/
              , o = {
                makeSelectable: function(t, e) {
                    void 0 !== t && void 0 !== t.style && (t.onselectstart = e ? function() {
                        return !1
                    }
                    : function() {}
                    ,
                    t.style.MozUserSelect = e ? "auto" : "none",
                    t.style.KhtmlUserSelect = e ? "auto" : "none",
                    t.unselectable = e ? "on" : "off")
                },
                makeFullscreen: function(e, n, r) {
                    t.isUndefined(n) && (n = !0),
                    t.isUndefined(r) && (r = !0),
                    e.style.position = "absolute",
                    n && (e.style.left = 0,
                    e.style.right = 0),
                    r && (e.style.top = 0,
                    e.style.bottom = 0)
                },
                fakeEvent: function(e, n, i, o) {
                    i = i || {};
                    var a = r[n];
                    if (!a)
                        throw new Error("Event type " + n + " not supported.");
                    var s = document.createEvent(a);
                    switch (a) {
                    case "MouseEvents":
                        var l = i.x || i.clientX || 0
                          , h = i.y || i.clientY || 0;
                        s.initMouseEvent(n, i.bubbles || !1, i.cancelable || !0, window, i.clickCount || 1, 0, 0, l, h, !1, !1, !1, !1, 0, null );
                        break;
                    case "KeyboardEvents":
                        var c = s.initKeyboardEvent || s.initKeyEvent;
                        t.defaults(i, {
                            cancelable: !0,
                            ctrlKey: !1,
                            altKey: !1,
                            shiftKey: !1,
                            metaKey: !1,
                            keyCode: void 0,
                            charCode: void 0
                        }),
                        c(n, i.bubbles || !1, i.cancelable, window, i.ctrlKey, i.altKey, i.shiftKey, i.metaKey, i.keyCode, i.charCode);
                        break;
                    default:
                        s.initEvent(n, i.bubbles || !1, i.cancelable || !0)
                    }
                    t.defaults(s, o),
                    e.dispatchEvent(s)
                },
                bind: function(t, e, n, r) {
                    return r = r || !1,
                    t.addEventListener ? t.addEventListener(e, n, r) : t.attachEvent && t.attachEvent("on" + e, n),
                    o
                },
                unbind: function(t, e, n, r) {
                    return r = r || !1,
                    t.removeEventListener ? t.removeEventListener(e, n, r) : t.detachEvent && t.detachEvent("on" + e, n),
                    o
                },
                addClass: function(t, e) {
                    if (void 0 === t.className)
                        t.className = e;
                    else if (t.className !== e) {
                        var n = t.className.split(/ +/);
                        -1 == n.indexOf(e) && (n.push(e),
                        t.className = n.join(" ").replace(/^\s+/, "").replace(/\s+$/, ""))
                    }
                    return o
                },
                removeClass: function(t, e) {
                    if (e)
                        if (void 0 === t.className)
                            ;
                        else if (t.className === e)
                            t.removeAttribute("class");
                        else {
                            var n = t.className.split(/ +/)
                              , r = n.indexOf(e);
                            -1 != r && (n.splice(r, 1),
                            t.className = n.join(" "))
                        }
                    else
                        t.className = void 0;
                    return o
                },
                hasClass: function(t, e) {
                    return new RegExp("(?:^|\\s+)" + e + "(?:\\s+|$)").test(t.className) || !1
                },
                getWidth: function(t) {
                    var n = getComputedStyle(t);
                    return e(n["border-left-width"]) + e(n["border-right-width"]) + e(n["padding-left"]) + e(n["padding-right"]) + e(n.width)
                },
                getHeight: function(t) {
                    var n = getComputedStyle(t);
                    return e(n["border-top-width"]) + e(n["border-bottom-width"]) + e(n["padding-top"]) + e(n["padding-bottom"]) + e(n.height)
                },
                getOffset: function(t) {
                    var e = {
                        left: 0,
                        top: 0
                    };
                    if (t.offsetParent)
                        do
                            e.left += t.offsetLeft,
                            e.top += t.offsetTop;
                        while (t = t.offsetParent);return e
                },
                isActive: function(t) {
                    return t === document.activeElement && (t.type || t.href)
                }
            };
            return o
        }(r.utils.common),
        r.controllers.OptionController = function(t, e, n) {
            var r = function(t, i, o) {
                r.superclass.call(this, t, i);
                var a = this;
                if (this.__select = document.createElement("select"),
                n.isArray(o)) {
                    var s = {};
                    n.each(o, function(t) {
                        s[t] = t
                    }),
                    o = s
                }
                n.each(o, function(t, e) {
                    var n = document.createElement("option");
                    n.innerHTML = e,
                    n.setAttribute("value", t),
                    a.__select.appendChild(n)
                }),
                this.updateDisplay(),
                e.bind(this.__select, "change", function() {
                    var t = this.options[this.selectedIndex].value;
                    a.setValue(t)
                }),
                this.domElement.appendChild(this.__select)
            };
            return r.superclass = t,
            n.extend(r.prototype, t.prototype, {
                setValue: function(t) {
                    var e = r.superclass.prototype.setValue.call(this, t);
                    return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()),
                    e
                },
                updateDisplay: function() {
                    return this.__select.value = this.getValue(),
                    r.superclass.prototype.updateDisplay.call(this)
                }
            }),
            r
        }(r.controllers.Controller, r.dom.dom, r.utils.common),
        r.controllers.NumberController = function(t, e) {
            function n(t) {
                return t = t.toString(),
                t.indexOf(".") > -1 ? t.length - t.indexOf(".") - 1 : 0
            }
            var r = function(t, i, o) {
                r.superclass.call(this, t, i),
                o = o || {},
                this.__min = o.min,
                this.__max = o.max,
                this.__step = o.step,
                e.isUndefined(this.__step) ? 0 == this.initialValue ? this.__impliedStep = 1 : this.__impliedStep = Math.pow(10, Math.floor(Math.log(this.initialValue) / Math.LN10)) / 10 : this.__impliedStep = this.__step,
                this.__precision = n(this.__impliedStep)
            };
            return r.superclass = t,
            e.extend(r.prototype, t.prototype, {
                setValue: function(t) {
                    return void 0 !== this.__min && t < this.__min ? t = this.__min : void 0 !== this.__max && t > this.__max && (t = this.__max),
                    void 0 !== this.__step && t % this.__step != 0 && (t = Math.round(t / this.__step) * this.__step),
                    r.superclass.prototype.setValue.call(this, t)
                },
                min: function(t) {
                    return this.__min = t,
                    this
                },
                max: function(t) {
                    return this.__max = t,
                    this
                },
                step: function(t) {
                    return this.__step = t,
                    this
                }
            }),
            r
        }(r.controllers.Controller, r.utils.common),
        r.controllers.NumberControllerBox = function(t, e, n) {
            function r(t, e) {
                var n = Math.pow(10, e);
                return Math.round(t * n) / n
            }
            var i = function(t, r, o) {
                function a() {
                    var t = parseFloat(p.__input.value);
                    n.isNaN(t) || p.setValue(t)
                }
                function s() {
                    a(),
                    p.__onFinishChange && p.__onFinishChange.call(p, p.getValue())
                }
                function l(t) {
                    e.bind(window, "mousemove", h),
                    e.bind(window, "mouseup", c),
                    u = t.clientY
                }
                function h(t) {
                    var e = u - t.clientY;
                    p.setValue(p.getValue() + e * p.__impliedStep),
                    u = t.clientY
                }
                function c() {
                    e.unbind(window, "mousemove", h),
                    e.unbind(window, "mouseup", c)
                }
                this.__truncationSuspended = !1,
                i.superclass.call(this, t, r, o);
                var u, p = this;
                this.__input = document.createElement("input"),
                this.__input.setAttribute("type", "text"),
                e.bind(this.__input, "change", a),
                e.bind(this.__input, "blur", s),
                e.bind(this.__input, "mousedown", l),
                e.bind(this.__input, "keydown", function(t) {
                    13 === t.keyCode && (p.__truncationSuspended = !0,
                    this.blur(),
                    p.__truncationSuspended = !1)
                }),
                this.updateDisplay(),
                this.domElement.appendChild(this.__input)
            };
            return i.superclass = t,
            n.extend(i.prototype, t.prototype, {
                updateDisplay: function() {
                    return this.__input.value = this.__truncationSuspended ? this.getValue() : r(this.getValue(), this.__precision),
                    i.superclass.prototype.updateDisplay.call(this)
                }
            }),
            i
        }(r.controllers.NumberController, r.dom.dom, r.utils.common),
        r.controllers.NumberControllerSlider = function(t, e, n, r, i) {
            function o(t, e, n, r, i) {
                return r + (i - r) * ((t - e) / (n - e))
            }
            var a = function(t, n, r, i, s) {
                function l(t) {
                    e.bind(window, "mousemove", h),
                    e.bind(window, "mouseup", c),
                    h(t)
                }
                function h(t) {
                    t.preventDefault();
                    var n = e.getOffset(u.__background)
                      , r = e.getWidth(u.__background);
                    return u.setValue(o(t.clientX, n.left, n.left + r, u.__min, u.__max)),
                    !1
                }
                function c() {
                    e.unbind(window, "mousemove", h),
                    e.unbind(window, "mouseup", c),
                    u.__onFinishChange && u.__onFinishChange.call(u, u.getValue())
                }
                a.superclass.call(this, t, n, {
                    min: r,
                    max: i,
                    step: s
                });
                var u = this;
                this.__background = document.createElement("div"),
                this.__foreground = document.createElement("div"),
                e.bind(this.__background, "mousedown", l),
                e.addClass(this.__background, "slider"),
                e.addClass(this.__foreground, "slider-fg"),
                this.updateDisplay(),
                this.__background.appendChild(this.__foreground),
                this.domElement.appendChild(this.__background)
            };
            return a.superclass = t,
            a.useDefaultStyles = function() {
                n.inject(i)
            }
            ,
            r.extend(a.prototype, t.prototype, {
                updateDisplay: function() {
                    var t = (this.getValue() - this.__min) / (this.__max - this.__min);
                    return this.__foreground.style.width = 100 * t + "%",
                    a.superclass.prototype.updateDisplay.call(this)
                }
            }),
            a
        }(r.controllers.NumberController, r.dom.dom, r.utils.css, r.utils.common, ".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),
        r.controllers.FunctionController = function(t, e, n) {
            var r = function(t, n, i) {
                r.superclass.call(this, t, n);
                var o = this;
                this.__button = document.createElement("div"),
                this.__button.innerHTML = void 0 === i ? "Fire" : i,
                e.bind(this.__button, "click", function(t) {
                    return t.preventDefault(),
                    o.fire(),
                    !1
                }),
                e.addClass(this.__button, "button"),
                this.domElement.appendChild(this.__button)
            };
            return r.superclass = t,
            n.extend(r.prototype, t.prototype, {
                fire: function() {
                    this.__onChange && this.__onChange.call(this),
                    this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()),
                    this.getValue().call(this.object)
                }
            }),
            r
        }(r.controllers.Controller, r.dom.dom, r.utils.common),
        r.controllers.BooleanController = function(t, e, n) {
            var r = function(t, n) {
                function i() {
                    o.setValue(!o.__prev)
                }
                r.superclass.call(this, t, n);
                var o = this;
                this.__prev = this.getValue(),
                this.__checkbox = document.createElement("input"),
                this.__checkbox.setAttribute("type", "checkbox"),
                e.bind(this.__checkbox, "change", i, !1),
                this.domElement.appendChild(this.__checkbox),
                this.updateDisplay()
            };
            return r.superclass = t,
            n.extend(r.prototype, t.prototype, {
                setValue: function(t) {
                    var e = r.superclass.prototype.setValue.call(this, t);
                    return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()),
                    this.__prev = this.getValue(),
                    e
                },
                updateDisplay: function() {
                    return this.getValue() === !0 ? (this.__checkbox.setAttribute("checked", "checked"),
                    this.__checkbox.checked = !0) : this.__checkbox.checked = !1,
                    r.superclass.prototype.updateDisplay.call(this)
                }
            }),
            r
        }(r.controllers.Controller, r.dom.dom, r.utils.common),
        r.color.toString = function(t) {
            return function(e) {
                if (1 == e.a || t.isUndefined(e.a)) {
                    for (var n = e.hex.toString(16); n.length < 6; )
                        n = "0" + n;
                    return "#" + n
                }
                return "rgba(" + Math.round(e.r) + "," + Math.round(e.g) + "," + Math.round(e.b) + "," + e.a + ")"
            }
        }(r.utils.common),
        r.color.interpret = function(t, e) {
            var n, r, i = function() {
                r = !1;
                var t = arguments.length > 1 ? e.toArray(arguments) : arguments[0];
                return e.each(o, function(i) {
                    return i.litmus(t) ? (e.each(i.conversions, function(i, o) {
                        return n = i.read(t),
                        r === !1 && n !== !1 ? (r = n,
                        n.conversionName = o,
                        n.conversion = i,
                        e.BREAK) : void 0
                    }),
                    e.BREAK) : void 0
                }),
                r
            }, o = [{
                litmus: e.isString,
                conversions: {
                    THREE_CHAR_HEX: {
                        read: function(t) {
                            var e = t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
                            return null === e ? !1 : {
                                space: "HEX",
                                hex: parseInt("0x" + e[1].toString() + e[1].toString() + e[2].toString() + e[2].toString() + e[3].toString() + e[3].toString())
                            }
                        },
                        write: t
                    },
                    SIX_CHAR_HEX: {
                        read: function(t) {
                            var e = t.match(/^#([A-F0-9]{6})$/i);
                            return null === e ? !1 : {
                                space: "HEX",
                                hex: parseInt("0x" + e[1].toString())
                            }
                        },
                        write: t
                    },
                    CSS_RGB: {
                        read: function(t) {
                            var e = t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
                            return null === e ? !1 : {
                                space: "RGB",
                                r: parseFloat(e[1]),
                                g: parseFloat(e[2]),
                                b: parseFloat(e[3])
                            }
                        },
                        write: t
                    },
                    CSS_RGBA: {
                        read: function(t) {
                            var e = t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);
                            return null === e ? !1 : {
                                space: "RGB",
                                r: parseFloat(e[1]),
                                g: parseFloat(e[2]),
                                b: parseFloat(e[3]),
                                a: parseFloat(e[4])
                            }
                        },
                        write: t
                    }
                }
            }, {
                litmus: e.isNumber,
                conversions: {
                    HEX: {
                        read: function(t) {
                            return {
                                space: "HEX",
                                hex: t,
                                conversionName: "HEX"
                            }
                        },
                        write: function(t) {
                            return t.hex
                        }
                    }
                }
            }, {
                litmus: e.isArray,
                conversions: {
                    RGB_ARRAY: {
                        read: function(t) {
                            return 3 != t.length ? !1 : {
                                space: "RGB",
                                r: t[0],
                                g: t[1],
                                b: t[2]
                            }
                        },
                        write: function(t) {
                            return [t.r, t.g, t.b]
                        }
                    },
                    RGBA_ARRAY: {
                        read: function(t) {
                            return 4 != t.length ? !1 : {
                                space: "RGB",
                                r: t[0],
                                g: t[1],
                                b: t[2],
                                a: t[3]
                            }
                        },
                        write: function(t) {
                            return [t.r, t.g, t.b, t.a]
                        }
                    }
                }
            }, {
                litmus: e.isObject,
                conversions: {
                    RGBA_OBJ: {
                        read: function(t) {
                            return e.isNumber(t.r) && e.isNumber(t.g) && e.isNumber(t.b) && e.isNumber(t.a) ? {
                                space: "RGB",
                                r: t.r,
                                g: t.g,
                                b: t.b,
                                a: t.a
                            } : !1
                        },
                        write: function(t) {
                            return {
                                r: t.r,
                                g: t.g,
                                b: t.b,
                                a: t.a
                            }
                        }
                    },
                    RGB_OBJ: {
                        read: function(t) {
                            return e.isNumber(t.r) && e.isNumber(t.g) && e.isNumber(t.b) ? {
                                space: "RGB",
                                r: t.r,
                                g: t.g,
                                b: t.b
                            } : !1
                        },
                        write: function(t) {
                            return {
                                r: t.r,
                                g: t.g,
                                b: t.b
                            }
                        }
                    },
                    HSVA_OBJ: {
                        read: function(t) {
                            return e.isNumber(t.h) && e.isNumber(t.s) && e.isNumber(t.v) && e.isNumber(t.a) ? {
                                space: "HSV",
                                h: t.h,
                                s: t.s,
                                v: t.v,
                                a: t.a
                            } : !1
                        },
                        write: function(t) {
                            return {
                                h: t.h,
                                s: t.s,
                                v: t.v,
                                a: t.a
                            }
                        }
                    },
                    HSV_OBJ: {
                        read: function(t) {
                            return e.isNumber(t.h) && e.isNumber(t.s) && e.isNumber(t.v) ? {
                                space: "HSV",
                                h: t.h,
                                s: t.s,
                                v: t.v
                            } : !1
                        },
                        write: function(t) {
                            return {
                                h: t.h,
                                s: t.s,
                                v: t.v
                            }
                        }
                    }
                }
            }];
            return i
        }(r.color.toString, r.utils.common),
        r.GUI = r.gui.GUI = function(t, e, n, r, i, o, a, s, l, h, c, u, p, d, f) {
            function m(t, e, n, o) {
                if (void 0 === e[n])
                    throw new Error("Object " + e + ' has no property "' + n + '"');
                var a;
                if (o.color)
                    a = new c(e,n);
                else {
                    var s = [e, n].concat(o.factoryArgs);
                    a = r.apply(t, s)
                }
                o.before instanceof i && (o.before = o.before.__li),
                y(t, a),
                d.addClass(a.domElement, "c");
                var l = document.createElement("span");
                d.addClass(l, "property-name"),
                l.innerHTML = a.property;
                var h = document.createElement("div");
                h.appendChild(l),
                h.appendChild(a.domElement);
                var u = g(t, h, o.before);
                return d.addClass(u, B.CLASS_CONTROLLER_ROW),
                d.addClass(u, typeof a.getValue()),
                v(t, u, a),
                t.__controllers.push(a),
                a
            }
            function g(t, e, n) {
                var r = document.createElement("li");
                return e && r.appendChild(e),
                n ? t.__ul.insertBefore(r, params.before) : t.__ul.appendChild(r),
                t.onResize(),
                r
            }
            function v(t, e, n) {
                if (n.__li = e,
                n.__gui = t,
                f.extend(n, {
                    options: function(e) {
                        return arguments.length > 1 ? (n.remove(),
                        m(t, n.object, n.property, {
                            before: n.__li.nextElementSibling,
                            factoryArgs: [f.toArray(arguments)]
                        })) : f.isArray(e) || f.isObject(e) ? (n.remove(),
                        m(t, n.object, n.property, {
                            before: n.__li.nextElementSibling,
                            factoryArgs: [e]
                        })) : void 0
                    },
                    name: function(t) {
                        return n.__li.firstElementChild.firstElementChild.innerHTML = t,
                        n
                    },
                    listen: function() {
                        return n.__gui.listen(n),
                        n
                    },
                    remove: function() {
                        return n.__gui.remove(n),
                        n
                    }
                }),
                n instanceof l) {
                    var r = new s(n.object,n.property,{
                        min: n.__min,
                        max: n.__max,
                        step: n.__step
                    });
                    f.each(["updateDisplay", "onChange", "onFinishChange"], function(t) {
                        var e = n[t]
                          , i = r[t];
                        n[t] = r[t] = function() {
                            var t = Array.prototype.slice.call(arguments);
                            return e.apply(n, t),
                            i.apply(r, t)
                        }
                    }),
                    d.addClass(e, "has-slider"),
                    n.domElement.insertBefore(r.domElement, n.domElement.firstElementChild)
                } else if (n instanceof s) {
                    var i = function(e) {
                        return f.isNumber(n.__min) && f.isNumber(n.__max) ? (n.remove(),
                        m(t, n.object, n.property, {
                            before: n.__li.nextElementSibling,
                            factoryArgs: [n.__min, n.__max, n.__step]
                        })) : e
                    };
                    n.min = f.compose(i, n.min),
                    n.max = f.compose(i, n.max)
                } else
                    n instanceof o ? (d.bind(e, "click", function() {
                        d.fakeEvent(n.__checkbox, "click")
                    }),
                    d.bind(n.__checkbox, "click", function(t) {
                        t.stopPropagation()
                    })) : n instanceof a ? (d.bind(e, "click", function() {
                        d.fakeEvent(n.__button, "click")
                    }),
                    d.bind(e, "mouseover", function() {
                        d.addClass(n.__button, "hover")
                    }),
                    d.bind(e, "mouseout", function() {
                        d.removeClass(n.__button, "hover")
                    })) : n instanceof c && (d.addClass(e, "color"),
                    n.updateDisplay = f.compose(function(t) {
                        return e.style.borderLeftColor = n.__color.toString(),
                        t
                    }, n.updateDisplay),
                    n.updateDisplay());
                n.setValue = f.compose(function(e) {
                    return t.getRoot().__preset_select && n.isModified() && C(t.getRoot(), !0),
                    e
                }, n.setValue)
            }
            function y(t, e) {
                var n = t.getRoot()
                  , r = n.__rememberedObjects.indexOf(e.object);
                if (-1 != r) {
                    var i = n.__rememberedObjectIndecesToControllers[r];
                    if (void 0 === i && (i = {},
                    n.__rememberedObjectIndecesToControllers[r] = i),
                    i[e.property] = e,
                    n.load && n.load.remembered) {
                        var o, a = n.load.remembered;
                        if (a[t.preset])
                            o = a[t.preset];
                        else {
                            if (!a[O])
                                return;
                            o = a[O]
                        }
                        if (o[r] && void 0 !== o[r][e.property]) {
                            var s = o[r][e.property];
                            e.initialValue = s,
                            e.setValue(s)
                        }
                    }
                }
            }
            function _(t, e) {
                return document.location.href + "." + e
            }
            function x(t) {
                function e() {
                    h.style.display = t.useLocalStorage ? "block" : "none"
                }
                var n = t.__save_row = document.createElement("li");
                d.addClass(t.domElement, "has-save"),
                t.__ul.insertBefore(n, t.__ul.firstChild),
                d.addClass(n, "save-row");
                var r = document.createElement("span");
                r.innerHTML = "&nbsp;",
                d.addClass(r, "button gears");
                var i = document.createElement("span");
                i.innerHTML = "Save",
                d.addClass(i, "button"),
                d.addClass(i, "save");
                var o = document.createElement("span");
                o.innerHTML = "New",
                d.addClass(o, "button"),
                d.addClass(o, "save-as");
                var a = document.createElement("span");
                a.innerHTML = "Revert",
                d.addClass(a, "button"),
                d.addClass(a, "revert");
                var s = t.__preset_select = document.createElement("select");
                if (t.load && t.load.remembered ? f.each(t.load.remembered, function(e, n) {
                    T(t, n, n == t.preset)
                }) : T(t, O, !1),
                d.bind(s, "change", function() {
                    for (var e = 0; e < t.__preset_select.length; e++)
                        t.__preset_select[e].innerHTML = t.__preset_select[e].value;
                    t.preset = this.value
                }),
                n.appendChild(s),
                n.appendChild(r),
                n.appendChild(i),
                n.appendChild(o),
                n.appendChild(a),
                D) {
                    var l = document.getElementById("dg-save-locally")
                      , h = document.getElementById("dg-local-explain");
                    l.style.display = "block";
                    var c = document.getElementById("dg-local-storage");
                    "true" === localStorage.getItem(_(t, "isLocal")) && c.setAttribute("checked", "checked"),
                    e(),
                    d.bind(c, "change", function() {
                        t.useLocalStorage = !t.useLocalStorage,
                        e()
                    })
                }
                var u = document.getElementById("dg-new-constructor");
                d.bind(u, "keydown", function(t) {
                    !t.metaKey || 67 !== t.which && 67 != t.keyCode || E.hide()
                }),
                d.bind(r, "click", function() {
                    u.innerHTML = JSON.stringify(t.getSaveObject(), void 0, 2),
                    E.show(),
                    u.focus(),
                    u.select()
                }),
                d.bind(i, "click", function() {
                    t.save()
                }),
                d.bind(o, "click", function() {
                    var e = prompt("Enter a new preset name.");
                    e && t.saveAs(e)
                }),
                d.bind(a, "click", function() {
                    t.revert()
                })
            }
            function b(t) {
                function e(e) {
                    return e.preventDefault(),
                    i = e.clientX,
                    d.addClass(t.__closeButton, B.CLASS_DRAG),
                    d.bind(window, "mousemove", n),
                    d.bind(window, "mouseup", r),
                    !1
                }
                function n(e) {
                    return e.preventDefault(),
                    t.width += i - e.clientX,
                    t.onResize(),
                    i = e.clientX,
                    !1
                }
                function r() {
                    d.removeClass(t.__closeButton, B.CLASS_DRAG),
                    d.unbind(window, "mousemove", n),
                    d.unbind(window, "mouseup", r)
                }
                t.__resize_handle = document.createElement("div"),
                f.extend(t.__resize_handle.style, {
                    width: "6px",
                    marginLeft: "-3px",
                    height: "200px",
                    cursor: "ew-resize",
                    position: "absolute"
                });
                var i;
                d.bind(t.__resize_handle, "mousedown", e),
                d.bind(t.__closeButton, "mousedown", e),
                t.domElement.insertBefore(t.__resize_handle, t.domElement.firstElementChild)
            }
            function w(t, e) {
                t.domElement.style.width = e + "px",
                t.__save_row && t.autoPlace && (t.__save_row.style.width = e + "px"),
                t.__closeButton && (t.__closeButton.style.width = e + "px")
            }
            function S(t, e) {
                var n = {};
                return f.each(t.__rememberedObjects, function(r, i) {
                    var o = {}
                      , a = t.__rememberedObjectIndecesToControllers[i];
                    f.each(a, function(t, n) {
                        o[n] = e ? t.initialValue : t.getValue()
                    }),
                    n[i] = o
                }),
                n
            }
            function T(t, e, n) {
                var r = document.createElement("option");
                r.innerHTML = e,
                r.value = e,
                t.__preset_select.appendChild(r),
                n && (t.__preset_select.selectedIndex = t.__preset_select.length - 1)
            }
            function M(t) {
                for (var e = 0; e < t.__preset_select.length; e++)
                    t.__preset_select[e].value == t.preset && (t.__preset_select.selectedIndex = e)
            }
            function C(t, e) {
                var n = t.__preset_select[t.__preset_select.selectedIndex];
                e ? n.innerHTML = n.value + "*" : n.innerHTML = n.value
            }
            function A(t) {
                0 != t.length && u(function() {
                    A(t)
                }),
                f.each(t, function(t) {
                    t.updateDisplay()
                })
            }
            t.inject(n);
            var E, L, P = "dg", k = 72, R = 20, O = "Default", D = function() {
                try {
                    return "localStorage"in window && null !== window.localStorage
                } catch (t) {
                    return !1
                }
            }(), F = !0, U = !1, I = [], B = function(t) {
                function e() {
                    localStorage.setItem(_(r, "gui"), JSON.stringify(r.getSaveObject()))
                }
                function n() {
                    var t = r.getRoot();
                    t.width += 1,
                    f.defer(function() {
                        t.width -= 1
                    })
                }
                var r = this;
                this.domElement = document.createElement("div"),
                this.__ul = document.createElement("ul"),
                this.domElement.appendChild(this.__ul),
                d.addClass(this.domElement, P),
                this.__folders = {},
                this.__controllers = [],
                this.__rememberedObjects = [],
                this.__rememberedObjectIndecesToControllers = [],
                this.__listening = [],
                t = t || {},
                t = f.defaults(t, {
                    autoPlace: !0,
                    width: B.DEFAULT_WIDTH
                }),
                t = f.defaults(t, {
                    resizable: t.autoPlace,
                    hideable: t.autoPlace
                }),
                f.isUndefined(t.load) ? t.load = {
                    preset: O
                } : t.preset && (t.load.preset = t.preset),
                f.isUndefined(t.parent) && t.hideable && I.push(this),
                t.resizable = f.isUndefined(t.parent) && t.resizable,
                t.autoPlace && f.isUndefined(t.scrollable) && (t.scrollable = !0);
                var i = D && "true" === localStorage.getItem(_(this, "isLocal"));
                if (Object.defineProperties(this, {
                    parent: {
                        get: function() {
                            return t.parent
                        }
                    },
                    scrollable: {
                        get: function() {
                            return t.scrollable
                        }
                    },
                    autoPlace: {
                        get: function() {
                            return t.autoPlace
                        }
                    },
                    preset: {
                        get: function() {
                            return r.parent ? r.getRoot().preset : t.load.preset
                        },
                        set: function(e) {
                            r.parent ? r.getRoot().preset = e : t.load.preset = e,
                            M(this),
                            r.revert()
                        }
                    },
                    width: {
                        get: function() {
                            return t.width
                        },
                        set: function(e) {
                            t.width = e,
                            w(r, e)
                        }
                    },
                    name: {
                        get: function() {
                            return t.name
                        },
                        set: function(e) {
                            t.name = e,
                            a && (a.innerHTML = t.name)
                        }
                    },
                    closed: {
                        get: function() {
                            return t.closed
                        },
                        set: function(e) {
                            t.closed = e,
                            t.closed ? d.addClass(r.__ul, B.CLASS_CLOSED) : d.removeClass(r.__ul, B.CLASS_CLOSED),
                            this.onResize(),
                            r.__closeButton && (r.__closeButton.innerHTML = e ? B.TEXT_OPEN : B.TEXT_CLOSED)
                        }
                    },
                    load: {
                        get: function() {
                            return t.load
                        }
                    },
                    useLocalStorage: {
                        get: function() {
                            return i
                        },
                        set: function(t) {
                            D && (i = t,
                            t ? d.bind(window, "unload", e) : d.unbind(window, "unload", e),
                            localStorage.setItem(_(r, "isLocal"), t))
                        }
                    }
                }),
                f.isUndefined(t.parent)) {
                    if (t.closed = !1,
                    d.addClass(this.domElement, B.CLASS_MAIN),
                    d.makeSelectable(this.domElement, !1),
                    D && i) {
                        r.useLocalStorage = !0;
                        var o = localStorage.getItem(_(this, "gui"));
                        o && (t.load = JSON.parse(o))
                    }
                    this.__closeButton = document.createElement("div"),
                    this.__closeButton.innerHTML = B.TEXT_CLOSED,
                    d.addClass(this.__closeButton, B.CLASS_CLOSE_BUTTON),
                    this.domElement.appendChild(this.__closeButton),
                    d.bind(this.__closeButton, "click", function() {
                        r.closed = !r.closed
                    })
                } else {
                    void 0 === t.closed && (t.closed = !0);
                    var a = document.createTextNode(t.name);
                    d.addClass(a, "controller-name");
                    var s = g(r, a)
                      , l = function(t) {
                        return t.preventDefault(),
                        r.closed = !r.closed,
                        !1
                    };
                    d.addClass(this.__ul, B.CLASS_CLOSED),
                    d.addClass(s, "title"),
                    d.bind(s, "click", l),
                    t.closed || (this.closed = !1)
                }
                t.autoPlace && (f.isUndefined(t.parent) && (F && (L = document.createElement("div"),
                d.addClass(L, P),
                d.addClass(L, B.CLASS_AUTO_PLACE_CONTAINER),
                document.body.appendChild(L),
                F = !1),
                L.appendChild(this.domElement),
                d.addClass(this.domElement, B.CLASS_AUTO_PLACE)),
                this.parent || w(r, t.width)),
                d.bind(window, "resize", function() {
                    r.onResize()
                }),
                d.bind(this.__ul, "webkitTransitionEnd", function() {
                    r.onResize()
                }),
                d.bind(this.__ul, "transitionend", function() {
                    r.onResize()
                }),
                d.bind(this.__ul, "oTransitionEnd", function() {
                    r.onResize()
                }),
                this.onResize(),
                t.resizable && b(this);
                r.getRoot();
                t.parent || n()
            };
            return B.toggleHide = function() {
                U = !U,
                f.each(I, function(t) {
                    t.domElement.style.zIndex = U ? -999 : 999,
                    t.domElement.style.opacity = U ? 0 : 1
                })
            }
            ,
            B.CLASS_AUTO_PLACE = "a",
            B.CLASS_AUTO_PLACE_CONTAINER = "ac",
            B.CLASS_MAIN = "main",
            B.CLASS_CONTROLLER_ROW = "cr",
            B.CLASS_TOO_TALL = "taller-than-window",
            B.CLASS_CLOSED = "closed",
            B.CLASS_CLOSE_BUTTON = "close-button",
            B.CLASS_DRAG = "drag",
            B.DEFAULT_WIDTH = 245,
            B.TEXT_CLOSED = "Close Controls",
            B.TEXT_OPEN = "Open Controls",
            d.bind(window, "keydown", function(t) {
                "text" === document.activeElement.type || t.which !== k && t.keyCode != k || B.toggleHide()
            }, !1),
            f.extend(B.prototype, {
                add: function(t, e) {
                    return m(this, t, e, {
                        factoryArgs: Array.prototype.slice.call(arguments, 2)
                    })
                },
                addColor: function(t, e) {
                    return m(this, t, e, {
                        color: !0
                    })
                },
                remove: function(t) {
                    this.__ul.removeChild(t.__li),
                    this.__controllers.slice(this.__controllers.indexOf(t), 1);
                    var e = this;
                    f.defer(function() {
                        e.onResize()
                    })
                },
                destroy: function() {
                    this.autoPlace && L.removeChild(this.domElement)
                },
                addFolder: function(t) {
                    if (void 0 !== this.__folders[t])
                        throw new Error('You already have a folder in this GUI by the name "' + t + '"');
                    var e = {
                        name: t,
                        parent: this
                    };
                    e.autoPlace = this.autoPlace,
                    this.load && this.load.folders && this.load.folders[t] && (e.closed = this.load.folders[t].closed,
                    e.load = this.load.folders[t]);
                    var n = new B(e);
                    this.__folders[t] = n;
                    var r = g(this, n.domElement);
                    return d.addClass(r, "folder"),
                    n
                },
                open: function() {
                    this.closed = !1
                },
                close: function() {
                    this.closed = !0
                },
                onResize: function() {
                    var t = this.getRoot();
                    if (t.scrollable) {
                        var e = d.getOffset(t.__ul).top
                          , n = 0;
                        f.each(t.__ul.childNodes, function(e) {
                            t.autoPlace && e === t.__save_row || (n += d.getHeight(e))
                        }),
                        window.innerHeight - e - R < n ? (d.addClass(t.domElement, B.CLASS_TOO_TALL),
                        t.__ul.style.height = window.innerHeight - e - R + "px") : (d.removeClass(t.domElement, B.CLASS_TOO_TALL),
                        t.__ul.style.height = "auto")
                    }
                    t.__resize_handle && f.defer(function() {
                        t.__resize_handle.style.height = t.__ul.offsetHeight + "px"
                    }),
                    t.__closeButton && (t.__closeButton.style.width = t.width + "px")
                },
                remember: function() {
                    if (f.isUndefined(E) && (E = new p,
                    E.domElement.innerHTML = e),
                    this.parent)
                        throw new Error("You can only call remember on a top level GUI.");
                    var t = this;
                    f.each(Array.prototype.slice.call(arguments), function(e) {
                        0 == t.__rememberedObjects.length && x(t),
                        -1 == t.__rememberedObjects.indexOf(e) && t.__rememberedObjects.push(e)
                    }),
                    this.autoPlace && w(this, this.width)
                },
                getRoot: function() {
                    for (var t = this; t.parent; )
                        t = t.parent;
                    return t
                },
                getSaveObject: function() {
                    var t = this.load;
                    return t.closed = this.closed,
                    this.__rememberedObjects.length > 0 && (t.preset = this.preset,
                    t.remembered || (t.remembered = {}),
                    t.remembered[this.preset] = S(this)),
                    t.folders = {},
                    f.each(this.__folders, function(e, n) {
                        t.folders[n] = e.getSaveObject()
                    }),
                    t
                },
                save: function() {
                    this.load.remembered || (this.load.remembered = {}),
                    this.load.remembered[this.preset] = S(this),
                    C(this, !1)
                },
                saveAs: function(t) {
                    this.load.remembered || (this.load.remembered = {},
                    this.load.remembered[O] = S(this, !0)),
                    this.load.remembered[t] = S(this),
                    this.preset = t,
                    T(this, t, !0)
                },
                revert: function(t) {
                    f.each(this.__controllers, function(e) {
                        this.getRoot().load.remembered ? y(t || this.getRoot(), e) : e.setValue(e.initialValue)
                    }, this),
                    f.each(this.__folders, function(t) {
                        t.revert(t)
                    }),
                    t || C(this.getRoot(), !1)
                },
                listen: function(t) {
                    var e = 0 == this.__listening.length;
                    this.__listening.push(t),
                    e && A(this.__listening)
                }
            }),
            B
        }(r.utils.css, '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>', ".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n", r.controllers.factory = function(t, e, n, r, i, o, a) {
            return function(s, l) {
                var h = s[l];
                return a.isArray(arguments[2]) || a.isObject(arguments[2]) ? new t(s,l,arguments[2]) : a.isNumber(h) ? a.isNumber(arguments[2]) && a.isNumber(arguments[3]) ? new n(s,l,arguments[2],arguments[3]) : new e(s,l,{
                    min: arguments[2],
                    max: arguments[3]
                }) : a.isString(h) ? new r(s,l) : a.isFunction(h) ? new i(s,l,"") : a.isBoolean(h) ? new o(s,l) : void 0
            }
        }(r.controllers.OptionController, r.controllers.NumberControllerBox, r.controllers.NumberControllerSlider, r.controllers.StringController = function(t, e, n) {
            var r = function(t, n) {
                function i() {
                    a.setValue(a.__input.value)
                }
                function o() {
                    a.__onFinishChange && a.__onFinishChange.call(a, a.getValue())
                }
                r.superclass.call(this, t, n);
                var a = this;
                this.__input = document.createElement("input"),
                this.__input.setAttribute("type", "text"),
                e.bind(this.__input, "keyup", i),
                e.bind(this.__input, "change", i),
                e.bind(this.__input, "blur", o),
                e.bind(this.__input, "keydown", function(t) {
                    13 === t.keyCode && this.blur()
                }),
                this.updateDisplay(),
                this.domElement.appendChild(this.__input)
            };
            return r.superclass = t,
            n.extend(r.prototype, t.prototype, {
                updateDisplay: function() {
                    return e.isActive(this.__input) || (this.__input.value = this.getValue()),
                    r.superclass.prototype.updateDisplay.call(this)
                }
            }),
            r
        }(r.controllers.Controller, r.dom.dom, r.utils.common), r.controllers.FunctionController, r.controllers.BooleanController, r.utils.common), r.controllers.Controller, r.controllers.BooleanController, r.controllers.FunctionController, r.controllers.NumberControllerBox, r.controllers.NumberControllerSlider, r.controllers.OptionController, r.controllers.ColorController = function(t, e, n, r, i) {
            function o(t, e, n, r) {
                t.style.background = "",
                i.each(l, function(i) {
                    t.style.cssText += "background: " + i + "linear-gradient(" + e + ", " + n + " 0%, " + r + " 100%); "
                })
            }
            function a(t) {
                t.style.background = "",
                t.style.cssText += "background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",
                t.style.cssText += "background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",
                t.style.cssText += "background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",
                t.style.cssText += "background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",
                t.style.cssText += "background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"
            }
            var s = function(t, l) {
                function h(t) {
                    d(t),
                    e.bind(window, "mousemove", d),
                    e.bind(window, "mouseup", c)
                }
                function c() {
                    e.unbind(window, "mousemove", d),
                    e.unbind(window, "mouseup", c)
                }
                function u() {
                    var t = r(this.value);
                    t !== !1 ? (m.__color.__state = t,
                    m.setValue(m.__color.toOriginal())) : this.value = m.__color.toString()
                }
                function p() {
                    e.unbind(window, "mousemove", f),
                    e.unbind(window, "mouseup", p)
                }
                function d(t) {
                    t.preventDefault();
                    var n = e.getWidth(m.__saturation_field)
                      , r = e.getOffset(m.__saturation_field)
                      , i = (t.clientX - r.left + document.body.scrollLeft) / n
                      , o = 1 - (t.clientY - r.top + document.body.scrollTop) / n;
                    return o > 1 ? o = 1 : 0 > o && (o = 0),
                    i > 1 ? i = 1 : 0 > i && (i = 0),
                    m.__color.v = o,
                    m.__color.s = i,
                    m.setValue(m.__color.toOriginal()),
                    !1
                }
                function f(t) {
                    t.preventDefault();
                    var n = e.getHeight(m.__hue_field)
                      , r = e.getOffset(m.__hue_field)
                      , i = 1 - (t.clientY - r.top + document.body.scrollTop) / n;
                    return i > 1 ? i = 1 : 0 > i && (i = 0),
                    m.__color.h = 360 * i,
                    m.setValue(m.__color.toOriginal()),
                    !1
                }
                s.superclass.call(this, t, l),
                this.__color = new n(this.getValue()),
                this.__temp = new n(0);
                var m = this;
                this.domElement = document.createElement("div"),
                e.makeSelectable(this.domElement, !1),
                this.__selector = document.createElement("div"),
                this.__selector.className = "selector",
                this.__saturation_field = document.createElement("div"),
                this.__saturation_field.className = "saturation-field",
                this.__field_knob = document.createElement("div"),
                this.__field_knob.className = "field-knob",
                this.__field_knob_border = "2px solid ",
                this.__hue_knob = document.createElement("div"),
                this.__hue_knob.className = "hue-knob",
                this.__hue_field = document.createElement("div"),
                this.__hue_field.className = "hue-field",
                this.__input = document.createElement("input"),
                this.__input.type = "text",
                this.__input_textShadow = "0 1px 1px ",
                e.bind(this.__input, "keydown", function(t) {
                    13 === t.keyCode && u.call(this)
                }),
                e.bind(this.__input, "blur", u),
                e.bind(this.__selector, "mousedown", function(t) {
                    e.addClass(this, "drag").bind(window, "mouseup", function(t) {
                        e.removeClass(m.__selector, "drag")
                    })
                });
                var g = document.createElement("div");
                i.extend(this.__selector.style, {
                    width: "122px",
                    height: "102px",
                    padding: "3px",
                    backgroundColor: "#222",
                    boxShadow: "0px 1px 3px rgba(0,0,0,0.3)"
                }),
                i.extend(this.__field_knob.style, {
                    position: "absolute",
                    width: "12px",
                    height: "12px",
                    border: this.__field_knob_border + (this.__color.v < .5 ? "#fff" : "#000"),
                    boxShadow: "0px 1px 3px rgba(0,0,0,0.5)",
                    borderRadius: "12px",
                    zIndex: 1
                }),
                i.extend(this.__hue_knob.style, {
                    position: "absolute",
                    width: "15px",
                    height: "2px",
                    borderRight: "4px solid #fff",
                    zIndex: 1
                }),
                i.extend(this.__saturation_field.style, {
                    width: "100px",
                    height: "100px",
                    border: "1px solid #555",
                    marginRight: "3px",
                    display: "inline-block",
                    cursor: "pointer"
                }),
                i.extend(g.style, {
                    width: "100%",
                    height: "100%",
                    background: "none"
                }),
                o(g, "top", "rgba(0,0,0,0)", "#000"),
                i.extend(this.__hue_field.style, {
                    width: "15px",
                    height: "100px",
                    display: "inline-block",
                    border: "1px solid #555",
                    cursor: "ns-resize"
                }),
                a(this.__hue_field),
                i.extend(this.__input.style, {
                    outline: "none",
                    textAlign: "center",
                    color: "#fff",
                    border: 0,
                    fontWeight: "bold",
                    textShadow: this.__input_textShadow + "rgba(0,0,0,0.7)"
                }),
                e.bind(this.__saturation_field, "mousedown", h),
                e.bind(this.__field_knob, "mousedown", h),
                e.bind(this.__hue_field, "mousedown", function(t) {
                    f(t),
                    e.bind(window, "mousemove", f),
                    e.bind(window, "mouseup", p)
                }),
                this.__saturation_field.appendChild(g),
                this.__selector.appendChild(this.__field_knob),
                this.__selector.appendChild(this.__saturation_field),
                this.__selector.appendChild(this.__hue_field),
                this.__hue_field.appendChild(this.__hue_knob),
                this.domElement.appendChild(this.__input),
                this.domElement.appendChild(this.__selector),
                this.updateDisplay()
            };
            s.superclass = t,
            i.extend(s.prototype, t.prototype, {
                updateDisplay: function() {
                    var t = r(this.getValue());
                    if (t !== !1) {
                        var e = !1;
                        i.each(n.COMPONENTS, function(n) {
                            return i.isUndefined(t[n]) || i.isUndefined(this.__color.__state[n]) || t[n] === this.__color.__state[n] ? void 0 : (e = !0,
                            {})
                        }, this),
                        e && i.extend(this.__color.__state, t)
                    }
                    i.extend(this.__temp.__state, this.__color.__state),
                    this.__temp.a = 1;
                    var a = this.__color.v < .5 || this.__color.s > .5 ? 255 : 0
                      , s = 255 - a;
                    i.extend(this.__field_knob.style, {
                        marginLeft: 100 * this.__color.s - 7 + "px",
                        marginTop: 100 * (1 - this.__color.v) - 7 + "px",
                        backgroundColor: this.__temp.toString(),
                        border: this.__field_knob_border + "rgb(" + a + "," + a + "," + a + ")"
                    }),
                    this.__hue_knob.style.marginTop = 100 * (1 - this.__color.h / 360) + "px",
                    this.__temp.s = 1,
                    this.__temp.v = 1,
                    o(this.__saturation_field, "left", "#fff", this.__temp.toString()),
                    i.extend(this.__input.style, {
                        backgroundColor: this.__input.value = this.__color.toString(),
                        color: "rgb(" + a + "," + a + "," + a + ")",
                        textShadow: this.__input_textShadow + "rgba(" + s + "," + s + "," + s + ",.7)"
                    })
                }
            });
            var l = ["-moz-", "-o-", "-webkit-", "-ms-", ""];
            return s
        }(r.controllers.Controller, r.dom.dom, r.color.Color = function(t, e, n, r) {
            function i(t, e, n) {
                Object.defineProperty(t, e, {
                    get: function() {
                        return "RGB" === this.__state.space ? this.__state[e] : (a(this, e, n),
                        this.__state[e])
                    },
                    set: function(t) {
                        "RGB" !== this.__state.space && (a(this, e, n),
                        this.__state.space = "RGB"),
                        this.__state[e] = t
                    }
                })
            }
            function o(t, e) {
                Object.defineProperty(t, e, {
                    get: function() {
                        return "HSV" === this.__state.space ? this.__state[e] : (s(this),
                        this.__state[e])
                    },
                    set: function(t) {
                        "HSV" !== this.__state.space && (s(this),
                        this.__state.space = "HSV"),
                        this.__state[e] = t
                    }
                })
            }
            function a(t, n, i) {
                if ("HEX" === t.__state.space)
                    t.__state[n] = e.component_from_hex(t.__state.hex, i);
                else {
                    if ("HSV" !== t.__state.space)
                        throw "Corrupted color state";
                    r.extend(t.__state, e.hsv_to_rgb(t.__state.h, t.__state.s, t.__state.v))
                }
            }
            function s(t) {
                var n = e.rgb_to_hsv(t.r, t.g, t.b);
                r.extend(t.__state, {
                    s: n.s,
                    v: n.v
                }),
                r.isNaN(n.h) ? r.isUndefined(t.__state.h) && (t.__state.h = 0) : t.__state.h = n.h
            }
            var l = function() {
                if (this.__state = t.apply(this, arguments),
                this.__state === !1)
                    throw "Failed to interpret color arguments";
                this.__state.a = this.__state.a || 1
            };
            return l.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"],
            r.extend(l.prototype, {
                toString: function() {
                    return n(this)
                },
                toOriginal: function() {
                    return this.__state.conversion.write(this)
                }
            }),
            i(l.prototype, "r", 2),
            i(l.prototype, "g", 1),
            i(l.prototype, "b", 0),
            o(l.prototype, "h"),
            o(l.prototype, "s"),
            o(l.prototype, "v"),
            Object.defineProperty(l.prototype, "a", {
                get: function() {
                    return this.__state.a
                },
                set: function(t) {
                    this.__state.a = t
                }
            }),
            Object.defineProperty(l.prototype, "hex", {
                get: function() {
                    return "HEX" !== !this.__state.space && (this.__state.hex = e.rgb_to_hex(this.r, this.g, this.b)),
                    this.__state.hex
                },
                set: function(t) {
                    this.__state.space = "HEX",
                    this.__state.hex = t
                }
            }),
            l
        }(r.color.interpret, r.color.math = function() {
            var t;
            return {
                hsv_to_rgb: function(t, e, n) {
                    var r = Math.floor(t / 60) % 6
                      , i = t / 60 - Math.floor(t / 60)
                      , o = n * (1 - e)
                      , a = n * (1 - i * e)
                      , s = n * (1 - (1 - i) * e)
                      , l = [[n, s, o], [a, n, o], [o, n, s], [o, a, n], [s, o, n], [n, o, a]][r];
                    return {
                        r: 255 * l[0],
                        g: 255 * l[1],
                        b: 255 * l[2]
                    }
                },
                rgb_to_hsv: function(t, e, n) {
                    var r, i, o = Math.min(t, e, n), a = Math.max(t, e, n), s = a - o;
                    return 0 == a ? {
                        h: NaN,
                        s: 0,
                        v: 0
                    } : (i = s / a,
                    r = t == a ? (e - n) / s : e == a ? 2 + (n - t) / s : 4 + (t - e) / s,
                    r /= 6,
                    0 > r && (r += 1),
                    {
                        h: 360 * r,
                        s: i,
                        v: a / 255
                    })
                },
                rgb_to_hex: function(t, e, n) {
                    var r = this.hex_with_component(0, 2, t);
                    return r = this.hex_with_component(r, 1, e),
                    r = this.hex_with_component(r, 0, n)
                },
                component_from_hex: function(t, e) {
                    return t >> 8 * e & 255
                },
                hex_with_component: function(e, n, r) {
                    return r << (t = 8 * n) | e & ~(255 << t)
                }
            }
        }(), r.color.toString, r.utils.common), r.color.interpret, r.utils.common), r.utils.requestAnimationFrame = function() {
            return window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(t, e) {
                window.setTimeout(t, 1e3 / 60)
            }
        }(), r.dom.CenteredDiv = function(t, e) {
            var n = function() {
                this.backgroundElement = document.createElement("div"),
                e.extend(this.backgroundElement.style, {
                    backgroundColor: "rgba(0,0,0,0.8)",
                    top: 0,
                    left: 0,
                    display: "none",
                    zIndex: "1000",
                    opacity: 0,
                    WebkitTransition: "opacity 0.2s linear"
                }),
                t.makeFullscreen(this.backgroundElement),
                this.backgroundElement.style.position = "fixed",
                this.domElement = document.createElement("div"),
                e.extend(this.domElement.style, {
                    position: "fixed",
                    display: "none",
                    zIndex: "1001",
                    opacity: 0,
                    WebkitTransition: "-webkit-transform 0.2s ease-out, opacity 0.2s linear"
                }),
                document.body.appendChild(this.backgroundElement),
                document.body.appendChild(this.domElement);
                var n = this;
                t.bind(this.backgroundElement, "click", function() {
                    n.hide()
                })
            };
            return n.prototype.show = function() {
                var t = this;
                this.backgroundElement.style.display = "block",
                this.domElement.style.display = "block",
                this.domElement.style.opacity = 0,
                this.domElement.style.webkitTransform = "scale(1.1)",
                this.layout(),
                e.defer(function() {
                    t.backgroundElement.style.opacity = 1,
                    t.domElement.style.opacity = 1,
                    t.domElement.style.webkitTransform = "scale(1)"
                })
            }
            ,
            n.prototype.hide = function() {
                var e = this
                  , n = function() {
                    e.domElement.style.display = "none",
                    e.backgroundElement.style.display = "none",
                    t.unbind(e.domElement, "webkitTransitionEnd", n),
                    t.unbind(e.domElement, "transitionend", n),
                    t.unbind(e.domElement, "oTransitionEnd", n)
                };
                t.bind(this.domElement, "webkitTransitionEnd", n),
                t.bind(this.domElement, "transitionend", n),
                t.bind(this.domElement, "oTransitionEnd", n),
                this.backgroundElement.style.opacity = 0,
                this.domElement.style.opacity = 0,
                this.domElement.style.webkitTransform = "scale(1.1)"
            }
            ,
            n.prototype.layout = function() {
                this.domElement.style.left = window.innerWidth / 2 - t.getWidth(this.domElement) / 2 + "px",
                this.domElement.style.top = window.innerHeight / 2 - t.getHeight(this.domElement) / 2 + "px"
            }
            ,
            n
        }(r.dom.dom, r.utils.common), r.dom.dom, r.utils.common)
    }
    , {}],
    8: [function(t, e, n) {
        !function() {
            var r = function(t) {
                var e = function(e) {
                    function n(t) {
                        return String(t || "").replace(/\W/g, "\\$&")
                    }
                    function r(t) {
                        if (!t)
                            return "";
                        var e = new RegExp("^" + n(d.prependHash) + "|" + n(d.appendHash) + "$","g");
                        return t.replace(e, "")
                    }
                    function i() {
                        var t = w.exec(d.getURL())
                          , e = t && t[1] || "";
                        try {
                            return d.raw ? e : decodeURIComponent(e)
                        } catch (n) {
                            return e
                        }
                    }
                    function o() {
                        return v ? v.contentWindow.frameHash : null
                    }
                    function a() {
                        v = x.createElement("iframe"),
                        v.src = "about:blank",
                        v.style.display = "none",
                        x.body.appendChild(v)
                    }
                    function s() {
                        if (v && f !== o()) {
                            var t = v.contentWindow.document;
                            t.open(),
                            t.write("<html><head><title>" + x.title + '</title><script type="text/javascript">var frameHash="' + f + '";</script></head><body>&nbsp;</body></html>'),
                            t.close()
                        }
                    }
                    function l(t, e) {
                        if (f !== t) {
                            var n = f;
                            f = t,
                            A && (e ? v.contentWindow.frameHash = t : s()),
                            d.changed.dispatch(r(t), r(n))
                        }
                    }
                    function h(t, e, n) {
                        t.addEventListener ? t.addEventListener(e, n, !1) : t.attachEvent && t.attachEvent("on" + e, n)
                    }
                    function c(t, e, n) {
                        t.removeEventListener ? t.removeEventListener(e, n, !1) : t.detachEvent && t.detachEvent("on" + e, n)
                    }
                    function u(t) {
                        t = Array.prototype.slice.call(arguments);
                        var e = t.join(d.separator);
                        return e = e ? d.prependHash + e.replace(T, "") + d.appendHash : e
                    }
                    function p(t) {
                        return t = encodeURI(t),
                        M && E && (t = t.replace(/\?/, "%3F")),
                        t
                    }
                    var d, f, m, g, v, y, _ = 25, x = e.document, b = (e.history,
                    t.Signal), w = /#(.*)$/, S = /(\?.*)|(\#.*)/, T = /^\#/, M = !1, C = "onhashchange"in e && 7 !== x.documentMode, A = M && !C, E = "file:" === location.protocol;
                    return y = A ? function() {
                        var t = i()
                          , e = o();
                        e !== f && e !== t ? d.setHash(r(e)) : t !== f && l(t)
                    }
                    : function() {
                        var t = i();
                        t !== f && l(t)
                    }
                    ,
                    d = {
                        VERSION: "1.2.0",
                        raw: !1,
                        appendHash: "",
                        prependHash: "/",
                        separator: "/",
                        changed: new b,
                        stopped: new b,
                        initialized: new b,
                        init: function() {
                            g || (f = i(),
                            C ? h(e, "hashchange", y) : (A && (v || a(),
                            s()),
                            m = setInterval(y, _)),
                            g = !0,
                            d.initialized.dispatch(r(f)))
                        },
                        stop: function() {
                            g && (C ? c(e, "hashchange", y) : (clearInterval(m),
                            m = null ),
                            g = !1,
                            d.stopped.dispatch(r(f)))
                        },
                        isActive: function() {
                            return g
                        },
                        getURL: function() {
                            return e.location.href
                        },
                        getBaseURL: function() {
                            return d.getURL().replace(S, "")
                        },
                        setHash: function(t) {
                            t = u.apply(null , arguments),
                            t !== f && (l(t),
                            t === f && (d.raw || (t = p(t)),
                            e.location.hash = "#" + t))
                        },
                        replaceHash: function(t) {
                            t = u.apply(null , arguments),
                            t !== f && (l(t, !0),
                            t === f && (d.raw || (t = p(t)),
                            e.location.replace("#" + t)))
                        },
                        getHash: function() {
                            return r(f)
                        },
                        getHashAsArray: function() {
                            return d.getHash().split(d.separator)
                        },
                        dispose: function() {
                            d.stop(),
                            d.initialized.dispose(),
                            d.stopped.dispose(),
                            d.changed.dispose(),
                            v = d = e.hasher = null
                        },
                        toString: function() {
                            return '[hasher version="' + d.VERSION + '" hash="' + d.getHash() + '"]'
                        }
                    },
                    d.initialized.memorize = !0,
                    d
                }(window);
                return e
            };
            "function" == typeof define && define.amd ? define(["signals"], r) : "object" == typeof n ? e.exports = r(t("signals")) : window.hasher = r(window.signals)
        }()
    }
    , {
        signals: 9
    }],
    9: [function(t, e, n) {
        arguments[4][4][0].apply(n, arguments)
    }
    , {
        dup: 4
    }],
    10: [function(t, e, n) {
        (function(t) {
            (function() {
                function r(t, e) {
                    if (t !== e) {
                        var n = t === t
                          , r = e === e;
                        if (t > e || !n || "undefined" == typeof t && r)
                            return 1;
                        if (e > t || !r || "undefined" == typeof e && n)
                            return -1
                    }
                    return 0
                }
                function i(t, e, n) {
                    if (e !== e)
                        return m(t, n);
                    for (var r = (n || 0) - 1, i = t.length; ++r < i; )
                        if (t[r] === e)
                            return r;
                    return -1
                }
                function o(t, e) {
                    var n = t.length;
                    for (t.sort(e); n--; )
                        t[n] = t[n].value;
                    return t
                }
                function a(t) {
                    return "string" == typeof t ? t : null == t ? "" : t + ""
                }
                function s(t) {
                    return t.charCodeAt(0)
                }
                function l(t, e) {
                    for (var n = -1, r = t.length; ++n < r && e.indexOf(t.charAt(n)) > -1; )
                        ;
                    return n
                }
                function h(t, e) {
                    for (var n = t.length; n-- && e.indexOf(t.charAt(n)) > -1; )
                        ;
                    return n
                }
                function c(t, e) {
                    return r(t.criteria, e.criteria) || t.index - e.index
                }
                function u(t, e) {
                    for (var n = -1, i = t.criteria, o = e.criteria, a = i.length; ++n < a; ) {
                        var s = r(i[n], o[n]);
                        if (s)
                            return s
                    }
                    return t.index - e.index
                }
                function p(t) {
                    return Vt[t]
                }
                function d(t) {
                    return Gt[t]
                }
                function f(t) {
                    return "\\" + Wt[t]
                }
                function m(t, e, n) {
                    for (var r = t.length, i = n ? e || r : (e || 0) - 1; n ? i-- : ++i < r; ) {
                        var o = t[i];
                        if (o !== o)
                            return i
                    }
                    return -1
                }
                function g(t) {
                    return t && "object" == typeof t || !1
                }
                function v(t) {
                    return 160 >= t && t >= 9 && 13 >= t || 32 == t || 160 == t || 5760 == t || 6158 == t || t >= 8192 && (8202 >= t || 8232 == t || 8233 == t || 8239 == t || 8287 == t || 12288 == t || 65279 == t)
                }
                function y(t, e) {
                    for (var n = -1, r = t.length, i = -1, o = []; ++n < r; )
                        t[n] === e && (t[n] = z,
                        o[++i] = n);
                    return o
                }
                function _(t, e) {
                    for (var n, r = -1, i = t.length, o = -1, a = []; ++r < i; ) {
                        var s = t[r]
                          , l = e ? e(s, r, t) : s;
                        r && n === l || (n = l,
                        a[++o] = s)
                    }
                    return a
                }
                function x(t) {
                    for (var e = -1, n = t.length; ++e < n && v(t.charCodeAt(e)); )
                        ;
                    return e
                }
                function b(t) {
                    for (var e = t.length; e-- && v(t.charCodeAt(e)); )
                        ;
                    return e
                }
                function w(t) {
                    return zt[t]
                }
                function S(t) {
                    function e(t) {
                        if (g(t) && !Ga(t)) {
                            if (t instanceof n)
                                return t;
                            if (qo.call(t, "__wrapped__"))
                                return new n(t.__wrapped__,t.__chain__,Qt(t.__actions__))
                        }
                        return new n(t)
                    }
                    function n(t, e, n) {
                        this.__actions__ = n || [],
                        this.__chain__ = !!e,
                        this.__wrapped__ = t
                    }
                    function v(t) {
                        this.actions = null ,
                        this.dir = 1,
                        this.dropCount = 0,
                        this.filtered = !1,
                        this.iteratees = null ,
                        this.takeCount = wa,
                        this.views = null ,
                        this.wrapped = t
                    }
                    function Q() {
                        var t = this.actions
                          , e = this.iteratees
                          , n = this.views
                          , r = new v(this.wrapped);
                        return r.actions = t ? Qt(t) : null ,
                        r.dir = this.dir,
                        r.dropCount = this.dropCount,
                        r.filtered = this.filtered,
                        r.iteratees = e ? Qt(e) : null ,
                        r.takeCount = this.takeCount,
                        r.views = n ? Qt(n) : null ,
                        r
                    }
                    function tt() {
                        var t = this.filtered
                          , e = t ? new v(this) : this.clone();
                        return e.dir = -1 * this.dir,
                        e.filtered = t,
                        e
                    }
                    function nt() {
                        var t = this.wrapped.value();
                        if (!Ga(t))
                            return qe(t, this.actions);
                        var e = this.dir
                          , n = 0 > e
                          , r = t.length
                          , i = gn(0, r, this.views)
                          , o = i.start
                          , a = i.end
                          , s = this.dropCount
                          , l = ga(a - o, this.takeCount - s)
                          , h = n ? a : o - 1
                          , c = this.iteratees
                          , u = c ? c.length : 0
                          , p = 0
                          , d = [];
                        t: for (; r-- && l > p; ) {
                            h += e;
                            for (var f = -1, m = t[h]; ++f < u; ) {
                                var g = c[f]
                                  , v = g.iteratee
                                  , y = v(m, h, t)
                                  , _ = g.type;
                                if (_ == j)
                                    m = y;
                                else if (!y) {
                                    if (_ == N)
                                        continue t;
                                    break t
                                }
                            }
                            s ? s-- : d[p++] = m
                        }
                        return n ? d.reverse() : d
                    }
                    function Vt() {
                        this.__data__ = {}
                    }
                    function Gt(t) {
                        return this.has(t) && delete this.__data__[t]
                    }
                    function zt(t) {
                        return "__proto__" == t ? T : this.__data__[t]
                    }
                    function Ht(t) {
                        return "__proto__" != t && qo.call(this.__data__, t)
                    }
                    function Wt(t, e) {
                        return "__proto__" != t && (this.__data__[t] = e),
                        this
                    }
                    function Xt(t) {
                        var e = t ? t.length : 0;
                        for (this.data = {
                            hash: pa(null ),
                            set: new oa
                        }; e--; )
                            this.push(t[e])
                    }
                    function Yt(t, e) {
                        var n = t.data
                          , r = "string" == typeof e || xi(e) ? n.set.has(e) : n.hash[e];
                        return r ? 0 : -1
                    }
                    function Kt(t) {
                        var e = this.data;
                        "string" == typeof t || xi(t) ? e.set.add(t) : e.hash[t] = !0
                    }
                    function Qt(t, e) {
                        var n = -1
                          , r = t.length;
                        for (e || (e = ko(r)); ++n < r; )
                            e[n] = t[n];
                        return e
                    }
                    function Jt(t, e) {
                        for (var n = -1, r = t.length; ++n < r && e(t[n], n, t) !== !1; )
                            ;
                        return t
                    }
                    function $t(t, e) {
                        for (var n = t.length; n-- && e(t[n], n, t) !== !1; )
                            ;
                        return t
                    }
                    function te(t, e) {
                        for (var n = -1, r = t.length; ++n < r; )
                            if (!e(t[n], n, t))
                                return !1;
                        return !0
                    }
                    function ee(t, e) {
                        for (var n = -1, r = t.length, i = -1, o = []; ++n < r; ) {
                            var a = t[n];
                            e(a, n, t) && (o[++i] = a)
                        }
                        return o
                    }
                    function ne(t, e) {
                        for (var n = -1, r = t.length, i = ko(r); ++n < r; )
                            i[n] = e(t[n], n, t);
                        return i
                    }
                    function re(t) {
                        for (var e = -1, n = t.length, r = ba; ++e < n; ) {
                            var i = t[e];
                            i > r && (r = i)
                        }
                        return r
                    }
                    function ie(t) {
                        for (var e = -1, n = t.length, r = wa; ++e < n; ) {
                            var i = t[e];
                            r > i && (r = i)
                        }
                        return r
                    }
                    function oe(t, e, n, r) {
                        var i = -1
                          , o = t.length;
                        for (r && o && (n = t[++i]); ++i < o; )
                            n = e(n, t[i], i, t);
                        return n
                    }
                    function ae(t, e, n, r) {
                        var i = t.length;
                        for (r && i && (n = t[--i]); i--; )
                            n = e(n, t[i], i, t);
                        return n
                    }
                    function se(t, e) {
                        for (var n = -1, r = t.length; ++n < r; )
                            if (e(t[n], n, t))
                                return !0;
                        return !1
                    }
                    function le(t, e) {
                        return "undefined" == typeof t ? e : t
                    }
                    function he(t, e, n, r) {
                        return "undefined" != typeof t && qo.call(r, n) ? t : e
                    }
                    function ce(t, e, n) {
                        var r = qa(e);
                        if (!n)
                            return pe(e, t, r);
                        for (var i = -1, o = r.length; ++i < o; ) {
                            var a = r[i]
                              , s = t[a]
                              , l = n(s, e[a], a, t, e);
                            (l === l ? l === s : s !== s) && ("undefined" != typeof s || a in t) || (t[a] = l)
                        }
                        return t
                    }
                    function ue(t, e) {
                        for (var n = -1, r = t.length, i = Sn(r), o = e.length, a = ko(o); ++n < o; ) {
                            var s = e[n];
                            i ? (s = parseFloat(s),
                            a[n] = bn(s, r) ? t[s] : T) : a[n] = t[s]
                        }
                        return a
                    }
                    function pe(t, e, n) {
                        n || (n = e,
                        e = {});
                        for (var r = -1, i = n.length; ++r < i; ) {
                            var o = n[r];
                            e[o] = t[o]
                        }
                        return e
                    }
                    function de(t, e) {
                        for (var n = -1, r = e.length; ++n < r; ) {
                            var i = e[n];
                            t[i] = hn(t[i], C, t)
                        }
                        return t
                    }
                    function fe(t, e, n) {
                        var r = typeof t;
                        return "function" == r ? "undefined" != typeof e && xn(t) ? Ke(t, e, n) : t : null == t ? bo : "object" == r ? Fe(t, !n) : Be(n ? a(t) : t)
                    }
                    function me(t, e, n, r, i, o, a) {
                        var s;
                        if (n && (s = i ? n(t, r, i) : n(t)),
                        "undefined" != typeof s)
                            return s;
                        if (!xi(t))
                            return t;
                        var l = Ga(t);
                        if (l) {
                            if (s = vn(t),
                            !e)
                                return Qt(t, s)
                        } else {
                            var h = Yo.call(t)
                              , c = h == K;
                            if (h != J && h != H && (!c || i))
                                return Nt[h] ? _n(t, h, e) : i ? t : {};
                            if (s = yn(c ? {} : t),
                            !e)
                                return pe(t, s, qa(t))
                        }
                        o || (o = []),
                        a || (a = []);
                        for (var u = o.length; u--; )
                            if (o[u] == t)
                                return a[u];
                        return o.push(t),
                        a.push(s),
                        (l ? Jt : Ae)(t, function(r, i) {
                            s[i] = me(r, e, n, i, t, o, a)
                        }),
                        s
                    }
                    function ge(t, e, n, r) {
                        if (!_i(t))
                            throw new jo(G);
                        return aa(function() {
                            t.apply(T, Ge(n, r))
                        }, e)
                    }
                    function ve(t, e) {
                        var n = t ? t.length : 0
                          , r = [];
                        if (!n)
                            return r;
                        var o = -1
                          , a = mn()
                          , s = a == i
                          , l = s && e.length >= 200 && Ra(e)
                          , h = e.length;
                        l && (a = Yt,
                        s = !1,
                        e = l);
                        t: for (; ++o < n; ) {
                            var c = t[o];
                            if (s && c === c) {
                                for (var u = h; u--; )
                                    if (e[u] === c)
                                        continue t;
                                r.push(c)
                            } else
                                a(e, c) < 0 && r.push(c)
                        }
                        return r
                    }
                    function ye(t, e) {
                        var n = t ? t.length : 0;
                        if (!Sn(n))
                            return Ae(t, e);
                        for (var r = -1, i = Rn(t); ++r < n && e(i[r], r, i) !== !1; )
                            ;
                        return t
                    }
                    function _e(t, e) {
                        var n = t ? t.length : 0;
                        if (!Sn(n))
                            return Ee(t, e);
                        for (var r = Rn(t); n-- && e(r[n], n, r) !== !1; )
                            ;
                        return t
                    }
                    function xe(t, e) {
                        var n = !0;
                        return ye(t, function(t, r, i) {
                            return n = !!e(t, r, i)
                        }),
                        n
                    }
                    function be(t, e) {
                        var n = [];
                        return ye(t, function(t, r, i) {
                            e(t, r, i) && n.push(t)
                        }),
                        n
                    }
                    function we(t, e, n, r) {
                        var i;
                        return n(t, function(t, n, o) {
                            return e(t, n, o) ? (i = r ? n : t,
                            !1) : void 0
                        }),
                        i
                    }
                    function Se(t, e, n, r) {
                        for (var i = (r || 0) - 1, o = t.length, a = -1, s = []; ++i < o; ) {
                            var l = t[i];
                            if (g(l) && Sn(l.length) && (Ga(l) || pi(l))) {
                                e && (l = Se(l, e, n));
                                var h = -1
                                  , c = l.length;
                                for (s.length += c; ++h < c; )
                                    s[++a] = l[h]
                            } else
                                n || (s[++a] = l)
                        }
                        return s
                    }
                    function Te(t, e, n) {
                        for (var r = -1, i = Rn(t), o = n(t), a = o.length; ++r < a; ) {
                            var s = o[r];
                            if (e(i[s], s, i) === !1)
                                break
                        }
                        return t
                    }
                    function Me(t, e, n) {
                        for (var r = Rn(t), i = n(t), o = i.length; o--; ) {
                            var a = i[o];
                            if (e(r[a], a, r) === !1)
                                break
                        }
                        return t
                    }
                    function Ce(t, e) {
                        return Te(t, e, zi)
                    }
                    function Ae(t, e) {
                        return Te(t, e, qa)
                    }
                    function Ee(t, e) {
                        return Me(t, e, qa)
                    }
                    function Le(t, e) {
                        for (var n = -1, r = e.length, i = -1, o = []; ++n < r; ) {
                            var a = e[n];
                            _i(t[a]) && (o[++i] = a)
                        }
                        return o
                    }
                    function Pe(t, e, n) {
                        var r = -1
                          , i = "function" == typeof e
                          , o = t ? t.length : 0
                          , a = Sn(o) ? ko(o) : [];
                        return ye(t, function(t) {
                            var o = i ? e : null != t && t[e];
                            a[++r] = o ? o.apply(t, n) : T
                        }),
                        a
                    }
                    function ke(t, e, n, r, i, o) {
                        if (t === e)
                            return 0 !== t || 1 / t == 1 / e;
                        var a = typeof t
                          , s = typeof e;
                        return "function" != a && "object" != a && "function" != s && "object" != s || null == t || null == e ? t !== t && e !== e : Re(t, e, ke, n, r, i, o)
                    }
                    function Re(t, e, n, r, i, o, a) {
                        var s = Ga(t)
                          , l = Ga(e)
                          , h = W
                          , c = W;
                        s || (h = Yo.call(t),
                        h == H ? h = J : h != J && (s = Ei(t))),
                        l || (c = Yo.call(e),
                        c == H ? c = J : c != J && (l = Ei(e)));
                        var u = h == J
                          , p = c == J
                          , d = h == c;
                        if (d && !s && !u)
                            return un(t, e, h);
                        var f = u && qo.call(t, "__wrapped__")
                          , m = p && qo.call(e, "__wrapped__");
                        if (f || m)
                            return n(f ? t.value() : t, m ? e.value() : e, r, i, o, a);
                        if (!d)
                            return !1;
                        o || (o = []),
                        a || (a = []);
                        for (var g = o.length; g--; )
                            if (o[g] == t)
                                return a[g] == e;
                        o.push(t),
                        a.push(e);
                        var v = (s ? cn : pn)(t, e, n, r, i, o, a);
                        return o.pop(),
                        a.pop(),
                        v
                    }
                    function Oe(t, e, n, r, i) {
                        var o = e.length;
                        if (null == t)
                            return !o;
                        for (var a = -1, s = !i; ++a < o; )
                            if (s && r[a] ? n[a] !== t[e[a]] : !qo.call(t, e[a]))
                                return !1;
                        for (a = -1; ++a < o; ) {
                            var l = e[a];
                            if (s && r[a])
                                var h = qo.call(t, l);
                            else {
                                var c = t[l]
                                  , u = n[a];
                                h = i ? i(c, u, l) : T,
                                "undefined" == typeof h && (h = ke(u, c, i, !0))
                            }
                            if (!h)
                                return !1
                        }
                        return !0
                    }
                    function De(t, e) {
                        var n = [];
                        return ye(t, function(t, r, i) {
                            n.push(e(t, r, i))
                        }),
                        n
                    }
                    function Fe(t, e) {
                        var n = qa(t)
                          , r = n.length;
                        if (1 == r) {
                            var i = n[0]
                              , o = t[i];
                            if (Tn(o))
                                return function(t) {
                                    return null != t && o === t[i] && qo.call(t, i)
                                }
                        }
                        e && (t = me(t, !0));
                        for (var a = ko(r), s = ko(r); r--; )
                            o = t[n[r]],
                            a[r] = o,
                            s[r] = Tn(o);
                        return function(t) {
                            return Oe(t, n, a, s)
                        }
                    }
                    function Ue(t, e, n, r, i) {
                        var o = Sn(e.length) && (Ga(e) || Ei(e));
                        return (o ? Jt : Ae)(e, function(e, a, s) {
                            if (g(e))
                                return r || (r = []),
                                i || (i = []),
                                Ie(t, s, a, Ue, n, r, i);
                            var l = t[a]
                              , h = n ? n(l, e, a, t, s) : T
                              , c = "undefined" == typeof h;
                            c && (h = e),
                            !o && "undefined" == typeof h || !c && (h === h ? h === l : l !== l) || (t[a] = h)
                        }),
                        t
                    }
                    function Ie(t, e, n, r, i, o, a) {
                        for (var s = o.length, l = e[n]; s--; )
                            if (o[s] == l)
                                return void (t[n] = a[s]);
                        var h = t[n]
                          , c = i ? i(h, l, n, t, e) : T
                          , u = "undefined" == typeof c;
                        u && (c = l,
                        Sn(l.length) && (Ga(l) || Ei(l)) ? c = Ga(h) ? h : h ? Qt(h) : [] : (Ha(l) || pi(l)) && (c = pi(h) ? ki(h) : Ha(h) ? h : {})),
                        o.push(l),
                        a.push(c),
                        u ? t[n] = r(c, l, i, o, a) : (c === c ? c !== h : h === h) && (t[n] = c)
                    }
                    function Be(t) {
                        return function(e) {
                            return null == e ? T : e[t]
                        }
                    }
                    function Ne(t, e) {
                        var n = e.length
                          , i = ue(t, e);
                        for (e.sort(r); n--; ) {
                            var o = parseFloat(e[n]);
                            if (o != a && bn(o)) {
                                var a = o;
                                sa.call(t, o, 1)
                            }
                        }
                        return i
                    }
                    function je(t, e) {
                        return t + ea(xa() * (e - t + 1))
                    }
                    function Ve(t, e, n, r, i) {
                        return i(t, function(t, i, o) {
                            n = r ? (r = !1,
                            t) : e(n, t, i, o)
                        }),
                        n
                    }
                    function Ge(t, e, n) {
                        var r = -1
                          , i = t.length;
                        e = null == e ? 0 : +e || 0,
                        0 > e && (e = -e > i ? 0 : i + e),
                        n = "undefined" == typeof n || n > i ? i : +n || 0,
                        0 > n && (n += i),
                        i = e > n ? 0 : n - e;
                        for (var o = ko(i); ++r < i; )
                            o[r] = t[r + e];
                        return o
                    }
                    function ze(t, e) {
                        var n;
                        return ye(t, function(t, r, i) {
                            return n = e(t, r, i),
                            !n
                        }),
                        !!n
                    }
                    function He(t, e) {
                        var n = -1
                          , r = mn()
                          , o = t.length
                          , a = r == i
                          , s = a && o >= 200
                          , l = s && Ra()
                          , h = [];
                        l ? (r = Yt,
                        a = !1) : (s = !1,
                        l = e ? [] : h);
                        t: for (; ++n < o; ) {
                            var c = t[n]
                              , u = e ? e(c, n, t) : c;
                            if (a && c === c) {
                                for (var p = l.length; p--; )
                                    if (l[p] === u)
                                        continue t;
                                e && l.push(u),
                                h.push(c)
                            } else
                                r(l, u) < 0 && ((e || s) && l.push(u),
                                h.push(c))
                        }
                        return h
                    }
                    function We(t, e) {
                        for (var n = -1, r = e.length, i = ko(r); ++n < r; )
                            i[n] = t[e[n]];
                        return i
                    }
                    function qe(t, e) {
                        var n = t;
                        n instanceof v && (n = n.value());
                        for (var r = -1, i = e.length; ++r < i; ) {
                            var o = [n]
                              , a = e[r];
                            ra.apply(o, a.args),
                            n = a.func.apply(a.thisArg, o)
                        }
                        return n
                    }
                    function Xe(t, e, n) {
                        var r = 0
                          , i = t ? t.length : r;
                        if ("number" == typeof e && e === e && Ma >= i) {
                            for (; i > r; ) {
                                var o = r + i >>> 1
                                  , a = t[o];
                                (n ? e >= a : e > a) ? r = o + 1 : i = o
                            }
                            return i
                        }
                        return Ye(t, e, bo, n)
                    }
                    function Ye(t, e, n, r) {
                        e = n(e);
                        for (var i = 0, o = t ? t.length : 0, a = e !== e, s = "undefined" == typeof e; o > i; ) {
                            var l = ea((i + o) / 2)
                              , h = n(t[l])
                              , c = h === h;
                            if (a)
                                var u = c || r;
                            else
                                u = s ? c && (r || "undefined" != typeof h) : r ? e >= h : e > h;
                            u ? i = l + 1 : o = l
                        }
                        return ga(o, Ta)
                    }
                    function Ke(t, e, n) {
                        if ("function" != typeof t)
                            return bo;
                        if ("undefined" == typeof e)
                            return t;
                        switch (n) {
                        case 1:
                            return function(n) {
                                return t.call(e, n)
                            }
                            ;
                        case 3:
                            return function(n, r, i) {
                                return t.call(e, n, r, i)
                            }
                            ;
                        case 4:
                            return function(n, r, i, o) {
                                return t.call(e, n, r, i, o)
                            }
                            ;
                        case 5:
                            return function(n, r, i, o, a) {
                                return t.call(e, n, r, i, o, a)
                            }
                        }
                        return function() {
                            return t.apply(e, arguments)
                        }
                    }
                    function Qe(t) {
                        return Jo.call(t, 0)
                    }
                    function Ze(t, e, n) {
                        for (var r = n.length, i = -1, o = ma(t.length - r, 0), a = -1, s = e.length, l = ko(o + s); ++a < s; )
                            l[a] = e[a];
                        for (; ++i < r; )
                            l[n[i]] = t[i];
                        for (; o--; )
                            l[a++] = t[i++];
                        return l
                    }
                    function Je(t, e, n) {
                        for (var r = -1, i = n.length, o = -1, a = ma(t.length - i, 0), s = -1, l = e.length, h = ko(a + l); ++o < a; )
                            h[o] = t[o];
                        for (var c = o; ++s < l; )
                            h[c + s] = e[s];
                        for (; ++r < i; )
                            h[c + n[r]] = t[o++];
                        return h
                    }
                    function $e(t, e) {
                        return function(n, r, i) {
                            var o = e ? e() : {};
                            if (r = fn(r, i, 3),
                            Ga(n))
                                for (var a = -1, s = n.length; ++a < s; ) {
                                    var l = n[a];
                                    t(o, l, r(l, a, n), n)
                                }
                            else
                                ye(n, function(e, n, i) {
                                    t(o, e, r(e, n, i), i)
                                });
                            return o
                        }
                    }
                    function tn(t) {
                        return function() {
                            var e = arguments.length
                              , n = arguments[0];
                            if (2 > e || null == n)
                                return n;
                            if (e > 3 && wn(arguments[1], arguments[2], arguments[3]) && (e = 2),
                            e > 3 && "function" == typeof arguments[e - 2])
                                var r = Ke(arguments[--e - 1], arguments[e--], 5);
                            else
                                e > 2 && "function" == typeof arguments[e - 1] && (r = arguments[--e]);
                            for (var i = 0; ++i < e; ) {
                                var o = arguments[i];
                                o && t(n, o, r)
                            }
                            return n
                        }
                    }
                    function en(t, e) {
                        function n() {
                            return (this instanceof n ? r : t).apply(e, arguments)
                        }
                        var r = rn(t);
                        return n
                    }
                    function nn(t) {
                        return function(e) {
                            for (var n = -1, r = vo(to(e)), i = r.length, o = ""; ++n < i; )
                                o = t(o, r[n], n);
                            return o
                        }
                    }
                    function rn(t) {
                        return function() {
                            var e = Pa(t.prototype)
                              , n = t.apply(e, arguments);
                            return xi(n) ? n : e
                        }
                    }
                    function on(t, e) {
                        return function(n, r, i) {
                            i && wn(n, r, i) && (r = null );
                            var o = fn()
                              , a = null == r;
                            if (o === fe && a || (a = !1,
                            r = o(r, i, 3)),
                            a) {
                                var l = Ga(n);
                                if (l || !Ai(n))
                                    return t(l ? n : kn(n));
                                r = s
                            }
                            return dn(n, r, e)
                        }
                    }
                    function an(t, e, n, r, i, o, a, s, l, h) {
                        function c() {
                            for (var x = arguments.length, b = x, w = ko(x); b--; )
                                w[b] = arguments[b];
                            if (r && (w = Ze(w, r, i)),
                            o && (w = Je(w, o, a)),
                            f || g) {
                                var S = c.placeholder
                                  , T = y(w, S);
                                if (x -= T.length,
                                h > x) {
                                    var M = s ? Qt(s) : null
                                      , E = ma(h - x, 0)
                                      , L = f ? T : null
                                      , P = f ? null : T
                                      , O = f ? w : null
                                      , D = f ? null : w;
                                    e |= f ? k : R,
                                    e &= ~(f ? R : k),
                                    m || (e &= ~(C | A));
                                    var F = an(t, e, n, O, L, D, P, M, l, E);
                                    return F.placeholder = S,
                                    F
                                }
                            }
                            var U = p ? n : this;
                            return d && (t = U[_]),
                            s && (w = En(w, s)),
                            u && l < w.length && (w.length = l),
                            (this instanceof c ? v || rn(t) : t).apply(U, w)
                        }
                        var u = e & D
                          , p = e & C
                          , d = e & A
                          , f = e & L
                          , m = e & E
                          , g = e & P
                          , v = !d && rn(t)
                          , _ = t;
                        return c
                    }
                    function sn(t, e, n) {
                        var r = t.length;
                        if (e = +e,
                        r >= e || !da(e))
                            return "";
                        var i = e - r;
                        return n = null == n ? " " : a(n),
                        lo(n, $o(i / n.length)).slice(0, i)
                    }
                    function ln(t, e, n, r) {
                        function i() {
                            for (var e = -1, s = arguments.length, l = -1, h = r.length, c = ko(s + h); ++l < h; )
                                c[l] = r[l];
                            for (; s--; )
                                c[l++] = arguments[++e];
                            return (this instanceof i ? a : t).apply(o ? n : this, c)
                        }
                        var o = e & C
                          , a = rn(t);
                        return i
                    }
                    function hn(t, e, n, r, i, o, a, s) {
                        var l = e & A;
                        if (!l && !_i(t))
                            throw new jo(G);
                        var h = r ? r.length : 0;
                        if (h || (e &= ~(k | R),
                        r = i = null ),
                        h -= i ? i.length : 0,
                        e & R) {
                            var c = r
                              , u = i;
                            r = i = null
                        }
                        var p = !l && Oa(t)
                          , d = [t, e, n, r, i, c, u, o, a, s];
                        if (p && p !== !0 && (Mn(d, p),
                        e = d[1],
                        s = d[9]),
                        d[9] = null == s ? l ? 0 : t.length : ma(s - h, 0) || 0,
                        e == C)
                            var f = en(d[0], d[2]);
                        else
                            f = e != k && e != (C | k) || d[4].length ? an.apply(null , d) : ln.apply(null , d);
                        var m = p ? ka : Da;
                        return m(f, d)
                    }
                    function cn(t, e, n, r, i, o, a) {
                        var s = -1
                          , l = t.length
                          , h = e.length
                          , c = !0;
                        if (l != h && !(i && h > l))
                            return !1;
                        for (; c && ++s < l; ) {
                            var u = t[s]
                              , p = e[s];
                            if (c = T,
                            r && (c = i ? r(p, u, s) : r(u, p, s)),
                            "undefined" == typeof c)
                                if (i)
                                    for (var d = h; d-- && (p = e[d],
                                    !(c = u && u === p || n(u, p, r, i, o, a))); )
                                        ;
                                else
                                    c = u && u === p || n(u, p, r, i, o, a)
                        }
                        return !!c
                    }
                    function un(t, e, n) {
                        switch (n) {
                        case q:
                        case X:
                            return +t == +e;
                        case Y:
                            return t.name == e.name && t.message == e.message;
                        case Z:
                            return t != +t ? e != +e : 0 == t ? 1 / t == 1 / e : t == +e;
                        case $:
                        case et:
                            return t == a(e)
                        }
                        return !1
                    }
                    function pn(t, e, n, r, i, o, a) {
                        var s = qa(t)
                          , l = s.length
                          , h = qa(e)
                          , c = h.length;
                        if (l != c && !i)
                            return !1;
                        for (var u, p = -1; ++p < l; ) {
                            var d = s[p]
                              , f = qo.call(e, d);
                            if (f) {
                                var m = t[d]
                                  , g = e[d];
                                f = T,
                                r && (f = i ? r(g, m, d) : r(m, g, d)),
                                "undefined" == typeof f && (f = m && m === g || n(m, g, r, i, o, a))
                            }
                            if (!f)
                                return !1;
                            u || (u = "constructor" == d)
                        }
                        if (!u) {
                            var v = t.constructor
                              , y = e.constructor;
                            if (v != y && "constructor"in t && "constructor"in e && !("function" == typeof v && v instanceof v && "function" == typeof y && y instanceof y))
                                return !1
                        }
                        return !0
                    }
                    function dn(t, e, n) {
                        var r = n ? wa : ba
                          , i = r
                          , o = i;
                        return ye(t, function(t, a, s) {
                            var l = e(t, a, s);
                            ((n ? i > l : l > i) || l === r && l === o) && (i = l,
                            o = t)
                        }),
                        o
                    }
                    function fn(t, n, r) {
                        var i = e.callback || _o;
                        return i = i === _o ? fe : i,
                        r ? i(t, n, r) : i
                    }
                    function mn(t, n, r) {
                        var o = e.indexOf || Wn;
                        return o = o === Wn ? i : o,
                        t ? o(t, n, r) : o
                    }
                    function gn(t, e, n) {
                        for (var r = -1, i = n ? n.length : 0; ++r < i; ) {
                            var o = n[r]
                              , a = o.size;
                            switch (o.type) {
                            case "drop":
                                t += a;
                                break;
                            case "dropRight":
                                e -= a;
                                break;
                            case "take":
                                e = ga(e, t + a);
                                break;
                            case "takeRight":
                                t = ma(t, e - a)
                            }
                        }
                        return {
                            start: t,
                            end: e
                        }
                    }
                    function vn(t) {
                        var e = t.length
                          , n = new t.constructor(e);
                        return e && "string" == typeof t[0] && qo.call(t, "index") && (n.index = t.index,
                        n.input = t.input),
                        n
                    }
                    function yn(t) {
                        var e = t.constructor;
                        return "function" == typeof e && e instanceof e || (e = Io),
                        new e
                    }
                    function _n(t, e, n) {
                        var r = t.constructor;
                        switch (e) {
                        case rt:
                            return Qe(t);
                        case q:
                        case X:
                            return new r(+t);
                        case it:
                        case ot:
                        case at:
                        case st:
                        case lt:
                        case ht:
                        case ct:
                        case ut:
                        case pt:
                            var i = t.buffer;
                            return new r(n ? Qe(i) : i,t.byteOffset,t.length);
                        case Z:
                        case et:
                            return new r(t);
                        case $:
                            var o = new r(t.source,Tt.exec(t));
                            o.lastIndex = t.lastIndex
                        }
                        return o
                    }
                    function xn(t) {
                        var n = e.support
                          , r = !(n.funcNames ? t.name : n.funcDecomp);
                        if (!r) {
                            var i = Ho.call(t);
                            n.funcNames || (r = !Mt.test(i)),
                            r || (r = Rt.test(i) || Si(t),
                            ka(t, r))
                        }
                        return r
                    }
                    function bn(t, e) {
                        return t = +t,
                        e = null == e ? Aa : e,
                        t > -1 && t % 1 == 0 && e > t
                    }
                    function wn(t, e, n) {
                        if (!xi(n))
                            return !1;
                        var r = typeof e;
                        if ("number" == r)
                            var i = n.length
                              , o = Sn(i) && bn(e, i);
                        else
                            o = "string" == r && e in t;
                        return o && n[e] === t
                    }
                    function Sn(t) {
                        return "number" == typeof t && t > -1 && t % 1 == 0 && Aa >= t
                    }
                    function Tn(t) {
                        return t === t && (0 === t ? 1 / t > 0 : !xi(t))
                    }
                    function Mn(t, e) {
                        var n = t[1]
                          , r = e[1]
                          , i = n | r
                          , o = D | O
                          , a = C | A
                          , s = o | a | E | P
                          , l = n & D && !(r & D)
                          , h = n & O && !(r & O)
                          , c = (h ? t : e)[7]
                          , u = (l ? t : e)[8]
                          , p = !(n >= O && r > a || n > a && r >= O)
                          , d = i >= o && s >= i && (O > n || (h || l) && c.length <= u);
                        if (!p && !d)
                            return t;
                        r & C && (t[2] = e[2],
                        i |= n & C ? 0 : E);
                        var f = e[3];
                        if (f) {
                            var m = t[3];
                            t[3] = m ? Ze(m, f, e[4]) : Qt(f),
                            t[4] = m ? y(t[3], z) : Qt(e[4])
                        }
                        return f = e[5],
                        f && (m = t[5],
                        t[5] = m ? Je(m, f, e[6]) : Qt(f),
                        t[6] = m ? y(t[5], z) : Qt(e[6])),
                        f = e[7],
                        f && (t[7] = Qt(f)),
                        r & D && (t[8] = null == t[8] ? e[8] : ga(t[8], e[8])),
                        null == t[9] && (t[9] = e[9]),
                        t[0] = e[0],
                        t[1] = i,
                        t
                    }
                    function Cn(t, e) {
                        t = Rn(t);
                        for (var n = -1, r = e.length, i = {}; ++n < r; ) {
                            var o = e[n];
                            o in t && (i[o] = t[o])
                        }
                        return i
                    }
                    function An(t, e) {
                        var n = {};
                        return Ce(t, function(t, r, i) {
                            e(t, r, i) && (n[r] = t)
                        }),
                        n
                    }
                    function En(t, e) {
                        for (var n = t.length, r = ga(e.length, n), i = Qt(t); r--; ) {
                            var o = e[r];
                            t[r] = bn(o, n) ? i[o] : T
                        }
                        return t
                    }
                    function Ln(t) {
                        var n;
                        e.support;
                        if (!g(t) || Yo.call(t) != J || !qo.call(t, "constructor") && (n = t.constructor,
                        "function" == typeof n && !(n instanceof n)))
                            return !1;
                        var r;
                        return Ce(t, function(t, e) {
                            r = e
                        }),
                        "undefined" == typeof r || qo.call(t, r)
                    }
                    function Pn(t) {
                        for (var n = zi(t), r = n.length, i = r && t.length, o = e.support, a = i && Sn(i) && (Ga(t) || o.nonEnumArgs && pi(t)), s = -1, l = []; ++s < r; ) {
                            var h = n[s];
                            (a && bn(h, i) || qo.call(t, h)) && l.push(h)
                        }
                        return l
                    }
                    function kn(t) {
                        return null == t ? [] : Sn(t.length) ? xi(t) ? t : Io(t) : Qi(t)
                    }
                    function Rn(t) {
                        return xi(t) ? t : Io(t)
                    }
                    function On(t, e, n) {
                        e = (n ? wn(t, e, n) : null == e) ? 1 : ma(+e || 1, 1);
                        for (var r = 0, i = t ? t.length : 0, o = -1, a = ko($o(i / e)); i > r; )
                            a[++o] = Ge(t, r, r += e);
                        return a
                    }
                    function Dn(t) {
                        for (var e = -1, n = t ? t.length : 0, r = -1, i = []; ++e < n; ) {
                            var o = t[e];
                            o && (i[++r] = o)
                        }
                        return i
                    }
                    function Fn() {
                        for (var t = -1, e = arguments.length; ++t < e; ) {
                            var n = arguments[t];
                            if (Ga(n) || pi(n))
                                break
                        }
                        return ve(n, Se(arguments, !1, !0, ++t))
                    }
                    function Un(t, e, n) {
                        var r = t ? t.length : 0;
                        return r ? ((n ? wn(t, e, n) : null == e) && (e = 1),
                        Ge(t, 0 > e ? 0 : e)) : []
                    }
                    function In(t, e, n) {
                        var r = t ? t.length : 0;
                        return r ? ((n ? wn(t, e, n) : null == e) && (e = 1),
                        e = r - (+e || 0),
                        Ge(t, 0, 0 > e ? 0 : e)) : []
                    }
                    function Bn(t, e, n) {
                        var r = t ? t.length : 0;
                        if (!r)
                            return [];
                        for (e = fn(e, n, 3); r-- && e(t[r], r, t); )
                            ;
                        return Ge(t, 0, r + 1)
                    }
                    function Nn(t, e, n) {
                        var r = t ? t.length : 0;
                        if (!r)
                            return [];
                        var i = -1;
                        for (e = fn(e, n, 3); ++i < r && e(t[i], i, t); )
                            ;
                        return Ge(t, i)
                    }
                    function jn(t, e, n) {
                        var r = -1
                          , i = t ? t.length : 0;
                        for (e = fn(e, n, 3); ++r < i; )
                            if (e(t[r], r, t))
                                return r;
                        return -1
                    }
                    function Vn(t, e, n) {
                        var r = t ? t.length : 0;
                        for (e = fn(e, n, 3); r--; )
                            if (e(t[r], r, t))
                                return r;
                        return -1
                    }
                    function Gn(t) {
                        return t ? t[0] : T
                    }
                    function zn(t, e, n) {
                        var r = t ? t.length : 0;
                        return n && wn(t, e, n) && (e = !1),
                        r ? Se(t, e) : []
                    }
                    function Hn(t) {
                        var e = t ? t.length : 0;
                        return e ? Se(t, !0) : []
                    }
                    function Wn(t, e, n) {
                        var r = t ? t.length : 0;
                        if (!r)
                            return -1;
                        if ("number" == typeof n)
                            n = 0 > n ? ma(r + n, 0) : n || 0;
                        else if (n) {
                            var o = Xe(t, e)
                              , a = t[o];
                            return (e === e ? e === a : a !== a) ? o : -1
                        }
                        return i(t, e, n)
                    }
                    function qn(t) {
                        return In(t, 1)
                    }
                    function Xn() {
                        for (var t = [], e = -1, n = arguments.length, r = [], o = mn(), a = o == i; ++e < n; ) {
                            var s = arguments[e];
                            (Ga(s) || pi(s)) && (t.push(s),
                            r.push(a && s.length >= 120 && Ra(e && s)))
                        }
                        n = t.length;
                        var l = t[0]
                          , h = -1
                          , c = l ? l.length : 0
                          , u = []
                          , p = r[0];
                        t: for (; ++h < c; )
                            if (s = l[h],
                            (p ? Yt(p, s) : o(u, s)) < 0) {
                                for (e = n; --e; ) {
                                    var d = r[e];
                                    if ((d ? Yt(d, s) : o(t[e], s)) < 0)
                                        continue t
                                }
                                p && p.push(s),
                                u.push(s)
                            }
                        return u
                    }
                    function Yn(t) {
                        var e = t ? t.length : 0;
                        return e ? t[e - 1] : T
                    }
                    function Kn(t, e, n) {
                        var r = t ? t.length : 0;
                        if (!r)
                            return -1;
                        var i = r;
                        if ("number" == typeof n)
                            i = (0 > n ? ma(r + n, 0) : ga(n || 0, r - 1)) + 1;
                        else if (n) {
                            i = Xe(t, e, !0) - 1;
                            var o = t[i];
                            return (e === e ? e === o : o !== o) ? i : -1
                        }
                        if (e !== e)
                            return m(t, i, !0);
                        for (; i--; )
                            if (t[i] === e)
                                return i;
                        return -1
                    }
                    function Qn() {
                        var t = arguments[0];
                        if (!t || !t.length)
                            return t;
                        for (var e = 0, n = mn(), r = arguments.length; ++e < r; )
                            for (var i = 0, o = arguments[e]; (i = n(t, o, i)) > -1; )
                                sa.call(t, i, 1);
                        return t
                    }
                    function Zn(t) {
                        return Ne(t || [], Se(arguments, !1, !1, 1))
                    }
                    function Jn(t, e, n) {
                        var r = -1
                          , i = t ? t.length : 0
                          , o = [];
                        for (e = fn(e, n, 3); ++r < i; ) {
                            var a = t[r];
                            e(a, r, t) && (o.push(a),
                            sa.call(t, r--, 1),
                            i--)
                        }
                        return o
                    }
                    function $n(t) {
                        return Un(t, 1)
                    }
                    function tr(t, e, n) {
                        var r = t ? t.length : 0;
                        return r ? (n && "number" != typeof n && wn(t, e, n) && (e = 0,
                        n = r),
                        Ge(t, e, n)) : []
                    }
                    function er(t, e, n, r) {
                        var i = fn(n);
                        return i === fe && null == n ? Xe(t, e) : Ye(t, e, i(n, r, 1))
                    }
                    function nr(t, e, n, r) {
                        var i = fn(n);
                        return i === fe && null == n ? Xe(t, e, !0) : Ye(t, e, i(n, r, 1), !0)
                    }
                    function rr(t, e, n) {
                        var r = t ? t.length : 0;
                        return r ? ((n ? wn(t, e, n) : null == e) && (e = 1),
                        Ge(t, 0, 0 > e ? 0 : e)) : []
                    }
                    function ir(t, e, n) {
                        var r = t ? t.length : 0;
                        return r ? ((n ? wn(t, e, n) : null == e) && (e = 1),
                        e = r - (+e || 0),
                        Ge(t, 0 > e ? 0 : e)) : []
                    }
                    function or(t, e, n) {
                        var r = t ? t.length : 0;
                        if (!r)
                            return [];
                        for (e = fn(e, n, 3); r-- && e(t[r], r, t); )
                            ;
                        return Ge(t, r + 1)
                    }
                    function ar(t, e, n) {
                        var r = t ? t.length : 0;
                        if (!r)
                            return [];
                        var i = -1;
                        for (e = fn(e, n, 3); ++i < r && e(t[i], i, t); )
                            ;
                        return Ge(t, 0, i)
                    }
                    function sr() {
                        return He(Se(arguments, !1, !0))
                    }
                    function lr(t, e, n, r) {
                        var o = t ? t.length : 0;
                        if (!o)
                            return [];
                        "boolean" != typeof e && null != e && (r = n,
                        n = wn(t, e, r) ? null : e,
                        e = !1);
                        var a = fn();
                        return (a !== fe || null != n) && (n = a(n, r, 3)),
                        e && mn() == i ? _(t, n) : He(t, n)
                    }
                    function hr(t) {
                        for (var e = -1, n = (t && t.length && re(ne(t, Wo))) >>> 0, r = ko(n); ++e < n; )
                            r[e] = ne(t, Be(e));
                        return r
                    }
                    function cr(t) {
                        return ve(t, Ge(arguments, 1))
                    }
                    function ur() {
                        for (var t = -1, e = arguments.length; ++t < e; ) {
                            var n = arguments[t];
                            if (Ga(n) || pi(n))
                                var r = r ? ve(r, n).concat(ve(n, r)) : n
                        }
                        return r ? He(r) : []
                    }
                    function pr() {
                        for (var t = arguments.length, e = ko(t); t--; )
                            e[t] = arguments[t];
                        return hr(e)
                    }
                    function dr(t, e) {
                        var n = -1
                          , r = t ? t.length : 0
                          , i = {};
                        for (!r || e || Ga(t[0]) || (e = []); ++n < r; ) {
                            var o = t[n];
                            e ? i[o] = e[n] : o && (i[o[0]] = o[1])
                        }
                        return i
                    }
                    function fr(t) {
                        var n = e(t);
                        return n.__chain__ = !0,
                        n
                    }
                    function mr(t, e, n) {
                        return e.call(n, t),
                        t
                    }
                    function gr(t, e, n) {
                        return e.call(n, t)
                    }
                    function vr() {
                        return fr(this)
                    }
                    function yr() {
                        var t = this.__wrapped__;
                        return t instanceof v ? new n(t.reverse()) : this.thru(function(t) {
                            return t.reverse()
                        })
                    }
                    function _r() {
                        return this.value() + ""
                    }
                    function xr() {
                        return qe(this.__wrapped__, this.__actions__)
                    }
                    function br(t) {
                        var e = t ? t.length : 0;
                        return Sn(e) && (t = kn(t)),
                        ue(t, Se(arguments, !1, !1, 1))
                    }
                    function wr(t, e, n) {
                        var r = t ? t.length : 0;
                        return Sn(r) || (t = Qi(t),
                        r = t.length),
                        r ? (n = "number" == typeof n ? 0 > n ? ma(r + n, 0) : n || 0 : 0,
                        "string" == typeof t || !Ga(t) && Ai(t) ? r > n && t.indexOf(e, n) > -1 : mn(t, e, n) > -1) : !1
                    }
                    function Sr(t, e, n) {
                        var r = Ga(t) ? te : xe;
                        return ("function" != typeof e || "undefined" != typeof n) && (e = fn(e, n, 3)),
                        r(t, e)
                    }
                    function Tr(t, e, n) {
                        var r = Ga(t) ? ee : be;
                        return e = fn(e, n, 3),
                        r(t, e)
                    }
                    function Mr(t, e, n) {
                        if (Ga(t)) {
                            var r = jn(t, e, n);
                            return r > -1 ? t[r] : T
                        }
                        return e = fn(e, n, 3),
                        we(t, e, ye)
                    }
                    function Cr(t, e, n) {
                        return e = fn(e, n, 3),
                        we(t, e, _e)
                    }
                    function Ar(t, e) {
                        return Mr(t, wo(e))
                    }
                    function Er(t, e, n) {
                        return "function" == typeof e && "undefined" == typeof n && Ga(t) ? Jt(t, e) : ye(t, Ke(e, n, 3))
                    }
                    function Lr(t, e, n) {
                        return "function" == typeof e && "undefined" == typeof n && Ga(t) ? $t(t, e) : _e(t, Ke(e, n, 3))
                    }
                    function Pr(t, e) {
                        return Pe(t, e, Ge(arguments, 2))
                    }
                    function kr(t, e, n) {
                        var r = Ga(t) ? ne : De;
                        return e = fn(e, n, 3),
                        r(t, e)
                    }
                    function Rr(t, e) {
                        return kr(t, Co(e))
                    }
                    function Or(t, e, n, r) {
                        var i = Ga(t) ? oe : Ve;
                        return i(t, fn(e, r, 4), n, arguments.length < 3, ye)
                    }
                    function Dr(t, e, n, r) {
                        var i = Ga(t) ? ae : Ve;
                        return i(t, fn(e, r, 4), n, arguments.length < 3, _e)
                    }
                    function Fr(t, e, n) {
                        var r = Ga(t) ? ee : be;
                        return e = fn(e, n, 3),
                        r(t, function(t, n, r) {
                            return !e(t, n, r)
                        })
                    }
                    function Ur(t, e, n) {
                        if (n ? wn(t, e, n) : null == e) {
                            t = kn(t);
                            var r = t.length;
                            return r > 0 ? t[je(0, r - 1)] : T
                        }
                        var i = Ir(t);
                        return i.length = ga(0 > e ? 0 : +e || 0, i.length),
                        i
                    }
                    function Ir(t) {
                        t = kn(t);
                        for (var e = -1, n = t.length, r = ko(n); ++e < n; ) {
                            var i = je(0, e);
                            e != i && (r[e] = r[i]),
                            r[i] = t[e]
                        }
                        return r
                    }
                    function Br(t) {
                        var e = t ? t.length : 0;
                        return Sn(e) ? e : qa(t).length
                    }
                    function Nr(t, e, n) {
                        var r = Ga(t) ? se : ze;
                        return ("function" != typeof e || "undefined" != typeof n) && (e = fn(e, n, 3)),
                        r(t, e)
                    }
                    function jr(t, e, n) {
                        var r = -1
                          , i = t ? t.length : 0
                          , a = Sn(i) ? ko(i) : [];
                        return n && wn(t, e, n) && (e = null ),
                        e = fn(e, n, 3),
                        ye(t, function(t, n, i) {
                            a[++r] = {
                                criteria: e(t, n, i),
                                index: r,
                                value: t
                            }
                        }),
                        o(a, c)
                    }
                    function Vr(t) {
                        var e = arguments;
                        e.length > 3 && wn(e[1], e[2], e[3]) && (e = [t, e[1]]);
                        var n = -1
                          , r = t ? t.length : 0
                          , i = Se(e, !1, !1, 1)
                          , a = Sn(r) ? ko(r) : [];
                        return ye(t, function(t, e, r) {
                            for (var o = i.length, s = ko(o); o--; )
                                s[o] = null == t ? T : t[i[o]];
                            a[++n] = {
                                criteria: s,
                                index: n,
                                value: t
                            }
                        }),
                        o(a, u)
                    }
                    function Gr(t, e) {
                        return Tr(t, wo(e))
                    }
                    function zr(t, e) {
                        if (!_i(e)) {
                            if (!_i(t))
                                throw new jo(G);
                            var n = t;
                            t = e,
                            e = n
                        }
                        return t = da(t = +t) ? t : 0,
                        function() {
                            return --t < 1 ? e.apply(this, arguments) : void 0
                        }
                    }
                    function Hr(t, e, n) {
                        return n && wn(t, e, n) && (e = null ),
                        e = t && null == e ? t.length : ma(+e || 0, 0),
                        hn(t, D, null , null , null , null , e)
                    }
                    function Wr(t, e) {
                        var n;
                        if (!_i(e)) {
                            if (!_i(t))
                                throw new jo(G);
                            var r = t;
                            t = e,
                            e = r
                        }
                        return function() {
                            return --t > 0 ? n = e.apply(this, arguments) : e = null ,
                            n
                        }
                    }
                    function qr(t, e) {
                        var n = C;
                        if (arguments.length > 2) {
                            var r = Ge(arguments, 2)
                              , i = y(r, qr.placeholder);
                            n |= k
                        }
                        return hn(t, n, e, r, i)
                    }
                    function Xr(t) {
                        return de(t, arguments.length > 1 ? Se(arguments, !1, !1, 1) : ji(t))
                    }
                    function Yr(t, e) {
                        var n = C | A;
                        if (arguments.length > 2) {
                            var r = Ge(arguments, 2)
                              , i = y(r, Yr.placeholder);
                            n |= k
                        }
                        return hn(e, n, t, r, i)
                    }
                    function Kr(t, e, n) {
                        n && wn(t, e, n) && (e = null );
                        var r = hn(t, L, null , null , null , null , null , e);
                        return r.placeholder = Kr.placeholder,
                        r
                    }
                    function Qr(t, e, n) {
                        n && wn(t, e, n) && (e = null );
                        var r = hn(t, P, null , null , null , null , null , e);
                        return r.placeholder = Qr.placeholder,
                        r
                    }
                    function Zr(t, e, n) {
                        function r() {
                            p && ta(p),
                            l && ta(l),
                            l = p = d = T
                        }
                        function i() {
                            var n = e - (Va() - c);
                            if (0 >= n || n > e) {
                                l && ta(l);
                                var r = d;
                                l = p = d = T,
                                r && (f = Va(),
                                h = t.apply(u, s),
                                p || l || (s = u = null ))
                            } else
                                p = aa(i, n)
                        }
                        function o() {
                            p && ta(p),
                            l = p = d = T,
                            (g || m !== e) && (f = Va(),
                            h = t.apply(u, s),
                            p || l || (s = u = null ))
                        }
                        function a() {
                            if (s = arguments,
                            c = Va(),
                            u = this,
                            d = g && (p || !v),
                            m === !1)
                                var n = v && !p;
                            else {
                                l || v || (f = c);
                                var r = m - (c - f)
                                  , a = 0 >= r || r > m;
                                a ? (l && (l = ta(l)),
                                f = c,
                                h = t.apply(u, s)) : l || (l = aa(o, r))
                            }
                            return a && p ? p = ta(p) : p || e === m || (p = aa(i, e)),
                            n && (a = !0,
                            h = t.apply(u, s)),
                            !a || p || l || (s = u = null ),
                            h
                        }
                        var s, l, h, c, u, p, d, f = 0, m = !1, g = !0;
                        if (!_i(t))
                            throw new jo(G);
                        if (e = 0 > e ? 0 : e,
                        n === !0) {
                            var v = !0;
                            g = !1
                        } else
                            xi(n) && (v = n.leading,
                            m = "maxWait"in n && ma(+n.maxWait || 0, e),
                            g = "trailing"in n ? n.trailing : g);
                        return a.cancel = r,
                        a
                    }
                    function Jr(t) {
                        return ge(t, 1, arguments, 1)
                    }
                    function $r(t, e) {
                        return ge(t, e, arguments, 2)
                    }
                    function ti() {
                        var t = arguments
                          , e = t.length;
                        if (!e)
                            return function() {}
                            ;
                        if (!te(t, _i))
                            throw new jo(G);
                        return function() {
                            for (var n = 0, r = t[n].apply(this, arguments); ++n < e; )
                                r = t[n].call(this, r);
                            return r
                        }
                    }
                    function ei() {
                        var t = arguments
                          , e = t.length - 1;
                        if (0 > e)
                            return function() {}
                            ;
                        if (!te(t, _i))
                            throw new jo(G);
                        return function() {
                            for (var n = e, r = t[n].apply(this, arguments); n--; )
                                r = t[n].call(this, r);
                            return r
                        }
                    }
                    function ni(t, e) {
                        if (!_i(t) || e && !_i(e))
                            throw new jo(G);
                        var n = function() {
                            var r = n.cache
                              , i = e ? e.apply(this, arguments) : arguments[0];
                            if (r.has(i))
                                return r.get(i);
                            var o = t.apply(this, arguments);
                            return r.set(i, o),
                            o
                        };
                        return n.cache = new ni.Cache,
                        n
                    }
                    function ri(t) {
                        if (!_i(t))
                            throw new jo(G);
                        return function() {
                            return !t.apply(this, arguments)
                        }
                    }
                    function ii(t) {
                        return Wr(t, 2)
                    }
                    function oi(t) {
                        var e = Ge(arguments, 1)
                          , n = y(e, oi.placeholder);
                        return hn(t, k, null , e, n)
                    }
                    function ai(t) {
                        var e = Ge(arguments, 1)
                          , n = y(e, ai.placeholder);
                        return hn(t, R, null , e, n)
                    }
                    function si(t) {
                        var e = Se(arguments, !1, !1, 1);
                        return hn(t, O, null , null , null , e)
                    }
                    function li(t, e, n) {
                        var r = !0
                          , i = !0;
                        if (!_i(t))
                            throw new jo(G);
                        return n === !1 ? r = !1 : xi(n) && (r = "leading"in n ? !!n.leading : r,
                        i = "trailing"in n ? !!n.trailing : i),
                        jt.leading = r,
                        jt.maxWait = +e,
                        jt.trailing = i,
                        Zr(t, e, jt)
                    }
                    function hi(t, e) {
                        return e = null == e ? bo : e,
                        hn(e, k, null , [t], [])
                    }
                    function ci(t, e, n, r) {
                        return "boolean" != typeof e && null != e && (r = n,
                        n = wn(t, e, r) ? null : e,
                        e = !1),
                        n = "function" == typeof n && Ke(n, r, 1),
                        me(t, e, n)
                    }
                    function ui(t, e, n) {
                        return e = "function" == typeof e && Ke(e, n, 1),
                        me(t, !0, e)
                    }
                    function pi(t) {
                        var e = g(t) ? t.length : T;
                        return Sn(e) && Yo.call(t) == H || !1
                    }
                    function di(t) {
                        return t === !0 || t === !1 || g(t) && Yo.call(t) == q || !1
                    }
                    function fi(t) {
                        return g(t) && Yo.call(t) == X || !1
                    }
                    function mi(t) {
                        return t && 1 === t.nodeType && g(t) && Yo.call(t).indexOf("Element") > -1 || !1
                    }
                    function gi(t) {
                        if (null == t)
                            return !0;
                        var e = t.length;
                        return Sn(e) && (Ga(t) || Ai(t) || pi(t) || g(t) && _i(t.splice)) ? !e : !qa(t).length
                    }
                    function vi(t, e, n, r) {
                        if (n = "function" == typeof n && Ke(n, r, 3),
                        !n && Tn(t) && Tn(e))
                            return t === e;
                        var i = n ? n(t, e) : T;
                        return "undefined" == typeof i ? ke(t, e, n) : !!i
                    }
                    function yi(t) {
                        return g(t) && "string" == typeof t.message && Yo.call(t) == Y || !1
                    }
                    function _i(t) {
                        return "function" == typeof t || !1
                    }
                    function xi(t) {
                        var e = typeof t;
                        return "function" == e || t && "object" == e || !1
                    }
                    function bi(t, e, n, r) {
                        var i = qa(e)
                          , o = i.length;
                        if (n = "function" == typeof n && Ke(n, r, 3),
                        !n && 1 == o) {
                            var a = i[0]
                              , s = e[a];
                            if (Tn(s))
                                return null != t && s === t[a] && qo.call(t, a)
                        }
                        for (var l = ko(o), h = ko(o); o--; )
                            s = l[o] = e[i[o]],
                            h[o] = Tn(s);
                        return Oe(t, i, l, h, n)
                    }
                    function wi(t) {
                        return Mi(t) && t != +t
                    }
                    function Si(t) {
                        return null == t ? !1 : Yo.call(t) == K ? Qo.test(Ho.call(t)) : g(t) && At.test(t) || !1
                    }
                    function Ti(t) {
                        return null === t
                    }
                    function Mi(t) {
                        return "number" == typeof t || g(t) && Yo.call(t) == Z || !1
                    }
                    function Ci(t) {
                        return g(t) && Yo.call(t) == $ || !1
                    }
                    function Ai(t) {
                        return "string" == typeof t || g(t) && Yo.call(t) == et || !1
                    }
                    function Ei(t) {
                        return g(t) && Sn(t.length) && Bt[Yo.call(t)] || !1
                    }
                    function Li(t) {
                        return "undefined" == typeof t
                    }
                    function Pi(t) {
                        var e = t ? t.length : 0;
                        return Sn(e) ? e ? Qt(t) : [] : Qi(t)
                    }
                    function ki(t) {
                        return pe(t, zi(t))
                    }
                    function Ri(t, e, n) {
                        var r = Pa(t);
                        return n && wn(t, e, n) && (e = null ),
                        e ? pe(e, r, qa(e)) : r
                    }
                    function Oi(t) {
                        if (null == t)
                            return t;
                        var e = Qt(arguments);
                        return e.push(le),
                        Wa.apply(T, e)
                    }
                    function Di(t, e, n) {
                        return e = fn(e, n, 3),
                        we(t, e, Ae, !0)
                    }
                    function Fi(t, e, n) {
                        return e = fn(e, n, 3),
                        we(t, e, Ee, !0)
                    }
                    function Ui(t, e, n) {
                        return ("function" != typeof e || "undefined" != typeof n) && (e = Ke(e, n, 3)),
                        Te(t, e, zi)
                    }
                    function Ii(t, e, n) {
                        return e = Ke(e, n, 3),
                        Me(t, e, zi)
                    }
                    function Bi(t, e, n) {
                        return ("function" != typeof e || "undefined" != typeof n) && (e = Ke(e, n, 3)),
                        Ae(t, e)
                    }
                    function Ni(t, e, n) {
                        return e = Ke(e, n, 3),
                        Me(t, e, qa)
                    }
                    function ji(t) {
                        return Le(t, zi(t))
                    }
                    function Vi(t, e) {
                        return t ? qo.call(t, e) : !1
                    }
                    function Gi(t, e, n) {
                        n && wn(t, e, n) && (e = null );
                        for (var r = -1, i = qa(t), o = i.length, a = {}; ++r < o; ) {
                            var s = i[r]
                              , l = t[s];
                            e ? qo.call(a, l) ? a[l].push(s) : a[l] = [s] : a[l] = s
                        }
                        return a
                    }
                    function zi(t) {
                        if (null == t)
                            return [];
                        xi(t) || (t = Io(t));
                        var e = t.length;
                        e = e && Sn(e) && (Ga(t) || La.nonEnumArgs && pi(t)) && e || 0;
                        for (var n = t.constructor, r = -1, i = "function" == typeof n && n.prototype == t, o = ko(e), a = e > 0; ++r < e; )
                            o[r] = r + "";
                        for (var s in t)
                            a && bn(s, e) || "constructor" == s && (i || !qo.call(t, s)) || o.push(s);
                        return o
                    }
                    function Hi(t, e, n) {
                        var r = {};
                        return e = fn(e, n, 3),
                        Ae(t, function(t, n, i) {
                            r[n] = e(t, n, i)
                        }),
                        r
                    }
                    function Wi(t, e, n) {
                        if (null == t)
                            return {};
                        if ("function" != typeof e) {
                            var r = ne(Se(arguments, !1, !1, 1), No);
                            return Cn(t, ve(zi(t), r))
                        }
                        return e = Ke(e, n, 3),
                        An(t, function(t, n, r) {
                            return !e(t, n, r)
                        })
                    }
                    function qi(t) {
                        for (var e = -1, n = qa(t), r = n.length, i = ko(r); ++e < r; ) {
                            var o = n[e];
                            i[e] = [o, t[o]]
                        }
                        return i
                    }
                    function Xi(t, e, n) {
                        return null == t ? {} : "function" == typeof e ? An(t, Ke(e, n, 3)) : Cn(t, Se(arguments, !1, !1, 1))
                    }
                    function Yi(t, e, n) {
                        var r = null == t ? T : t[e];
                        return "undefined" == typeof r && (r = n),
                        _i(r) ? r.call(t) : r
                    }
                    function Ki(t, e, n, r) {
                        var i = Ga(t) || Ei(t);
                        if (e = fn(e, r, 4),
                        null == n)
                            if (i || xi(t)) {
                                var o = t.constructor;
                                n = i ? Ga(t) ? new o : [] : Pa("function" == typeof o && o.prototype)
                            } else
                                n = {};
                        return (i ? Jt : Ae)(t, function(t, r, i) {
                            return e(n, t, r, i)
                        }),
                        n
                    }
                    function Qi(t) {
                        return We(t, qa(t))
                    }
                    function Zi(t) {
                        return We(t, zi(t))
                    }
                    function Ji(t, e, n) {
                        n && wn(t, e, n) && (e = n = null );
                        var r = null == t
                          , i = null == e;
                        if (null == n && (i && "boolean" == typeof t ? (n = t,
                        t = 1) : "boolean" == typeof e && (n = e,
                        i = !0)),
                        r && i && (e = 1,
                        i = !1),
                        t = +t || 0,
                        i ? (e = t,
                        t = 0) : e = +e || 0,
                        n || t % 1 || e % 1) {
                            var o = xa();
                            return ga(t + o * (e - t + parseFloat("1e-" + ((o + "").length - 1))), e)
                        }
                        return je(t, e)
                    }
                    function $i(t) {
                        return t = a(t),
                        t && t.charAt(0).toUpperCase() + t.slice(1)
                    }
                    function to(t) {
                        return t = a(t),
                        t && t.replace(Et, p)
                    }
                    function eo(t, e, n) {
                        t = a(t),
                        e += "";
                        var r = t.length;
                        return n = ("undefined" == typeof n ? r : ga(0 > n ? 0 : +n || 0, r)) - e.length,
                        n >= 0 && t.indexOf(e, n) == n
                    }
                    function no(t) {
                        return t = a(t),
                        t && _t.test(t) ? t.replace(vt, d) : t
                    }
                    function ro(t) {
                        return t = a(t),
                        t && kt.test(t) ? t.replace(Pt, "\\$&") : t
                    }
                    function io(t, e, n) {
                        t = a(t),
                        e = +e;
                        var r = t.length;
                        if (r >= e || !da(e))
                            return t;
                        var i = (e - r) / 2
                          , o = ea(i)
                          , s = $o(i);
                        return n = sn("", s, n),
                        n.slice(0, o) + t + n
                    }
                    function oo(t, e, n) {
                        return t = a(t),
                        t && sn(t, e, n) + t
                    }
                    function ao(t, e, n) {
                        return t = a(t),
                        t && t + sn(t, e, n)
                    }
                    function so(t, e, n) {
                        return n && wn(t, e, n) && (e = 0),
                        _a(t, e)
                    }
                    function lo(t, e) {
                        var n = "";
                        if (t = a(t),
                        e = +e,
                        1 > e || !t || !da(e))
                            return n;
                        do
                            e % 2 && (n += t),
                            e = ea(e / 2),
                            t += t;
                        while (e);return n
                    }
                    function ho(t, e, n) {
                        return t = a(t),
                        n = null == n ? 0 : ga(0 > n ? 0 : +n || 0, t.length),
                        t.lastIndexOf(e, n) == n
                    }
                    function co(t, n, r) {
                        var i = e.templateSettings;
                        r && wn(t, n, r) && (n = r = null ),
                        t = a(t),
                        n = ce(ce({}, r || n), i, he);
                        var o, s, l = ce(ce({}, n.imports), i.imports, he), h = qa(l), c = We(l, h), u = 0, p = n.interpolate || Lt, d = "__p += '", m = Bo((n.escape || Lt).source + "|" + p.source + "|" + (p === wt ? St : Lt).source + "|" + (n.evaluate || Lt).source + "|$", "g"), g = "//# sourceURL=" + ("sourceURL"in n ? n.sourceURL : "lodash.templateSources[" + ++It + "]") + "\n";
                        t.replace(m, function(e, n, r, i, a, l) {
                            return r || (r = i),
                            d += t.slice(u, l).replace(Ot, f),
                            n && (o = !0,
                            d += "' +\n__e(" + n + ") +\n'"),
                            a && (s = !0,
                            d += "';\n" + a + ";\n__p += '"),
                            r && (d += "' +\n((__t = (" + r + ")) == null ? '' : __t) +\n'"),
                            u = l + e.length,
                            e
                        }),
                        d += "';\n";
                        var v = n.variable;
                        v || (d = "with (obj) {\n" + d + "\n}\n"),
                        d = (s ? d.replace(dt, "") : d).replace(ft, "$1").replace(mt, "$1;"),
                        d = "function(" + (v || "obj") + ") {\n" + (v ? "" : "obj || (obj = {});\n") + "var __t, __p = ''" + (o ? ", __e = _.escape" : "") + (s ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") + d + "return __p\n}";
                        var y = yo(function() {
                            return Do(h, g + "return " + d).apply(T, c)
                        });
                        if (y.source = d,
                        yi(y))
                            throw y;
                        return y
                    }
                    function uo(t, e, n) {
                        var r = t;
                        return (t = a(t)) ? (n ? wn(r, e, n) : null == e) ? t.slice(x(t), b(t) + 1) : (e = a(e),
                        t.slice(l(t, e), h(t, e) + 1)) : t
                    }
                    function po(t, e, n) {
                        var r = t;
                        return t = a(t),
                        t ? (n ? wn(r, e, n) : null == e) ? t.slice(x(t)) : t.slice(l(t, a(e))) : t
                    }
                    function fo(t, e, n) {
                        var r = t;
                        return t = a(t),
                        t ? (n ? wn(r, e, n) : null == e) ? t.slice(0, b(t) + 1) : t.slice(0, h(t, a(e)) + 1) : t
                    }
                    function mo(t, e, n) {
                        n && wn(t, e, n) && (e = null );
                        var r = F
                          , i = U;
                        if (null != e)
                            if (xi(e)) {
                                var o = "separator"in e ? e.separator : o;
                                r = "length"in e ? +e.length || 0 : r,
                                i = "omission"in e ? a(e.omission) : i
                            } else
                                r = +e || 0;
                        if (t = a(t),
                        r >= t.length)
                            return t;
                        var s = r - i.length;
                        if (1 > s)
                            return i;
                        var l = t.slice(0, s);
                        if (null == o)
                            return l + i;
                        if (Ci(o)) {
                            if (t.slice(s).search(o)) {
                                var h, c, u = t.slice(0, s);
                                for (o.global || (o = Bo(o.source, (Tt.exec(o) || "") + "g")),
                                o.lastIndex = 0; h = o.exec(u); )
                                    c = h.index;
                                l = l.slice(0, null == c ? s : c)
                            }
                        } else if (t.indexOf(o, s) != s) {
                            var p = l.lastIndexOf(o);
                            p > -1 && (l = l.slice(0, p))
                        }
                        return l + i
                    }
                    function go(t) {
                        return t = a(t),
                        t && yt.test(t) ? t.replace(gt, w) : t
                    }
                    function vo(t, e, n) {
                        return n && wn(t, e, n) && (e = null ),
                        t = a(t),
                        t.match(e || Dt) || []
                    }
                    function yo(t) {
                        try {
                            return t()
                        } catch (e) {
                            return yi(e) ? e : Oo(e)
                        }
                    }
                    function _o(t, e, n) {
                        return n && wn(t, e, n) && (e = null ),
                        fe(t, e)
                    }
                    function xo(t) {
                        return function() {
                            return t
                        }
                    }
                    function bo(t) {
                        return t
                    }
                    function wo(t) {
                        return Fe(t, !0)
                    }
                    function So(t, e, n) {
                        if (null == n) {
                            var r = xi(e)
                              , i = r && qa(e)
                              , o = i && i.length && Le(e, i);
                            (o ? o.length : r) || (o = !1,
                            n = e,
                            e = t,
                            t = this)
                        }
                        o || (o = Le(e, qa(e)));
                        var a = !0
                          , s = -1
                          , l = _i(t)
                          , h = o.length;
                        n === !1 ? a = !1 : xi(n) && "chain"in n && (a = n.chain);
                        for (; ++s < h; ) {
                            var c = o[s]
                              , u = e[c];
                            t[c] = u,
                            l && (t.prototype[c] = function(e) {
                                return function() {
                                    var n = this.__chain__;
                                    if (a || n) {
                                        var r = t(this.__wrapped__);
                                        return (r.__actions__ = Qt(this.__actions__)).push({
                                            func: e,
                                            args: arguments,
                                            thisArg: t
                                        }),
                                        r.__chain__ = n,
                                        r
                                    }
                                    var i = [this.value()];
                                    return ra.apply(i, arguments),
                                    e.apply(t, i)
                                }
                            }(u))
                        }
                        return t
                    }
                    function To() {
                        return t._ = Ko,
                        this
                    }
                    function Mo() {}
                    function Co(t) {
                        return Be(t + "")
                    }
                    function Ao(t) {
                        return function(e) {
                            return null == t ? T : t[e]
                        }
                    }
                    function Eo(t, e, n) {
                        n && wn(t, e, n) && (e = n = null ),
                        t = +t || 0,
                        n = null == n ? 1 : +n || 0,
                        null == e ? (e = t,
                        t = 0) : e = +e || 0;
                        for (var r = -1, i = ma($o((e - t) / (n || 1)), 0), o = ko(i); ++r < i; )
                            o[r] = t,
                            t += n;
                        return o
                    }
                    function Lo(t, e, n) {
                        if (t = +t,
                        1 > t || !da(t))
                            return [];
                        var r = -1
                          , i = ko(ga(t, Sa));
                        for (e = Ke(e, n, 1); ++r < t; )
                            Sa > r ? i[r] = e(r) : e(r);
                        return i
                    }
                    function Po(t) {
                        var e = ++Xo;
                        return a(t) + e
                    }
                    t = t ? Zt.defaults(qt.Object(), t, Zt.pick(qt, Ut)) : qt;
                    var ko = t.Array
                      , Ro = t.Date
                      , Oo = t.Error
                      , Do = t.Function
                      , Fo = t.Math
                      , Uo = t.Number
                      , Io = t.Object
                      , Bo = t.RegExp
                      , No = t.String
                      , jo = t.TypeError
                      , Vo = ko.prototype
                      , Go = Io.prototype
                      , zo = (zo = t.window) && zo.document
                      , Ho = Do.prototype.toString
                      , Wo = Be("length")
                      , qo = Go.hasOwnProperty
                      , Xo = 0
                      , Yo = Go.toString
                      , Ko = t._
                      , Qo = Bo("^" + ro(Yo).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$")
                      , Zo = Si(Zo = t.ArrayBuffer) && Zo
                      , Jo = Si(Jo = Zo && new Zo(0).slice) && Jo
                      , $o = Fo.ceil
                      , ta = t.clearTimeout
                      , ea = Fo.floor
                      , na = Si(na = Io.getPrototypeOf) && na
                      , ra = Vo.push
                      , ia = Go.propertyIsEnumerable
                      , oa = Si(oa = t.Set) && oa
                      , aa = t.setTimeout
                      , sa = Vo.splice
                      , la = Si(la = t.Uint8Array) && la
                      , ha = (Vo.unshift,
                    Si(ha = t.WeakMap) && ha)
                      , ca = function() {
                        try {
                            var e = Si(e = t.Float64Array) && e
                              , n = new e(new Zo(10),0,1) && e
                        } catch (r) {}
                        return n
                    }()
                      , ua = Si(ua = ko.isArray) && ua
                      , pa = Si(pa = Io.create) && pa
                      , da = t.isFinite
                      , fa = Si(fa = Io.keys) && fa
                      , ma = Fo.max
                      , ga = Fo.min
                      , va = Si(va = Ro.now) && va
                      , ya = Si(ya = Uo.isFinite) && ya
                      , _a = t.parseInt
                      , xa = Fo.random
                      , ba = Uo.NEGATIVE_INFINITY
                      , wa = Uo.POSITIVE_INFINITY
                      , Sa = Fo.pow(2, 32) - 1
                      , Ta = Sa - 1
                      , Ma = Sa >>> 1
                      , Ca = ca ? ca.BYTES_PER_ELEMENT : 0
                      , Aa = Fo.pow(2, 53) - 1
                      , Ea = ha && new ha
                      , La = e.support = {};
                    !function(e) {
                        La.funcDecomp = !Si(t.WinRTError) && Rt.test(S),
                        La.funcNames = "string" == typeof Do.name;
                        try {
                            La.dom = 11 === zo.createDocumentFragment().nodeType
                        } catch (n) {
                            La.dom = !1
                        }
                        try {
                            La.nonEnumArgs = !ia.call(arguments, 1)
                        } catch (n) {
                            La.nonEnumArgs = !0
                        }
                    }(0, 0),
                    e.templateSettings = {
                        escape: xt,
                        evaluate: bt,
                        interpolate: wt,
                        variable: "",
                        imports: {
                            _: e
                        }
                    };
                    var Pa = function() {
                        function e() {}
                        return function(n) {
                            if (xi(n)) {
                                e.prototype = n;
                                var r = new e;
                                e.prototype = null
                            }
                            return r || t.Object()
                        }
                    }()
                      , ka = Ea ? function(t, e) {
                        return Ea.set(t, e),
                        t
                    }
                    : bo;
                    Jo || (Qe = Zo && la ? function(t) {
                        var e = t.byteLength
                          , n = ca ? ea(e / Ca) : 0
                          , r = n * Ca
                          , i = new Zo(e);
                        if (n) {
                            var o = new ca(i,0,n);
                            o.set(new ca(t,0,n))
                        }
                        return e != r && (o = new la(i,r),
                        o.set(new la(t,r))),
                        i
                    }
                    : xo(null ));
                    var Ra = pa && oa ? function(t) {
                        return new Xt(t)
                    }
                    : xo(null )
                      , Oa = Ea ? function(t) {
                        return Ea.get(t)
                    }
                    : Mo
                      , Da = function() {
                        var t = 0
                          , e = 0;
                        return function(n, r) {
                            var i = Va()
                              , o = B - (i - e);
                            if (e = i,
                            o > 0) {
                                if (++t >= I)
                                    return n
                            } else
                                t = 0;
                            return ka(n, r)
                        }
                    }()
                      , Fa = $e(function(t, e, n) {
                        qo.call(t, n) ? ++t[n] : t[n] = 1
                    })
                      , Ua = $e(function(t, e, n) {
                        qo.call(t, n) ? t[n].push(e) : t[n] = [e]
                    })
                      , Ia = $e(function(t, e, n) {
                        t[n] = e
                    })
                      , Ba = on(re)
                      , Na = on(ie, !0)
                      , ja = $e(function(t, e, n) {
                        t[n ? 0 : 1].push(e)
                    }, function() {
                        return [[], []]
                    })
                      , Va = va || function() {
                        return (new Ro).getTime()
                    }
                      , Ga = ua || function(t) {
                        return g(t) && Sn(t.length) && Yo.call(t) == W || !1
                    }
                    ;
                    La.dom || (mi = function(t) {
                        return t && 1 === t.nodeType && g(t) && !Ha(t) || !1
                    }
                    );
                    var za = ya || function(t) {
                        return "number" == typeof t && da(t)
                    }
                    ;
                    (_i(/x/) || la && !_i(la)) && (_i = function(t) {
                        return Yo.call(t) == K
                    }
                    );
                    var Ha = na ? function(t) {
                        if (!t || Yo.call(t) != J)
                            return !1;
                        var e = t.valueOf
                          , n = Si(e) && (n = na(e)) && na(n);
                        return n ? t == n || na(t) == n : Ln(t)
                    }
                    : Ln
                      , Wa = tn(ce)
                      , qa = fa ? function(t) {
                        if (t)
                            var e = t.constructor
                              , n = t.length;
                        return "function" == typeof e && e.prototype === t || "function" != typeof t && n && Sn(n) ? Pn(t) : xi(t) ? fa(t) : []
                    }
                    : Pn
                      , Xa = tn(Ue)
                      , Ya = nn(function(t, e, n) {
                        return e = e.toLowerCase(),
                        n ? t + e.charAt(0).toUpperCase() + e.slice(1) : e
                    })
                      , Ka = nn(function(t, e, n) {
                        return t + (n ? "-" : "") + e.toLowerCase()
                    });
                    8 != _a(Ft + "08") && (so = function(t, e, n) {
                        return (n ? wn(t, e, n) : null == e) ? e = 0 : e && (e = +e),
                        t = uo(t),
                        _a(t, e || (Ct.test(t) ? 16 : 10))
                    }
                    );
                    var Qa = nn(function(t, e, n) {
                        return t + (n ? "_" : "") + e.toLowerCase()
                    });
                    return n.prototype = e.prototype,
                    Vt.prototype["delete"] = Gt,
                    Vt.prototype.get = zt,
                    Vt.prototype.has = Ht,
                    Vt.prototype.set = Wt,
                    Xt.prototype.push = Kt,
                    ni.Cache = Vt,
                    e.after = zr,
                    e.ary = Hr,
                    e.assign = Wa,
                    e.at = br,
                    e.before = Wr,
                    e.bind = qr,
                    e.bindAll = Xr,
                    e.bindKey = Yr,
                    e.callback = _o,
                    e.chain = fr,
                    e.chunk = On,
                    e.compact = Dn,
                    e.constant = xo,
                    e.countBy = Fa,
                    e.create = Ri,
                    e.curry = Kr,
                    e.curryRight = Qr,
                    e.debounce = Zr,
                    e.defaults = Oi,
                    e.defer = Jr,
                    e.delay = $r,
                    e.difference = Fn,
                    e.drop = Un,
                    e.dropRight = In,
                    e.dropRightWhile = Bn,
                    e.dropWhile = Nn,
                    e.filter = Tr,
                    e.flatten = zn,
                    e.flattenDeep = Hn,
                    e.flow = ti,
                    e.flowRight = ei,
                    e.forEach = Er,
                    e.forEachRight = Lr,
                    e.forIn = Ui,
                    e.forInRight = Ii,
                    e.forOwn = Bi,
                    e.forOwnRight = Ni,
                    e.functions = ji,
                    e.groupBy = Ua,
                    e.indexBy = Ia,
                    e.initial = qn,
                    e.intersection = Xn,
                    e.invert = Gi,
                    e.invoke = Pr,
                    e.keys = qa,
                    e.keysIn = zi,
                    e.map = kr,
                    e.mapValues = Hi,
                    e.matches = wo,
                    e.memoize = ni,
                    e.merge = Xa,
                    e.mixin = So,
                    e.negate = ri,
                    e.omit = Wi,
                    e.once = ii,
                    e.pairs = qi,
                    e.partial = oi,
                    e.partialRight = ai,
                    e.partition = ja,
                    e.pick = Xi,
                    e.pluck = Rr,
                    e.property = Co,
                    e.propertyOf = Ao,
                    e.pull = Qn,
                    e.pullAt = Zn,
                    e.range = Eo,
                    e.rearg = si,
                    e.reject = Fr,
                    e.remove = Jn,
                    e.rest = $n,
                    e.shuffle = Ir,
                    e.slice = tr,
                    e.sortBy = jr,
                    e.sortByAll = Vr,
                    e.take = rr,
                    e.takeRight = ir,
                    e.takeRightWhile = or,
                    e.takeWhile = ar,
                    e.tap = mr,
                    e.throttle = li,
                    e.thru = gr,
                    e.times = Lo,
                    e.toArray = Pi,
                    e.toPlainObject = ki,
                    e.transform = Ki,
                    e.union = sr,
                    e.uniq = lr,
                    e.unzip = hr,
                    e.values = Qi,
                    e.valuesIn = Zi,
                    e.where = Gr,
                    e.without = cr,
                    e.wrap = hi,
                    e.xor = ur,
                    e.zip = pr,
                    e.zipObject = dr,
                    e.backflow = ei,
                    e.collect = kr,
                    e.compose = ei,
                    e.each = Er,
                    e.eachRight = Lr,
                    e.extend = Wa,
                    e.iteratee = _o,
                    e.methods = ji,
                    e.object = dr,
                    e.select = Tr,
                    e.tail = $n,
                    e.unique = lr,
                    So(e, e),
                    e.attempt = yo,
                    e.camelCase = Ya,
                    e.capitalize = $i,
                    e.clone = ci,
                    e.cloneDeep = ui,
                    e.deburr = to,
                    e.endsWith = eo,
                    e.escape = no,
                    e.escapeRegExp = ro,
                    e.every = Sr,
                    e.find = Mr,
                    e.findIndex = jn,
                    e.findKey = Di,
                    e.findLast = Cr,
                    e.findLastIndex = Vn,
                    e.findLastKey = Fi,
                    e.findWhere = Ar,
                    e.first = Gn,
                    e.has = Vi,
                    e.identity = bo,
                    e.includes = wr,
                    e.indexOf = Wn,
                    e.isArguments = pi,
                    e.isArray = Ga,
                    e.isBoolean = di,
                    e.isDate = fi,
                    e.isElement = mi,
                    e.isEmpty = gi,
                    e.isEqual = vi,
                    e.isError = yi,
                    e.isFinite = za,
                    e.isFunction = _i,
                    e.isMatch = bi,
                    e.isNaN = wi,
                    e.isNative = Si,
                    e.isNull = Ti,
                    e.isNumber = Mi,
                    e.isObject = xi,
                    e.isPlainObject = Ha,
                    e.isRegExp = Ci,
                    e.isString = Ai,
                    e.isTypedArray = Ei,
                    e.isUndefined = Li,
                    e.kebabCase = Ka,
                    e.last = Yn,
                    e.lastIndexOf = Kn,
                    e.max = Ba,
                    e.min = Na,
                    e.noConflict = To,
                    e.noop = Mo,
                    e.now = Va,
                    e.pad = io,
                    e.padLeft = oo,
                    e.padRight = ao,
                    e.parseInt = so,
                    e.random = Ji,
                    e.reduce = Or,
                    e.reduceRight = Dr,
                    e.repeat = lo,
                    e.result = Yi,
                    e.runInContext = S,
                    e.size = Br,
                    e.snakeCase = Qa,
                    e.some = Nr,
                    e.sortedIndex = er,
                    e.sortedLastIndex = nr,
                    e.startsWith = ho,
                    e.template = co,
                    e.trim = uo,
                    e.trimLeft = po,
                    e.trimRight = fo,
                    e.trunc = mo,
                    e.unescape = go,
                    e.uniqueId = Po,
                    e.words = vo,
                    e.all = Sr,
                    e.any = Nr,
                    e.contains = wr,
                    e.detect = Mr,
                    e.foldl = Or,
                    e.foldr = Dr,
                    e.head = Gn,
                    e.include = wr,
                    e.inject = Or,
                    So(e, function() {
                        var t = {};
                        return Ae(e, function(n, r) {
                            e.prototype[r] || (t[r] = n)
                        }),
                        t
                    }(), !1),
                    e.sample = Ur,
                    e.prototype.sample = function(t) {
                        return this.__chain__ || null != t ? this.thru(function(e) {
                            return Ur(e, t)
                        }) : Ur(this.value())
                    }
                    ,
                    e.VERSION = M,
                    Jt(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(t) {
                        e[t].placeholder = e
                    }),
                    Jt(["filter", "map", "takeWhile"], function(t, e) {
                        var n = e == N;
                        v.prototype[t] = function(t, r) {
                            var i = this.clone()
                              , o = i.filtered
                              , a = i.iteratees || (i.iteratees = []);
                            return i.filtered = o || n || e == V && i.dir < 0,
                            a.push({
                                iteratee: fn(t, r, 3),
                                type: e
                            }),
                            i
                        }
                    }),
                    Jt(["drop", "take"], function(t, e) {
                        var n = t + "Count"
                          , r = t + "While";
                        v.prototype[t] = function(r) {
                            r = null == r ? 1 : ma(+r || 0, 0);
                            var i = this.clone();
                            if (i.filtered) {
                                var o = i[n];
                                i[n] = e ? ga(o, r) : o + r
                            } else {
                                var a = i.views || (i.views = []);
                                a.push({
                                    size: r,
                                    type: t + (i.dir < 0 ? "Right" : "")
                                })
                            }
                            return i
                        }
                        ,
                        v.prototype[t + "Right"] = function(e) {
                            return this.reverse()[t](e).reverse()
                        }
                        ,
                        v.prototype[t + "RightWhile"] = function(t, e) {
                            return this.reverse()[r](t, e).reverse()
                        }
                    }),
                    Jt(["first", "last"], function(t, e) {
                        var n = "take" + (e ? "Right" : "");
                        v.prototype[t] = function() {
                            return this[n](1).value()[0]
                        }
                    }),
                    Jt(["initial", "rest"], function(t, e) {
                        var n = "drop" + (e ? "" : "Right");
                        v.prototype[t] = function() {
                            return this[n](1)
                        }
                    }),
                    Jt(["pluck", "where"], function(t, e) {
                        var n = e ? "filter" : "map"
                          , r = e ? wo : Co;
                        v.prototype[t] = function(t) {
                            return this[n](r(t))
                        }
                    }),
                    v.prototype.dropWhile = function(t, e) {
                        var n, r, i = this.dir < 0;
                        return t = fn(t, e, 3),
                        this.filter(function(e, o, a) {
                            return n = n && (i ? r > o : o > r),
                            r = o,
                            n || (n = !t(e, o, a))
                        })
                    }
                    ,
                    v.prototype.reject = function(t, e) {
                        return t = fn(t, e, 3),
                        this.filter(function(e, n, r) {
                            return !t(e, n, r)
                        })
                    }
                    ,
                    v.prototype.slice = function(t, e) {
                        t = null == t ? 0 : +t || 0;
                        var n = 0 > t ? this.takeRight(-t) : this.drop(t);
                        return "undefined" != typeof e && (e = +e || 0,
                        n = 0 > e ? n.dropRight(-e) : n.take(e - t)),
                        n
                    }
                    ,
                    Ae(v.prototype, function(t, r) {
                        var i = /^(?:first|last)$/.test(r);
                        e.prototype[r] = function() {
                            var o = this.__wrapped__
                              , a = arguments
                              , s = this.__chain__
                              , l = !!this.__actions__.length
                              , h = o instanceof v
                              , c = h && !l;
                            if (i && !s)
                                return c ? t.call(o) : e[r](this.value());
                            var u = function(t) {
                                var n = [t];
                                return ra.apply(n, a),
                                e[r].apply(e, n)
                            };
                            if (h || Ga(o)) {
                                var p = c ? o : new v(this)
                                  , d = t.apply(p, a);
                                if (!i && (l || d.actions)) {
                                    var f = d.actions || (d.actions = []);
                                    f.push({
                                        func: gr,
                                        args: [u],
                                        thisArg: e
                                    })
                                }
                                return new n(d,s)
                            }
                            return this.thru(u)
                        }
                    }),
                    Jt(["concat", "join", "pop", "push", "shift", "sort", "splice", "unshift"], function(t) {
                        var n = Vo[t]
                          , r = /^(?:push|sort|unshift)$/.test(t) ? "tap" : "thru"
                          , i = /^(?:join|pop|shift)$/.test(t);
                        e.prototype[t] = function() {
                            var t = arguments;
                            return i && !this.__chain__ ? n.apply(this.value(), t) : this[r](function(e) {
                                return n.apply(e, t)
                            })
                        }
                    }),
                    v.prototype.clone = Q,
                    v.prototype.reverse = tt,
                    v.prototype.value = nt,
                    e.prototype.chain = vr,
                    e.prototype.reverse = yr,
                    e.prototype.toString = _r,
                    e.prototype.toJSON = e.prototype.valueOf = e.prototype.value = xr,
                    e.prototype.collect = e.prototype.map,
                    e.prototype.head = e.prototype.first,
                    e.prototype.select = e.prototype.filter,
                    e.prototype.tail = e.prototype.rest,
                    e
                }
                var T, M = "3.0.0", C = 1, A = 2, E = 4, L = 8, P = 16, k = 32, R = 64, O = 128, D = 256, F = 30, U = "...", I = 150, B = 16, N = 0, j = 1, V = 2, G = "Expected a function", z = "__lodash_placeholder__", H = "[object Arguments]", W = "[object Array]", q = "[object Boolean]", X = "[object Date]", Y = "[object Error]", K = "[object Function]", Q = "[object Map]", Z = "[object Number]", J = "[object Object]", $ = "[object RegExp]", tt = "[object Set]", et = "[object String]", nt = "[object WeakMap]", rt = "[object ArrayBuffer]", it = "[object Float32Array]", ot = "[object Float64Array]", at = "[object Int8Array]", st = "[object Int16Array]", lt = "[object Int32Array]", ht = "[object Uint8Array]", ct = "[object Uint8ClampedArray]", ut = "[object Uint16Array]", pt = "[object Uint32Array]", dt = /\b__p \+= '';/g, ft = /\b(__p \+=) '' \+/g, mt = /(__e\(.*?\)|\b__t\)) \+\n'';/g, gt = /&(?:amp|lt|gt|quot|#39|#96);/g, vt = /[&<>"'`]/g, yt = RegExp(gt.source), _t = RegExp(vt.source), xt = /<%-([\s\S]+?)%>/g, bt = /<%([\s\S]+?)%>/g, wt = /<%=([\s\S]+?)%>/g, St = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, Tt = /\w*$/, Mt = /^\s*function[ \n\r\t]+\w/, Ct = /^0[xX]/, At = /^\[object .+?Constructor\]$/, Et = /[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g, Lt = /($^)/, Pt = /[.*+?^${}()|[\]\/\\]/g, kt = RegExp(Pt.source), Rt = /\bthis\b/, Ot = /['\n\r\u2028\u2029\\]/g, Dt = function() {
                    var t = "[A-Z\\xc0-\\xd6\\xd8-\\xde]"
                      , e = "[a-z\\xdf-\\xf6\\xf8-\\xff]+";
                    return RegExp(t + "{2,}(?=" + t + e + ")|" + t + "?" + e + "|" + t + "+|[0-9]+", "g")
                }(), Ft = " 	\x0B\f\ufeff\n\r\u2028\u2029", Ut = ["Array", "ArrayBuffer", "Date", "Error", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Math", "Number", "Object", "RegExp", "Set", "String", "_", "clearTimeout", "document", "isFinite", "parseInt", "setTimeout", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "WeakMap", "window", "WinRTError"], It = -1, Bt = {};
                Bt[it] = Bt[ot] = Bt[at] = Bt[st] = Bt[lt] = Bt[ht] = Bt[ct] = Bt[ut] = Bt[pt] = !0,
                Bt[H] = Bt[W] = Bt[rt] = Bt[q] = Bt[X] = Bt[Y] = Bt[K] = Bt[Q] = Bt[Z] = Bt[J] = Bt[$] = Bt[tt] = Bt[et] = Bt[nt] = !1;
                var Nt = {};
                Nt[H] = Nt[W] = Nt[rt] = Nt[q] = Nt[X] = Nt[it] = Nt[ot] = Nt[at] = Nt[st] = Nt[lt] = Nt[Z] = Nt[J] = Nt[$] = Nt[et] = Nt[ht] = Nt[ct] = Nt[ut] = Nt[pt] = !0,
                Nt[Y] = Nt[K] = Nt[Q] = Nt[tt] = Nt[nt] = !1;
                var jt = {
                    leading: !1,
                    maxWait: 0,
                    trailing: !1
                }
                  , Vt = {
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "A",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "a",
                    "": "C",
                    "": "c",
                    "": "D",
                    "": "d",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "E",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "e",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "I",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "i",
                    "": "N",
                    "": "n",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "O",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "o",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "U",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "u",
                    "": "Y",
                    "": "y",
                    "": "y",
                    "": "Ae",
                    "": "ae",
                    "": "Th",
                    "": "th",
                    "": "ss"
                }
                  , Gt = {
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#39;",
                    "`": "&#96;"
                }
                  , zt = {
                    "&amp;": "&",
                    "&lt;": "<",
                    "&gt;": ">",
                    "&quot;": '"',
                    "&#39;": "'",
                    "&#96;": "`"
                }
                  , Ht = {
                    "function": !0,
                    object: !0
                }
                  , Wt = {
                    "\\": "\\",
                    "'": "'",
                    "\n": "n",
                    "\r": "r",
                    "\u2028": "u2028",
                    "\u2029": "u2029"
                }
                  , qt = Ht[typeof window] && window !== (this && this.window) ? window : this
                  , Xt = Ht[typeof n] && n && !n.nodeType && n
                  , Yt = Ht[typeof e] && e && !e.nodeType && e
                  , Kt = Xt && Yt && "object" == typeof t && t;
                !Kt || Kt.global !== Kt && Kt.window !== Kt && Kt.self !== Kt || (qt = Kt);
                var Qt = Yt && Yt.exports === Xt && Xt
                  , Zt = S();
                "function" == typeof define && "object" == typeof define.amd && define.amd ? (qt._ = Zt,
                define(function() {
                    return Zt
                })) : Xt && Yt ? Qt ? (Yt.exports = Zt)._ = Zt : Xt._ = Zt : qt._ = Zt
            }
            ).call(this)
        }
        ).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
    }
    , {}],
    11: [function(t, e, n) {
        (function(t) {
            function n() {
                this._listeners = []
            }
            function r(t) {
                t.sort(function(t, e) {
                    return t = t.p,
                    e = e.p,
                    t > e ? 1 : t > e ? -1 : 0
                })
            }
            function i(t, e, n, i) {
                if (!t)
                    throw h;
                n = n || 0;
                for (var o, a, s, l = this._listeners, u = l.length; u--; )
                    if (o = l[u],
                    o.f === t && o.c === e)
                        return !1;
                "function" == typeof n && (a = n,
                n = i,
                s = 4),
                l.unshift({
                    f: t,
                    c: e,
                    p: n,
                    r: a || t,
                    a: c.call(arguments, s || 3),
                    j: 0
                }),
                r(l)
            }
            function o(e, n, r, o) {
                if (!e)
                    throw h;
                var a = this
                  , s = function() {
                    return a.remove.call(a, e, n),
                    e.apply(n, c.call(arguments, 0))
                };
                o = c.call(arguments, 0),
                1 === o.length && o.push(t),
                o.splice(2, 0, s),
                i.apply(a, o)
            }
            function a(t, e) {
                if (!t)
                    return this._listeners.length = 0,
                    !0;
                for (var n, r = this._listeners, i = r.length; i--; )
                    if (n = r[i],
                    n.f === t && (!e || n.c === e))
                        return n.j = 1,
                        r.splice(i, 1),
                        !0;
                return !1
            }
            function s(t) {
                t = c.call(arguments, 0);
                for (var e, n, r = this._listeners, i = r.length; i--; )
                    if (e = r[i],
                    e && !e.j && (e.j = 1,
                    e.r.apply(e.c, e.a.concat(t)) === !1)) {
                        n = e;
                        break
                    }
                for (r = this._listeners,
                i = r.length; i--; )
                    r[i].j = 0;
                return n
            }
            var l = n.prototype;
            l.add = i,
            l.addOnce = o,
            l.remove = a,
            l.dispatch = s;
            var h = "Callback function is missing!"
              , c = Array.prototype.slice;
            "undefined" != typeof e && (e.exports = n)
        })()
    }
    , {}],
    12: [function(t, e, n) {
        function r(t, e) {
            if (null == e)
                return t;
            for (var n = -1, r = e.length; ++n < r; )
                -1 === i(t, e[n]) && t.push(e[n]);
            return t
        }
        var i = t("./indexOf");
        e.exports = r
    }
    , {
        "./indexOf": 16
    }],
    13: [function(t, e, n) {
        function r(t, e) {
            return -1 !== i(t, e)
        }
        var i = t("./indexOf");
        e.exports = r
    }
    , {
        "./indexOf": 16
    }],
    14: [function(t, e, n) {
        function r(t) {
            var e = l(arguments, 1)
              , n = o(i(t), function(t) {
                return !a(e, function(e) {
                    return s(e, t)
                })
            });
            return n
        }
        var i = t("./unique")
          , o = t("./filter")
          , a = t("./some")
          , s = t("./contains")
          , l = t("./slice");
        e.exports = r
    }
    , {
        "./contains": 13,
        "./filter": 15,
        "./slice": 17,
        "./some": 18,
        "./unique": 19
    }],
    15: [function(t, e, n) {
        function r(t, e, n) {
            e = i(e, n);
            var r = [];
            if (null == t)
                return r;
            for (var o, a = -1, s = t.length; ++a < s; )
                o = t[a],
                e(o, a, t) && r.push(o);
            return r
        }
        var i = t("../function/makeIterator_");
        e.exports = r
    }
    , {
        "../function/makeIterator_": 22
    }],
    16: [function(t, e, n) {
        function r(t, e, n) {
            if (n = n || 0,
            null == t)
                return -1;
            for (var r = t.length, i = 0 > n ? r + n : n; r > i; ) {
                if (t[i] === e)
                    return i;
                i++
            }
            return -1
        }
        e.exports = r
    }
    , {}],
    17: [function(t, e, n) {
        function r(t, e, n) {
            var r = t.length;
            e = null == e ? 0 : 0 > e ? Math.max(r + e, 0) : Math.min(e, r),
            n = null == n ? r : 0 > n ? Math.max(r + n, 0) : Math.min(n, r);
            for (var i = []; n > e; )
                i.push(t[e++]);
            return i
        }
        e.exports = r
    }
    , {}],
    18: [function(t, e, n) {
        function r(t, e, n) {
            e = i(e, n);
            var r = !1;
            if (null == t)
                return r;
            for (var o = -1, a = t.length; ++o < a; )
                if (e(t[o], o, t)) {
                    r = !0;
                    break
                }
            return r
        }
        var i = t("../function/makeIterator_");
        e.exports = r
    }
    , {
        "../function/makeIterator_": 22
    }],
    19: [function(t, e, n) {
        function r(t, e) {
            return e = e || i,
            o(t, function(t, n, r) {
                for (var i = r.length; ++n < i; )
                    if (e(t, r[n]))
                        return !1;
                return !0
            })
        }
        function i(t, e) {
            return t === e
        }
        var o = t("./filter");
        e.exports = r
    }
    , {
        "./filter": 15
    }],
    20: [function(t, e, n) {
        function r(t, e, n) {
            var r = i(arguments, 2);
            return function() {
                return t.apply(e, r.concat(i(arguments)))
            }
        }
        var i = t("../array/slice");
        e.exports = r
    }
    , {
        "../array/slice": 17
    }],
    21: [function(t, e, n) {
        function r(t) {
            return t
        }
        e.exports = r
    }
    , {}],
    22: [function(t, e, n) {
        function r(t, e) {
            if (null == t)
                return i;
            switch (typeof t) {
            case "function":
                return "undefined" != typeof e ? function(n, r, i) {
                    return t.call(e, n, r, i)
                }
                : t;
            case "object":
                return function(e) {
                    return a(e, t)
                }
                ;
            case "string":
            case "number":
                return o(t)
            }
        }
        var i = t("./identity")
          , o = t("./prop")
          , a = t("../object/deepMatches");
        e.exports = r
    }
    , {
        "../object/deepMatches": 30,
        "./identity": 21,
        "./prop": 23
    }],
    23: [function(t, e, n) {
        function r(t) {
            return function(e) {
                return e[t]
            }
        }
        e.exports = r
    }
    , {}],
    24: [function(t, e, n) {
        var r = t("./isKind")
          , i = Array.isArray || function(t) {
            return r(t, "Array")
        }
        ;
        e.exports = i
    }
    , {
        "./isKind": 25
    }],
    25: [function(t, e, n) {
        function r(t, e) {
            return i(t) === e
        }
        var i = t("./kindOf");
        e.exports = r
    }
    , {
        "./kindOf": 27
    }],
    26: [function(t, e, n) {
        function r(t) {
            return !!t && "object" == typeof t && t.constructor === Object
        }
        e.exports = r
    }
    , {}],
    27: [function(t, e, n) {
        function r(t) {
            return null === t ? "Null" : t === i ? "Undefined" : o.exec(a.call(t))[1]
        }
        var i, o = /^\[object (.*)\]$/, a = Object.prototype.toString;
        e.exports = r
    }
    , {}],
    28: [function(t, e, n) {
        function r(t, e, n) {
            return e > t ? e : t > n ? n : t
        }
        e.exports = r
    }
    , {}],
    29: [function(t, e, n) {
        function r(t, e, n) {
            if (e > t || t > n)
                throw new RangeError("value (" + t + ") must be between " + e + " and " + n);
            return t === n ? 1 : (t - e) / (n - e)
        }
        e.exports = r
    }
    , {}],
    30: [function(t, e, n) {
        function r(t, e) {
            for (var n = -1, r = t.length; ++n < r; )
                if (a(t[n], e))
                    return !0;
            return !1
        }
        function i(t, e) {
            for (var n = -1, i = e.length; ++n < i; )
                if (!r(t, e[n]))
                    return !1;
            return !0
        }
        function o(t, e) {
            var n = !0;
            return s(e, function(e, r) {
                return a(t[r], e) ? void 0 : n = !1
            }),
            n
        }
        function a(t, e) {
            return t && "object" == typeof t ? l(t) && l(e) ? i(t, e) : o(t, e) : t === e
        }
        var s = t("./forOwn")
          , l = t("../lang/isArray");
        e.exports = a
    }
    , {
        "../lang/isArray": 24,
        "./forOwn": 33
    }],
    31: [function(t, e, n) {
        function r(t, e) {
            for (var n, r = 0, a = arguments.length; ++r < a; )
                n = arguments[r],
                n && o(n, i, t);
            return t
        }
        function i(t, e) {
            var n = this[e];
            a(t) && a(n) ? r(n, t) : this[e] = t
        }
        var o = t("./forOwn")
          , a = t("../lang/isPlainObject");
        e.exports = r
    }
    , {
        "../lang/isPlainObject": 26,
        "./forOwn": 33
    }],
    32: [function(t, e, n) {
        function r() {
            s = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"],
            a = !0;
            for (var t in {
                toString: null
            })
                a = !1
        }
        function i(t, e, n) {
            var i, h = 0;
            null == a && r();
            for (i in t)
                if (o(e, t, i, n) === !1)
                    break;
            if (a)
                for (var c = t.constructor, u = !!c && t === c.prototype; (i = s[h++]) && ("constructor" === i && (u || !l(t, i)) || t[i] === Object.prototype[i] || o(e, t, i, n) !== !1); )
                    ;
        }
        function o(t, e, n, r) {
            return t.call(r, e[n], n, e)
        }
        var a, s, l = t("./hasOwn");
        e.exports = i
    }
    , {
        "./hasOwn": 34
    }],
    33: [function(t, e, n) {
        function r(t, e, n) {
            o(t, function(r, o) {
                return i(t, o) ? e.call(n, t[o], o, t) : void 0
            })
        }
        var i = t("./hasOwn")
          , o = t("./forIn");
        e.exports = r
    }
    , {
        "./forIn": 32,
        "./hasOwn": 34
    }],
    34: [function(t, e, n) {
        function r(t, e) {
            return Object.prototype.hasOwnProperty.call(t, e)
        }
        e.exports = r
    }
    , {}],
    35: [function(t, e, n) {
        function r(t, e) {
            for (var n, r = 0, a = arguments.length; ++r < a; )
                n = arguments[r],
                null != n && o(n, i, t);
            return t
        }
        function i(t, e) {
            this[e] = t
        }
        var o = t("./forOwn");
        e.exports = r
    }
    , {
        "./forOwn": 33
    }],
    36: [function(t, e, n) {
        var r = t("./lib/qrcode.js");
        e.exports = {
            typeNumber: 4,
            errorCorrectLevel: "L",
            toBase64: function(t, e) {
                var n = r(this.typeNumber, this.errorCorrectLevel);
                n.addData(t),
                n.make();
                var i = n.createImgBase64(e);
                return i
            },
            toDataURL: function(t, e) {
                var n = this.toBase64(t, e)
                  , r = "data:image/gif;base64," + n;
                return r
            }
        }
    }
    , {
        "./lib/qrcode.js": 37
    }],
    37: [function(t, e, n) {
        var r = function() {
            function t(e, n) {
                if ("undefined" == typeof e.length)
                    throw new Error(e.length + "/" + n);
                var r = function() {
                    for (var t = 0; t < e.length && 0 == e[t]; )
                        t += 1;
                    for (var r = new Array(e.length - t + n), i = 0; i < e.length - t; i += 1)
                        r[i] = e[i + t];
                    return r
                }()
                  , i = {};
                return i.getAt = function(t) {
                    return r[t]
                }
                ,
                i.getLength = function() {
                    return r.length
                }
                ,
                i.multiply = function(e) {
                    for (var n = new Array(i.getLength() + e.getLength() - 1), r = 0; r < i.getLength(); r += 1)
                        for (var o = 0; o < e.getLength(); o += 1)
                            n[r + o] ^= a.gexp(a.glog(i.getAt(r)) + a.glog(e.getAt(o)));
                    return t(n, 0)
                }
                ,
                i.mod = function(e) {
                    if (i.getLength() - e.getLength() < 0)
                        return i;
                    for (var n = a.glog(i.getAt(0)) - a.glog(e.getAt(0)), r = new Array(i.getLength()), o = 0; o < i.getLength(); o += 1)
                        r[o] = i.getAt(o);
                    for (var o = 0; o < e.getLength(); o += 1)
                        r[o] ^= a.gexp(a.glog(e.getAt(o)) + n);
                    return t(r, 0).mod(e)
                }
                ,
                i
            }
            var e = function(e, n) {
                var i = 236
                  , a = 17
                  , c = e
                  , u = r[n]
                  , p = null
                  , d = 0
                  , g = null
                  , v = new Array
                  , y = {}
                  , _ = function(t, e) {
                    d = 4 * c + 17,
                    p = function(t) {
                        for (var e = new Array(t), n = 0; t > n; n += 1) {
                            e[n] = new Array(t);
                            for (var r = 0; t > r; r += 1)
                                e[n][r] = null
                        }
                        return e
                    }(d),
                    x(0, 0),
                    x(d - 7, 0),
                    x(0, d - 7),
                    S(),
                    w(),
                    M(t, e),
                    c >= 7 && T(t),
                    null == g && (g = E(c, u, v)),
                    C(g, e)
                }
                  , x = function(t, e) {
                    for (var n = -1; 7 >= n; n += 1)
                        if (!(-1 >= t + n || t + n >= d))
                            for (var r = -1; 7 >= r; r += 1)
                                -1 >= e + r || e + r >= d || (n >= 0 && 6 >= n && (0 == r || 6 == r) || r >= 0 && 6 >= r && (0 == n || 6 == n) || n >= 2 && 4 >= n && r >= 2 && 4 >= r ? p[t + n][e + r] = !0 : p[t + n][e + r] = !1)
                }
                  , b = function() {
                    for (var t = 0, e = 0, n = 0; 8 > n; n += 1) {
                        _(!0, n);
                        var r = o.getLostPoint(y);
                        (0 == n || t > r) && (t = r,
                        e = n)
                    }
                    return e
                }
                  , w = function() {
                    for (var t = 8; d - 8 > t; t += 1)
                        null == p[t][6] && (p[t][6] = t % 2 == 0);
                    for (var e = 8; d - 8 > e; e += 1)
                        null == p[6][e] && (p[6][e] = e % 2 == 0)
                }
                  , S = function() {
                    for (var t = o.getPatternPosition(c), e = 0; e < t.length; e += 1)
                        for (var n = 0; n < t.length; n += 1) {
                            var r = t[e]
                              , i = t[n];
                            if (null == p[r][i])
                                for (var a = -2; 2 >= a; a += 1)
                                    for (var s = -2; 2 >= s; s += 1)
                                        -2 == a || 2 == a || -2 == s || 2 == s || 0 == a && 0 == s ? p[r + a][i + s] = !0 : p[r + a][i + s] = !1
                        }
                }
                  , T = function(t) {
                    for (var e = o.getBCHTypeNumber(c), n = 0; 18 > n; n += 1) {
                        var r = !t && 1 == (e >> n & 1);
                        p[Math.floor(n / 3)][n % 3 + d - 8 - 3] = r
                    }
                    for (var n = 0; 18 > n; n += 1) {
                        var r = !t && 1 == (e >> n & 1);
                        p[n % 3 + d - 8 - 3][Math.floor(n / 3)] = r
                    }
                }
                  , M = function(t, e) {
                    for (var n = u << 3 | e, r = o.getBCHTypeInfo(n), i = 0; 15 > i; i += 1) {
                        var a = !t && 1 == (r >> i & 1);
                        6 > i ? p[i][8] = a : 8 > i ? p[i + 1][8] = a : p[d - 15 + i][8] = a
                    }
                    for (var i = 0; 15 > i; i += 1) {
                        var a = !t && 1 == (r >> i & 1);
                        8 > i ? p[8][d - i - 1] = a : 9 > i ? p[8][15 - i - 1 + 1] = a : p[8][15 - i - 1] = a
                    }
                    p[d - 8][8] = !t
                }
                  , C = function(t, e) {
                    for (var n = -1, r = d - 1, i = 7, a = 0, s = o.getMaskFunction(e), l = d - 1; l > 0; l -= 2)
                        for (6 == l && (l -= 1); ; ) {
                            for (var h = 0; 2 > h; h += 1)
                                if (null == p[r][l - h]) {
                                    var c = !1;
                                    a < t.length && (c = 1 == (t[a] >>> i & 1));
                                    var u = s(r, l - h);
                                    u && (c = !c),
                                    p[r][l - h] = c,
                                    i -= 1,
                                    -1 == i && (a += 1,
                                    i = 7)
                                }
                            if (r += n,
                            0 > r || r >= d) {
                                r -= n,
                                n = -n;
                                break
                            }
                        }
                }
                  , A = function(e, n) {
                    for (var r = 0, i = 0, a = 0, s = new Array(n.length), l = new Array(n.length), h = 0; h < n.length; h += 1) {
                        var c = n[h].dataCount
                          , u = n[h].totalCount - c;
                        i = Math.max(i, c),
                        a = Math.max(a, u),
                        s[h] = new Array(c);
                        for (var p = 0; p < s[h].length; p += 1)
                            s[h][p] = 255 & e.getBuffer()[p + r];
                        r += c;
                        var d = o.getErrorCorrectPolynomial(u)
                          , f = t(s[h], d.getLength() - 1)
                          , m = f.mod(d);
                        l[h] = new Array(d.getLength() - 1);
                        for (var p = 0; p < l[h].length; p += 1) {
                            var g = p + m.getLength() - l[h].length;
                            l[h][p] = g >= 0 ? m.getAt(g) : 0
                        }
                    }
                    for (var v = 0, p = 0; p < n.length; p += 1)
                        v += n[p].totalCount;
                    for (var y = new Array(v), _ = 0, p = 0; i > p; p += 1)
                        for (var h = 0; h < n.length; h += 1)
                            p < s[h].length && (y[_] = s[h][p],
                            _ += 1);
                    for (var p = 0; a > p; p += 1)
                        for (var h = 0; h < n.length; h += 1)
                            p < l[h].length && (y[_] = l[h][p],
                            _ += 1);
                    return y
                }
                  , E = function(t, e, n) {
                    for (var r = s.getRSBlocks(t, e), h = l(), c = 0; c < n.length; c += 1) {
                        var u = n[c];
                        h.put(u.getMode(), 4),
                        h.put(u.getLength(), o.getLengthInBits(u.getMode(), t)),
                        u.write(h)
                    }
                    for (var p = 0, c = 0; c < r.length; c += 1)
                        p += r[c].dataCount;
                    if (h.getLengthInBits() > 8 * p)
                        throw new Error("code length overflow. (" + h.getLengthInBits() + ">" + 8 * p + ")");
                    for (h.getLengthInBits() + 4 <= 8 * p && h.put(0, 4); h.getLengthInBits() % 8 != 0; )
                        h.putBit(!1);
                    for (; ; ) {
                        if (h.getLengthInBits() >= 8 * p)
                            break;
                        if (h.put(i, 8),
                        h.getLengthInBits() >= 8 * p)
                            break;
                        h.put(a, 8)
                    }
                    return A(h, r)
                };
                return y.addData = function(t) {
                    var e = h(t);
                    v.push(e),
                    g = null
                }
                ,
                y.isDark = function(t, e) {
                    if (0 > t || t >= d || 0 > e || e >= d)
                        throw new Error(t + "," + e);
                    return p[t][e]
                }
                ,
                y.getModuleCount = function() {
                    return d
                }
                ,
                y.make = function() {
                    _(!1, b())
                }
                ,
                y.createTableTag = function(t, e) {
                    t = t || 2,
                    e = "undefined" == typeof e ? 4 * t : e;
                    var n = "";
                    n += '<table style="',
                    n += " border-width: 0px; border-style: none;",
                    n += " border-collapse: collapse;",
                    n += " padding: 0px; margin: " + e + "px;",
                    n += '">',
                    n += "<tbody>";
                    for (var r = 0; r < y.getModuleCount(); r += 1) {
                        n += "<tr>";
                        for (var i = 0; i < y.getModuleCount(); i += 1)
                            n += '<td style="',
                            n += " border-width: 0px; border-style: none;",
                            n += " border-collapse: collapse;",
                            n += " padding: 0px; margin: 0px;",
                            n += " width: " + t + "px;",
                            n += " height: " + t + "px;",
                            n += " background-color: ",
                            n += y.isDark(r, i) ? "#000000" : "#ffffff",
                            n += ";",
                            n += '"/>';
                        n += "</tr>"
                    }
                    return n += "</tbody>",
                    n += "</table>"
                }
                ,
                y.createImgTag = function(t, e) {
                    t = t || 2,
                    e = "undefined" == typeof e ? 4 * t : e;
                    var n = y.getModuleCount() * t + 2 * e
                      , r = e
                      , i = n - e;
                    return f(n, n, function(e, n) {
                        if (e >= r && i > e && n >= r && i > n) {
                            var o = Math.floor((e - r) / t)
                              , a = Math.floor((n - r) / t);
                            return y.isDark(a, o) ? 0 : 1
                        }
                        return 1
                    })
                }
                ,
                y.createImgBase64 = function(t, e) {
                    t = t || 2,
                    e = "undefined" == typeof e ? 4 * t : e;
                    var n = y.getModuleCount() * t + 2 * e
                      , r = e
                      , i = n - e;
                    return m(n, n, function(e, n) {
                        if (e >= r && i > e && n >= r && i > n) {
                            var o = Math.floor((e - r) / t)
                              , a = Math.floor((n - r) / t);
                            return y.isDark(a, o) ? 0 : 1
                        }
                        return 1
                    })
                }
                ,
                y
            };
            e.stringToBytes = function(t) {
                for (var e = new Array, n = 0; n < t.length; n += 1) {
                    var r = t.charCodeAt(n);
                    e.push(255 & r)
                }
                return e
            }
            ,
            e.createStringToBytes = function(t, e) {
                var n = function() {
                    for (var n = p(t), r = function() {
                        var t = n.read();
                        if (-1 == t)
                            throw new Error;
                        return t
                    }, i = 0, o = {}; ; ) {
                        var a = n.read();
                        if (-1 == a)
                            break;
                        var s = r()
                          , l = r()
                          , h = r()
                          , c = String.fromCharCode(a << 8 | s)
                          , u = l << 8 | h;
                        o[c] = u,
                        i += 1
                    }
                    if (i != e)
                        throw new Error(i + " != " + e);
                    return o
                }()
                  , r = "?".charCodeAt(0);
                return function(t) {
                    for (var e = new Array, i = 0; i < t.length; i += 1) {
                        var o = t.charCodeAt(i);
                        if (128 > o)
                            e.push(o);
                        else {
                            var a = n[t.charAt(i)];
                            "number" == typeof a ? (255 & a) == a ? e.push(a) : (e.push(a >>> 8),
                            e.push(255 & a)) : e.push(r)
                        }
                    }
                    return e
                }
            }
            ;
            var n = {
                MODE_NUMBER: 1,
                MODE_ALPHA_NUM: 2,
                MODE_8BIT_BYTE: 4,
                MODE_KANJI: 8
            }
              , r = {
                L: 1,
                M: 0,
                Q: 3,
                H: 2
            }
              , i = {
                PATTERN000: 0,
                PATTERN001: 1,
                PATTERN010: 2,
                PATTERN011: 3,
                PATTERN100: 4,
                PATTERN101: 5,
                PATTERN110: 6,
                PATTERN111: 7
            }
              , o = function() {
                var e = [[], [6, 18], [6, 22], [6, 26], [6, 30], [6, 34], [6, 22, 38], [6, 24, 42], [6, 26, 46], [6, 28, 50], [6, 30, 54], [6, 32, 58], [6, 34, 62], [6, 26, 46, 66], [6, 26, 48, 70], [6, 26, 50, 74], [6, 30, 54, 78], [6, 30, 56, 82], [6, 30, 58, 86], [6, 34, 62, 90], [6, 28, 50, 72, 94], [6, 26, 50, 74, 98], [6, 30, 54, 78, 102], [6, 28, 54, 80, 106], [6, 32, 58, 84, 110], [6, 30, 58, 86, 114], [6, 34, 62, 90, 118], [6, 26, 50, 74, 98, 122], [6, 30, 54, 78, 102, 126], [6, 26, 52, 78, 104, 130], [6, 30, 56, 82, 108, 134], [6, 34, 60, 86, 112, 138], [6, 30, 58, 86, 114, 142], [6, 34, 62, 90, 118, 146], [6, 30, 54, 78, 102, 126, 150], [6, 24, 50, 76, 102, 128, 154], [6, 28, 54, 80, 106, 132, 158], [6, 32, 58, 84, 110, 136, 162], [6, 26, 54, 82, 110, 138, 166], [6, 30, 58, 86, 114, 142, 170]]
                  , r = 1335
                  , o = 7973
                  , s = 21522
                  , l = {}
                  , h = function(t) {
                    for (var e = 0; 0 != t; )
                        e += 1,
                        t >>>= 1;
                    return e
                };
                return l.getBCHTypeInfo = function(t) {
                    for (var e = t << 10; h(e) - h(r) >= 0; )
                        e ^= r << h(e) - h(r);
                    return (t << 10 | e) ^ s
                }
                ,
                l.getBCHTypeNumber = function(t) {
                    for (var e = t << 12; h(e) - h(o) >= 0; )
                        e ^= o << h(e) - h(o);
                    return t << 12 | e
                }
                ,
                l.getPatternPosition = function(t) {
                    return e[t - 1]
                }
                ,
                l.getMaskFunction = function(t) {
                    switch (t) {
                    case i.PATTERN000:
                        return function(t, e) {
                            return (t + e) % 2 == 0
                        }
                        ;
                    case i.PATTERN001:
                        return function(t, e) {
                            return t % 2 == 0
                        }
                        ;
                    case i.PATTERN010:
                        return function(t, e) {
                            return e % 3 == 0
                        }
                        ;
                    case i.PATTERN011:
                        return function(t, e) {
                            return (t + e) % 3 == 0
                        }
                        ;
                    case i.PATTERN100:
                        return function(t, e) {
                            return (Math.floor(t / 2) + Math.floor(e / 3)) % 2 == 0
                        }
                        ;
                    case i.PATTERN101:
                        return function(t, e) {
                            return t * e % 2 + t * e % 3 == 0
                        }
                        ;
                    case i.PATTERN110:
                        return function(t, e) {
                            return (t * e % 2 + t * e % 3) % 2 == 0
                        }
                        ;
                    case i.PATTERN111:
                        return function(t, e) {
                            return (t * e % 3 + (t + e) % 2) % 2 == 0
                        }
                        ;
                    default:
                        throw new Error("bad maskPattern:" + t)
                    }
                }
                ,
                l.getErrorCorrectPolynomial = function(e) {
                    for (var n = t([1], 0), r = 0; e > r; r += 1)
                        n = n.multiply(t([1, a.gexp(r)], 0));
                    return n
                }
                ,
                l.getLengthInBits = function(t, e) {
                    if (e >= 1 && 10 > e)
                        switch (t) {
                        case n.MODE_NUMBER:
                            return 10;
                        case n.MODE_ALPHA_NUM:
                            return 9;
                        case n.MODE_8BIT_BYTE:
                            return 8;
                        case n.MODE_KANJI:
                            return 8;
                        default:
                            throw new Error("mode:" + t)
                        }
                    else if (27 > e)
                        switch (t) {
                        case n.MODE_NUMBER:
                            return 12;
                        case n.MODE_ALPHA_NUM:
                            return 11;
                        case n.MODE_8BIT_BYTE:
                            return 16;
                        case n.MODE_KANJI:
                            return 10;
                        default:
                            throw new Error("mode:" + t)
                        }
                    else {
                        if (!(41 > e))
                            throw new Error("type:" + e);
                        switch (t) {
                        case n.MODE_NUMBER:
                            return 14;
                        case n.MODE_ALPHA_NUM:
                            return 13;
                        case n.MODE_8BIT_BYTE:
                            return 16;
                        case n.MODE_KANJI:
                            return 12;
                        default:
                            throw new Error("mode:" + t)
                        }
                    }
                }
                ,
                l.getLostPoint = function(t) {
                    for (var e = t.getModuleCount(), n = 0, r = 0; e > r; r += 1)
                        for (var i = 0; e > i; i += 1) {
                            for (var o = 0, a = t.isDark(r, i), s = -1; 1 >= s; s += 1)
                                if (!(0 > r + s || r + s >= e))
                                    for (var l = -1; 1 >= l; l += 1)
                                        0 > i + l || i + l >= e || (0 != s || 0 != l) && a == t.isDark(r + s, i + l) && (o += 1);
                            o > 5 && (n += 3 + o - 5)
                        }
                    for (var r = 0; e - 1 > r; r += 1)
                        for (var i = 0; e - 1 > i; i += 1) {
                            var h = 0;
                            t.isDark(r, i) && (h += 1),
                            t.isDark(r + 1, i) && (h += 1),
                            t.isDark(r, i + 1) && (h += 1),
                            t.isDark(r + 1, i + 1) && (h += 1),
                            (0 == h || 4 == h) && (n += 3)
                        }
                    for (var r = 0; e > r; r += 1)
                        for (var i = 0; e - 6 > i; i += 1)
                            t.isDark(r, i) && !t.isDark(r, i + 1) && t.isDark(r, i + 2) && t.isDark(r, i + 3) && t.isDark(r, i + 4) && !t.isDark(r, i + 5) && t.isDark(r, i + 6) && (n += 40);
                    for (var i = 0; e > i; i += 1)
                        for (var r = 0; e - 6 > r; r += 1)
                            t.isDark(r, i) && !t.isDark(r + 1, i) && t.isDark(r + 2, i) && t.isDark(r + 3, i) && t.isDark(r + 4, i) && !t.isDark(r + 5, i) && t.isDark(r + 6, i) && (n += 40);
                    for (var c = 0, i = 0; e > i; i += 1)
                        for (var r = 0; e > r; r += 1)
                            t.isDark(r, i) && (c += 1);
                    var u = Math.abs(100 * c / e / e - 50) / 5;
                    return n += 10 * u
                }
                ,
                l
            }()
              , a = function() {
                for (var t = new Array(256), e = new Array(256), n = 0; 8 > n; n += 1)
                    t[n] = 1 << n;
                for (var n = 8; 256 > n; n += 1)
                    t[n] = t[n - 4] ^ t[n - 5] ^ t[n - 6] ^ t[n - 8];
                for (var n = 0; 255 > n; n += 1)
                    e[t[n]] = n;
                var r = {};
                return r.glog = function(t) {
                    if (1 > t)
                        throw new Error("glog(" + t + ")");
                    return e[t]
                }
                ,
                r.gexp = function(e) {
                    for (; 0 > e; )
                        e += 255;
                    for (; e >= 256; )
                        e -= 255;
                    return t[e]
                }
                ,
                r
            }()
              , s = function() {
                var t = [[1, 26, 19], [1, 26, 16], [1, 26, 13], [1, 26, 9], [1, 44, 34], [1, 44, 28], [1, 44, 22], [1, 44, 16], [1, 70, 55], [1, 70, 44], [2, 35, 17], [2, 35, 13], [1, 100, 80], [2, 50, 32], [2, 50, 24], [4, 25, 9], [1, 134, 108], [2, 67, 43], [2, 33, 15, 2, 34, 16], [2, 33, 11, 2, 34, 12], [2, 86, 68], [4, 43, 27], [4, 43, 19], [4, 43, 15], [2, 98, 78], [4, 49, 31], [2, 32, 14, 4, 33, 15], [4, 39, 13, 1, 40, 14], [2, 121, 97], [2, 60, 38, 2, 61, 39], [4, 40, 18, 2, 41, 19], [4, 40, 14, 2, 41, 15], [2, 146, 116], [3, 58, 36, 2, 59, 37], [4, 36, 16, 4, 37, 17], [4, 36, 12, 4, 37, 13], [2, 86, 68, 2, 87, 69], [4, 69, 43, 1, 70, 44], [6, 43, 19, 2, 44, 20], [6, 43, 15, 2, 44, 16]]
                  , e = function(t, e) {
                    var n = {};
                    return n.totalCount = t,
                    n.dataCount = e,
                    n
                }
                  , n = {}
                  , i = function(e, n) {
                    switch (n) {
                    case r.L:
                        return t[4 * (e - 1) + 0];
                    case r.M:
                        return t[4 * (e - 1) + 1];
                    case r.Q:
                        return t[4 * (e - 1) + 2];
                    case r.H:
                        return t[4 * (e - 1) + 3];
                    default:
                        return
                    }
                };
                return n.getRSBlocks = function(t, n) {
                    var r = i(t, n);
                    if ("undefined" == typeof r)
                        throw new Error("bad rs block @ typeNumber:" + t + "/errorCorrectLevel:" + n);
                    for (var o = r.length / 3, a = new Array, s = 0; o > s; s += 1)
                        for (var l = r[3 * s + 0], h = r[3 * s + 1], c = r[3 * s + 2], u = 0; l > u; u += 1)
                            a.push(e(h, c));
                    return a
                }
                ,
                n
            }()
              , l = function() {
                var t = new Array
                  , e = 0
                  , n = {};
                return n.getBuffer = function() {
                    return t
                }
                ,
                n.getAt = function(e) {
                    var n = Math.floor(e / 8);
                    return 1 == (t[n] >>> 7 - e % 8 & 1)
                }
                ,
                n.put = function(t, e) {
                    for (var r = 0; e > r; r += 1)
                        n.putBit(1 == (t >>> e - r - 1 & 1))
                }
                ,
                n.getLengthInBits = function() {
                    return e
                }
                ,
                n.putBit = function(n) {
                    var r = Math.floor(e / 8);
                    t.length <= r && t.push(0),
                    n && (t[r] |= 128 >>> e % 8),
                    e += 1
                }
                ,
                n
            }
              , h = function(t) {
                var r = n.MODE_8BIT_BYTE
                  , i = e.stringToBytes(t)
                  , o = {};
                return o.getMode = function() {
                    return r
                }
                ,
                o.getLength = function(t) {
                    return i.length
                }
                ,
                o.write = function(t) {
                    for (var e = 0; e < i.length; e += 1)
                        t.put(i[e], 8)
                }
                ,
                o
            }
              , c = function() {
                var t = new Array
                  , e = {};
                return e.writeByte = function(e) {
                    t.push(255 & e)
                }
                ,
                e.writeShort = function(t) {
                    e.writeByte(t),
                    e.writeByte(t >>> 8)
                }
                ,
                e.writeBytes = function(t, n, r) {
                    n = n || 0,
                    r = r || t.length;
                    for (var i = 0; r > i; i += 1)
                        e.writeByte(t[i + n])
                }
                ,
                e.writeString = function(t) {
                    for (var n = 0; n < t.length; n += 1)
                        e.writeByte(t.charCodeAt(n))
                }
                ,
                e.toByteArray = function() {
                    return t
                }
                ,
                e.toString = function() {
                    var e = "";
                    e += "[";
                    for (var n = 0; n < t.length; n += 1)
                        n > 0 && (e += ","),
                        e += t[n];
                    return e += "]"
                }
                ,
                e
            }
              , u = function() {
                var t = 0
                  , e = 0
                  , n = 0
                  , r = ""
                  , i = {}
                  , o = function(t) {
                    r += String.fromCharCode(a(63 & t))
                }
                  , a = function(t) {
                    if (0 > t)
                        ;
                    else {
                        if (26 > t)
                            return 65 + t;
                        if (52 > t)
                            return 97 + (t - 26);
                        if (62 > t)
                            return 48 + (t - 52);
                        if (62 == t)
                            return 43;
                        if (63 == t)
                            return 47
                    }
                    throw new Error("n:" + t)
                };
                return i.writeByte = function(r) {
                    for (t = t << 8 | 255 & r,
                    e += 8,
                    n += 1; e >= 6; )
                        o(t >>> e - 6),
                        e -= 6
                }
                ,
                i.flush = function() {
                    if (e > 0 && (o(t << 6 - e),
                    t = 0,
                    e = 0),
                    n % 3 != 0)
                        for (var i = 3 - n % 3, a = 0; i > a; a += 1)
                            r += "="
                }
                ,
                i.toString = function() {
                    return r
                }
                ,
                i
            }
              , p = function(t) {
                var e = t
                  , n = 0
                  , r = 0
                  , i = 0
                  , o = {};
                o.read = function() {
                    for (; 8 > i; ) {
                        if (n >= e.length) {
                            if (0 == i)
                                return -1;
                            throw new Error("unexpected end of file./" + i)
                        }
                        var t = e.charAt(n);
                        if (n += 1,
                        "=" == t)
                            return i = 0,
                            -1;
                        t.match(/^\s$/) || (r = r << 6 | a(t.charCodeAt(0)),
                        i += 6)
                    }
                    var o = r >>> i - 8 & 255;
                    return i -= 8,
                    o
                }
                ;
                var a = function(t) {
                    if (t >= 65 && 90 >= t)
                        return t - 65;
                    if (t >= 97 && 122 >= t)
                        return t - 97 + 26;
                    if (t >= 48 && 57 >= t)
                        return t - 48 + 52;
                    if (43 == t)
                        return 62;
                    if (47 == t)
                        return 63;
                    throw new Error("c:" + t)
                };
                return o
            }
              , d = function(t, e) {
                var n = t
                  , r = e
                  , i = new Array(t * e)
                  , o = {};
                o.setPixel = function(t, e, r) {
                    i[e * n + t] = r
                }
                ,
                o.write = function(t) {
                    t.writeString("GIF87a"),
                    t.writeShort(n),
                    t.writeShort(r),
                    t.writeByte(128),
                    t.writeByte(0),
                    t.writeByte(0),
                    t.writeByte(0),
                    t.writeByte(0),
                    t.writeByte(0),
                    t.writeByte(255),
                    t.writeByte(255),
                    t.writeByte(255),
                    t.writeString(","),
                    t.writeShort(0),
                    t.writeShort(0),
                    t.writeShort(n),
                    t.writeShort(r),
                    t.writeByte(0);
                    var e = 2
                      , i = s(e);
                    t.writeByte(e);
                    for (var o = 0; i.length - o > 255; )
                        t.writeByte(255),
                        t.writeBytes(i, o, 255),
                        o += 255;
                    t.writeByte(i.length - o),
                    t.writeBytes(i, o, i.length - o),
                    t.writeByte(0),
                    t.writeString(";")
                }
                ;
                var a = function(t) {
                    var e = t
                      , n = 0
                      , r = 0
                      , i = {};
                    return i.write = function(t, i) {
                        if (t >>> i != 0)
                            throw new Error("length over");
                        for (; n + i >= 8; )
                            e.writeByte(255 & (t << n | r)),
                            i -= 8 - n,
                            t >>>= 8 - n,
                            r = 0,
                            n = 0;
                        r = t << n | r,
                        n += i
                    }
                    ,
                    i.flush = function() {
                        n > 0 && e.writeByte(r)
                    }
                    ,
                    i
                }
                  , s = function(t) {
                    for (var e = 1 << t, n = (1 << t) + 1, r = t + 1, o = l(), s = 0; e > s; s += 1)
                        o.add(String.fromCharCode(s));
                    o.add(String.fromCharCode(e)),
                    o.add(String.fromCharCode(n));
                    var h = c()
                      , u = a(h);
                    u.write(e, r);
                    var p = 0
                      , d = String.fromCharCode(i[p]);
                    for (p += 1; p < i.length; ) {
                        var f = String.fromCharCode(i[p]);
                        p += 1,
                        o.contains(d + f) ? d += f : (u.write(o.indexOf(d), r),
                        o.size() < 4095 && (o.size() == 1 << r && (r += 1),
                        o.add(d + f)),
                        d = f)
                    }
                    return u.write(o.indexOf(d), r),
                    u.write(n, r),
                    u.flush(),
                    h.toByteArray()
                }
                  , l = function() {
                    var t = {}
                      , e = 0
                      , n = {};
                    return n.add = function(r) {
                        if (n.contains(r))
                            throw new Error("dup key:" + r);
                        t[r] = e,
                        e += 1
                    }
                    ,
                    n.size = function() {
                        return e
                    }
                    ,
                    n.indexOf = function(e) {
                        return t[e]
                    }
                    ,
                    n.contains = function(e) {
                        return "undefined" != typeof t[e]
                    }
                    ,
                    n
                };
                return o
            }
              , f = function(t, e, n, r) {
                for (var i = d(t, e), o = 0; e > o; o += 1)
                    for (var a = 0; t > a; a += 1)
                        i.setPixel(a, o, n(a, o));
                var s = c();
                i.write(s);
                for (var l = u(), h = s.toByteArray(), p = 0; p < h.length; p += 1)
                    l.writeByte(h[p]);
                l.flush();
                var f = "";
                return f += "<img",
                f += ' src="',
                f += "data:image/gif;base64,",
                f += l,
                f += '"',
                f += ' width="',
                f += t,
                f += '"',
                f += ' height="',
                f += e,
                f += '"',
                r && (f += ' alt="',
                f += r,
                f += '"'),
                f += "/>"
            }
              , m = function(t, e, n) {
                for (var r = d(t, e), i = 0; e > i; i += 1)
                    for (var o = 0; t > o; o += 1)
                        r.setPixel(o, i, n(o, i));
                var a = c();
                r.write(a);
                for (var s = u(), l = a.toByteArray(), h = 0; h < l.length; h += 1)
                    s.writeByte(l[h]);
                return s.flush(),
                s.toString()
            };
            return e
        }();
        e.exports = r
    }
    , {}],
    38: [function(t, e, n) {
        e.exports = t("./src/quickLoader"),
        t("./src/types/JSONPItem"),
        t("./src/types/JSONItem"),
        t("./src/types/TextItem"),
        t("./src/types/AudioItem"),
        t("./src/types/VideoItem"),
        t("./src/types/AnyItem"),
        t("./src/types/ImageItem")
    }
    , {
        "./src/quickLoader": 39,
        "./src/types/AnyItem": 41,
        "./src/types/AudioItem": 42,
        "./src/types/ImageItem": 43,
        "./src/types/JSONItem": 44,
        "./src/types/JSONPItem": 45,
        "./src/types/TextItem": 46,
        "./src/types/VideoItem": 47
    }],
    39: [function(t, e, n) {
        function r() {
            this.isLoading = !1,
            this.totalWeight = 0,
            this.loadedWeight = 0,
            this.itemUrls = {},
            this.itemList = [],
            this.loadingSignal = new x
        }
        function i(t, e) {
            var n, r, i, o, a, s = d(t, e);
            for (n = 0,
            i = s.length; i > n; n++)
                for (a = s[n],
                r = 0,
                o = a.items.length; o > r; r++)
                    this.add(a.items[r], {
                        type: a.type
                    });
            return s
        }
        function o(t, e) {
            var n = S[t];
            return n || (n = u(t, e && e.type ? e.type : f(t).type, e)),
            e && e.onLoad && n.onLoaded.addOnce(e.onLoad),
            this.itemUrls[t] || (this.itemUrls[t] = n,
            this.itemList.push(n),
            this.totalWeight += n.weight),
            n
        }
        function a(t, e) {
            var n = S[t];
            return n || (n = u(t, e && e.type ? e.type : f(t).type, e)),
            e && e.onLoad && n.onLoaded.addOnce(e.onLoad),
            T[t] ? n.dispatch() : n.isStartLoaded || n.load(),
            n
        }
        function s(t) {
            t && this.loadingSignal.add(t),
            this.isLoading = !0;
            var e = this.itemList.length;
            if (e)
                for (var n, r = this.itemList.splice(0, this.itemList.length), i = 0; e > i; i++)
                    n = r[i],
                    n.onLoaded.addOnce(c, this, -1024, n, r),
                    n.hasLoading && n.loadingSignal.add(l, this, -1024, n, r, _),
                    T[n.url] ? n.dispatch(c) : n.isStartLoaded || n.load();
            else
                c.call(this, _, this.itemList)
        }
        function l(t, e, n, r, i) {
            (!t || t.isLoaded || 1 !== r) && (i === _ && (this.loadedWeight = h(e),
            i = this.loadedWeight / this.totalWeight),
            n = n || this.loadingSignal,
            n.dispatch(i, t))
        }
        function h(t) {
            for (var e = 0, n = 0, r = t.length; r > n; n++)
                e += t[n].loadedWeight;
            return e
        }
        function c(t, e) {
            this.loadedWeight = h(e);
            var n = this.loadingSignal;
            this.loadedWeight === this.totalWeight ? (this.isLoading = !1,
            this.loadedWeight = 0,
            this.totalWeight = 0,
            this.loadingSignal = new x,
            this._onLoading(t, e, n, 1, 1)) : this._onLoading(t, e, n, 1, this.loadedWeight / this.totalWeight)
        }
        function u(t, e, n) {
            return new C[e](t,n)
        }
        function p(t) {
            C[t.type] || (M.push(t),
            C[t.type] = t)
        }
        function d(t, e) {
            var n, r, i = t.length, o = [];
            if (i && "string" != typeof t)
                for (n = 0; i > n; n++)
                    r = f(t[n], e),
                    r && (o = o.concat(r));
            else
                r = f(t, e),
                r && (o = o.concat(r));
            return o
        }
        function f(t, e) {
            var n, r, i, o, a;
            if (e)
                o = C[e],
                i = o.retrieve(t);
            else
                for (n = 0,
                r = M.length; r > n; n++) {
                    if (o = M[n],
                    a = o.type,
                    "string" == typeof t) {
                        if (m(t, o)) {
                            i = [t];
                            break
                        }
                    } else if (i = o.retrieve(t),
                    i && i.length && "string" == typeof i[0] && m(i[0], o))
                        break;
                    i = _,
                    a = _
                }
            return i ? {
                type: e || a,
                items: i
            } : void 0
        }
        function m(t, e) {
            if (t) {
                for (var n = g(t), r = e.extensions, i = r.length; i--; )
                    if (n === r[i])
                        return !0;
                return !1
            }
        }
        function g(t) {
            return t.split(".").pop().split(/\#|\?/)[0]
        }
        function v() {
            return new r
        }
        function y() {
            var t = []
              , e = [];
            for (var n in S)
                t.push(n),
                T[n] || e.push(S[n]);
            console.log({
                added: t,
                notLoaded: e
            })
        }
        var _, x = t("min-signal"), b = r.prototype;
        b.addChunk = i,
        b.add = o,
        b.load = a,
        b.start = s,
        b._onLoading = l;
        var w = e.exports = v();
        w.version = "0.1.14",
        w.register = p,
        w.retrieveAll = d,
        w.retrieve = f,
        w.testExtensions = m,
        w.create = v,
        w.load = a,
        w.check = y;
        var S = w.addedItems = {}
          , T = w.loadedItems = {}
          , M = w.ITEM_CLASS_LIST = []
          , C = w.ITEM_CLASSES = {}
    }
    , {
        "min-signal": 11
    }],
    40: [function(t, e, n) {
        function r(t, e) {
            if (t) {
                this.url = t,
                this.loadedWeight = 0,
                this.weight = 1;
                for (var n in e)
                    this[n] = e[n];
                this.type || (this.type = this.constructor.type),
                this.hasLoading && (this.loadingSignal = new l,
                this.loadingSignal.add(a, this),
                this.onLoading && this.loadingSignal.add(this.onLoading));
                var r = this;
                this.boundOnLoad = function() {
                    r._onLoad()
                }
                ,
                this.onLoaded = new l,
                h.addedItems[t] = this
            }
        }
        function i() {
            this.isStartLoaded = !0
        }
        function o() {
            this.isLoaded = !0,
            this.loadedWeight = this.weight,
            h.loadedItems[this.url] = this,
            this.onLoaded.dispatch(this.content)
        }
        function a(t) {
            this.loadedWeight = this.weight * t
        }
        function s() {
            this.hasLoading && this.loadingSignal.remove(),
            this.onLoaded.dispatch(this.content)
        }
        var l = t("min-signal")
          , h = t("../quickLoader");
        e.exports = r;
        var c = r.prototype;
        c.load = i,
        c._onLoad = o,
        c._onLoading = a,
        c.dispatch = s,
        r.extensions = [],
        r.retrieve = function() {
            return !1
        }
    }
    , {
        "../quickLoader": 39,
        "min-signal": 11
    }],
    41: [function(t, e, n) {
        function r(t, e) {
            t && (s.constructor.call(this, t, e),
            !this.loadFunc && console && console[console.error || console.log]("require loadFunc in the config object."))
        }
        function i() {
            var t = this;
            this.loadFunc(this.url, function(e) {
                t.content = e,
                s._onLoad.call(t)
            }, this.loadingSignal)
        }
        var o = t("./AbstractItem")
          , a = t("../quickLoader");
        e.exports = r,
        r.type = "any",
        r.extensions = [],
        a.register(r),
        r.retrieve = function() {
            return !1
        }
        ;
        var s = o.prototype
          , l = r.prototype = new o;
        l.constructor = r,
        l.load = i
    }
    , {
        "../quickLoader": 39,
        "./AbstractItem": 40
    }],
    42: [function(t, e, n) {
        function r(t, e) {
            if (t) {
                this.loadThrough = e && e.loadThrough !== a ? e.loadThrough : !0,
                h.constructor.apply(this, arguments);
                try {
                    this.content = new Audio
                } catch (n) {
                    this.content = document.createElement("audio")
                }
            }
        }
        function i() {
            h.load.apply(this, arguments);
            var t = this
              , e = t.content;
            e.src = this.url,
            this.loadThrough ? e.addEventListener("canplaythrough", this.boundOnLoad, !1) : e.addEventListener("canplay", this.boundOnLoad, !1),
            e.load()
        }
        function o() {
            this.content.removeEventListener("canplaythrough", this.boundOnLoad, !1),
            this.content.removeEventListener("canplay", this.boundOnLoad, !1),
            this.isLoaded || h._onLoad.call(this)
        }
        var a, s = t("./AbstractItem"), l = t("../quickLoader");
        e.exports = r,
        r.type = "audio",
        r.extensions = ["mp3", "ogg"],
        l.register(r),
        r.retrieve = function(t) {
            return !1
        }
        ;
        var h = s.prototype
          , c = r.prototype = new s;
        c.constructor = r,
        c.load = i,
        c._onLoad = o
    }
    , {
        "../quickLoader": 39,
        "./AbstractItem": 40
    }],
    43: [function(t, e, n) {
        function r(t, e) {
            t && (c.constructor.apply(this, arguments),
            this.content = new Image)
        }
        function i() {
            c.load.apply(this, arguments);
            var t = this.content;
            t.src = this.url,
            t.width ? this._onLoad() : t.onload = this.boundOnLoad
        }
        function o() {
            delete this.content.onload,
            this.width = this.content.width,
            this.height = this.content.height,
            c._onLoad.call(this)
        }
        function a(t) {
            return 0 !== t.indexOf("data:")
        }
        var s = t("./AbstractItem")
          , l = t("computed-style")
          , h = t("../quickLoader");
        e.exports = r;
        var c = s.prototype
          , u = r.prototype = new s;
        u.constructor = r,
        u.load = i,
        u._onLoad = o,
        r.retrieve = function(t) {
            if (t.nodeType && t.style) {
                var e = [];
                "img" == t.nodeName.toLowerCase() && t.src.indexOf(";") < 0 && e.push(t.src),
                l(t, "background-image").replace(/s?url\(\s*?[\'\"]?([^;]*?)[\'\"]?\s*?\)/g, function(t, n) {
                    e.push(n)
                });
                for (var n = e.length; n--; )
                    a(e[n]) || e.splice(n, 1);
                return e.length ? e : !1
            }
            return "string" == typeof t ? [t] : !1
        }
        ,
        r.type = "image",
        r.extensions = ["jpg", "gif", "png"],
        h.register(r)
    }
    , {
        "../quickLoader": 39,
        "./AbstractItem": 40,
        "computed-style": 2
    }],
    44: [function(require, module, exports) {
        function JSONItem(t) {
            t && _super.constructor.apply(this, arguments)
        }
        function _onLoad() {
            this.content && (this.content = window.JSON && window.JSON.parse ? JSON.parse(this.content.toString()) : eval(this.content.toString())),
            _super._onLoad.call(this)
        }
        var TextItem = require("./TextItem")
          , quickLoader = require("../quickLoader");
        module.exports = JSONItem,
        JSONItem.type = "json",
        JSONItem.extensions = ["json"],
        quickLoader.register(JSONItem),
        JSONItem.retrieve = function() {
            return !1
        }
        ;
        var _super = TextItem.prototype
          , _p = JSONItem.prototype = new TextItem;
        _p.constructor = JSONItem,
        _p._onLoad = _onLoad
    }
    , {
        "../quickLoader": 39,
        "./TextItem": 46
    }],
    45: [function(t, e, n) {
        function r() {
            return "_jsonp" + (new Date).getTime() + ~~(1e8 * Math.random())
        }
        function i(t) {
            t && l.constructor.apply(this, arguments)
        }
        function o(t) {
            l.load.apply(this, arguments);
            var e = this
              , n = this.url.lastIndexOf("=") + 1
              , i = this.url.substr(0, n)
              , o = this.url.substr(n);
            0 === o.length ? (o = r(),
            this.jsonpCallback = t) : this.jsonpCallback = this.jsonpCallback || window[o],
            window[o] = function(t) {
                a.parentNode && a.parentNode.removeChild(a),
                e.content = t,
                e._onLoad()
            }
            ;
            var a = document.createElement("script");
            a.type = "text/javascript",
            a.src = i + o,
            document.getElementsByTagName("head")[0].appendChild(a)
        }
        var a = t("./AbstractItem")
          , s = t("../quickLoader");
        e.exports = i,
        i.type = "jsonp",
        i.extensions = [],
        s.register(i),
        i.retrieve = function(t) {
            return "string" == typeof t && t.indexOf("=") > -1 ? [t] : !1
        }
        ;
        var l = a.prototype
          , h = i.prototype = new a;
        h.constructor = i,
        h.load = o
    }
    , {
        "../quickLoader": 39,
        "./AbstractItem": 40
    }],
    46: [function(t, e, n) {
        function r(t) {
            t && p.constructor.apply(this, arguments)
        }
        function i() {
            p.load.apply(this, arguments);
            var t, e = this;
            t = u ? this.xmlhttp = new XMLHttpRequest : this.xmlhttp = new ActiveXObject("Microsoft.XMLHTTP"),
            this.hasLoading && (t.onprogress = function(t) {
                e._onXmlHttpProgress(t)
            }
            ),
            t.onreadystatechange = function() {
                e._onXmlHttpChange()
            }
            ,
            t.open("GET", this.url, !0),
            u ? t.send(null ) : t.send()
        }
        function o(t) {
            this.loadingSignal.dispatch(t.loaded / t.total)
        }
        function a() {
            4 == this.xmlhttp.readyState && 200 == this.xmlhttp.status && (this.content = this.xmlhttp.responseText,
            this._onLoad())
        }
        function s() {
            this.content && (this.xmlhttp = l),
            p._onLoad.call(this)
        }
        var l, h = t("./AbstractItem"), c = t("../quickLoader"), u = !!window.XMLHttpRequest;
        e.exports = r,
        r.type = "text",
        r.extensions = ["html", "txt", "svg"],
        c.register(r),
        r.retrieve = function() {
            return !1
        }
        ;
        var p = h.prototype
          , d = r.prototype = new h;
        d.constructor = r,
        d.load = i,
        d._onXmlHttpChange = a,
        d._onXmlHttpProgress = o,
        d._onLoad = s
    }
    , {
        "../quickLoader": 39,
        "./AbstractItem": 40
    }],
    47: [function(t, e, n) {
        function r(t, e) {
            if (t) {
                this.loadThrough = e && e.loadThrough !== a ? e.loadThrough : !0,
                h.constructor.apply(this, arguments);
                try {
                    this.content = new Video
                } catch (n) {
                    this.content = document.createElement("video")
                }
            }
        }
        function i() {
            h.load.apply(this, arguments);
            var t = this.content;
            t.preload = "auto",
            t.src = this.url,
            this.loadThrough ? t.addEventListener("canplaythrough", this.boundOnLoad, !1) : t.addEventListener("canplay", this.boundOnLoad, !1),
            t.load()
        }
        function o() {
            this.content.removeEventListener("canplaythrough", this.boundOnLoad),
            this.content.removeEventListener("canplay", this.boundOnLoad),
            this.isLoaded || h._onLoad.call(this)
        }
        var a, s = t("./AbstractItem"), l = t("../quickLoader");
        e.exports = r,
        r.type = "video",
        r.extensions = ["mp4", "webm", "ogv"],
        l.register(r),
        r.retrieve = function(t) {
            return !1
        }
        ;
        var h = s.prototype
          , c = r.prototype = new s;
        c.constructor = r,
        c.load = i,
        c._onLoad = o
    }
    , {
        "../quickLoader": 39,
        "./AbstractItem": 40
    }],
    48: [function(t, e, n) {
        for (var r = t("performance-now"), i = "undefined" == typeof window ? {} : window, o = ["moz", "webkit"], a = "AnimationFrame", s = i["request" + a], l = i["cancel" + a] || i["cancelRequest" + a], h = 0; h < o.length && !s; h++)
            s = i[o[h] + "Request" + a],
            l = i[o[h] + "Cancel" + a] || i[o[h] + "CancelRequest" + a];
        if (!s || !l) {
            var c = 0
              , u = 0
              , p = []
              , d = 1e3 / 60;
            s = function(t) {
                if (0 === p.length) {
                    var e = r()
                      , n = Math.max(0, d - (e - c));
                    c = n + e,
                    setTimeout(function() {
                        var t = p.slice(0);
                        p.length = 0;
                        for (var e = 0; e < t.length; e++)
                            if (!t[e].cancelled)
                                try {
                                    t[e].callback(c)
                                } catch (n) {
                                    setTimeout(function() {
                                        throw n
                                    }, 0)
                                }
                    }, Math.round(n))
                }
                return p.push({
                    handle: ++u,
                    callback: t,
                    cancelled: !1
                }),
                u
            }
            ,
            l = function(t) {
                for (var e = 0; e < p.length; e++)
                    p[e].handle === t && (p[e].cancelled = !0)
            }
        }
        e.exports = function(t) {
            return s.call(i, t)
        }
        ,
        e.exports.cancel = function() {
            l.apply(i, arguments)
        }
    }
    , {
        "performance-now": 49
    }],
    49: [function(t, e, n) {
        (function(t) {
            (function() {
                var n, r, i;
                "undefined" != typeof performance && null !== performance && performance.now ? e.exports = function() {
                    return performance.now()
                }
                : "undefined" != typeof t && null !== t && t.hrtime ? (e.exports = function() {
                    return (n() - i) / 1e6
                }
                ,
                r = t.hrtime,
                n = function() {
                    var t;
                    return t = r(),
                    1e9 * t[0] + t[1]
                }
                ,
                i = n()) : Date.now ? (e.exports = function() {
                    return Date.now() - i
                }
                ,
                i = Date.now()) : (e.exports = function() {
                    return (new Date).getTime() - i
                }
                ,
                i = (new Date).getTime())
            }
            ).call(this)
        }
        ).call(this, t("_process"))
    }
    , {
        _process: 1
    }],
    50: [function(t, e, n) {
        !function(t, n) {
            e.exports = n(t)
        }(window, function(t, e) {
            function n(e, n, r) {
                t.WeixinJSBridge ? WeixinJSBridge.invoke(e, i(n), function(t) {
                    a(e, t, r)
                }) : h(e, r)
            }
            function r(e, n, r) {
                t.WeixinJSBridge ? WeixinJSBridge.on(e, function(t) {
                    r && r.trigger && r.trigger(t),
                    a(e, t, n)
                }) : r ? h(e, r) : h(e, n)
            }
            function i(t) {
                return t = t || {},
                t.appId = M.appId,
                t.verifyAppId = M.appId,
                t.verifySignType = "sha1",
                t.verifyTimestamp = M.timestamp + "",
                t.verifyNonceStr = M.nonceStr,
                t.verifySignature = M.signature,
                t
            }
            function o(t) {
                return {
                    timeStamp: t.timestamp + "",
                    nonceStr: t.nonceStr,
                    "package": t["package"],
                    paySign: t.paySign,
                    signType: t.signType || "SHA1"
                }
            }
            function a(t, e, n) {
                var r, i, o;
                switch (delete e.err_code,
                delete e.err_desc,
                delete e.err_detail,
                r = e.errMsg,
                r || (r = e.err_msg,
                delete e.err_msg,
                r = s(t, r, n),
                e.errMsg = r),
                n = n || {},
                n._complete && (n._complete(e),
                delete n._complete),
                r = e.errMsg || "",
                M.debug && !n.isInnerInvoke && alert(JSON.stringify(e)),
                i = r.indexOf(":"),
                o = r.substring(i + 1)) {
                case "ok":
                    n.success && n.success(e);
                    break;
                case "cancel":
                    n.cancel && n.cancel(e);
                    break;
                default:
                    n.fail && n.fail(e)
                }
                n.complete && n.complete(e)
            }
            function s(t, e) {
                var n, r, i, o;
                if (e) {
                    switch (n = e.indexOf(":"),
                    t) {
                    case f.config:
                        r = "config";
                        break;
                    case f.openProductSpecificView:
                        r = "openProductSpecificView";
                        break;
                    default:
                        r = e.substring(0, n),
                        r = r.replace(/_/g, " "),
                        r = r.replace(/\b\w+\b/g, function(t) {
                            return t.substring(0, 1).toUpperCase() + t.substring(1)
                        }),
                        r = r.substring(0, 1).toLowerCase() + r.substring(1),
                        r = r.replace(/ /g, ""),
                        -1 != r.indexOf("Wcpay") && (r = r.replace("Wcpay", "WCPay")),
                        i = m[r],
                        i && (r = i)
                    }
                    o = e.substring(n + 1),
                    "confirm" == o && (o = "ok"),
                    "failed" == o && (o = "fail"),
                    -1 != o.indexOf("failed_") && (o = o.substring(7)),
                    -1 != o.indexOf("fail_") && (o = o.substring(5)),
                    o = o.replace(/_/g, " "),
                    o = o.toLowerCase(),
                    ("access denied" == o || "no permission to execute" == o) && (o = "permission denied"),
                    "config" == r && "function not exist" == o && (o = "ok"),
                    e = r + ":" + o
                }
                return e
            }
            function l(t) {
                var e, n, r, i;
                if (t) {
                    for (e = 0,
                    n = t.length; n > e; ++e)
                        r = t[e],
                        i = f[r],
                        i && (t[e] = i);
                    return t
                }
            }
            function h(t, e) {
                if (!(!M.debug || e && e.isInnerInvoke)) {
                    var n = m[t];
                    n && (t = n),
                    e && e._complete && delete e._complete,
                    console.log('"' + t + '",', e || "")
                }
            }
            function c() {
                if (!("6.0.2" > w || T.systemType < 0)) {
                    var t = new Image;
                    T.appId = M.appId,
                    T.initTime = S.initEndTime - S.initStartTime,
                    T.preVerifyTime = S.preVerifyEndTime - S.preVerifyStartTime,
                    E.getNetworkType({
                        isInnerInvoke: !0,
                        success: function(e) {
                            T.networkType = e.networkType;
                            var n = "https://open.weixin.qq.com/sdk/report?v=" + T.version + "&o=" + T.isPreVerifyOk + "&s=" + T.systemType + "&c=" + T.clientVersion + "&a=" + T.appId + "&n=" + T.networkType + "&i=" + T.initTime + "&p=" + T.preVerifyTime + "&u=" + T.url;
                            t.src = n
                        }
                    })
                }
            }
            function u() {
                return (new Date).getTime()
            }
            function p(e) {
                _ && (t.WeixinJSBridge ? e() : g.addEventListener && g.addEventListener("WeixinJSBridgeReady", e, !1))
            }
            function d() {
                E.invoke || (E.invoke = function(e, n, r) {
                    t.WeixinJSBridge && WeixinJSBridge.invoke(e, i(n), r)
                }
                ,
                E.on = function(e, n) {
                    t.WeixinJSBridge && WeixinJSBridge.on(e, n)
                }
                )
            }
            var f, m, g, v, y, _, x, b, w, S, T, M, C, A, E;
            return t.jWeixin ? void 0 : (f = {
                config: "preVerifyJSAPI",
                onMenuShareTimeline: "menu:share:timeline",
                onMenuShareAppMessage: "menu:share:appmessage",
                onMenuShareQQ: "menu:share:qq",
                onMenuShareWeibo: "menu:share:weiboApp",
                onMenuShareQZone: "menu:share:QZone",
                previewImage: "imagePreview",
                getLocation: "geoLocation",
                openProductSpecificView: "openProductViewWithPid",
                addCard: "batchAddCard",
                openCard: "batchViewCard",
                chooseWXPay: "getBrandWCPayRequest"
            },
            m = function() {
                var t, e = {};
                for (t in f)
                    e[f[t]] = t;
                return e
            }(),
            g = t.document,
            v = g.title,
            y = navigator.userAgent.toLowerCase(),
            _ = -1 != y.indexOf("micromessenger"),
            x = -1 != y.indexOf("android"),
            b = -1 != y.indexOf("iphone") || -1 != y.indexOf("ipad"),
            w = function() {
                var t = y.match(/micromessenger\/(\d+\.\d+\.\d+)/) || y.match(/micromessenger\/(\d+\.\d+)/);
                return t ? t[1] : ""
            }(),
            S = {
                initStartTime: u(),
                initEndTime: 0,
                preVerifyStartTime: 0,
                preVerifyEndTime: 0
            },
            T = {
                version: 1,
                appId: "",
                initTime: 0,
                preVerifyTime: 0,
                networkType: "",
                isPreVerifyOk: 1,
                systemType: b ? 1 : x ? 2 : -1,
                clientVersion: w,
                url: encodeURIComponent(location.href)
            },
            M = {},
            C = {
                _completes: []
            },
            A = {
                state: 0,
                res: {}
            },
            p(function() {
                S.initEndTime = u()
            }),
            E = {
                config: function(t) {
                    M = t,
                    h("config", t);
                    var e = M.check === !1 ? !1 : !0;
                    p(function() {
                        var t, r, i;
                        if (e)
                            n(f.config, {
                                verifyJsApiList: l(M.jsApiList)
                            }, function() {
                                C._complete = function(t) {
                                    S.preVerifyEndTime = u(),
                                    A.state = 1,
                                    A.res = t
                                }
                                ,
                                C.success = function() {
                                    T.isPreVerifyOk = 0
                                }
                                ,
                                C.fail = function(t) {
                                    C._fail ? C._fail(t) : A.state = -1
                                }
                                ;
                                var t = C._completes;
                                return t.push(function() {
                                    M.debug || c()
                                }),
                                C.complete = function() {
                                    for (var e = 0, n = t.length; n > e; ++e)
                                        t[e]();
                                    C._completes = []
                                }
                                ,
                                C
                            }()),
                            S.preVerifyStartTime = u();
                        else {
                            for (A.state = 1,
                            t = C._completes,
                            r = 0,
                            i = t.length; i > r; ++r)
                                t[r]();
                            C._completes = []
                        }
                    }),
                    M.beta && d()
                },
                ready: function(t) {
                    0 != A.state ? t() : (C._completes.push(t),
                    !_ && M.debug && t())
                },
                error: function(t) {
                    "6.0.2" > w || (-1 == A.state ? t(A.res) : C._fail = t)
                },
                checkJsApi: function(t) {
                    var e = function(t) {
                        var e, n, r = t.checkResult;
                        for (e in r)
                            n = m[e],
                            n && (r[n] = r[e],
                            delete r[e]);
                        return t
                    };
                    n("checkJsApi", {
                        jsApiList: l(t.jsApiList)
                    }, function() {
                        return t._complete = function(t) {
                            if (x) {
                                var n = t.checkResult;
                                n && (t.checkResult = JSON.parse(n))
                            }
                            t = e(t)
                        }
                        ,
                        t
                    }())
                },
                onMenuShareTimeline: function(t) {
                    r(f.onMenuShareTimeline, {
                        complete: function() {
                            n("shareTimeline", {
                                title: t.title || v,
                                desc: t.title || v,
                                img_url: t.imgUrl || "",
                                link: t.link || location.href
                            }, t)
                        }
                    }, t)
                },
                onMenuShareAppMessage: function(t) {
                    r(f.onMenuShareAppMessage, {
                        complete: function() {
                            n("sendAppMessage", {
                                title: t.title || v,
                                desc: t.desc || "",
                                link: t.link || location.href,
                                img_url: t.imgUrl || "",
                                type: t.type || "link",
                                data_url: t.dataUrl || ""
                            }, t)
                        }
                    }, t)
                },
                onMenuShareQQ: function(t) {
                    r(f.onMenuShareQQ, {
                        complete: function() {
                            n("shareQQ", {
                                title: t.title || v,
                                desc: t.desc || "",
                                img_url: t.imgUrl || "",
                                link: t.link || location.href
                            }, t)
                        }
                    }, t)
                },
                onMenuShareWeibo: function(t) {
                    r(f.onMenuShareWeibo, {
                        complete: function() {
                            n("shareWeiboApp", {
                                title: t.title || v,
                                desc: t.desc || "",
                                img_url: t.imgUrl || "",
                                link: t.link || location.href
                            }, t)
                        }
                    }, t)
                },
                onMenuShareQZone: function(t) {
                    r(f.onMenuShareQZone, {
                        complete: function() {
                            n("shareQZone", {
                                title: t.title || v,
                                desc: t.desc || "",
                                img_url: t.imgUrl || "",
                                link: t.link || location.href
                            }, t)
                        }
                    }, t)
                },
                startRecord: function(t) {
                    n("startRecord", {}, t)
                },
                stopRecord: function(t) {
                    n("stopRecord", {}, t)
                },
                onVoiceRecordEnd: function(t) {
                    r("onVoiceRecordEnd", t)
                },
                playVoice: function(t) {
                    n("playVoice", {
                        localId: t.localId
                    }, t)
                },
                pauseVoice: function(t) {
                    n("pauseVoice", {
                        localId: t.localId
                    }, t)
                },
                stopVoice: function(t) {
                    n("stopVoice", {
                        localId: t.localId
                    }, t)
                },
                onVoicePlayEnd: function(t) {
                    r("onVoicePlayEnd", t)
                },
                uploadVoice: function(t) {
                    n("uploadVoice", {
                        localId: t.localId,
                        isShowProgressTips: 0 == t.isShowProgressTips ? 0 : 1
                    }, t)
                },
                downloadVoice: function(t) {
                    n("downloadVoice", {
                        serverId: t.serverId,
                        isShowProgressTips: 0 == t.isShowProgressTips ? 0 : 1
                    }, t)
                },
                translateVoice: function(t) {
                    n("translateVoice", {
                        localId: t.localId,
                        isShowProgressTips: 0 == t.isShowProgressTips ? 0 : 1
                    }, t)
                },
                chooseImage: function(t) {
                    n("chooseImage", {
                        scene: "1|2",
                        count: t.count || 9,
                        sizeType: t.sizeType || ["original", "compressed"],
                        sourceType: t.sourceType || ["album", "camera"]
                    }, function() {
                        return t._complete = function(t) {
                            if (x) {
                                var e = t.localIds;
                                e && (t.localIds = JSON.parse(e))
                            }
                        }
                        ,
                        t
                    }())
                },
                previewImage: function(t) {
                    n(f.previewImage, {
                        current: t.current,
                        urls: t.urls
                    }, t)
                },
                uploadImage: function(t) {
                    n("uploadImage", {
                        localId: t.localId,
                        isShowProgressTips: 0 == t.isShowProgressTips ? 0 : 1
                    }, t)
                },
                downloadImage: function(t) {
                    n("downloadImage", {
                        serverId: t.serverId,
                        isShowProgressTips: 0 == t.isShowProgressTips ? 0 : 1
                    }, t)
                },
                getNetworkType: function(t) {
                    var e = function(t) {
                        var e, n, r, i = t.errMsg;
                        if (t.errMsg = "getNetworkType:ok",
                        e = t.subtype,
                        delete t.subtype,
                        e)
                            t.networkType = e;
                        else
                            switch (n = i.indexOf(":"),
                            r = i.substring(n + 1)) {
                            case "wifi":
                            case "edge":
                            case "wwan":
                                t.networkType = r;
                                break;
                            default:
                                t.errMsg = "getNetworkType:fail"
                            }
                        return t
                    };
                    n("getNetworkType", {}, function() {
                        return t._complete = function(t) {
                            t = e(t)
                        }
                        ,
                        t
                    }())
                },
                openLocation: function(t) {
                    n("openLocation", {
                        latitude: t.latitude,
                        longitude: t.longitude,
                        name: t.name || "",
                        address: t.address || "",
                        scale: t.scale || 28,
                        infoUrl: t.infoUrl || ""
                    }, t)
                },
                getLocation: function(t) {
                    t = t || {},
                    n(f.getLocation, {
                        type: t.type || "wgs84"
                    }, function() {
                        return t._complete = function(t) {
                            delete t.type
                        }
                        ,
                        t
                    }())
                },
                hideOptionMenu: function(t) {
                    n("hideOptionMenu", {}, t)
                },
                showOptionMenu: function(t) {
                    n("showOptionMenu", {}, t)
                },
                closeWindow: function(t) {
                    t = t || {},
                    n("closeWindow", {
                        immediate_close: t.immediateClose || 0
                    }, t)
                },
                hideMenuItems: function(t) {
                    n("hideMenuItems", {
                        menuList: t.menuList
                    }, t)
                },
                showMenuItems: function(t) {
                    n("showMenuItems", {
                        menuList: t.menuList
                    }, t)
                },
                hideAllNonBaseMenuItem: function(t) {
                    n("hideAllNonBaseMenuItem", {}, t)
                },
                showAllNonBaseMenuItem: function(t) {
                    n("showAllNonBaseMenuItem", {}, t)
                },
                scanQRCode: function(t) {
                    t = t || {},
                    n("scanQRCode", {
                        needResult: t.needResult || 0,
                        scanType: t.scanType || ["qrCode", "barCode"]
                    }, function() {
                        return t._complete = function(t) {
                            var e, n;
                            b && (e = t.resultStr,
                            e && (n = JSON.parse(e),
                            t.resultStr = n && n.scan_code && n.scan_code.scan_result))
                        }
                        ,
                        t
                    }())
                },
                openProductSpecificView: function(t) {
                    n(f.openProductSpecificView, {
                        pid: t.productId,
                        view_type: t.viewType || 0
                    }, t)
                },
                addCard: function(t) {
                    var e, r, i, o, a = t.cardList, s = [];
                    for (e = 0,
                    r = a.length; r > e; ++e)
                        i = a[e],
                        o = {
                            card_id: i.cardId,
                            card_ext: i.cardExt
                        },
                        s.push(o);
                    n(f.addCard, {
                        card_list: s
                    }, function() {
                        return t._complete = function(t) {
                            var e, n, r, i = t.card_list;
                            if (i) {
                                for (i = JSON.parse(i),
                                e = 0,
                                n = i.length; n > e; ++e)
                                    r = i[e],
                                    r.cardId = r.card_id,
                                    r.cardExt = r.card_ext,
                                    r.isSuccess = r.is_succ ? !0 : !1,
                                    delete r.card_id,
                                    delete r.card_ext,
                                    delete r.is_succ;
                                t.cardList = i,
                                delete t.card_list
                            }
                        }
                        ,
                        t
                    }())
                },
                chooseCard: function(t) {
                    n("chooseCard", {
                        app_id: M.appId,
                        location_id: t.shopId || "",
                        sign_type: t.signType || "SHA1",
                        card_id: t.cardId || "",
                        card_type: t.cardType || "",
                        card_sign: t.cardSign,
                        time_stamp: t.timestamp + "",
                        nonce_str: t.nonceStr
                    }, function() {
                        return t._complete = function(t) {
                            t.cardList = t.choose_card_info,
                            delete t.choose_card_info
                        }
                        ,
                        t
                    }())
                },
                openCard: function(t) {
                    var e, r, i, o, a = t.cardList, s = [];
                    for (e = 0,
                    r = a.length; r > e; ++e)
                        i = a[e],
                        o = {
                            card_id: i.cardId,
                            code: i.code
                        },
                        s.push(o);
                    n(f.openCard, {
                        card_list: s
                    }, t)
                },
                chooseWXPay: function(t) {
                    n(f.chooseWXPay, o(t), t)
                }
            },
            e && (t.wx = t.jWeixin = E),
            E)
        })
    }
    , {}],
    51: [function(t, e, n) {
        function r() {
            try {
                var t = document.createElement("canvas");
                return !!window.WebGLRenderingContext && (t.getContext("webgl") || t.getContext("experimental-webgl"))
            } catch (e) {
                return !1
            }
        }
        function i() {
            x.onDevicedOrientationDetected = new V,
            window.addEventListener("deviceorientation", o),
            w.preloadLocale(),
            A.preInit(l)
        }
        function o(t) {
            window.removeEventListener("deviceorientation", o),
            t.alpha && (x.isSupportDeviceOrientation = !0,
            x.onDevicedOrientationDetected.dispatch())
        }
        function a() {
            function t() {
                var t = window.navigator.userAgent
                  , e = t.indexOf("OS ");
                return t.indexOf("iPhone") > -1 && e > -1 ? window.Number(t.substr(e + 3, 3).replace("_", ".")) : 0
            }
            return x.iphone5 = t() >= 6 && window.devicePixelRatio >= 2 && 548 == screen.availHeight ? !0 : !1,
            t() >= 6 && window.devicePixelRatio >= 2 && 548 == screen.availHeight ? !0 : !1
        }
        function s() {
            var t = navigator.userAgent
              , e = (t.indexOf("Mozilla/5.0") > -1,
            t.indexOf("Android ") > -1,
            t.indexOf("AppleWebKit") > -1,
            t.indexOf("Version") > -1,
            -1 == t.indexOf("UCBrowser"),
            -1 == t.indexOf("MicroMessenger"),
            t.indexOf("Mozilla/5.0") > -1 && t.indexOf("Android ") > -1 && t.indexOf("AppleWebKit") > -1 && t.indexOf("Version") > -1 && -1 == t.indexOf("UCBrowser") && -1 == t.indexOf("MicroMessenger"));
            return x.nativeAndroid = e,
            e
        }
        function l() {
            g = x.appContainer = M.createElement(C(w)),
            document.body.appendChild(x.appContainer),
            x.USE_STATS,
            x.USE_DAT_GUI && (x.gui = new W.GUI),
            A.init(),
            w.preInit(),
            S.init(),
            S.startRender(),
            S.onRendered.add(m),
            S.onResized.add(d),
            null != r() && 0 == s() ? (T.initSetup(),
            E.preInit(),
            O.preInit(),
            G.addChunk(x.appContainer.querySelectorAll("*")),
            d(),
            A.start(h)) : (z.setHash(LANG + "/downloadNewBrowser"),
            F.init(),
            y = F,
            f())
        }
        function h() {
            b.init({
                renderer: T.setup.renderer,
                near: 5,
                fov: 100,
                far: 5e3
            }),
            d(),
            c(),
            u(),
            f(),
            p(),
            _.className = "app" + (x.isMobile ? "" : " desktop"),
            x.isMobile || (document.getElementById("intro-desktop").innerHTML = q(w)),
            A.kill(function() {
                function t(t, e) {
                    X || (X = 1,
                    k.preinit(),
                    d(),
                    m(0),
                    k.init()),
                    "" === t && (ga("send", "pageview", "direct"),
                    z.setHash(LANG + "/countryselector")),
                    H.parse(t)
                }
                x.isMobile && (H.addRoute("/transformerpack", function() {
                    Y = "",
                    ga("send", "pageview", "transformerpack"),
                    x.TYPE_USER = "vip",
                    z.setHash("/countryselector")
                }),
                H.addRoute("/cardboard", function() {
                    Y = "",
                    ga("send", "pageview", "cardboard"),
                    x.TYPE_USER = "classic",
                    z.setHash("/countryselector")
                }),
                H.addRoute("{lang}/cardboard", function() {
                    ga("send", "pageview", LANG + "/cardboard"),
                    "zh_CN" == LANG ? (Y = "",
                    R.init()) : z.setHash("/" + LANG + "/tutorial")
                }),
                H.addRoute("/countryselector", function() {
                    Y = "",
                    ga("send", "pageview", "countryselector"),
                    E.init(),
                    y = E
                }),
                H.addRoute("{lang}/countryselector", function() {
                    Y = "",
                    ga("send", "pageview", "countryselector"),
                    E.init(),
                    y = E
                }),
                H.addRoute("{lang}/compatibility", function() {
                    Y = "",
                    ga("send", "pageview", LANG + "/caution"),
                    N.init(),
                    y = N
                }),
                H.addRoute("{lang}/orderlaunch", function() {
                    Y = "",
                    ga("send", "pageview", LANG + "/orderandlaunch"),
                    R.init(),
                    y = R
                }),
                H.addRoute("{lang}/tutorial", function() {
                    Y = "tutorial",
                    ga("send", "pageview", LANG + "/tutorial"),
                    B.init(),
                    y = B
                }),
                H.addRoute("{lang}/xp", function(t) {
                    Y = "xp",
                    ga("send", "pageview", LANG + "/xp"),
                    D.init(),
                    y = D
                }),
                H.addRoute("{lang}/endxp", function(t) {
                    Y = "",
                    ga("send", "pageview", LANG + "/endxp"),
                    U.init(),
                    y = U
                }),
                H.addRoute("{lang}/scoring/:score:/:points:", function(t, e, n) {
                    Y = "",
                    ga("send", "pageview", LANG + "/scoring"),
                    I.init(e, n),
                    y = I
                }),
                H.addRoute("{lang}/share", function(t) {
                    Y = "",
                    ga("send", "pageview", LANG + "/share"),
                    I.initShare(),
                    y = I
                }),
                H.addRoute("{lang}/home", function() {
                    Y = "",
                    ga("send", "pageview", LANG + "/home"),
                    y = T,
                    P.init(),
                    y = P
                }),
                H.addRoute("{lang}/tpack", function(t) {
                    Y = "tpack",
                    ga("send", "pageview", LANG + "/tpack"),
                    O.init(),
                    y = O
                })),
                z.prependHash = "!",
                z.initialized.add(t),
                z.changed.add(t),
                z.init()
            })
        }
        function c() {
            v = document.querySelector(".intro-language select"),
            _ = document.querySelector(".app");
            for (var t = 0; t < v.options.length; t++)
                v.options[t].getAttribute("value") == LANG && (v.options.selectedIndex = t)
        }
        function u() {
            v.onchange = function() {
                var t = v.options[v.options.selectedIndex].getAttribute("value");
                LANG = t,
                x.LOCALE_URL = x.DATA_URL + "locale/" + LANG,
                document.getElementsByTagName("html")[0].setAttribute("lang", LANG),
                -1 != document.location.hash.search("home") ? document.location = "http://" + document.location.hostname + document.location.pathname + "#!/" + LANG + "/home" : -1 != document.location.hash.search("countryslelector") ? document.location = "http://" + document.location.hostname + document.location.pathname + "#!/" + LANG + "/countryselector" : document.location = "http://" + document.location.hostname + document.location.pathname + "#!/" + LANG + "/countryselector",
                location.reload()
            }
            ,
            window.onresize = function(t) {
                f()
            }
        }
        function p() {
            -1 !== navigator.userAgent.indexOf("MicroMessenger") && w.loadWechat(function(t) {
                L.config(t),
                L.ready(function() {
                    L.onMenuShareTimeline({
                        title: w.locale.meta.other.title,
                        link: "http://lftapl.dangdaimingshi.com",
                        imgUrl: "http://lafrenchtouch.martell.com/img/share/wechat.jpg",
                        success: function() {},
                        cancel: function() {}
                    })
                }),
                L.onMenuShareAppMessage({
                    title: w.locale.meta.defaut.title,
                    desc: w.locale.meta.defaut.description,
                    link: "http://lftapl.dangdaimingshi.com",
                    imgUrl: "http://lafrenchtouch.martell.com/img/share/wechat.jpg",
                    type: "",
                    dataUrl: "",
                    success: function() {},
                    cancel: function() {}
                }),
                L.error(function(t) {})
            })
        }
        function d() {
            b.renderer ? b.resize(S.stageWidth, S.stageHeight) : (b.width = S.stageWidth,
            b.height = S.stageHeight)
        }
        function f() {
            var t = /iPad|iPhone|iPod/.test(navigator.platform)
              , e = document.body
              , n = a();
            e.offsetWidth > e.offsetHeight ? (e.className = "landscape" + (t ? " ios" : ""),
            t && (e.className = n ? "landscape ios iphone5" : "landscape ios"),
            "" != Y && j.panToRightLandscape()) : (e.className = t ? " ios" : "",
            t && (e.className = n ? " ios iphone5" : " ios"),
            "" != Y && j.panToRight())
        }
        function m(t) {
            b.renderer && b.render(t)
        }
        var g, v, y, _, x = t("./core/settings.js"), b = t("./../edankwan/3d/stage3d"), w = t("./controllers/dataController.js"), S = t("./../edankwan/core/stageReference.js"), T = t("./../bluephoria/Main"), M = t("./../edankwan/utils/domUtils"), C = t("./../../templates/app.html"), A = t("./ui/preloader/preloader"), E = t("./ui/intro/countryselector"), L = t("weixin-js-sdk"), P = t("./ui/intro/home"), k = t("./ui/intro/intro"), R = t("./ui/intro/orderlaunch"), O = t("./ui/intro/tpack"), D = t("./ui/intro/xp"), F = t("./ui/intro/nowebgl"), U = t("./ui/outro/endxp"), I = t("./ui/outro/scoring"), B = t("./ui/intro/tutorial"), N = t("./ui/intro/compatibility"), j = t("./ui/intro/intro3d"), V = (t("./../libs/TweenMax.min.js"),
        t("min-signal")), G = t("quick-loader"), z = t("hasher"), H = t("crossroads"), W = t("dat-gui"), q = t("./../../templates/ui/home-desktop.html"), X = 0, Y = "";
        T.complete.add(function() {
            z.setHash("/" + LANG + "/endxp")
        }),
        i()
    }
    , {
        "./../../templates/app.html": 140,
        "./../../templates/ui/home-desktop.html": 144,
        "./../bluephoria/Main": 77,
        "./../edankwan/3d/stage3d": 114,
        "./../edankwan/core/stageReference.js": 115,
        "./../edankwan/utils/domUtils": 118,
        "./../libs/TweenMax.min.js": 130,
        "./controllers/dataController.js": 52,
        "./core/settings.js": 54,
        "./ui/intro/compatibility": 58,
        "./ui/intro/countryselector": 59,
        "./ui/intro/home": 61,
        "./ui/intro/intro": 62,
        "./ui/intro/intro3d": 63,
        "./ui/intro/nowebgl": 64,
        "./ui/intro/orderlaunch": 65,
        "./ui/intro/tpack": 67,
        "./ui/intro/tutorial": 68,
        "./ui/intro/xp": 69,
        "./ui/outro/endxp": 70,
        "./ui/outro/scoring": 71,
        "./ui/preloader/preloader": 72,
        crossroads: 3,
        "dat-gui": 5,
        hasher: 8,
        "min-signal": 11,
        "quick-loader": 38,
        "weixin-js-sdk": 50
    }],
    52: [function(t, e, n) {
        function r() {
            c.add(h.LOCALE_URL + ".json", {
                type: "json",
                onLoad: function(t) {
                    n.locale = t
                }
            })
        }
        function i() {
            c.add(h.DATA_URL + "xp.json", {
                type: "json",
                onLoad: function(t) {
                    n.xp = t,
                    n.onXpDataLoaded.dispatch(t)
                }
            })
        }
        function o() {
            c.add(h.LOCALE_URL + ".json", {
                type: "json",
                onLoad: function(t) {
                    n.locale = t
                }
            })
        }
        function a(t) {
            c.load("http://ddms.nurunci.com/ddmswechat/get_signature.php?signurl=" + encodeURIComponent(location.href), {
                type: "json",
                onLoad: function(e) {
                    jdata = e,
                    jdata.appId ? (h.wechat = {
                        appId: jdata.appId,
                        timestamp: jdata.timestamp,
                        nonceStr: jdata.nonceStr,
                        signature: jdata.signature,
                        jsApiList: ["onMenuShareTimeline", "onMenuShareAppMessage"]
                    },
                    t(h.wechat)) : h.wechat = {
                        appId: "empty",
                        timestamp: "empty",
                        nonceStr: "empty",
                        signature: "empty",
                        jsApiList: ["onMenuShareTimeline", "onMenuShareAppMessage"]
                    }
                }
            })
        }
        function s() {}
        var l, h = t("./../core/settings.js"), c = t("quick-loader"), u = t("min-signal");
        n.locale = l,
        n.xp = l,
        n.wechatConfig = l,
        n.settings = h,
        n.preloadLocale = r,
        n.reloadLocale = o,
        n.preInit = i,
        n.init = s,
        n.loadWechat = a,
        n.onXpDataLoaded = new u
    }
    , {
        "./../core/settings.js": 54,
        "min-signal": 11,
        "quick-loader": 38
    }],
    53: [function(t, e, n) {
        var r, i = window, n = {
            DATA_URL: "data/",
            LOCALE_CALLBACK_NAME: "onLocalizationLoad",
            LOCALE_BUST: !0,
            CARDBOARD_CALLBACK_NAME: "onSpriteLoad",
            CARDBOARD_URL: "data/cardboard"
        }, o = {
            "en-us": "en_EN",
            "zh-cn": "zh_CN",
            "zh-tw": "zh_TW",
            "vi-VNM": "vi_VNM"
        }, a = {
            en: "en_EN",
            zh: "zh_CN",
            zh: "zh_TW",
            vi: "vi_VNM"
        }, s = n.IS_DEV = !!i.IS_DEV && !0, l = document.location.hash;
        for (item in o)
            -1 != l.search(o[item]) && (r = o[item]);
        if ("undefined" == typeof r) {
            var h = window.navigator.userLanguage || window.navigator.language;
            for (country in o)
                h.toLowerCase() == country && (r = o[country]);
            for (countryX in a)
                h.toLowerCase() == countryX && (r = a[countryX])
        }
        n.LANG = i.LANG = "undefined" == typeof r ? r = "en_EN" : r,
        document.getElementsByTagName("html")[0].setAttribute("lang", r),
        n.LOCALE_URL = n.DATA_URL + "locale/" + r;
        var c = n.ENV = i.ENV;
        n.TYPE_USER = "classic",
        s && (n.SKIP_PRELOADING = !0,
        n.SKIP_AUDIO = !1,
        n.SKIP_XP_LOADING = !0,
        n.USE_STATS = !0,
        n.USE_DAT_GUI = !0,
        n.USE_CUSTOM_SPEED = !1),
        n.afterInit = function(t) {
            n = t,
            "edankwan" === c ? (window.isForcedPortrait = !0,
            n.SKIP_AUDIO = !0,
            n.USE_CUSTOM_SPEED = !0,
            n.CUSTOM_SPEED = 1,
            n.isUsingVR = !1) : "MacBook-Pro-de-Gregoire.local" === c || "iMac-de-Benoit.local" === c || c && ("zh_CN" == r ? n.CUSTOM_VERSION = 1 : n.CUSTOM_VERSION = 1),
            "zh_CN" == n.LANG ? t.finalMap = "shanghai" : t.finalMap = "altCity"
        }
        ,
        e.exports = n
    }
    , {}],
    54: [function(t, e, n) {
        function r() {
            c(n, {
                videoFormatTestOrders: ["video/mp4", "video/webm", "video/ogg"],
                audioFormatTestOrders: ["audio/mp3", "audio/ogg"]
            }, h),
            i("video"),
            i("audio"),
            n.isIFrame = d.self !== d.top,
            n.transitionStyle = s("transition", o("transition")),
            n.transformStyle = s("transform", o("transform")),
            n.transform3dStyle = s("transform", o("perspective")),
            n.transformPerspectiveStyle = s("perspective", o("perspective")),
            n.transformOriginStyle = s("transformOrigin", o("transformOrigin")),
            n.isRetina = d.devicePixelRatio && d.devicePixelRatio >= 1.5,
            n.webkitFilter = m.style.webkitFilter === l ? !1 : "webkitFilter",
            n.isSupportOpacity = f.documentElement.style.opacity !== l,
            n.isChrome = g.indexOf("chrome") > -1,
            n.isShittyUCBrowser = g.indexOf("ucbrowser") > -1,
            n.isShittyWeChat = g.indexOf("micromessenger") > -1,
            n.isIOS = g.indexOf("ipad") > -1 || g.indexOf("iphone") > -1 || g.indexOf("ipod") > -1,
            /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? n.isMobile = !0 : n.isMobile = !1,
            window.isForcedPortrait = n.isShittyWeChat && !n.isIOS,
            n.sayAuthor = a,
            n.afterInit && n.afterInit(n)
        }
        function i(t) {
            var e;
            try {
                switch (t) {
                case "video":
                    e = new d.Video;
                    break;
                case "audio":
                    e = new d.Audio
                }
            } catch (r) {
                e = f.createElement(t)
            }
            for (var i, o = n[t + "FormatTestOrders"], a = 0, s = o.length; s > a; a++)
                if (e.canPlayType && e.canPlayType(o[a])) {
                    i = o[a].substr(o[a].indexOf("/") + 1);
                    break
                }
            n[t + "Format"] = i
        }
        function o(t) {
            for (var e = t.charAt(0).toUpperCase() + t.slice(1), n = u.length; n--; )
                if (p[u[n] + e] !== l)
                    return n + 2;
            return p[t] !== l ? 1 : 0
        }
        function a() {
            if (n.isChrome) {
                var t = ["\n%c Developed by edankwan %c http://www.edankwan.com/ \n\n", "color: #fff; background: #222; padding:5px 5px;", "color: #999; background: #FCFCFC; padding:5px 0;"];
                d.console.log.apply(console, t)
            } else
                d.console && d.console.log("Developed by edankwan - http://www.edankwan.com/")
        }
        function s(t, e) {
            return e > 1 ? u[e - 2] + t.charAt(0).toUpperCase() + t.slice(1) : 1 == e ? t : !1
        }
        var l, h = t("./projectSettings"), c = t("mout/object/mixIn"), u = "Webkit Moz O ms".split(" "), p = document.createElement("div").style, d = window, f = document, m = f.body, g = navigator.userAgent.toLowerCase();
        r()
    }
    , {
        "./projectSettings": 53,
        "mout/object/mixIn": 35
    }],
    55: [function(t, e, n) {
        function r() {}
        e.exports = function(t) {
            for (var e in t)
                "function" === (typeof t[e]).toLowerCase() && (t[e] = r)
        }
    }
    , {}],
    56: [function(t, e, n) {
        var r = t("./../../core/settings.js")
          , i = t("./../../../libs/threejs/three.min.js")
          , o = t("./../../../edankwan/three/threeChunkParse.js");
        t("./../../../bluephoria/effects/Mirror");
        var a = e.exports = function(t, e, n, a) {
            function s(t, e) {
                return void 0 !== t ? t : e
            }
            i.Object3D.call(this),
            this.name = "intro_water_" + this.id,
            a = a || {},
            this.matrixNeedsUpdate = !0;
            var l = s(a.textureWidth, 512)
              , h = s(a.textureHeight, 512);
            this.clipBias = s(a.clipBias, 0),
            this.alpha = s(a.alpha, 1),
            this.time = s(a.time, 0),
            this.normalSampler = s(a.waterNormals, null ),
            this.sunDirection = s(a.sunDirection, new i.Vector3(.70707,.70707,0)),
            this.sunColor = new i.Color(s(a.sunColor, 16777215)),
            this.waterColor = new i.Color(s(a.waterColor, 8355711)),
            this.eye = s(a.eye, new i.Vector3(0,0,0)),
            this.distortionScale = s(a.distortionScale, 20),
            this.side = s(a.side, i.FrontSide),
            this.fog = s(a.fog, !1),
            this.renderer = t,
            this.scene = n,
            this.mirrorPlane = new i.Plane,
            this.normal = new i.Vector3(0,0,1),
            this.mirrorWorldPosition = new i.Vector3,
            this.cameraWorldPosition = new i.Vector3,
            this.rotationMatrix = new i.Matrix4,
            this.lookAtPosition = new i.Vector3(0,0,-1),
            this.clipPlane = new i.Vector4,
            e instanceof i.PerspectiveCamera ? this.camera = e : this.camera = new i.PerspectiveCamera,
            this.textureMatrix = new i.Matrix4,
            this.mirrorCamera = this.camera.clone(),
            this.texture = new i.WebGLRenderTarget(l,h),
            this.texture.wrapS = i.MirroredRepeatWrapping,
            this.texture.wrapT = i.MirroredRepeatWrapping,
            this.tempTexture = new i.WebGLRenderTarget(l,h);
            var c = i.UniformsUtils.merge([i.UniformsLib.fog, {
                normalSampler: {
                    type: "t",
                    value: null
                },
                mirrorSampler: {
                    type: "t",
                    value: null
                },
                alpha: {
                    type: "f",
                    value: 1
                },
                time: {
                    type: "f",
                    value: 0
                },
                distortionScale: {
                    type: "f",
                    value: 20
                },
                noiseScale: {
                    type: "f",
                    value: 1
                },
                textureMatrix: {
                    type: "m4",
                    value: new i.Matrix4
                },
                sunColor: {
                    type: "c",
                    value: new i.Color(8355711)
                },
                sunDirection: {
                    type: "v3",
                    value: new i.Vector3(.70707,.70707,0)
                },
                eye: {
                    type: "v3",
                    value: new i.Vector3(0,0,0)
                },
                waterColor: {
                    type: "c",
                    value: new i.Color(5592405)
                }
            }]);
            this.material = new i.ShaderMaterial({
                vertexShader: o("#define GLSLIFY 1\nprecision highp float;\n\nuniform mat4 textureMatrix;\nuniform float time;\n\nvarying vec4 mirrorCoord;\nvarying vec3 worldPosition;\n\nvoid main() {\n   mirrorCoord = modelMatrix * vec4( position, 1.0 );\n   worldPosition = mirrorCoord.xyz;\n   mirrorCoord = textureMatrix * mirrorCoord;\n   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"),
                fragmentShader: o(r.isShittyUCBrowser ? "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D mirrorSampler;\nuniform float alpha;\nuniform float time;\nuniform float distortionScale;\nuniform sampler2D normalSampler;\nuniform vec3 sunColor;\nuniform vec3 sunDirection;\nuniform vec3 eye;\nuniform vec3 waterColor;\n\nvarying vec4 mirrorCoord;\nvarying vec3 worldPosition;\n\nvec4 getNoise( vec2 uv )\n{\n   vec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n   vec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n   vec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n   vec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n   vec4 noise = ( texture2D( normalSampler, uv0 ) ) +\n       ( texture2D( normalSampler, uv1 ) ) +\n       ( texture2D( normalSampler, uv2 ) ) +\n       ( texture2D( normalSampler, uv3 ) );\n   return noise * 0.5 - 1.0;\n}\n\nvoid sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor )\n{\n   vec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n   float direction = max( 0.0, dot( eyeDirection, reflection ) );\n   specularColor += pow( direction, shiny ) * sunColor * spec;\n   diffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n}\n\n// chunk(common);\n// chunk(fog_pars_fragment);\n\nvoid main()\n{\n   vec4 noise = getNoise( worldPosition.xz );\n   vec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n   vec3 diffuseLight = vec3(0.0);\n   vec3 specularLight = vec3(0.0);\n\n   vec3 worldToEye = eye-worldPosition;\n   vec3 eyeDirection = normalize( worldToEye );\n   sunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n   float distance = length(worldToEye);\n\n   vec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;\n   vec3 reflectionSample = waterColor;//vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.z + distortion ) );\n\n   float theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n   float rf0 = 0.3;\n   float reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n   vec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n   vec3 albedo = mix( sunColor * diffuseLight * 0.3 + scatter, ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance );\n   vec3 outgoingLight = albedo;\n    // chunk(fog_fragment)\n   gl_FragColor = vec4( outgoingLight, alpha ) * (0.5 + (1.0 - distance / 3000.0) * 0.5);\n}\n" : "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D mirrorSampler;\nuniform float alpha;\nuniform float time;\nuniform float distortionScale;\nuniform sampler2D normalSampler;\nuniform vec3 sunColor;\nuniform vec3 sunDirection;\nuniform vec3 eye;\nuniform vec3 waterColor;\n\nvarying vec4 mirrorCoord;\nvarying vec3 worldPosition;\n\nvec4 getNoise( vec2 uv )\n{\n   vec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n   vec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n   vec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n   vec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n   vec4 noise = ( texture2D( normalSampler, uv0 ) ) +\n       ( texture2D( normalSampler, uv1 ) ) +\n       ( texture2D( normalSampler, uv2 ) ) +\n       ( texture2D( normalSampler, uv3 ) );\n   return noise * 0.5 - 1.0;\n}\n\nvoid sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor )\n{\n   vec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n   float direction = max( 0.0, dot( eyeDirection, reflection ) );\n   specularColor += pow( direction, shiny ) * sunColor * spec;\n   diffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n}\n\n// chunk(common);\n// chunk(fog_pars_fragment);\n\nvoid main()\n{\n   vec4 noise = getNoise( worldPosition.xz );\n   vec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n   vec3 diffuseLight = vec3(0.0);\n   vec3 specularLight = vec3(0.0);\n\n   vec3 worldToEye = eye-worldPosition;\n   vec3 eyeDirection = normalize( worldToEye );\n   sunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n   float distance = length(worldToEye);\n\n   vec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;\n   vec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.z + distortion ) );\n\n   float theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n   float rf0 = 0.3;\n   float reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n   vec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n   vec3 albedo = mix( sunColor * diffuseLight * 0.3 + scatter, ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance );\n   vec3 outgoingLight = albedo;\n    // chunk(fog_fragment)\n   gl_FragColor = vec4( outgoingLight, alpha );\n}\n"),
                uniforms: c,
                transparent: !0,
                side: this.side,
                fog: this.fog
            }),
            this.material.uniforms.mirrorSampler.value = this.texture,
            this.material.uniforms.textureMatrix.value = this.textureMatrix,
            this.material.uniforms.alpha.value = this.alpha,
            this.material.uniforms.time.value = this.time,
            this.material.uniforms.normalSampler.value = this.normalSampler,
            this.material.uniforms.sunColor.value = this.sunColor,
            this.material.uniforms.waterColor.value = this.waterColor,
            this.material.uniforms.sunDirection.value = this.sunDirection,
            this.material.uniforms.distortionScale.value = this.distortionScale,
            this.material.uniforms.eye.value = this.eye,
            i.Math.isPowerOfTwo(l) && i.Math.isPowerOfTwo(h) || (this.texture.generateMipmaps = !1,
            this.texture.minFilter = i.LinearFilter,
            this.tempTexture.generateMipmaps = !1,
            this.tempTexture.minFilter = i.LinearFilter),
            this.updateTextureMatrix(),
            this.render()
        }
          , s = a.prototype = Object.create(i.Mirror.prototype);
        s.constructor = a,
        s.updateTextureMatrix = function() {
            function t(t) {
                return t ? 0 > t ? -1 : 1 : 0
            }
            this.updateMatrixWorld(),
            this.camera.updateMatrixWorld(),
            this.mirrorWorldPosition.setFromMatrixPosition(this.matrixWorld),
            this.cameraWorldPosition.setFromMatrixPosition(this.camera.matrixWorld),
            this.rotationMatrix.extractRotation(this.matrixWorld),
            this.normal.set(0, 0, 1),
            this.normal.applyMatrix4(this.rotationMatrix);
            var e = this.mirrorWorldPosition.clone().sub(this.cameraWorldPosition);
            e.reflect(this.normal).negate(),
            e.add(this.mirrorWorldPosition),
            this.rotationMatrix.extractRotation(this.camera.matrixWorld),
            this.lookAtPosition.set(0, 0, -1),
            this.lookAtPosition.applyMatrix4(this.rotationMatrix),
            this.lookAtPosition.add(this.cameraWorldPosition);
            var n = this.mirrorWorldPosition.clone().sub(this.lookAtPosition);
            n.reflect(this.normal).negate(),
            n.add(this.mirrorWorldPosition),
            this.up.set(0, -1, 0),
            this.up.applyMatrix4(this.rotationMatrix),
            this.up.reflect(this.normal).negate(),
            this.mirrorCamera.position.copy(e),
            this.mirrorCamera.up = this.up,
            this.mirrorCamera.lookAt(n),
            this.mirrorCamera.aspect = this.camera.aspect,
            this.mirrorCamera.updateProjectionMatrix(),
            this.mirrorCamera.updateMatrixWorld(),
            this.mirrorCamera.matrixWorldInverse.getInverse(this.mirrorCamera.matrixWorld),
            this.textureMatrix.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1),
            this.textureMatrix.multiply(this.mirrorCamera.projectionMatrix),
            this.textureMatrix.multiply(this.mirrorCamera.matrixWorldInverse),
            this.mirrorPlane.setFromNormalAndCoplanarPoint(this.normal, this.mirrorWorldPosition),
            this.mirrorPlane.applyMatrix4(this.mirrorCamera.matrixWorldInverse),
            this.clipPlane.set(this.mirrorPlane.normal.x, this.mirrorPlane.normal.y, this.mirrorPlane.normal.z, this.mirrorPlane.constant);
            var r = new i.Vector4
              , o = this.mirrorCamera.projectionMatrix;
            r.x = (t(this.clipPlane.x) + o.elements[8]) / o.elements[0],
            r.y = (t(this.clipPlane.y) + o.elements[9]) / o.elements[5],
            r.z = -1,
            r.w = (1 + o.elements[10]) / o.elements[14];
            var a = new i.Vector4;
            a = this.clipPlane.multiplyScalar(2 / this.clipPlane.dot(r)),
            o.elements[2] = a.x,
            o.elements[6] = a.y,
            o.elements[10] = a.z + 1 - this.clipBias,
            o.elements[14] = a.w;
            var s = new i.Vector3;
            s.setFromMatrixPosition(this.camera.matrixWorld),
            this.eye = s,
            this.material.uniforms.eye.value = this.eye
        }
    }
    , {
        "./../../../bluephoria/effects/Mirror": 95,
        "./../../../edankwan/three/threeChunkParse.js": 116,
        "./../../../libs/threejs/three.min.js": 139,
        "./../../core/settings.js": 54
    }],
    57: [function(t, e, n) {
        var r, i, o, a, s, l, h, c, u, p, d, f = this;
        f.deltaX = 0,
        f.deltaY = 0,
        this.init = function(t) {
            return r = t,
            g(),
            m(),
            r.json ? (r.json = JSON.parse(r.json),
            r.json = r.json.frames) : r.frames && (r.json = r.frames),
            s
        }
        ;
        var m = function() {
            f.currentFrame = 0
        }
          , g = function() {
            s = document.createElement("canvas"),
            l = s.getContext("2d"),
            r.json || (s.width = r.width,
            s.height = r.height),
            h = new Image,
            h.src = r.picture,
            h.onload = v
        }
          , v = function() {
            i = Math.ceil(this.naturalHeight / r.height),
            o = Math.ceil(this.naturalWidth / r.width),
            a = r.json ? r.json.length : i * o,
            y(),
            r.onloaded && r.onloaded()
        }
          , y = this.render = function() {
            (r.json || i && o) && (r.json ? (c = r.json[f.currentFrame].frame.x,
            u = r.json[f.currentFrame].frame.y,
            p = r.json[f.currentFrame].frame.w,
            d = r.json[f.currentFrame].frame.h,
            s.width = p,
            s.height = d,
            f.deltaX = r.json[f.currentFrame].spriteSourceSize.x,
            f.deltaY = r.json[f.currentFrame].spriteSourceSize.y) : (c = f.currentFrame % o * r.width,
            u = ~~(f.currentFrame / o) * r.height,
            p = r.width,
            d = r.height),
            l.clearRect(0, 0, p, d),
            l.drawImage(h, -c, -u))
        }
        ;
        this.loop = function() {
            f.currentFrame++,
            f.currentFrame >= a - 1 && (f.currentFrame = 0),
            y()
        }
        ,
        this.renderMoins = function() {
            return y(),
            f.currentFrame <= 0 ? f.currentFrame : (f.currentFrame--,
            f.currentFrame)
        }
        ,
        this.renderPlus = function() {
            return y(),
            f.currentFrame >= a - 1 ? f.currentFrame : (f.currentFrame++,
            f.currentFrame)
        }
    }
    , {}],
    58: [function(t, e, n) {
        function r() {
            document.getElementById("intro").innerHTML = d(u),
            i(),
            l(),
            o()
        }
        function i() {
            dropdown = document.querySelector(".dropdown select"),
            c = document.querySelector(".compatibility-container button"),
            buttonTop = c.querySelector(".button-top"),
            buttonBottom = c.querySelector(".button-bottom"),
            buttonLeft = c.querySelector(".button-left"),
            buttonRight = c.querySelector(".button-right"),
            buttonText = c.querySelector(".button-text"),
            compatibility = document.querySelector(".compatibility"),
            dropdown = document.querySelector(".compatibility .dropdown"),
            degraded = document.querySelector(".compatibility .degraded"),
            app = document.querySelector(".app")
        }
        function o() {
            TweenLite.fromTo(compatibility, .6, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 1
            }),
            TweenLite.fromTo(dropdown, .6, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 1.3
            }),
            a(),
            TweenLite.fromTo(degraded, .6, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 1.9
            })
        }
        function a() {
            TweenLite.fromTo(buttonTop, .5, {
                x: buttonTop.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 1.6
            }),
            TweenLite.fromTo(buttonBottom, .5, {
                x: -buttonBottom.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 1.6
            }),
            TweenLite.fromTo(buttonLeft, .5, {
                y: -buttonLeft.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 1.6
            }),
            TweenLite.fromTo(buttonRight, .5, {
                y: buttonRight.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 1.6
            }),
            TweenLite.fromTo(buttonText, .5, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 1.9
            })
        }
        function s() {
            TweenLite.fromTo(buttonTop, .3, {
                x: 0,
                opacity: 1
            }, {
                x: buttonTop.offsetWidth,
                opacity: 0,
                ease: Sine.easeOut
            }),
            TweenLite.fromTo(buttonBottom, .3, {
                x: 0,
                opacity: 1
            }, {
                x: -buttonBottom.offsetWidth,
                opacity: 0,
                ease: Sine.easeOut
            }),
            TweenLite.fromTo(buttonLeft, .3, {
                y: 0,
                opacity: .5
            }, {
                y: -buttonLeft.offsetHeight,
                opacity: 0,
                ease: Sine.easeOut
            }),
            TweenLite.fromTo(buttonRight, .3, {
                y: 0,
                opacity: .5
            }, {
                y: buttonRight.offsetHeight,
                opacity: 0,
                ease: Sine.easeOut
            }),
            TweenLite.fromTo(buttonText, .3, {
                opacity: 1
            }, {
                opacity: 0,
                ease: Linear.easeNone,
                delay: .3,
                onComplete: function() {
                    p.setHash("/" + LANG + "/home")
                }
            })
        }
        function l() {
            dropdown.onchange = function() {
                var t = dropdown.options[dropdown.options.selectedIndex].getAttribute("value");
                "chrome" == t ? window.location.href = "https://play.google.com/store/apps/details?id=com.android.chrome" : "firefox" == t && (window.location.href = " https://play.google.com/store/apps/details?id=org.mozilla.firefox")
            }
            ,
            c.onclick = function() {
                s()
            }
            ,
            window.onresize = function(t) {
                h()
            }
        }
        function h() {
            var t = /iPad|iPhone|iPod/.test(navigator.platform)
              , e = document.body;
            e.offsetWidth > e.offsetHeight ? e.className = "landscape" + (t ? " ios" : "") : e.className = t ? " ios" : ""
        }
        var c, u = (t("./../../core/settings.js"),
        t("./../../controllers/dataController.js")), p = (t("./../../../edankwan/utils/domUtils"),
        t("hasher")), d = t("./../../../../templates/ui/compatibility.html");
        t("quick-loader");
        n.init = r
    }
    , {
        "./../../../../templates/ui/compatibility.html": 141,
        "./../../../edankwan/utils/domUtils": 118,
        "./../../controllers/dataController.js": 52,
        "./../../core/settings.js": 54,
        hasher: 8,
        "quick-loader": 38
    }],
    59: [function(t, e, n) {
        function r() {
            v.preInit(),
            v.setToBegining()
        }
        function i() {
            return "1" == u("accept-legal-age") ? void (p.isShittyUCBrowser ? (ga("send", "pageview", LANG + "/caution"),
            m.setHash("/" + LANG + "/compatibility")) : m.setHash("/" + LANG + "/home")) : (ga("send", "pageview", LANG + "/legalage"),
            document.getElementById("intro").innerHTML = f(d),
            o(),
            c(),
            void a())
        }
        function o() {
            intro = document.querySelector("#intro"),
            y = intro.querySelector("button"),
            legals = intro.querySelector(".intro-cs-legals"),
            _ = intro.querySelector("button .button-top"),
            x = intro.querySelector("button .button-bottom"),
            w = intro.querySelector("button .button-right"),
            b = intro.querySelector("button .button-left"),
            buttonText = intro.querySelector("button .button-text")
        }
        function a() {
            g.fromTo(legals, 3, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone
            }),
            l()
        }
        function s() {
            g.fromTo(legals, .5, {
                opacity: 1
            }, {
                opacity: 0,
                ease: Linear.easeNone,
                onComplete: function() {
                    p.isShittyUCBrowser ? m.setHash("/" + LANG + "/compatibility") : m.setHash("/" + LANG + "/home")
                }
            }),
            h()
        }
        function l() {
            g.fromTo(_, .3, {
                x: _.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 1
            }),
            g.fromTo(x, .3, {
                x: -x.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 1
            }),
            g.fromTo(b, .3, {
                y: -b.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 1
            }),
            g.fromTo(w, .3, {
                y: w.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 1
            }),
            g.fromTo(buttonText, .3, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 1.3
            })
        }
        function h() {
            g.fromTo(_, .3, {
                x: 0,
                opacity: 1
            }, {
                x: _.offsetWidth,
                opacity: 0,
                ease: Sine.easeOut
            }),
            g.fromTo(x, .3, {
                x: 0,
                opacity: 1
            }, {
                x: -x.offsetWidth,
                opacity: 0,
                ease: Sine.easeOut
            }),
            g.fromTo(b, .3, {
                y: 0,
                opacity: .5
            }, {
                y: -b.offsetHeight,
                opacity: 0,
                ease: Sine.easeOut
            }),
            g.fromTo(w, .3, {
                y: 0,
                opacity: .5
            }, {
                y: w.offsetHeight,
                opacity: 0,
                ease: Sine.easeOut
            }),
            g.fromTo(buttonText, .3, {
                opacity: 1
            }, {
                opacity: 0,
                ease: Linear.easeNone,
                delay: .3
            })
        }
        function c() {
            y.onclick = function() {
                s();
                var t = document.body;
                return document.webkitIsFullScreen ? document.webkitExitFullscreen() : t.webkitRequestFullscreen(),
                document.cookie = "accept-legal-age=1; expires=Mon, 19 May 2050 00:00:00 UTC; path=/",
                !1
            }
        }
        function u(t, e, n, r) {
            e = document.cookie.split("; ");
            var i = {};
            for (r = e.length - 1; r >= 0; r--)
                n = e[r].split("="),
                i[n[0]] = n[1];
            return i[t]
        }
        var p = t("./../../core/settings.js")
          , d = t("./../../controllers/dataController.js")
          , f = (t("./../../../edankwan/utils/domUtils"),
        t("./../../../../templates/ui/countryselector.html"))
          , m = t("hasher")
          , g = t("./../../../libs/TweenMax.min.js")
          , v = t("./intro3d");
        n.preInit = r,
        n.init = i;
        var y, _, x, b, w
    }
    , {
        "./../../../../templates/ui/countryselector.html": 142,
        "./../../../edankwan/utils/domUtils": 118,
        "./../../../libs/TweenMax.min.js": 130,
        "./../../controllers/dataController.js": 52,
        "./../../core/settings.js": 54,
        "./intro3d": 63,
        hasher: 8
    }],
    60: [function(t, e, n) {
        var r, i, o = this, a = {}, s = [], l = 0;
        this.init = function(t, e) {
            return h(t, e),
            o.isMoving = !1,
            c(),
            o
        }
        ;
        var h = function(t, e) {
            a.dragZoneEvents = document.getElementById("canvas"),
            a.blitter = t,
            a.context = e,
            a.points = document.getElementsByClassName("point"),
            o.currentFrame = 0,
            a.isAnimate = 0,
            r = intro.querySelector(".arrow-left.arrow"),
            i = intro.querySelector(".arrow-right.arrow"),
            s = [0, 12, 24, 50, 79, 90]
        }
          , c = function() {
            r.onclick = function() {
                if (!a.isAnimate) {
                    if (l--,
                    0 > l)
                        return void (l = 0);
                    for (var t = 0, e = o.currentFrame - s[l], n = 0; n < a.points.length; n++)
                        a.points[n].className = "point";
                    a.points[l].classList.add("selected"),
                    document.querySelector(".button-last").style.display = "block",
                    document.querySelector(".button-before").style.display = "none";
                    var r = setInterval(function() {
                        o.currentFrame = a.blitter.equilibristLeft.instance.renderMoins(),
                        a.context.clearRect(0, 0, 600, 600),
                        a.context.drawImage(a.blitter.equilibristLeft.canvas, a.blitter.equilibristLeft.instance.deltaX, a.blitter.equilibristLeft.instance.deltaY),
                        t++,
                        a.isAnimate = 1,
                        t == e && (a.isAnimate = 0,
                        clearInterval(r))
                    }, 200);
                    return !1
                }
            }
            ,
            i.onclick = function() {
                if (!(a.isAnimate || (l++,
                l > 5))) {
                    for (var t = 0, e = s[l] - o.currentFrame, n = 0; n < a.points.length; n++)
                        a.points[n].className = "point";
                    a.points[l].classList.add("selected"),
                    5 == l ? (document.querySelector(".button-last").style.display = "block",
                    document.querySelector(".button-before").style.display = "none") : (document.querySelector(".button-last").style.display = "none",
                    document.querySelector(".button-before").style.display = "block");
                    var r = setInterval(function() {
                        o.currentFrame = a.blitter.equilibristLeft.instance.renderPlus(),
                        a.context.clearRect(0, 0, 600, 600),
                        a.context.drawImage(a.blitter.equilibristLeft.canvas, a.blitter.equilibristLeft.instance.deltaX, a.blitter.equilibristLeft.instance.deltaY),
                        t++,
                        a.isAnimate = 1,
                        t == e && (a.isAnimate = 0,
                        clearInterval(r))
                    }, 200);
                    return !1
                }
            }
            ;
            for (var t = 0; t < a.points.length; t++)
                a.points[t].addEventListener("touchstart", function() {
                    if (!a.isAnimate) {
                        var t = this.getAttribute("data-frame");
                        s[l];
                        for (var e = 0; e < a.points.length; e++)
                            a.points[e].className = "point";
                        this.classList.add("selected"),
                        90 == t ? (document.querySelector(".button-last").style.display = "block",
                        document.querySelector(".button-before").style.display = "none") : (document.querySelector(".button-last").style.display = "none",
                        document.querySelector(".button-before").style.display = "block");
                        var n = 0;
                        if (!a.isAnimate)
                            if (t < o.currentFrame)
                                var r = o.currentFrame - t
                                  , i = setInterval(function() {
                                    o.currentFrame = a.blitter.equilibristLeft.instance.renderMoins(),
                                    a.context.clearRect(0, 0, 600, 600),
                                    a.context.drawImage(a.blitter.equilibristLeft.canvas, a.blitter.equilibristLeft.instance.deltaX, a.blitter.equilibristLeft.instance.deltaY),
                                    n++,
                                    a.isAnimate = 1,
                                    n == r && (a.isAnimate = 0,
                                    clearInterval(i))
                                }, 200);
                            else
                                var r = t - o.currentFrame
                                  , i = setInterval(function() {
                                    o.currentFrame = a.blitter.equilibristLeft.instance.renderPlus(),
                                    a.context.clearRect(0, 0, 600, 600),
                                    a.context.drawImage(a.blitter.equilibristLeft.canvas, a.blitter.equilibristLeft.instance.deltaX, a.blitter.equilibristLeft.instance.deltaY),
                                    n++,
                                    a.isAnimate = 1,
                                    n == r && (a.isAnimate = 0,
                                    clearInterval(i))
                                }, 200)
                    }
                });
            a.context.clearRect(0, 0, 600, 600),
            a.context.drawImage(a.blitter.equilibristLeft.canvas, a.blitter.equilibristLeft.instance.deltaX, a.blitter.equilibristLeft.instance.deltaY)
        }
    }
    , {}],
    61: [function(t, e, n) {
        function r() {
            f.setToBegining(),
            f.panToCenter(),
            d.delayedCall(4.5, f.fly),
            document.getElementById("intro").innerHTML = u(c),
            i(),
            l(),
            a()
        }
        function i() {
            g = document.querySelector(".app"),
            intro = document.querySelector("#intro"),
            introHome = document.querySelector(".intro-home"),
            buttonLauchn = intro.querySelector(".intro-home-launch"),
            y = intro.querySelectorAll(".intro-home-la div"),
            v = intro.querySelectorAll(".intro-home-french div"),
            _ = intro.querySelectorAll(".intro-home-touch div"),
            x = intro.querySelector(".intro-home-subtitle"),
            b = intro.querySelector(".intro-home-launch"),
            w = intro.querySelector(".icon-cardboard"),
            iconLogo = document.querySelector(".icon-logo"),
            getFreeCardboard = h.CUSTOM_VERSION ? intro.querySelector(".icon-iphone") : intro.querySelector(".intro-home-get"),
            h.CUSTOM_VERSION ? (separator = document.querySelector(".separator-wrapper .separator"),
            iphone = document.querySelector(".icon-iphone.icons-intro")) : ("vi_VNM" == LANG || "zh_TW" == LANG) && (getFreeCardboard.style.display = "none")
        }
        function o() {
            TweenMax.fromTo([introHome, iconLogo], .6, {
                opacity: 1
            }, {
                opacity: 0,
                ease: Linear.easeNone
            }),
            TweenMax.fromTo(w, .7, {
                scale: 1
            }, {
                scale: 0,
                ease: Back.easeInOut,
                onComplete: function() {
                    "classic" == h.TYPE_USER ? h.CUSTOM_VERSION ? p.setHash("/" + LANG + "/tutorial") : p.setHash("/" + LANG + "/tutorial") : "vip" == h.TYPE_USER ? p.setHash("/" + LANG + "/tpack") : h.CUSTOM_VERSION ? p.setHash("/" + LANG + "/tutorial") : p.setHash("/" + LANG + "/tutorial")
                }
            })
        }
        function a() {
            buttonLauchn.onclick = function() {
                return h.isUsingVR = !0,
                o(),
                m.initSound(),
                !1
            }
            ,
            w.onclick = function() {
                return h.isUsingVR = !0,
                o(),
                m.initSound(),
                !1
            }
            ,
            h.CUSTOM_VERSION && (iphone.onclick = function() {
                return h.isUsingVR = !1,
                s(),
                m.initSound(),
                !1
            }
            )
        }
        function s() {
            TweenMax.fromTo([introHome], .6, {
                opacity: 1
            }, {
                opacity: 0,
                ease: Linear.easeNone
            }),
            TweenMax.fromTo(iphone, .7, {
                scale: .9
            }, {
                scale: 0,
                ease: Back.easeInOut,
                onComplete: function() {
                    "vi_VNM" != LANG && "zh_TW" != LANG ? p.setHash("/" + LANG + "/cardboard") : p.setHash("/" + LANG + "/tutorial")
                }
            })
        }
        function l() {
            TweenMax.staggerFromTo([y[1], y[0]], 3, {
                opacity: 0,
                y: 20
            }, {
                opacity: 1,
                y: 0,
                ease: Sine.easeOut
            }, .5),
            TweenMax.staggerFromTo([v[5], v[1], v[4], v[2], v[3], v[0]], 2, {
                opacity: 0,
                y: 40
            }, {
                opacity: 1,
                y: 0,
                ease: Sine.easeOut
            }, .6),
            TweenMax.staggerFromTo([_[3], _[2], _[1], _[0], _[4]], 3, {
                opacity: 0,
                y: 20
            }, {
                opacity: 1,
                y: 0,
                ease: Sine.easeOut
            }, .6),
            TweenMax.fromTo(x, .5, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 3.5
            }),
            TweenMax.fromTo(b, .5, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 4
            }),
            TweenMax.fromTo(w, .5, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 4
            }),
            h.CUSTOM_VERSION && (TweenMax.fromTo(separator, .5, {
                y: -30
            }, {
                y: 0,
                ease: Back.easeOut,
                delay: 4.5
            }),
            TweenMax.fromTo(separator, .5, {
                width: 1
            }, {
                width: 50,
                ease: Back.easeOut,
                delay: 5
            })),
            TweenMax.fromTo(getFreeCardboard, .5, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: h.CUSTOM_VERSION ? 5.5 : 4.5
            })
        }
        var h = t("./../../core/settings.js")
          , c = t("./../../controllers/dataController.js")
          , u = (t("./../../../edankwan/utils/domUtils"),
        t("./../../../../templates/ui/home.html"))
          , p = t("hasher")
          , d = t("./../../../libs/TweenMax.min.js")
          , f = t("./intro3d")
          , m = t("./../../../bluephoria/Main");
        n.init = r;
        var g, v, y, _, x, b, w
    }
    , {
        "./../../../../templates/ui/home.html": 145,
        "./../../../bluephoria/Main": 77,
        "./../../../edankwan/utils/domUtils": 118,
        "./../../../libs/TweenMax.min.js": 130,
        "./../../controllers/dataController.js": 52,
        "./../../core/settings.js": 54,
        "./intro3d": 63,
        hasher: 8
    }],
    62: [function(t, e, n) {
        function r() {
            o.preInit()
        }
        function i() {
            o.init(),
            o.show()
        }
        var o = (t("./../../core/settings.js"),
        t("./../../controllers/dataController.js"),
        t("./../../../edankwan/utils/domUtils"),
        t("hasher"),
        t("./../../../libs/TweenMax.min.js"),
        t("./intro3d"));
        n.init = i,
        n.preinit = r
    }
    , {
        "./../../../edankwan/utils/domUtils": 118,
        "./../../../libs/TweenMax.min.js": 130,
        "./../../controllers/dataController.js": 52,
        "./../../core/settings.js": 54,
        "./intro3d": 63,
        hasher: 8
    }],
    63: [function(t, e, n) {
        function r() {
            L || (L = g.isShittyUCBrowser ? x.add("img/intro/bg_3.jpg").content : x.add("img/intro/bg_2.jpg").content,
            k = w.poolGet(),
            k.preload(),
            k.addReadyListener(function() {
                k.material.transparent = !0,
                k.material.opacity = 0
            }),
            k.visible = !0,
            k.position.set(O, D, -1e3))
        }
        function i() {
            if (S = y.scene,
            T = y.camera,
            M = new v.Vector3,
            R = new v.Vector3,
            E = new v.Texture(L),
            E.generateMipmaps = !1,
            E.minFilter = v.LinearFilter,
            E.needsUpdate = !0,
            A = new v.Mesh(new v.PlaneBufferGeometry(3840,1920),new v.MeshBasicMaterial({
                map: E
            })),
            A.position.y = 960,
            A.position.z = -3840,
            S.add(A),
            g.isShittyUCBrowser) {
                var t = new v.Mesh(new v.PlaneBufferGeometry(3840,1920),new v.MeshBasicMaterial({
                    map: E,
                    side: v.BackSide
                }));
                t.position.y = -960,
                t.position.z = -3840,
                t.rotation.x = Math.PI,
                S.add(t)
            }
            var e = new v.ImageUtils.loadTexture("img/waternormals.jpg");
            e.wrapS = e.wrapT = v.RepeatWrapping,
            C = new _(y.renderer,T,S,{
                textureWidth: 1024,
                textureHeight: 1024,
                waterNormals: e,
                alpha: .7,
                sunDirection: new v.Vector3(1,1,-1).normalize(),
                sunColor: 16777215,
                waterColor: 334130,
                distortionScale: 100
            });
            var n = new v.Mesh(new v.PlaneBufferGeometry(3840,3840),C.material);
            n.add(C),
            n.rotation.x = .5 * -Math.PI,
            n.position.z = -1920,
            S.add(n);
            var r = new v.PointLight(16777215,1,4e3);
            r.position.set(300, 300, 0),
            S.add(r),
            r = new v.AmbientLight(4210752),
            S.add(r),
            P = new v.Vector3,
            k.scale.set(1, 1, 1),
            g.isShittyUCBrowser || S.add(k)
        }
        function o(t) {
            U += .001 * t,
            T.fov = F / n.cameraZoom,
            T.updateProjectionMatrix();
            var e = 3 * Math.sin(2 * U) * n.swingRatio / n.cameraZoom
              , r = 1.5 * Math.cos(U) * n.swingRatio / n.cameraZoom;
            T.position.set(n.cameraX + e, n.cameraY + r, n.cameraZ),
            M.set(n.lookAtX - .5 * e, n.lookAtY - .5 * r, n.lookAtZ),
            k.visible && k.isReady && (k.lookAt(R),
            k.update(t)),
            T.lookAt(M),
            C.material.uniforms.time.value += .001 * t,
            (I ^= 1) && (C.mirrorCamera.fov = T.fov,
            C.render())
        }
        function a(t, e) {
            F = Math.tan(.125 * Math.PI) / (Math.max(t, e) / e) * 100
        }
        function s() {
            y.scene = S,
            y.camera = T,
            y.beforeRendered.add(o),
            y.beforeResized.add(a),
            y.resize(y.width, y.height),
            y.render(0)
        }
        function l() {
            b.killTweensOf(n),
            b.set(n, {
                cameraX: O,
                cameraY: D,
                lookAtX: O,
                lookAtY: D,
                cameraZoom: 2
            })
        }
        function h(t) {
            t = t === m ? 0 : t,
            b.to(n, t, {
                cameraX: 0,
                ease: "easeInOutSine"
            }),
            b.to(n, .95 * t, {
                lookAtX: 0,
                ease: "easeInOutSine"
            }),
            b.to(n, t, {
                cameraY: 20,
                ease: "easeInOutSine"
            }),
            b.to(n, .95 * t, {
                lookAtY: 30,
                ease: "easeInOutSine"
            }),
            b.to(n, .95 * t, {
                cameraZoom: 1,
                ease: "easeInOutSine"
            })
        }
        function c(t) {
            t = 5;
            var e = 1300
              , r = 56;
            b.to(n, .95 * t, {
                cameraX: e,
                ease: "easeInOutSine"
            }),
            b.to(n, t, {
                lookAtX: e,
                ease: "easeInOutSine"
            }),
            b.to(n, .95 * t, {
                cameraY: r,
                ease: "easeInOutSine"
            }),
            b.to(n, t, {
                lookAtY: r,
                ease: "easeInOutSine"
            }),
            b.to(n, .95 * t, {
                cameraZoom: 2,
                ease: "easeInOutSine"
            })
        }
        function u(t) {
            t = 0;
            var e = 1e3
              , r = 56;
            b.to(n, .95 * t, {
                cameraX: e,
                ease: "easeInOutSine"
            }),
            b.to(n, t, {
                lookAtX: e,
                ease: "easeInOutSine"
            }),
            b.to(n, .95 * t, {
                cameraY: r,
                ease: "easeInOutSine"
            }),
            b.to(n, t, {
                lookAtY: r,
                ease: "easeInOutSine"
            }),
            b.to(n, .95 * t, {
                cameraZoom: 2,
                ease: "easeInOutSine"
            })
        }
        function p(t) {
            t = 5;
            var e = 557
              , r = 168;
            b.to(n, t, {
                cameraX: e,
                ease: "easeInOutSine"
            }),
            b.to(n, .95 * t, {
                lookAtX: e,
                ease: "easeInOutSine"
            }),
            b.to(n, t, {
                cameraY: r,
                ease: "easeInOutSine"
            }),
            b.to(n, .95 * t, {
                lookAtY: r,
                ease: "easeInOutSine"
            }),
            b.to(n, .95 * t, {
                cameraZoom: 1.6,
                ease: "easeInOutSine"
            })
        }
        function d() {
            y.beforeRendered.remove(o),
            y.beforeResized.remove(a)
        }
        function f() {
            R.set(-200, 200, -3840),
            k.visible = !0,
            k.material.opacity = 0,
            k.scale.set(.2, .2, .2),
            k.position.copy(T.position),
            k.lookAt(R),
            k.translateX(-5),
            k.translateY(-2.5),
            k.translateZ(-5),
            b.killTweensOf(k.material),
            b.killTweensOf(k.position),
            b.killTweensOf(k.scale),
            b.to(k.material, .1, {
                opacity: 1
            }),
            b.to(k.position, 2.5, {
                delay: .5,
                x: R.x,
                ease: "easeInCubic"
            }),
            b.to(k.position, 3, {
                y: R.y,
                ease: "easeInCubic"
            }),
            b.to(k.position, 3, {
                z: R.z + 1,
                ease: "easeInCubic"
            }),
            b.to(k.scale, 3, {
                x: .01,
                y: .01,
                z: .01,
                ease: "easeInCubic",
                onComplete: function() {
                    k.visible = !1
                }
            })
        }
        var m, g = t("./../../core/settings.js"), v = t("./../../../libs/threejs/three.min.js"), y = t("./../../../edankwan/3d/stage3d"), _ = t("./WaterShader"), x = t("quick-loader"), b = t("./../../../libs/TweenMax.min.js"), w = t("./../../../bluephoria/animals/Bird");
        n.preInit = r,
        n.init = i,
        n.show = s,
        n.hide = d,
        n.panToCenter = h,
        n.panToRight = c,
        n.panToRightLandscape = u,
        n.setToBegining = l,
        n.panToLight = p,
        n.fly = f,
        n.cameraX = 0,
        n.cameraY = 0,
        n.cameraZ = 0,
        n.lookAtX = 0,
        n.lookAtY = 0,
        n.lookAtZ = -384,
        n.cameraZoom = 1,
        n.swingRatio = 1;
        var S, T, M, C, A, E, L, P, k, R, O = -684, D = 898, F = 1, U = 0, I = 1
    }
    , {
        "./../../../bluephoria/animals/Bird": 82,
        "./../../../edankwan/3d/stage3d": 114,
        "./../../../libs/TweenMax.min.js": 130,
        "./../../../libs/threejs/three.min.js": 139,
        "./../../core/settings.js": 54,
        "./WaterShader": 56,
        "quick-loader": 38
    }],
    64: [function(t, e, n) {
        function r() {
            document.getElementsByClassName("app")[0].innerHTML = h(l),
            i(),
            o()
        }
        function i() {
            languageSelect = document.querySelector(".intro-language select"),
            dropdown = document.querySelector(".dropdown select"),
            app = document.querySelector(".app");
            for (var t = 0; t < languageSelect.options.length; t++)
                languageSelect.options[t].getAttribute("value") == LANG && (languageSelect.options.selectedIndex = t)
        }
        function o() {
            languageSelect.onchange = function() {
                var t = languageSelect.options[languageSelect.options.selectedIndex].getAttribute("value");
                LANG = t,
                s.LOCALE_URL = s.DATA_URL + "locale/" + LANG,
                document.getElementsByTagName("html")[0].setAttribute("lang", LANG),
                l.preloadLocale(),
                c.start(function() {
                    r(),
                    document.getElementsByClassName("text-language")[0].innerHTML = l.locale.intro.langue,
                    "zh_CN" == LANG ? s.finalMap = "shanghai" : s.finalMap = "altCity"
                })
            }
            ,
            dropdown.onchange = function() {
                var t = dropdown.options[dropdown.options.selectedIndex].getAttribute("value");
                "chrome" == t ? window.location.href = "https://play.google.com/store/apps/details?id=com.android.chrome" : "yandex" == t ? window.location.href = "https://play.google.com/store/apps/details?id=com.yandex.browser" : "firefox" == t ? window.location.href = " https://play.google.com/store/apps/details?id=org.mozilla.firefox" : "ucbrowser" == t && (window.location.href = "https://play.google.com/store/apps/details?id=com.UCMobile.intl")
            }
            ,
            window.onresize = function(t) {
                a()
            }
        }
        function a() {
            var t = /iPad|iPhone|iPod/.test(navigator.platform)
              , e = document.body;
            e.offsetWidth > e.offsetHeight ? e.className = "landscape" + (t ? " ios" : "") : e.className = t ? " ios" : ""
        }
        var s = t("./../../core/settings.js")
          , l = t("./../../controllers/dataController.js")
          , h = (t("./../../../edankwan/utils/domUtils"),
        t("./../../../../templates/ui/nowebgl.html"))
          , c = t("quick-loader");
        n.init = r
    }
    , {
        "./../../../../templates/ui/nowebgl.html": 146,
        "./../../../edankwan/utils/domUtils": 118,
        "./../../controllers/dataController.js": 52,
        "./../../core/settings.js": 54,
        "quick-loader": 38
    }],
    65: [function(t, e, n) {
        function r() {
            g.panToCenter(),
            document.getElementById("intro").innerHTML = d(p),
            document.getElementsByClassName("icon-logo")[0].style.display = "none",
            i(),
            c(),
            o()
        }
        function i() {
            intro = document.querySelector("#intro"),
            introOrder = document.querySelector(".intro-order"),
            subtitleWrapper = document.querySelector(".intro-order-wrapper"),
            buttonLaunch = document.querySelector("button.button-launch"),
            buttonOrder = document.querySelector("button.button-order .button-text a"),
            languageSelect = document.querySelector(".intro-language select")
        }
        function o() {
            TweenMax.fromTo(document.querySelector(".icons-intro.icon-logo"), .3, {
                opacity: 1
            }, {
                opacity: 0
            }),
            document.querySelector(".logo").style.display = "block",
            TweenMax.fromTo(document.querySelector(".logo"), .3, {
                opacity: 0
            }, {
                opacity: 1
            }),
            l(document.querySelector(".intro-order .intro-order-title"), 0),
            l(document.querySelector(".intro-order .intro-order-cardboardtext"), .5),
            h(1),
            a(document.querySelector("button.button-order"), 1.5),
            l(document.querySelector(".intro-order .intro-order-play"), 1.5),
            a(buttonLaunch, 1.5)
        }
        function a(t, e) {
            var n = t.querySelector(".button-top")
              , r = t.querySelector(".button-bottom")
              , i = t.querySelector(".button-left")
              , o = t.querySelector(".button-right")
              , a = t.querySelector(".button-text");
            m.fromTo(n, .3, {
                x: n.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 1 + e
            }),
            m.fromTo(r, .3, {
                x: -r.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 1 + e
            }),
            m.fromTo(i, .3, {
                y: -i.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 1 + e
            }),
            m.fromTo(o, .3, {
                y: o.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 1 + e
            }),
            m.fromTo(a, .3, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 1.3 + e
            })
        }
        function s(t) {
            var e = t.querySelector(".button-top")
              , n = t.querySelector(".button-bottom")
              , r = t.querySelector(".button-left")
              , i = t.querySelector(".button-right")
              , o = t.querySelector(".button-text");
            m.fromTo(e, .3, {
                x: 0,
                opacity: 1
            }, {
                x: e.offsetWidth,
                opacity: 0,
                ease: Sine.easeOut
            }),
            m.fromTo(n, .3, {
                x: 0,
                opacity: 1
            }, {
                x: -n.offsetWidth,
                opacity: 0,
                ease: Sine.easeOut
            }),
            m.fromTo(r, .3, {
                y: 0,
                opacity: .5
            }, {
                y: -r.offsetHeight,
                opacity: 0,
                ease: Sine.easeOut
            }),
            m.fromTo(i, .3, {
                y: 0,
                opacity: .5
            }, {
                y: i.offsetHeight,
                opacity: 0,
                ease: Sine.easeOut
            }),
            m.fromTo(o, .3, {
                opacity: 1
            }, {
                opacity: 0,
                ease: Linear.easeNone,
                delay: .3,
                onComplete: function() {
                    u.CUSTOM_VERSION ? f.setHash("/" + LANG + "/tutorial") : f.setHash("/" + LANG + "/xp")
                }
            })
        }
        function l(t, e) {
            m.fromTo(t, 1, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 1 + e
            })
        }
        function h(t) {
            m.fromTo(subtitleWrapper, .6, {
                opacity: 0,
                y: subtitleWrapper.offsetHeight
            }, {
                opacity: 1,
                y: 0,
                ease: Sine.easeNone,
                delay: 1 + t
            })
        }
        function c() {
            buttonLaunch.onclick = function() {
                return s(buttonLaunch),
                main.initSound(),
                !1
            }
            ,
            buttonOrder.onclick = function() {
                ga("send", {
                    hitType: "event",
                    eventCategory: "link",
                    eventAction: "click",
                    eventLabel: LANG + "/sharingpage"
                })
            }
            ,
            languageSelect.onchange = function() {
                var t = languageSelect.options[languageSelect.options.selectedIndex].getAttribute("value");
                LANG = t,
                u.LOCALE_URL = u.DATA_URL + "locale/" + LANG,
                document.location = "http://" + document.location.hostname + document.location.pathname + "#!/" + LANG + "/cardboard",
                location.reload()
            }
        }
        var u = t("./../../core/settings.js")
          , p = t("./../../controllers/dataController.js")
          , d = (t("./../../../edankwan/utils/domUtils"),
        t("./../../../../templates/ui/orderandlaunch.html"))
          , f = t("hasher")
          , m = t("./../../../libs/TweenMax.min.js")
          , g = t("./intro3d");
        t("quick-loader");
        n.init = r
    }
    , {
        "./../../../../templates/ui/orderandlaunch.html": 147,
        "./../../../edankwan/utils/domUtils": 118,
        "./../../../libs/TweenMax.min.js": 130,
        "./../../controllers/dataController.js": 52,
        "./../../core/settings.js": 54,
        "./intro3d": 63,
        hasher: 8,
        "quick-loader": 38
    }],
    66: [function(t, e, n) {
        function r() {}
        function i(t) {
            h(this, {
                canvas: l,
                time: 0,
                img: l,
                offsetX: 0,
                offsetY: 0,
                deltaX: 0,
                deltaY: 0,
                fps: 25
            }, t),
            this.numOfFrames = this.frames.length,
            this.json && (this.frames = JSON.parse(this.json).frames),
            this.frames || (this.rows = this.img.width / this.width,
            this.cols = this.img.height / this.height),
            this._initCanvas()
        }
        function o() {
            var t = this.canvas = this.canvas || document.createElement("canvas");
            if (this.ctx = t.getContext("2d"),
            this.width && this.height)
                t.width = this.width,
                t.height = this.height;
            else {
                for (var e, n = 0, r = 0, i = 0, o = this.frames.length; o > i; i++)
                    e = this.frames[i].frame,
                    n = Math.max(n, e.w),
                    r = Math.max(r, e.h);
                this.width = t.width = n,
                this.height = t.height = r
            }
        }
        function a(t) {
            return t * this.fps
        }
        function s(t) {
            this.time += t || 0;
            var e, n, r, i, o, a, s = this.currentFrame = ~~(this.time / 1e3 * this.fps) % this.numOfFrames, l = this.offsetX, h = this.offsetY, c = this.deltaX, u = this.deltaY;
            if (this.frames) {
                var p = this.frames[s];
                o = p.frame.x,
                a = p.frame.y,
                r = p.frame.w,
                i = p.frame.h,
                e = p.frame.x,
                n = p.frame.y,
                l += p.spriteSourceSize.x + c,
                h += p.spriteSourceSize.y + u
            } else
                r = this.width,
                i = this.height,
                e = s % this.cols * r,
                n = ~~(s / this.cols) * i;
            this.ctx.clearRect(0, 0, this.width, this.height),
            this.ctx.drawImage(this.img, e, n, r, i, l, h, r, i)
        }
        var l, h = t("mout/object/mixIn");
        e.exports = function() {
            return new r
        }
        ;
        var c = r.prototype;
        c.init = i,
        c._initCanvas = o,
        c.getOffsetFrameDeltaTime = a,
        c.render = s
    }
    , {
        "mout/object/mixIn": 35
    }],
    67: [function(t, e, n) {
        function r() {
            f.add("data/sbs.json", {
                onLoad: function(t) {
                    S = t
                }
            })
        }
        function i() {
            _.panToRight(),
            document.getElementById("intro").innerHTML = d(p),
            o(),
            h(),
            a(),
            l(),
            c()
        }
        function o() {
            intro = document.querySelector("#intro"),
            buttonSkip = intro.querySelector("button"),
            introPack = intro.querySelector(".intro-tpack"),
            b = intro.querySelector(".intro-tpack-steps div"),
            w = document.getElementById("canvas"),
            context = w.getContext("2d"),
            buttonTop = intro.querySelector("button .button-top"),
            buttonBottom = intro.querySelector("button .button-bottom"),
            buttonRight = intro.querySelector("button .button-right"),
            buttonLeft = intro.querySelector("button .button-left"),
            buttonText = intro.querySelector("button .button-text"),
            points = intro.querySelectorAll(".point")
        }
        function a() {
            y.fromTo(buttonTop, .3, {
                x: buttonTop.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 1
            }),
            y.fromTo(buttonBottom, .3, {
                x: -buttonBottom.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 1
            }),
            y.fromTo(buttonLeft, .3, {
                y: -buttonLeft.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 1
            }),
            y.fromTo(buttonRight, .3, {
                y: buttonRight.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 1
            }),
            y.fromTo(buttonText, .3, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 1.3
            }),
            TweenMax.staggerFromTo(points, .5, {
                y: 50,
                opacity: 0
            }, {
                y: 0,
                opacity: 1,
                ease: Back.easeInOut,
                easeParams: [1]
            }, .1),
            TweenMax.fromTo(w, .3, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 1.3
            })
        }
        function s() {
            y.fromTo(buttonTop, .3, {
                x: 0,
                opacity: 1
            }, {
                x: buttonTop.offsetWidth,
                opacity: 0,
                ease: Sine.easeOut
            }),
            y.fromTo(buttonBottom, .3, {
                x: 0,
                opacity: 1
            }, {
                x: -buttonBottom.offsetWidth,
                opacity: 0,
                ease: Sine.easeOut
            }),
            y.fromTo(buttonLeft, .3, {
                y: 0,
                opacity: .5
            }, {
                y: -buttonLeft.offsetHeight,
                opacity: 0,
                ease: Sine.easeOut
            }),
            y.fromTo(buttonRight, .3, {
                y: 0,
                opacity: .5
            }, {
                y: buttonRight.offsetHeight,
                opacity: 0,
                ease: Sine.easeOut
            }),
            y.fromTo(buttonText, .3, {
                opacity: 1
            }, {
                opacity: 0,
                ease: Linear.easeNone,
                delay: .3,
                onComplete: function() {
                    u.CUSTOM_VERSION ? v.setHash("/" + LANG + "/tutorial") : v.setHash("/" + LANG + "/xp")
                }
            })
        }
        function l() {
            var t = m
              , e = t.init({
                picture: "img/intro/sbs.png",
                frames: S.frames,
                firstFrame: 1,
                onloaded: function() {
                    var n = Array();
                    n.equilibristLeft = {
                        canvas: e,
                        instance: t
                    },
                    context.drawImage(n.equilibristLeft.canvas, 0, 0),
                    g.init(n, context)
                }
            })
        }
        function h() {
            document.querySelector(".icons-intro.icon-logo").style.display = "none"
        }
        function c() {
            buttonSkip.onclick = function() {
                return x.initSound(),
                s(),
                !1
            }
        }
        var u = t("./../../core/settings.js")
          , p = t("./../../controllers/dataController.js")
          , d = (t("./../../../edankwan/utils/domUtils"),
        t("./../../../../templates/ui/tpack.html"))
          , f = t("quick-loader")
          , m = t("./blitter")
          , g = t("./dragzone")
          , v = t("hasher")
          , y = t("./../../../libs/TweenMax.min.js")
          , _ = t("./intro3d")
          , x = t("./../../../bluephoria/Main");
        n.preInit = r,
        n.init = i;
        var b, w, S
    }
    , {
        "./../../../../templates/ui/tpack.html": 151,
        "./../../../bluephoria/Main": 77,
        "./../../../edankwan/utils/domUtils": 118,
        "./../../../libs/TweenMax.min.js": 130,
        "./../../controllers/dataController.js": 52,
        "./../../core/settings.js": 54,
        "./blitter": 57,
        "./dragzone": 60,
        "./intro3d": 63,
        hasher: 8,
        "quick-loader": 38
    }],
    68: [function(t, e, n) {
        function r() {
            v.panToRight(),
            document.getElementById("intro").innerHTML = f(d),
            i(),
            u(),
            p.nativeAndroid ? o() : a()
        }
        function i() {
            intro = document.querySelector("#intro"),
            y = intro.querySelector("button"),
            legals = intro.querySelector(".intro-tuto"),
            _ = intro.querySelector("button .button-top"),
            x = intro.querySelector("button .button-bottom"),
            w = intro.querySelector("button .button-right"),
            b = intro.querySelector("button .button-left"),
            buttonText = intro.querySelector("button .button-text"),
            logo = document.querySelector(".logo"),
            iconBird = intro.querySelector(".icon-bird"),
            introText = intro.querySelector(".intro-cs-legals"),
            wifi = intro.querySelector(".icons-intro.icon-wifi"),
            textWifi = intro.querySelector(".intro-xp-loader-bestxp"),
            square1 = intro.querySelector(".square1"),
            square2 = intro.querySelector(".square2"),
            square3 = intro.querySelector(".square3")
        }
        function o() {
            g.fromTo(square1, 1.5, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Back.easeOut,
                delay: 1
            }),
            g.fromTo(square2, 1.4, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Back.easeOut,
                delay: 1.2
            }),
            g.fromTo(square3, 1.3, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Back.easeOut,
                delay: 1.3
            }),
            g.fromTo(introText, 1, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 2
            }),
            h(),
            g.fromTo(wifi, 1, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 2.6
            }),
            g.fromTo(textWifi, 1.1, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 2.8
            }),
            s()
        }
        function a() {
            g.fromTo(square1, 1.5, {
                scale: 0,
                opacity: 0,
                x: -25,
                rotationZ: "400deg"
            }, {
                scale: 1,
                x: 0,
                opacity: 1,
                rotationZ: "0deg",
                ease: Back.easeOut,
                delay: 1
            }),
            g.fromTo(square2, 1.4, {
                scale: 0,
                opacity: 0,
                x: -25,
                rotationZ: "300deg"
            }, {
                scale: 1,
                x: 0,
                opacity: 1,
                rotationZ: "0deg",
                ease: Back.easeOut,
                delay: 1.2
            }),
            g.fromTo(square3, 1.3, {
                scale: 0,
                opacity: 0,
                x: -25,
                rotationZ: "200deg"
            }, {
                scale: 1,
                x: 0,
                opacity: 1,
                rotationZ: "0deg",
                ease: Back.easeOut,
                delay: 1.3
            }),
            g.fromTo(introText, 1, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 2
            }),
            h(),
            g.fromTo(wifi, 1, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 2.6
            }),
            g.fromTo(textWifi, 1.1, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 2.8
            }),
            s()
        }
        function s() {
            g.fromTo(logo, .3, {
                opacity: 1
            }, {
                opacity: 0,
                ease: Sine.easeOut,
                onComplete: function() {
                    logo.style.display = "none"
                }
            })
        }
        function l() {
            g.fromTo(legals, .5, {
                opacity: 1
            }, {
                opacity: 0,
                ease: Linear.easeNone,
                onComplete: function() {
                    m.setHash("/" + LANG + "/xp")
                }
            }),
            c()
        }
        function h() {
            g.fromTo(_, .5, {
                x: _.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 2.2
            }),
            g.fromTo(x, .5, {
                x: -x.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 2.2
            }),
            g.fromTo(b, .5, {
                y: -b.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 2.2
            }),
            g.fromTo(w, .5, {
                y: w.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 2.2
            }),
            g.fromTo(buttonText, .5, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 2.5
            })
        }
        function c() {
            g.fromTo(_, .3, {
                x: 0,
                opacity: 1
            }, {
                x: _.offsetWidth,
                opacity: 0,
                ease: Sine.easeOut
            }),
            g.fromTo(x, .3, {
                x: 0,
                opacity: 1
            }, {
                x: -x.offsetWidth,
                opacity: 0,
                ease: Sine.easeOut
            }),
            g.fromTo(b, .3, {
                y: 0,
                opacity: .5
            }, {
                y: -b.offsetHeight,
                opacity: 0,
                ease: Sine.easeOut
            }),
            g.fromTo(w, .3, {
                y: 0,
                opacity: .5
            }, {
                y: w.offsetHeight,
                opacity: 0,
                ease: Sine.easeOut
            }),
            g.fromTo(buttonText, .3, {
                opacity: 1
            }, {
                opacity: 0,
                ease: Linear.easeNone,
                delay: .3
            })
        }
        function u() {
            y.onclick = function() {
                return l(),
                !1
            }
        }
        var p = t("./../../core/settings.js")
          , d = t("./../../controllers/dataController.js")
          , f = (t("./../../../edankwan/utils/domUtils"),
        t("./../../../../templates/ui/tutorial.html"))
          , m = t("hasher")
          , g = t("./../../../libs/TweenMax.min.js")
          , v = t("./intro3d");
        n.init = r;
        var y, _, x, b, w
    }
    , {
        "./../../../../templates/ui/tutorial.html": 152,
        "./../../../edankwan/utils/domUtils": 118,
        "./../../../libs/TweenMax.min.js": 130,
        "./../../controllers/dataController.js": 52,
        "./../../core/settings.js": 54,
        "./intro3d": 63,
        hasher: 8
    }],
    69: [function(t, e, n) {
        function r() {
            m.isShittyUCBrowser && (document.body.style.overflow = "auto",
            document.body.style.marginBottom = "50px",
            scrollTo(0, 1e3),
            scroll(0, 1e3),
            window.scrollTo(0, 1e3)),
            O ? (x.fromTo([M, E], .3, {
                scale: 0,
                opacity: 0
            }, {
                scale: 1,
                opacity: 1,
                ease: "easeInOutBack"
            }),
            P.style.display = "block",
            S.restart(),
            D = 0,
            S.progress.add(l),
            S.loaded.addOnce(d)) : (b.panToRight(),
            O = !0,
            document.getElementById("intro").innerHTML = w(g),
            i(),
            o(),
            f(),
            y.onRendered.add(a),
            a(0),
            v.start(s)),
            void 0 === m.isUsingVR || 1 == m.isUsingVR ? document.querySelector(".intro-xp-loader-title").style.display = "inline-block" : document.querySelector(".intro-xp-loader-title").style.display = "none"
        }
        function i() {
            M = document.querySelector(".intro-xp-loader-wrapper"),
            C = document.querySelector(".intro-xp-loader-text"),
            A = document.querySelector(".icons-intro.icon-logo"),
            E = document.querySelector(".intro-xp-loader-title"),
            L = document.querySelector(".intro-language"),
            P = document.getElementById("intro"),
            document.querySelector(".icon-logo").style.display = "none"
        }
        function o() {
            m.SKIP_XP_LOADING = !1,
            S.preInit(),
            m.SKIP_XP_LOADING ? k = !0 : c(),
            T.init({
                canvas: document.querySelector(".intro-xp-loader-canvas"),
                img: m.loaderImg,
                frames: g.loader,
                deltaY: 17
            }),
            T.offsetX = (T.width - 1080) / 2,
            T.offsetY = (T.height - 1920) / 2;
            var t = T.canvas.style;
            t.width = (T.width >> 1) + "px",
            t.height = (T.height >> 1) + "px"
        }
        function a(t) {
            T.render(t)
        }
        function s(t) {
            F = Math.max(F, t),
            h(),
            R || 1 !== t || (R = !0,
            k && p())
        }
        function l(t) {
            D = Math.max(D, t.progress / t.total),
            h()
        }
        function h() {
            var t = .95 * D + .05 * F
              , e = Math.round(100 * t);
            C.innerHTML = e + "<span class='pourcent'>%</span>"
        }
        function c() {
            _.fromTo(M, .3, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.EaseNone,
                delay: 1
            }),
            x.fromTo(A, .6, {
                opacity: 1,
                scale: 1
            }, {
                scale: .3,
                opacity: 0,
                ease: "easeInOutBack",
                delay: 1.3
            }),
            x.fromTo(E, .5, {
                opacity: 0
            }, {
                opacity: 1,
                ease: "linear",
                delay: 1.3
            }),
            x.to(L, .5, {
                opacity: 0,
                ease: "linear"
            }),
            x.fromTo(document.querySelector(".intro-xp-loader-canvas"), .6, {
                scale: .6,
                opacity: 0
            }, {
                scale: 1,
                opacity: 1,
                ease: "easeOutBack",
                delay: 1.5
            }),
            x.fromTo(C, .5, {
                opacity: 0
            }, {
                opacity: 1,
                delay: 1.4,
                ease: "linear",
                onComplete: u
            })
        }
        function u() {
            k = !0,
            R && p()
        }
        function p() {
            D = 0,
            S.progress.add(l),
            S.loaded.addOnce(d),
            S.init(),
            S.start()
        }
        function d() {
            S.progress.remove(l),
            x.fromTo(E, .5, {
                opacity: 1
            }, {
                opacity: 0,
                ease: "linear"
            }),
            x.fromTo(M, .6, {
                scale: 1,
                opacity: 1
            }, {
                scale: 0,
                opacity: 0,
                ease: "easeInOutBack"
            }),
            P.style.display = "none",
            L.style.display = "none",
            y.onRendered.remove(a)
        }
        function f() {}
        var m = t("./../../core/settings.js")
          , g = t("./../../controllers/dataController.js")
          , v = t("quick-loader")
          , y = t("./../../../edankwan/core/stageReference.js")
          , _ = (t("./../../../edankwan/utils/domUtils"),
        t("hasher"),
        t("./../../../libs/TweenMax.min.js"))
          , x = t("./../../../libs/TweenMax.min.js")
          , b = t("./intro3d")
          , w = t("./../../../../templates/ui/xp.html")
          , S = t("./../../../bluephoria/Main")
          , T = t("./sprite")();
        n.init = r;
        var M, C, A, E, L, P, k = !1, R = !1, O = !1, D = 0, F = 0
    }
    , {
        "./../../../../templates/ui/xp.html": 154,
        "./../../../bluephoria/Main": 77,
        "./../../../edankwan/core/stageReference.js": 115,
        "./../../../edankwan/utils/domUtils": 118,
        "./../../../libs/TweenMax.min.js": 130,
        "./../../controllers/dataController.js": 52,
        "./../../core/settings.js": 54,
        "./intro3d": 63,
        "./sprite": 66,
        hasher: 8,
        "quick-loader": 38
    }],
    70: [function(t, e, n) {
        function r() {
            var t = document.getElementById("outro");
            document.getElementById("mainCanvas").style.display = "none",
            document.getElementById("outro").innerHTML = d(u),
            t.style.display = "inline-block",
            i(),
            a(),
            m.style.display = "none",
            o(),
            l()
        }
        function i() {
            f = document.querySelectorAll(".outro-endxp"),
            m = document.querySelector(".logo"),
            g = document.querySelector(".congrats h1"),
            v = document.querySelector(".sub"),
            y = document.querySelector(".notice")
        }
        function o() {
            var t = u.locale.outro
              , e = t.score.congratulation;
            if ("en_EN" == LANG)
                for (var n = "", r = 0; r < e.length; r++) {
                    var i = e.substr(r, 1);
                    n += '<span class="alpha alpha-' + i + '-medium">' + i + "</span>"
                }
            else
                n = "<span style='font-size:32px !important; font-weight: 100; font-family: arial; text-transform: uppercase; color: white;'>" + t.congrats.congratstitle + "</span>";
            g.innerHTML = n,
            v.innerHTML = t.congrats.sub,
            y.innerHTML = t.congrats.notice
        }
        function a() {
            document.body.classList.contains("landscape") ? window.addEventListener("resize", s) : setTimeout(function() {
                h()
            }, 5e3)
        }
        function s() {
            -1 !== navigator.userAgent.indexOf("MicroMessenger") ? setTimeout(function() {
                h()
            }, 5e3) : window.innerWidth < window.innerHeight && (window.removeEventListener("resize", s),
            h())
        }
        function l() {
            TweenMax.fromTo(g, .5, {
                opacity: 0,
                y: 30
            }, {
                opacity: 1,
                y: 0,
                ease: Expo.easeOut
            }, 0),
            TweenMax.fromTo(v, .5, {
                opacity: 0,
                y: 30
            }, {
                opacity: 1,
                y: 0,
                ease: Expo.easeOut
            }, .1),
            c.isUsingVR ? TweenMax.fromTo(y, .5, {
                opacity: 0,
                y: 30
            }, {
                opacity: 1,
                y: 0,
                ease: Expo.easeOut
            }, .2) : y.style.display = "none"
        }
        function h() {
            p.setHash(LANG + "/scoring")
        }
        var c = t("./../../core/settings.js")
          , u = t("./../../controllers/dataController.js")
          , p = (t("./../../../bluephoria/game/scores/scoreController"),
        t("./../../../edankwan/utils/domUtils"),
        t("hasher"))
          , d = (t("./../../../libs/TweenMax.min.js"),
        t("./../../../../templates/ui/endxp.html"));
        n.init = r,
        n.endxpActive = _;
        var f, m, g, v, y, _ = 0
    }
    , {
        "./../../../../templates/ui/endxp.html": 143,
        "./../../../bluephoria/game/scores/scoreController": 102,
        "./../../../edankwan/utils/domUtils": 118,
        "./../../../libs/TweenMax.min.js": 130,
        "./../../controllers/dataController.js": 52,
        "./../../core/settings.js": 54,
        hasher: 8
    }],
    71: [function(t, e, n) {
        function r(t, e) {
            H ? (H = 0,
            u()) : (document.getElementById("outro").innerHTML = b(g),
            document.querySelector("#outro").style.display = "block",
            document.querySelector(".outro-popin").innerHTML = w(g),
            o(),
            a(t, e),
            h(),
            s(),
            l(),
            B = document.querySelector(".icons-intro.icon-logo"),
            N = document.querySelector(".intro-language"),
            B.style.display = "none",
            N.style.display = "none",
            H = 1,
            m(e),
            f(t),
            p())
        }
        function i() {
            1 == H ? c() : (r(),
            c())
        }
        function o() {
            z = document.getElementById("outro"),
            score = document.querySelector("#outro .score"),
            I = score.querySelector(".squares"),
            title = score.querySelector(".title"),
            total = score.querySelector(".total"),
            items = score.querySelector(".items"),
            C = document.querySelector(".replay button .button-top"),
            A = document.querySelector(".replay button .button-bottom"),
            E = document.querySelector(".replay button .button-left"),
            L = document.querySelector(".replay button .button-right"),
            P = document.querySelector(".replay button .button-text"),
            R = document.querySelector(".share button .button-top"),
            O = document.querySelector(".share button .button-bottom"),
            D = document.querySelector(".share button .button-left"),
            F = document.querySelector(".share button .button-right"),
            U = document.querySelector(".share button .button-text"),
            buttonShare = score.querySelector(".share button"),
            buttonShareClose = score.querySelector(".icons-outro.icon-close"),
            buttonReplay = score.querySelector(".replay button"),
            popup = score.querySelector(".outro-popin"),
            j = popup.querySelector(".share-item.share-fb"),
            V = popup.querySelector(".share-item.share-twitter"),
            G = popup.querySelector(".share-item.share-weibo")
        }
        function a(t, e) {
            buttonShare.onclick = function() {
                if (-1 !== navigator.userAgent.indexOf("MicroMessenger")) {
                    var t = v.createElement(M(g));
                    document.getElementsByClassName("app")[0].appendChild(t),
                    setTimeout(function() {
                        _.to(document.querySelector(".wechat-layer"), .9, {
                            opacity: 0,
                            ease: Linear.easeNone,
                            onComplete: function() {
                                document.querySelector(".wechat-layer").remove()
                            }
                        })
                    }, 4e3)
                } else
                    y.setHash(LANG + "/share");
                return !1
            }
            ,
            document.querySelector(".onshare-wechat .close").onclick = function() {
                _.to(document.querySelector(".onshare-wechat"), .6, {
                    opacity: 0,
                    onComplete: function() {
                        document.querySelector(".onshare-wechat").style.display = "none"
                    }
                })
            }
            ,
            buttonShareClose.onclick = function() {
                return y.setHash(LANG + "/scoring"),
                !1
            }
            ,
            buttonReplay.onclick = function() {
                return z.style.display = "none",
                H = 0,
                document.querySelector("#outro .score").remove(),
                document.getElementById("mainCanvas").style.display = "block",
                y.setHash("/" + LANG + "/xp"),
                !1
            }
            ,
            j.onclick = function() {
                ga("send", {
                    hitType: "event",
                    eventCategory: "link",
                    eventAction: "click",
                    eventLabel: LANG + "/sharingpage"
                });
                var t = 550
                  , e = 400
                  , n = screen.width / 2 - t / 2
                  , r = screen.height / 2 - e / 2
                  , i = "height=" + e + ", width=" + t + ", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0, top=" + r + ", left=" + n
                  , o = x.getResult();
                o && (score = "?score=" + o.score,
                k = "&points=" + o.collected),
                window.open("https://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent("http://" + document.location.hostname + document.location.pathname + LANG + "/sharingpage.php" + score + k), "facebookwindow", i)
            }
            ,
            V.onclick = function() {
                ga("send", {
                    hitType: "event",
                    eventCategory: "link",
                    eventAction: "click",
                    eventLabel: LANG + "/sharingpage"
                });
                var t = 550
                  , e = 400
                  , n = screen.width / 2 - t / 2
                  , r = screen.height / 2 - e / 2
                  , i = "height=" + e + ", width=" + t + ", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0, top=" + r + ", left=" + n
                  , o = x.getResult();
                o && (score = o.score,
                k = o.collected),
                window.open("http://twitter.com/intent/tweet?text=" + g.locale.meta.score.description1 + " " + score + " " + g.locale.meta.score.description2 + "&url=" + encodeURIComponent("http://lafrenchtouch.martell.com/#!/" + LANG + "/scoring/" + score + "/" + k), "twitterwindow", i)
            }
            ,
            G.onclick = function() {
                ga("send", {
                    hitType: "event",
                    eventCategory: "link",
                    eventAction: "click",
                    eventLabel: LANG + "/sharingpage"
                });
                var n = (document.getElementsByClassName("ctas"),
                document.getElementById("qrcode"));
                d(t, e),
                n.style.display = "block",
                TweenMax.fromTo(this, .5, {
                    y: 0
                }, {
                    y: -120,
                    ease: Sine.easeOut
                }),
                TweenMax.fromTo(n, .5, {
                    y: 50
                }, {
                    y: -120,
                    ease: Sine.easeOut
                })
            }
        }
        function s() {
            _.fromTo(C, .3, {
                x: C.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 1
            }),
            _.fromTo(A, .3, {
                x: -A.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 1
            }),
            _.fromTo(E, .3, {
                y: -E.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 1
            }),
            _.fromTo(L, .3, {
                y: L.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 1
            }),
            _.fromTo(P, .3, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 1.3
            })
        }
        function l() {
            _.fromTo(R, .3, {
                x: C.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 1.5
            }),
            _.fromTo(O, .3, {
                x: -A.offsetWidth,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                ease: Sine.easeOut,
                delay: 1.5
            }),
            _.fromTo(D, .3, {
                y: -E.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 1.5
            }),
            _.fromTo(F, .3, {
                y: L.offsetHeight,
                opacity: 0
            }, {
                y: 0,
                opacity: .5,
                ease: Sine.easeOut,
                delay: 1.5
            }),
            _.fromTo(U, .3, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 1.3
            })
        }
        function h() {
            _.fromTo(title, .3, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: .8
            }),
            _.fromTo(total, .3, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 1
            }),
            _.fromTo(items, .3, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone,
                delay: 1.1
            })
        }
        function c() {
            popup.style.display = "block",
            _.fromTo(popup, .3, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone
            }),
            "zh_CN" != LANG ? (j.style.display = "inline-block",
            V.style.display = "inline-block",
            G.style.display = "none",
            _.fromTo(j, .6, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone
            }),
            _.fromTo(V, .6, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone
            })) : (j.style.display = "none",
            V.style.display = "none",
            G.style.display = "inline-block",
            _.fromTo(G, .6, {
                opacity: 0
            }, {
                opacity: 1,
                ease: Linear.easeNone
            }))
        }
        function u() {
            _.fromTo(popup, .3, {
                opacity: 1
            }, {
                opacity: 0,
                ease: Linear.easeNone,
                onComplete: function() {
                    popup.style.display = "none"
                }
            })
        }
        function p() {
            var t = x.getResult();
            W = t.score,
            -1 !== navigator.userAgent.indexOf("MicroMessenger") && g.loadWechat(function(t) {
                T.config(t),
                T.ready(function() {
                    T.onMenuShareTimeline({
                        title: g.locale.meta.defaut.title,
                        link: "http://lftapl.dangdaimingshi.com",
                        imgUrl: "http://lafrenchtouch.martell.com/img/share/wechat.jpg",
                        success: function() {
                            document.querySelector(".onshare-wechat").style.display = "block"
                        },
                        cancel: function() {}
                    })
                }),
                T.onMenuShareAppMessage({
                    title: g.locale.meta.score.title,
                    desc: g.locale.meta.score.description1 + " " + W + " " + g.locale.meta.score.description2,
                    link: "http://lftapl.dangdaimingshi.com",
                    imgUrl: "http://lafrenchtouch.martell.com/img/share/wechat.jpg",
                    type: "",
                    dataUrl: "",
                    success: function() {
                        document.querySelector(".onshare-wechat").style.display = "block"
                    },
                    cancel: function() {}
                }),
                T.error(function(t) {})
            })
        }
        function d(t, e) {
            if (void 0 === t) {
                var n = x.getResult();
                i = n.score,
                r = n.collected
            } else
                var r = e
                  , i = t;
            var o = "http://" + document.location.hostname + "/#!/" + LANG + "/scoring/" + i + "/" + r
              , a = S.toDataURL(o, 4);
            document.getElementById("qrcode").setAttribute("src", a)
        }
        function f(t) {
            if (void 0 === t) {
                var e = x.getResult();
                W = e.score;
                var n = W.toString()
            } else
                var n = t.toString();
            for (var r = 0; r < n.length; r++) {
                var i = document.createElement("span");
                i.setAttribute("class", "Martell_FrenchTouch_Alphabet_0000_" + n[r]),
                i.className += " sprite",
                total.appendChild(i)
            }
        }
        function m(t) {
            if (void 0 === t) {
                var e = x.getResult();
                k = e.collected
            } else
                k = t;
            score.querySelector(".items span.scoreresult").innerHTML = k
        }
        var g = (t("./../../core/settings.js"),
        t("./../../controllers/dataController.js"))
          , v = t("./../../../edankwan/utils/domUtils")
          , y = t("hasher")
          , _ = t("./../../../libs/TweenMax.min.js")
          , x = t("./../../../bluephoria/game/scores/scoreController")
          , b = t("./../../../../templates/ui/scoring.html")
          , w = t("./../../../../templates/ui/share.html")
          , S = (t("./../../../bluephoria/Main"),
        t("./../../../bluephoria/game/rings/ringController"),
        t("qrcode-js"))
          , T = t("weixin-js-sdk")
          , M = t("./../../../../templates/ui/wechat.html");
        n.init = r,
        n.initShare = i;
        var C, A, E, L, P, k, R, O, D, F, U, I, B, N, j, V, G, z, H = 0, W = 0
    }
    , {
        "./../../../../templates/ui/scoring.html": 149,
        "./../../../../templates/ui/share.html": 150,
        "./../../../../templates/ui/wechat.html": 153,
        "./../../../bluephoria/Main": 77,
        "./../../../bluephoria/game/rings/ringController": 101,
        "./../../../bluephoria/game/scores/scoreController": 102,
        "./../../../edankwan/utils/domUtils": 118,
        "./../../../libs/TweenMax.min.js": 130,
        "./../../controllers/dataController.js": 52,
        "./../../core/settings.js": 54,
        hasher: 8,
        "qrcode-js": 36,
        "weixin-js-sdk": 50
    }],
    72: [function(t, e, n) {
        function r(t) {
            p.loaderImg = g.add("img/intro/loader/sprite.png").content,
            g.add("data/loader.json", {
                onLoad: function(t) {
                    d.loader = t
                }
            }),
            g.start(function(e) {
                1 == e && t()
            })
        }
        function i() {
            T = n.container = f.createElement(m(d)),
            p.appContainer.appendChild(T),
            x = T.querySelector(".preloader-percent"),
            _.init({
                canvas: document.getElementById("preloader-canvas"),
                img: p.loaderImg,
                frames: d.loader,
                deltaY: 17
            }),
            _.offsetX = (_.width - 1080) / 2,
            _.offsetY = (_.height - 1920) / 2;
            var t = _.canvas.style;
            t.width = (_.width >> 1) + "px",
            t.height = (_.height >> 1) + "px"
        }
        function o(t) {
            b = t,
            h(),
            g.start(a)
        }
        function a(t) {
            v.to(n, p.SKIP_PRELOADING ? 0 : 1, {
                percent: t,
                ease: "easeInOutSine"
            })
        }
        function s(t) {
            var e = n.percent;
            x.innerHTML = ~~(100 * e) + '<span class="pourcent">%</span>',
            T.style.opacity = 1 - n.hideAnimation,
            _.render(t),
            1 != e || M || (M = !0,
            b())
        }
        function l(t, e) {
            w = t,
            S = e,
            s(0)
        }
        function h() {
            y.onRendered.add(s),
            y.onResized.add(l)
        }
        function c(t) {
            v.to(n, p.SKIP_PRELOADING ? 0 : .5, {
                delay: p.SKIP_PRELOADING ? 0 : .3,
                hideAnimation: 1,
                ease: "linear",
                onComplete: function() {
                    p.appContainer.removeChild(T),
                    y.onRendered.remove(s),
                    y.onResized.remove(l)
                }
            }),
            t()
        }
        var u, p = t("./../../core/settings.js"), d = t("./../../controllers/dataController.js"), f = t("./../../../edankwan/utils/domUtils"), m = t("./../../../../templates/ui/preloader.html"), g = t("quick-loader"), v = t("./../../../libs/TweenMax.min.js"), y = t("./../../../edankwan/core/stageReference.js"), _ = t("../intro/sprite")();
        n.percent = 0,
        n.hideAnimation = 0;
        var x, b, w, S, T = n.container = u, M = !1;
        n.preInit = r,
        n.init = i,
        n.start = o,
        n.kill = c
    }
    , {
        "../intro/sprite": 66,
        "./../../../../templates/ui/preloader.html": 148,
        "./../../../edankwan/core/stageReference.js": 115,
        "./../../../edankwan/utils/domUtils": 118,
        "./../../../libs/TweenMax.min.js": 130,
        "./../../controllers/dataController.js": 52,
        "./../../core/settings.js": 54,
        "quick-loader": 38
    }],
    73: [function(t, e, n) {
        function r(t) {
            this.file = t,
            this.audio = new Audio(t),
            this.volumeInit = this.audio.volume,
            a.SKIP_AUDIO && s(this)
        }
        var i = t("../grgrdvrt/Log")()
          , o = t("./../libs/TweenMax.min.js")
          , a = t("./../app/core/settings.js")
          , s = t("./../app/helpers/dummify");
        r.prototype = {
            init: function() {
                this.audio.play(),
                this.audio.pause()
            },
            start: function() {
                i("play"),
                this.audio.currentTime = 0,
                this.audio.volume = this.volumeInit,
                this.audio.play()
            },
            stop: function() {
                i("stop"),
                this.audio.pause()
            },
            pause: function(t) {
                i("pause"),
                void 0 === t && (t = .5),
                o.to(this.audio, t, {
                    volume: 0,
                    onComplete: function() {
                        this.audio.pause()
                    }
                    .bind(this)
                })
            },
            resume: function() {
                i("resume", this.audio),
                this.audio.play(),
                o.to(this.audio, .5, {
                    volume: 1
                })
            }
        },
        e.exports = r
    }
    , {
        "../grgrdvrt/Log": 121,
        "./../app/core/settings.js": 54,
        "./../app/helpers/dummify": 55,
        "./../libs/TweenMax.min.js": 130
    }],
    74: [function(t, e, n) {
        function r(t) {
            this.friction = .9,
            this.spring = .01,
            this.vel = new o.Vector3,
            this.direction = new o.Vector3,
            this.updateStep = 0,
            this.meshFriction = .3,
            this.meshSpring = .024,
            this.meshVel = new o.Vector3,
            this.forwardVec = new o.Vector3(0,0,-1),
            this.initMesh(t),
            h.onCollected.add(i, this),
            this.cameraGroup = new o.Group,
            this.mesh.add(this.cameraGroup),
            this.camera = new o.PerspectiveCamera(100,1,.1,1e4),
            this.cameraGroup.add(this.camera)
        }
        function i() {
            this.shadowBirdMesh.visible = !0,
            s.set(this.shadowBirdMesh.position, {
                z: 1
            }),
            s.set(this.shadowBirdMesh.scale, {
                x: .006,
                y: .006,
                z: .006
            }),
            s.set(this.shadowBirdMesh.material, {
                opacity: 1
            }),
            s.to(this.shadowBirdMesh.material, 1, {
                opacity: 0,
                ease: "linear"
            }),
            s.to(this.shadowBirdMesh.position, 1, {
                z: -2,
                ease: "easeOutSine"
            }),
            s.to(this.shadowBirdMesh.scale, 1, {
                x: .01,
                y: .01,
                z: .01,
                ease: "easeOutSine"
            }),
            this.shadowBirdMesh.position.copy(this.birdMesh.position),
            this.shadowBirdMesh.rotation.copy(this.birdMesh.rotation)
        }
        var o = t("./../libs/threejs/three.min.js")
          , a = t("./../edankwan/core/stageReference.js")
          , s = t("./../libs/TweenMax.min.js")
          , l = t("./animals/Bird")
          , h = t("./game/rings/ringController")
          , c = t("../grgrdvrt/Log")()
          , u = 7;
        r.prototype = {
            initMesh: function(t) {
                c("initMesh"),
                this.mesh = new o.Group,
                this.mesh.name = "bird",
                t.shadowSettings && (this.mesh.castShadow = !0),
                this.projectionVector = new o.Vector3,
                this.birdMesh = new l,
                this.birdMesh.preload(),
                this.birdMesh.play("normal"),
                this.birdMesh.scale.set(.005, .005, .005),
                this.mesh.add(this.birdMesh),
                this.shadowBirdMesh = new l({
                    blending: "AdditiveBlending",
                    transparent: !0
                }),
                this.shadowBirdMesh.preload(),
                this.mesh.add(this.shadowBirdMesh),
                this.shadowBirdMesh.visible = !1
            },
            setPath: function(t) {
                this.path = t
            },
            reset: function() {
                this.splinePos = 0;
                var t = this.path.getPoint(0)
                  , e = this.path.getTangent(0);
                this.mesh.position.copy(t),
                this.mesh.lookAt(t.add(e))
            },
            update: function(t) {
                this.updateGroupPosition(t),
                this.move(),
                this.birdMesh.update(1 / a.deltaTime),
                this.shadowBirdMesh.update(1 / a.deltaTime)
            },
            updateGroupPosition: function(t) {
                var e = this.path.getPoint(t);
                this.vel.multiplyScalar(this.friction);
                var n = e.clone();
                if (n.sub(this.mesh.position),
                n.multiplyScalar(this.spring),
                this.vel.add(n),
                this.mesh.position.add(this.vel),
                this.splinePos !== t) {
                    var r = t > this.splinePos ? 1 : -1;
                    this.direction = this.vel.clone().multiplyScalar(r).normalize(),
                    this.mesh.lookAt(this.direction.clone().add(this.mesh.position)),
                    this.splinePos = t
                }
            },
            move: function() {
                var t = this.camera.position.clone();
                t.applyMatrix4(this.cameraGroup.matrix),
                t.projectOnPlane(this.forwardVec).multiplyScalar(-u),
                t.length() > u && t.setLength(u),
                this.meshVel.multiplyScalar(this.meshFriction);
                var e = t;
                e.sub(this.birdMesh.position),
                e.multiplyScalar(this.meshSpring),
                this.meshVel.add(e),
                this.birdMesh.rotation.z = 35 * -e.x,
                this.birdMesh.position.add(this.meshVel),
                this.mesh.updateMatrixWorld(),
                this.birdMesh.updateMatrixWorld(),
                this.projectionVector.setFromMatrixPosition(this.birdMesh.matrixWorld).project(this.camera),
                this.shadowBirdMesh.visible = this.shadowBirdMesh.visible && this.shadowBirdMesh.material.opacity
            }
        },
        e.exports = r
    }
    , {
        "../grgrdvrt/Log": 121,
        "./../edankwan/core/stageReference.js": 115,
        "./../libs/TweenMax.min.js": 130,
        "./../libs/threejs/three.min.js": 139,
        "./animals/Bird": 82,
        "./game/rings/ringController": 101
    }],
    75: [function(t, e, n) {
        function r() {
            this.polysSettings = void 0,
            this.lightsSettings = void 0,
            this.waterSettings = void 0,
            this.shadowSettings = void 0
        }
        e.exports = r
    }
    , {}],
    76: [function(t, e, n) {
        function r(t) {
            this.main = t,
            this.timeline = t.timeline,
            this.bird = t.bird
        }
        function i(t, e, n) {
            window[t] = e[t].bind(e),
            console.log(t + n)
        }
        var o = t("./utils/traverseTree")
          , a = t("./utils/NameVisitor")
          , s = t("dat-gui");
        t("./../libs/threejs/three.min.js");
        r.prototype = {
            init: function() {
                i("play", this, "() : play"),
                i("pause", this, "() : pause"),
                i("pt", this, "() : print time"),
                i("pp", this, "() : print position"),
                i("sc", this, "() : trace scene")
            },
            pause: function() {
                this.timeline.pause(),
                this.pt()
            },
            play: function() {
                this.timeline.play(),
                this.pt()
            },
            pt: function() {
                console.log(this.timeline.time / 1e3, this.timeline.totalTime / 1e3, "ratio", this.timeline.timeRatio, "mappedRatio", this.timeline.mappedTimeRatio)
            },
            pp: function() {
                var t = this.bird.mesh.position;
                console.log(Math.round(t.x), Math.round(t.y), Math.round(t.z))
            },
            sc: function() {
                var t = new a;
                o(this.main.setup.scene, [t]),
                console.log(this.main.setup.scene),
                console.log(t.getResult())
            },
            update: function() {
                this.timeline.mappedTimeRatio >= this.loopEnd && this.timeline.setTimeRatio(this.loopBegin)
            },
            initGui: function() {
                console.log("initGui"),
                this.guiConfig = {
                    next: this.timeline.next.bind(this.timeline)
                },
                this.gui = new s.GUI,
                this.gui.domElement.parentNode.style.zIndex = 2048;
                var t = this.gui.addFolder("timeline");
                t.add(this.timeline, "speed", -3, 3),
                t.add(this.timeline, "isPlaying"),
                t.add(this.guiConfig, "next"),
                t.open();
                var e = function() {
                    this.main.effectsChanged(this.main.effectsTransition.values)
                }
                .bind(this)
                  , n = this.gui.addFolder("fog")
                  , r = this.main.effectsTransition.values.fogParams;
                n.add(r, "x", -50, 50).listen().onChange(e),
                n.add(r, "y", 0, 1).listen().onChange(e),
                n.add(r, "z", 0, .2).listen().onChange(e),
                n.add(r, "w", 0, .2).listen().onChange(e),
                n.open()
            }
        },
        e.exports = r
    }
    , {
        "./../libs/threejs/three.min.js": 139,
        "./utils/NameVisitor": 108,
        "./utils/traverseTree": 113,
        "dat-gui": 5
    }],
    77: [function(t, e, n) {
        function r() {
            this.complete = new l,
            this.progress = new l,
            this.loaded = new l
        }
        var i = t("./../app/core/settings.js")
          , o = t("./../libs/threejs/three.min.js")
          , a = t("./../libs/TweenMax.min.js")
          , s = (t("./../libs/q.js"),
        t("quick-loader"))
          , l = (t("../grgrdvrt/services/imageLoader"),
        t("../grgrdvrt/Signal"))
          , h = t("../grgrdvrt/Log")()
          , c = t("./animals/animalController")
          , u = t("./game/rings/ringController")
          , p = t("./game/scores/scoreController")
          , d = t("./game/overlayController")
          , f = t("./../app/controllers/dataController.js")
          , m = t("./../edankwan/utils/mathUtils").clampNorm
          , g = t("./Config")
          , v = t("./Setup")
          , y = t("./Bird")
          , _ = (t("./contexts/MouseBirdContext"),
        t("./contexts/DeviceBirdContext"))
          , x = t("./contexts/VRBirdContext")
          , b = (t("./contexts/DebugContext"),
        t("./universes/universesData"))
          , w = t("./universes/UniversesLoader")
          , S = t("./universes/UniversesDisplayManager")
          , T = t("./Timeline")
          , M = t("./effects/EffectsTransition")
          , C = t("./effects/Skybox")
          , A = t("./effects/Sun")
          , E = t("./Debug")
          , L = t("./AudioTrack");
        r.prototype = {
            initSetup: function() {
                this.config = new g,
                void 0 === i.finalMap && (i.finalMap = "shanghai"),
                b.init(i.finalMap),
                this.setup = new v(this.config,this.updateAnim.bind(this))
            },
            initSound: function() {
                this.audio = new L("./audio/track.wav"),
                this.audio.init()
            },
            preInit: function() {
                this.config.waterNormalsImage = s.add("img/waternormals.jpg").content,
                this.config.skyboxImage = s.add("img/stars.jpg", "image").content,
                p.preInit(),
                d.preInit()
            },
            init: function() {
                this.begin = !0,
                c.init(),
                u.init(),
                p.init(),
                d.init(),
                this.timeline = new T(b),
                this.timeline.onUniverseChange.add(this.universeChanged, this),
                this.timeline.onMidUniverse.add(this.midUniverse, this),
                this.timeline.onEndUniverse.add(this.endUniverse, this),
                this.timeline.onComplete.add(this.timelineCompleted, this),
                this.bird = new y(this.config),
                this.bird.setPath(c.data.bird.paths[0]);
                var t = this.setup.scene;
                t.add(this.bird.mesh),
                t.add(u.container),
                t.add(p.container),
                t.add(d.container),
                this.sun = new A,
                this.sun.setPath(f.xp.sun),
                this.effectsTransition = new M,
                this.effectsTransition.onEffectsChange.add(this.applyEffects, this);
                var e;
                void 0 === i.isUsingVR && (i.isUsingVR = !0),
                e = i.isUsingVR ? new x(this.bird,this.setup) : new _(this.bird,this.setup),
                this.setup.setContext(e),
                this.universesLoader = new w(b.universes,this.config,this.setup),
                this.universesDisplayManager = new S(this.universesLoader,this.setup),
                this.setup.resize(),
                this.ambient = new o.AmbientLight,
                this.setup.scene.add(this.ambient),
                this.sunLight = new o.PointLight,
                this.setup.scene.add(this.sunLight),
                this.debug = new E(this),
                this.debug.init();
                var n = this.config.waterNormals = new o.Texture(this.config.waterNormalsImage);
                n.wrapS = n.wrapT = o.RepeatWrapping,
                this.skybox = new C,
                this.skybox.setTexture(new o.Texture(this.config.skyboxImage)),
                this.setup.scene.add(this.skybox.mesh)
            },
            start: function() {
                h("start"),
                this.bird.reset(),
                this.timeline.reset(),
                u.reset(),
                p.reset(),
                d.reset(),
                this.universesLoader.initialLoadingProgress.add(this.onInitialLoadingProgress, this),
                this.universesLoader.initialLoadingComplete.addOnce(this.onInitialLoadingComplete, this),
                this.universesLoader.startInitialLoading(4)
            },
            restart: function() {
                h("restart"),
                this.start()
            },
            onInitialLoadingProgress: function(t) {
                h("Main.onInitialLoadingProgress", t),
                this.progress.dispatch(t)
            },
            onInitialLoadingComplete: function() {
                h("onInitialLoadingComplete"),
                this.universesDisplayManager.displayFirstsUniverses(this.universesLoader.getUniverse(0), this.universesLoader.getUniverse(1)).then(this.onFirstsUniverses.bind(this))
            },
            onFirstsUniverses: function() {
                h("onFirstsUniverses");
                var t = this.universesDisplayManager.currentUniverse.data.effectsParams;
                this.effectsTransition.initParams(t),
                this.applyEffects(this.effectsTransition.values),
                i.GUI && this.debug.initGui(),
                this.loaded.dispatch(),
                this._playIntro()
            },
            _playIntro: function() {
                h("_playIntro"),
                this.setup.start(),
                d.fadeOut(3),
                this.introPlaying = !0,
                this.setup.context.controls.enabled = !1,
                this.setup.context.controls.lockBackRatio = 1,
                this._play()
            },
            _play: function() {
                h("play"),
                this.setup.context.controls.enabled = !0;
                var t = {
                    value: 1
                };
                a.to(t, 10, {
                    delay: 1,
                    value: 0,
                    onUpdate: function() {
                        this.setup.context.controls.lockBackRatio = t.value
                    }
                    .bind(this),
                    onComplete: function() {
                        this.introPlaying = !1
                    }
                    .bind(this)
                }),
                this.audio || this.initSound(),
                this.audio.start(),
                this.timeline.start()
            },
            midUniverse: function(t) {
                var e = Boolean(this.universesLoader.isUniverseLoaded(t));
                e && 0 !== t && t !== b.universes.length - 1 && this.universesDisplayManager.displayNextUniverse(t)
            },
            endUniverse: function(t) {
                var e = t < b.universes.length - 2
                  , n = Boolean(this.universesLoader.isUniverseLoaded(t + 1));
                e && !n && (this.universesLoader.universeLoadingComplete.addOnce(function() {
                    this.onBufferComplete(t)
                }, this),
                d.showLoader(),
                this.pause())
            },
            onBufferComplete: function(t) {
                d.hideLoader(),
                this.resume(),
                0 !== t && t !== b.universes.length - 1 && this.universesDisplayManager.displayNextUniverse(t)
            },
            pause: function() {
                h("pause"),
                this.timeline.pause(),
                this.audio.pause()
            },
            resume: function() {
                h("resume"),
                this.timeline.resume(),
                this.audio && this.audio.resume()
            },
            universeChanged: function(t) {
                this.effectsTransition.startTransition(b.universes[t - 1].effectsParams, b.universes[t].effectsParams)
            },
            timelineCompleted: function() {
                h("timelineCompleted"),
                this.timeline.pause(),
                this._playOutro()
            },
            _playOutro: function() {
                this.audio.pause(3),
                d.fadeIn(3, this._outroComplete.bind(this))
            },
            _outroComplete: function() {
                h("_outroComplete"),
                this.setup.stop(),
                this.universesDisplayManager.reset(),
                this.universesLoader.reset(),
                this.complete.dispatch()
            },
            applyEffects: function(t) {
                this.skybox.setParams(t),
                this.sunLight.position.copy(t.sunPos),
                this.sunLight.color.setHex(t.sunColor),
                this.ambient.color.setHex(t.fogColor),
                this.universesDisplayManager.setEffectsParams(t)
            },
            updateAnim: function(t) {
                this.timeline.update(t),
                this.sun.setTimeRatio(this.timeline.timeRatio),
                this.effectsTransition.values.sunPos.copy(this.sun.position),
                this.applyEffects(this.effectsTransition.values),
                this.bird.update(this.timeline.timeRatio),
                u.update(this.bird, this.timeline),
                p.update(this.bird),
                d.update(t),
                this.skybox.mesh.position.copy(this.bird.mesh.position),
                this.universesDisplayManager.update(this.timeline.timeRatio),
                this.introPlaying || (this.setup.context.controls.lockBackRatio = m(this.timeline.timeRatio, .985, .995))
            }
        },
        e.exports = window.main = new r
    }
    , {
        "../grgrdvrt/Log": 121,
        "../grgrdvrt/Signal": 123,
        "../grgrdvrt/services/imageLoader": 127,
        "./../app/controllers/dataController.js": 52,
        "./../app/core/settings.js": 54,
        "./../edankwan/utils/mathUtils": 120,
        "./../libs/TweenMax.min.js": 130,
        "./../libs/q.js": 131,
        "./../libs/threejs/three.min.js": 139,
        "./AudioTrack": 73,
        "./Bird": 74,
        "./Config": 75,
        "./Debug": 76,
        "./Setup": 78,
        "./Timeline": 79,
        "./animals/animalController": 86,
        "./contexts/DebugContext": 88,
        "./contexts/DeviceBirdContext": 89,
        "./contexts/MouseBirdContext": 90,
        "./contexts/VRBirdContext": 91,
        "./effects/EffectsTransition": 93,
        "./effects/Skybox": 96,
        "./effects/Sun": 97,
        "./game/overlayController": 99,
        "./game/rings/ringController": 101,
        "./game/scores/scoreController": 102,
        "./universes/UniversesDisplayManager": 104,
        "./universes/UniversesLoader": 105,
        "./universes/universesData": 106,
        "quick-loader": 38
    }],
    78: [function(t, e, n) {
        function r(t, e) {
            this.config = t,
            this.loopCallback = e,
            this.clock = new o.Clock,
            this.init()
        }
        var i, o = t("./../libs/threejs/three.min.js"), a = t("./../edankwan/3d/stage3d"), s = (new o.Quaternion).setFromAxisAngle(new o.Vector3(0,0,1), -Math.PI / 2), l = (new o.Quaternion).setFromAxisAngle(new o.Vector3(0,0,1), Math.PI / 2);
        r.prototype = {
            init: function() {
                this.scene = new o.Scene,
                this.renderer = new o.WebGLRenderer({
                    antialias: !0,
                    autoClear: !1,
                    preserveDrawingBuffer: !1
                }),
                this.renderer.gammaInput = !0,
                this.renderer.gammaOutput = !0,
                this.renderer.setClearColor(1064533),
                this.element = this.renderer.domElement,
                this.container = document.getElementById("mainCanvas"),
                this.container.appendChild(this.element)
            },
            setContext: function(t) {
                this.context = t,
                this.resize(a.width, a.height)
            },
            resize: function(t, e) {
                t = t || this.container.offsetWidth,
                e = e || this.container.offsetHeight,
                this.renderer.setSize(t, e),
                this.context !== i && (this.context.camera !== i && (this.context.camera.aspect = t / e,
                this.context.camera.updateProjectionMatrix()),
                this.context.effect !== i && this.context.effect.setSize(t, e))
            },
            update: function(t) {
                this.loopCallback(t),
                this.context && (this.context.camera.updateProjectionMatrix(),
                this.context.controls.update(t))
            },
            render: function(t) {
                if (t = t || 0,
                this.update(t),
                this.context.update(),
                this.renderer.clear(),
                this.context.effect !== i)
                    this.context.effect.render(this.scene, this.context.camera);
                else {
                    var e = window.isForcedPortrait;
                    e && this.context.camera.quaternion.multiply(s),
                    this.renderer.render(this.scene, this.context.camera),
                    e && this.context.camera.quaternion.multiply(l)
                }
            },
            start: function() {
                a.camera = this.context.camera,
                a.scene = this.scene,
                a.beforeRendered.add(this.render, this, -1024),
                a.afterResized.add(this.resize, this),
                a.render(0),
                a.setControl(i),
                a.resize(a.width, a.height),
                a.setView(this),
                this.context.start(),
                this.isActive = !0
            },
            stop: function() {
                a.beforeRendered.remove(this.render, this),
                a.afterResized.remove(this.resize, this),
                a.setView(i),
                this.context.stop(),
                this.isActive = !1
            }
        },
        e.exports = r
    }
    , {
        "./../edankwan/3d/stage3d": 114,
        "./../libs/threejs/three.min.js": 139
    }],
    79: [function(t, e, n) {
        function r(t) {
            this.universesData = t,
            this.totalTime = this.universesData.totalTime,
            this.time = 0,
            this.timeRatio = 0,
            this.speed = 1,
            this.isPlaying = !1,
            this.onUniverseChange = new a,
            this.onComplete = new a,
            this.onMidUniverse = new a,
            this.onEndUniverse = new a,
            this.lastUniverseReached = new a
        }
        var i = (t("./../libs/threejs/three.min.js"),
        t("./../app/core/settings.js"))
          , o = t("./../grgrdvrt/MathUtils").clamp
          , a = t("../grgrdvrt/Signal")
          , s = t("../grgrdvrt/Log")();
        s.activate("Timeline");
        var l = [[[0, 0], [.0811, .0027], [.1056, .0252]], [[.1056, .0252], [.1301, .0477], [.1769, .1034]], [[.1769, .1034], [.2237, .1592], [.2546, .2122]], [[.2546, .2122], [.2854, .2653], [.3202, .3077]], [[.3202, .3077], [.355, .3501], [.3659, .3541]], [[.3659, .3541], [.3767, .3581], [.3853, .3727]], [[.3853, .3727], [.3938, .3873], [.4424, .4363]], [[.4424, .4363], [.4909, .4854], [.5411, .6008]], [[.5411, .6008], [.5913, .7162], [.637, .7321]], [[.637, .7321], [.6826, .748], [.7112, .7905]], [[.7112, .7905], [.7397, .8329], [.7597, .8634]], [[.7597, .8634], [.7797, .8939], [.8111, .9297]], [[.8111, .9297], [.8425, .9655], [.8858, .9828]], [[.8858, .9828], [.9292, 1], [1, 1]]]
          , h = "begin"
          , c = "middle"
          , u = "end";
        r.prototype = {
            start: function() {
                this.isPlaying = !0,
                i.USE_CUSTOM_SPEED && (this.speed = i.CUSTOM_SPEED),
                this.speed = 1
            },
            pause: function() {
                this.isPlaying = !1
            },
            resume: function() {
                this.isPlaying = !0
            },
            setTimeRatio: function(t) {
                t = o(t, 0, 1),
                this.timeRatio = t,
                this.time = this.totalTime * this.inverseMapTime(this.timeRatio)
            },
            setTime: function(t) {
                this.time = o(t, 0, this.totalTime),
                this.timeRatio = this.mapTime(this.time / this.totalTime)
            },
            next: function() {
                var t = this.universesData.universes
                  , e = t[this.currentUniverseId];
                this.setTimeRatio(e.begin + .9 * (e.end - e.begin))
            },
            mapTime: function(t) {
                var e = l.filter(function(e, n) {
                    return e.id = n,
                    t >= e[0][0] && t <= e[2][0]
                })[0]
                  , n = e[0][0]
                  , r = e[0][1]
                  , i = e[1][0]
                  , o = e[1][1]
                  , a = e[2][0]
                  , s = e[2][1]
                  , h = n + a - 2 * i
                  , c = 2 * (i - n)
                  , u = n - t
                  , p = c * c - 4 * h * u
                  , d = Math.sqrt(p)
                  , f = 1 / (2 * h)
                  , m = (-c - d) * f
                  , g = (-c + d) * f
                  , v = 0 > p ? m : g
                  , y = v * v
                  , _ = (y - 2 * v + 1) * r + 2 * (1 - v) * v * o + y * s;
                return _
            },
            inverseMapTime: function(t) {
                var e = l.filter(function(e, n) {
                    return e.id = n,
                    t >= e[0][1] && t <= e[2][1]
                })[0]
                  , n = e[0][0]
                  , r = e[0][1]
                  , i = e[1][0]
                  , o = e[1][1]
                  , a = e[2][0]
                  , s = e[2][1]
                  , h = r + s - 2 * o
                  , c = 2 * (o - r)
                  , u = r - t
                  , p = c * c - 4 * h * u
                  , d = Math.sqrt(p)
                  , f = 1 / (2 * h)
                  , m = (-c - d) * f
                  , g = (-c + d) * f
                  , v = 0 > p ? m : g
                  , y = v * v
                  , _ = (y - 2 * v + 1) * n + 2 * (1 - v) * v * i + y * a;
                return _
            },
            update: function(t) {
                if (this.isPlaying) {
                    this.setTime(this.time + t * this.speed);
                    var e = this.universesData.universes
                      , n = e[this.currentUniverseId];
                    if (n) {
                        var r = n.begin
                          , i = n.end;
                        switch (this.universeState) {
                        case h:
                            this.checkMiddle(r, i);
                            break;
                        case c:
                            this.checkEnd(r, i);
                            break;
                        case u:
                            this.checkChange(r, i)
                        }
                    }
                }
            },
            checkMiddle: function(t, e) {
                this.timeRatio > t + .33 * (e - t) && (this.universeState = c,
                this.onMidUniverse.dispatch(this.currentUniverseId))
            },
            checkEnd: function(t, e) {
                this.timeRatio > t + .8 * (e - t) && (this.universeState = u,
                this.onEndUniverse.dispatch(this.currentUniverseId))
            },
            checkChange: function(t, e) {
                var n = this.universesData.universes;
                this.timeRatio >= e && (this.currentUniverseId++,
                this.universeState = h,
                this.currentUniverseId === n.length - 1 ? (s("lastUniverse"),
                this.lastUniverseReached.dispatch(),
                this.onUniverseChange.dispatch(this.currentUniverseId)) : this.currentUniverseId === n.length ? (s("timelineComplete"),
                this.onComplete.dispatch()) : (s("universeChanged"),
                this.onUniverseChange.dispatch(this.currentUniverseId)))
            },
            reset: function() {
                this.time = 0,
                this.speed = 1,
                this.timeRatio = 0,
                this.currentUniverseId = 0,
                this.universeState = h
            }
        },
        e.exports = r
    }
    , {
        "../grgrdvrt/Log": 121,
        "../grgrdvrt/Signal": 123,
        "./../app/core/settings.js": 54,
        "./../grgrdvrt/MathUtils": 122,
        "./../libs/threejs/three.min.js": 139
    }],
    80: [function(t, e, n) {
        function r(t) {
            x.Object3D.call(this);
            var e = this.constructor;
            this.animations = {},
            this.currentAnimation = _,
            this.boundOnPlayComplete = this.onPlayComplete.bind(this),
            this._onMeshReady = new S,
            e.onMeshLoaded || (e.onMeshLoaded = new S),
            T(this, {
                type: e.type,
                nextAnimationId: "normal",
                isReady: !1,
                hasAnimation: !0,
                blending: "NormalBlending"
            }, t)
        }
        function i(t) {
            if (!this.isReady) {
                var e = this.constructor;
                if (e.geometries)
                    this.initMesh(e.geometries);
                else if (e.onMeshLoaded.addOnce(l, this),
                !e.startedPreload) {
                    e.startedPreload = !0;
                    var n = e.textureImage = w[t ? "load" : "add"]("models/animals/" + this.type + ".jpg", {
                        onLoad: o.bind(this)
                    }).content;
                    e.texture = new x.Texture(n),
                    w[t ? "load" : "add"]("models/animals/" + this.type + ".json", {
                        type: "json",
                        hasLoading: !0,
                        onLoad: a.bind(this)
                    })
                }
            }
        }
        function o() {
            this.constructor.texture && (this.constructor.texture.needsUpdate = !0)
        }
        function a(t) {
            t = t.length ? t : [t];
            for (var e = this.constructor.geometries = [], n = 0, r = t.length; r > n; n++)
                e.push(L.parse(t[n]).geometry);
            this._parseGeometry(e),
            this.constructor.onMeshLoaded.dispatch(e)
        }
        function s(t) {
            return t
        }
        function l(t) {
            this.meshes = [],
            this.meshesMorphInfluences = [];
            var e = this.material = this.getMaterial(this.constructor.texture);
            o.call(this);
            for (var n, r = this.meshCount = t.length, i = 0; r > i; i++)
                n = this.meshes[i] = new x.Mesh(t[i],e),
                this.hasAnimation && (n.morphAnimation = new x.MorphAnimation(n),
                this.meshesMorphInfluences[i] = n.morphTargetInfluences),
                this.add(n);
            this.isReady = !0,
            this._onMeshReady.dispatch(this),
            this._onMeshReady = _
        }
        function h(t) {
            return new x.MeshLambertMaterial({
                morphTargets: !0,
                map: t,
                blending: x[this.blending],
                transparent: !!this.transparent
            })
        }
        function c(t) {
            var e, n = this.animations, r = this.meshesMorphInfluences;
            for (var i in n)
                e = n[i],
                e.update(r, t)
        }
        function u() {
            this.constructor.poolRelease(this)
        }
        function p(t) {
            this.isReady ? t(this) : this._onMeshReady.addOnce(t)
        }
        function d(t, e, n, r, i) {
            var o = this.animations[t] = new A({
                id: t,
                fromFrame: e,
                toFrame: n,
                isLoop: !!i
            });
            return o
        }
        function f(t, e) {
            m();
            var n = this.currentAnimation = this.animations[t];
            C.killTweensOf(n),
            C.to(n, .1, {
                influence: 1,
                ease: "linear"
            }),
            n.ratio = 0,
            C.to(n, n.duration, {
                ratio: 1,
                delay: e === _ ? 0 : e,
                ease: "linear",
                onComplete: this.boundOnPlayComplete
            })
        }
        function m() {
            var t = this.currentAnimation;
            t && (C.killTweensOf(t),
            C.to(t, .1, {
                influence: 0,
                ease: "linear"
            }))
        }
        function g() {
            this.nextAnimationId && this.play(this.nextAnimationId)
        }
        function v(t, e, n) {
            this.path = t,
            this.pathMinRatio = e,
            this.pathMaxRatio = n
        }
        function y(t) {
            var e = M.clampNorm(t, this.pathMinRatio, this.pathMaxRatio)
              , n = this.path.getPoint(1 > e ? e : e - E)
              , r = this.path.getPoint(1 > e ? e + E : 1);
            this.position.set(n.x, n.y, n.z),
            this.lookAt(r)
        }
        var _, x = (t("./../../app/core/settings.js"),
        t("./../../libs/threejs/three.min.js")), b = t("./../../edankwan/tools/poolTool"), w = t("quick-loader"), S = t("min-signal"), T = t("mout/object/mixIn"), M = (t("mout/lang/isArray"),
        t("./../../edankwan/utils/mathUtils")), C = t("./../../libs/TweenMax.min.js"), A = t("./Animation"), E = 1e-7, L = new x.JSONLoader;
        e.exports = r,
        b.create(r);
        var P = x.Object3D.prototype
          , k = r.prototype = Object.create(P);
        k.constructor = r,
        k.preload = i,
        k._parseGeometry = s,
        k.initMesh = l,
        k.getMaterial = h,
        k.release = u,
        k.update = c,
        k.addAnimation = d,
        k.play = f,
        k.stop = m,
        k.onPlayComplete = g,
        k.addReadyListener = p,
        k.setPath = v,
        k.updatePathPosition = y
    }
    , {
        "./../../app/core/settings.js": 54,
        "./../../edankwan/tools/poolTool": 117,
        "./../../edankwan/utils/mathUtils": 120,
        "./../../libs/TweenMax.min.js": 130,
        "./../../libs/threejs/three.min.js": 139,
        "./Animation": 81,
        "min-signal": 11,
        "mout/lang/isArray": 24,
        "mout/object/mixIn": 35,
        "quick-loader": 38
    }],
    81: [function(t, e, n) {
        function r(t) {
            o(this, {
                id: "",
                influence: 0,
                prevInfluence: 0,
                currentTime: 0,
                lastFrame: 0,
                currentFrame: 0,
                fromFrame: 0,
                toFrame: 1,
                duration: 1,
                ratio: 0,
                fps: 29.97,
                isLoop: !1
            }, t),
            this.frameLength = this.toFrame - this.fromFrame,
            this.duration = this.frameLength / this.fps,
            this.frameDuration = this.duration / this.frameLength
        }
        function i(t, e) {
            var n = this.influence;
            if (this.prevInfluence !== n || 0 !== n) {
                var r;
                r = this.ratio * this.duration % this.duration,
                this.currentTime = r;
                var i, o, a = this.fromFrame + Math.floor(r / this.frameDuration), s = t.length;
                if (a !== this.currentFrame) {
                    for (i = 0; s > i; i++)
                        o = t[i],
                        o[this.lastFrame] = 0,
                        o[this.currentFrame] = 1,
                        o[a] = 0;
                    this.lastFrame = this.currentFrame,
                    this.currentFrame = a
                }
                var l = r % this.frameDuration / this.frameDuration;
                for (i = 0; s > i; i++)
                    o = t[i],
                    o[a] = l * n,
                    o[this.lastFrame] = (1 - l) * n;
                this.prevInfluence = n
            }
        }
        var o = t("mout/object/mixIn");
        e.exports = r;
        var a = r.prototype;
        a.update = i
    }
    , {
        "mout/object/mixIn": 35
    }],
    82: [function(t, e, n) {
        function r(t) {
            i.call(this, t),
            this.addAnimation("normal", 0, 107)
        }
        var i = (t("./../../app/core/settings.js"),
        t("./Animal"))
          , o = t("./../../edankwan/tools/poolTool");
        e.exports = r,
        o.create(r),
        r.type = "bird";
        var a = i.prototype
          , s = r.prototype = Object.create(a);
        s.constructor = r
    }
    , {
        "./../../app/core/settings.js": 54,
        "./../../edankwan/tools/poolTool": 117,
        "./Animal": 80
    }],
    83: [function(t, e, n) {
        function r(t) {
            i.call(this, t),
            this.addAnimation("normal", 0, 12)
        }
        var i = (t("./../../app/core/settings.js"),
        t("./../../libs/threejs/three.min.js"),
        t("./Animal"))
          , o = t("./../../edankwan/tools/poolTool");
        t("mout/object/mixIn");
        e.exports = r,
        o.create(r),
        r.type = "deer";
        var a = i.prototype
          , s = r.prototype = Object.create(a);
        s.constructor = r
    }
    , {
        "./../../app/core/settings.js": 54,
        "./../../edankwan/tools/poolTool": 117,
        "./../../libs/threejs/three.min.js": 139,
        "./Animal": 80,
        "mout/object/mixIn": 35
    }],
    84: [function(t, e, n) {
        function r(t) {
            i.call(this, t),
            this.addAnimation("normal", 0, 16),
            this.scale.set(.2, .2, .2)
        }
        var i = (t("./../../app/core/settings.js"),
        t("./Animal"))
          , o = t("./../../edankwan/tools/poolTool");
        e.exports = r,
        o.create(r),
        r.type = "man";
        var a = i.prototype
          , s = r.prototype = Object.create(a);
        s.constructor = r
    }
    , {
        "./../../app/core/settings.js": 54,
        "./../../edankwan/tools/poolTool": 117,
        "./Animal": 80
    }],
    85: [function(t, e, n) {
        function r(t) {
            i.call(this, t),
            this.addAnimation("normal", 0, 33)
        }
        var i = (t("./../../app/core/settings.js"),
        t("./../../libs/threejs/three.min.js"),
        t("./Animal"))
          , o = t("./../../edankwan/tools/poolTool");
        t("mout/object/mixIn");
        e.exports = r,
        o.create(r),
        r.type = "tiger";
        var a = i.prototype
          , s = r.prototype = Object.create(a);
        s.constructor = r
    }
    , {
        "./../../app/core/settings.js": 54,
        "./../../edankwan/tools/poolTool": 117,
        "./../../libs/threejs/three.min.js": 139,
        "./Animal": 80,
        "mout/object/mixIn": 35
    }],
    86: [function(t, e, n) {
        function r() {
            i(h.xp)
        }
        function i(t) {
            u = n.data = t.animals;
            var e;
            for (var r in u)
                e = u[r],
                e.paths ? e.paths = s(e.paths) : e.transforms && (e.transforms = a(e.transforms))
        }
        function o(t) {
            for (var e, n = [], r = .1, i = 0, o = t.length / 3; o > i; i++)
                e = 3 * i,
                n[i] = new c.Vector3(r * t[e],r * t[e + 1],r * t[e + 2]);
            return t = l,
            new c.CatmullRomCurve3(n)
        }
        function a(t) {
            for (var e, n = 0, r = t.length; r > n; n++)
                e = t[n],
                t[n] = {
                    x: e[0],
                    y: e[1],
                    z: e[2],
                    rX: e[4],
                    rY: -e[3],
                    rZ: e[5]
                };
            return t
        }
        function s(t) {
            for (var e = [], n = 0, r = t.length; r > n; n++)
                e[n] = o(t[n]);
            return t = l,
            e
        }
        var l, h = t("./../../app/controllers/dataController.js"), c = t("./../../libs/threejs/three.min.js"), u = n.data = l;
        n.init = r
    }
    , {
        "./../../app/controllers/dataController.js": 52,
        "./../../libs/threejs/three.min.js": 139
    }],
    87: [function(t, e, n) {
        e.exports = {
            bird: t("./Bird"),
            deer: t("./Deer"),
            tiger: t("./Tiger"),
            man: t("./Man")
        }
    }
    , {
        "./Bird": 82,
        "./Deer": 83,
        "./Man": 84,
        "./Tiger": 85
    }],
    88: [function(t, e, n) {
        function r(t, e) {
            this.camera = new i.PerspectiveCamera(55,1,.1,1e4),
            this.camera.position.set(0, 10, 10),
            this.camera.lookAt(new i.Vector3(0,0,0)),
            t.scene.add(this.camera),
            this.controls = new i.OrbitControls(this.camera,e)
        }
        var i = t("./../../libs/threejs/three.min.js");
        t("./../../libs/threejs/OrbitControls"),
        r.prototype = {
            update: function() {},
            start: function() {},
            stop: function() {}
        },
        e.exports = r
    }
    , {
        "./../../libs/threejs/OrbitControls": 136,
        "./../../libs/threejs/three.min.js": 139
    }],
    89: [function(t, e, n) {
        function r(t, e) {
            this.bird = t,
            this.renderer = e.renderer,
            this.element = e.element;
            var n = 1;
            this.camera = this.bird.camera,
            this.camera.position.z = n,
            this.camera.lookAt(this.bird.position || new o.Vector3(0,0,0)),
            this.renderer.autoClear = !0,
            this.controls = new o.OrbitControls(this.camera,this.element),
            this.controls.noZoom = !0,
            this.controls.noPan = !0,
            i.isSupportDeviceOrientation ? this.onInit() : i.isSupportDeviceOrientation === a && i.onDevicedOrientationDetected.addOnce(this.onInit, this)
        }
        var i = t("./../../app/core/settings.js")
          , o = t("./../../libs/threejs/three.min.js");
        t("./../../libs/threejs/StereoEffect"),
        t("./../../libs/threejs/DeviceOrientationControls");
        var a;
        r.prototype = {
            onInit: function() {
                this.controls && this.controls.removeEventListeners && this.controls.removeEventListeners();
                var t = this.controls.lockBackRatio;
                this.controls = new o.DeviceOrientationControls(this.bird.cameraGroup,!0),
                this.controls.connect(),
                this.controls.update(),
                this.controls.lockBackRatio = t,
                this.element.addEventListener("click", this.fullscreen.bind(this), !1)
            },
            fullscreen: function() {
                var t = this.element;
                t.requestFullscreen ? t.requestFullscreen() : t.msRequestFullscreen ? t.msRequestFullscreen() : t.mozRequestFullScreen ? t.mozRequestFullScreen() : t.webkitRequestFullscreen && t.webkitRequestFullscreen()
            },
            update: function() {},
            start: function() {
                this.renderer.autoClear = !1
            },
            stop: function() {
                this.renderer.autoClear = !0
            }
        },
        e.exports = r
    }
    , {
        "./../../app/core/settings.js": 54,
        "./../../libs/threejs/DeviceOrientationControls": 133,
        "./../../libs/threejs/StereoEffect": 138,
        "./../../libs/threejs/three.min.js": 139
    }],
    90: [function(t, e, n) {
        function r(t, e) {
            this.camera = t.camera,
            this.camera.position.z = -1,
            this.camera.lookAt(t.position || new i.Vector3(0,0,0)),
            this.controls = new i.OrbitControls(this.camera,e),
            this.controls.noZoom = !0,
            this.controls.noPan = !0
        }
        var i = t("./../../libs/threejs/three.min.js");
        t("./../../libs/threejs/OrbitControls"),
        r.prototype = {
            update: function() {},
            start: function() {},
            stop: function() {}
        },
        e.exports = r
    }
    , {
        "./../../libs/threejs/OrbitControls": 136,
        "./../../libs/threejs/three.min.js": 139
    }],
    91: [function(t, e, n) {
        function r(t, e) {
            this.bird = t,
            this.renderer = e.renderer,
            this.element = e.element;
            var n = 1;
            this.camera = this.bird.camera,
            this.camera.position.z = n,
            this.camera.lookAt(this.bird.position || new o.Vector3(0,0,0)),
            this.effect = new o.StereoEffect(e.renderer),
            this.effect.separation = .02,
            this.effect.targetDistance = n,
            this.renderer.autoClear = !0,
            this.controls = new o.OrbitControls(this.camera,this.element),
            this.controls.noZoom = !0,
            this.controls.noPan = !0,
            i.isSupportDeviceOrientation ? this.onInit() : i.isSupportDeviceOrientation === a && i.onDevicedOrientationDetected.addOnce(this.onInit, this)
        }
        var i = t("./../../app/core/settings.js")
          , o = t("./../../libs/threejs/three.min.js");
        t("./../../libs/threejs/StereoEffect"),
        t("./../../libs/threejs/DeviceOrientationControls");
        var a;
        r.prototype = {
            onInit: function() {
                this.controls && this.controls.removeEventListeners && this.controls.removeEventListeners();
                var t = this.controls.lockBackRatio;
                this.controls = new o.DeviceOrientationControls(this.bird.cameraGroup,!0),
                this.controls.connect(),
                this.controls.update(),
                this.controls.lockBackRatio = t,
                this.element.addEventListener("click", this.fullscreen.bind(this), !1)
            },
            fullscreen: function() {
                var t = this.element;
                t.requestFullscreen ? t.requestFullscreen() : t.msRequestFullscreen ? t.msRequestFullscreen() : t.mozRequestFullScreen ? t.mozRequestFullScreen() : t.webkitRequestFullscreen && t.webkitRequestFullscreen()
            },
            update: function() {},
            start: function() {
                this.renderer.autoClear = !1
            },
            stop: function() {
                this.renderer.autoClear = !0
            }
        },
        e.exports = r
    }
    , {
        "./../../app/core/settings.js": 54,
        "./../../libs/threejs/DeviceOrientationControls": 133,
        "./../../libs/threejs/StereoEffect": 138,
        "./../../libs/threejs/three.min.js": 139
    }],
    92: [function(t, e, n) {
        function r(t) {
            return o.UniformsLib[t]
        }
        function i(t) {
            o.ShaderMaterial.call(this),
            this.type = "BasicFogMaterial",
            this.useMartellFog = !0,
            this.color = new o.Color(16777215),
            this.map = null ,
            this.fog = !0,
            this.shading = o.SmoothShading,
            this.wireframe = !1,
            this.wireframeLinewidth = 1,
            this.wireframeLinecap = "round",
            this.wireframeLinejoin = "round",
            this.vertexColors = o.NoColors,
            this.skinning = !1,
            this.morphTargets = !1,
            this.morphNormals = !1;
            var e = {
                uniforms: o.UniformsUtils.merge([r("common"), {
                    sunColor: {
                        type: "c",
                        value: new o.Color(0)
                    },
                    fogColor: {
                        type: "c",
                        value: new o.Color(0)
                    },
                    globalColor: {
                        type: "c",
                        value: new o.Color(0)
                    },
                    sunPos: {
                        type: "v3",
                        value: new o.Vector3(0,0,0)
                    },
                    fogParams: {
                        type: "v4",
                        value: new o.Vector4(0,0,0,0)
                    },
                    diffuseMap: {
                        type: "t",
                        value: t.map
                    },
                    map: {
                        type: "t",
                        value: t.map
                    }
                }]),
                vertexShader: s,
                fragmentShader: l,
                shading: o.SmoothShading
            };
            for (var n in t)
                e[n] = t[n];
            this.setValues(e),
            this.uniforms.map.value && (this.uniforms.map.value.needsUpdate = !0)
        }
        var o = t("./../../libs/threejs/three.min.js")
          , a = t("./../../edankwan/three/threeChunkParse.js")
          , s = a("#define GLSLIFY 1\n// chunk( common );\n// chunk( logdepthbuf_pars_vertex );\n// chunk( uv_pars_vertex );\n// chunk( uv2_pars_vertex );\n// chunk( envmap_pars_vertex );\n// chunk( color_pars_vertex );\n// chunk( morphtarget_pars_vertex );\n// chunk( skinning_pars_vertex );\n// chunk( shadowmap_pars_vertex );\n\n\nvarying vec3 vWorldPosition2;\n\nvoid main() {\n\n  //chunk( uv_vertex );\n  //chunk( uv2_vertex );\n  //chunk( color_vertex );\n  //chunk( skinbase_vertex );\n\n  #ifdef USE_ENVMAP\n\n  //chunk( beginnormal_vertex );\n  //chunk( morphnormal_vertex );\n  //chunk( skinnormal_vertex );\n  //chunk( defaultnormal_vertex );\n\n  #endif\n\n  //chunk( begin_vertex );\n  //chunk( morphtarget_vertex );\n  //chunk( skinning_vertex );\n  //chunk( project_vertex );\n  //chunk( logdepthbuf_vertex );\n\n  //chunk( worldpos_vertex );\n  //chunk( envmap_vertex );\n  //chunk( shadowmap_vertex );\n\n  vec4 worldPosition2 = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition2 = worldPosition2.xyz;\n\n}\n")
          , l = a("#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform float opacity;\n\n// chunk(common );\n// chunk(color_pars_fragment );\n// chunk(uv_pars_fragment );\n// chunk(uv2_pars_fragment );\n// chunk(map_pars_fragment );\n\nvec4 computeFog_1_0(\n    in float distance,\n    in vec3  rayOri,\n    in vec3  sunDir_1_1,\n    in vec3  rayDir_1_2,\n    in vec3 fogColor_1_3,\n    in vec3 sunColor_1_4,\n    in vec3 globalColor_1_5,\n    in vec4 fogParams_1_6\n)\n{\n  //float fogAmount = 1.0 - exp(-distance * 0.003);\n  float rayY_1_7 = 1.0 - exp(-rayDir_1_2.y);\n  float fogAmount = fogParams_1_6.y * exp(-(rayOri.y + fogParams_1_6.x) * fogParams_1_6.z) * (1.0 - exp(-distance * rayY_1_7 * fogParams_1_6.w)) / rayY_1_7;\n  fogAmount = clamp(fogAmount, 0.0, 1.0);\n  float sunAmount = dot(rayDir_1_2, sunDir_1_1);\n  vec3 finalFogColor  = mix(globalColor_1_5, fogColor_1_3, pow((sunAmount + 1.0) / 2.0, 5.0));\n  finalFogColor  = mix(finalFogColor, sunColor_1_4, pow(clamp(sunAmount, 0.0, 1.0), 15.0));\n  return vec4(finalFogColor, fogAmount);\n}\n\n\n\n\n\nvarying vec3 vWorldPosition2;\n\nuniform vec3 fogColor;\nuniform vec3 sunColor;\nuniform vec3 globalColor;\nuniform vec3 sunPos;\nuniform vec4 fogParams;\n\nvoid main() {\n\n  vec3 outgoingLight = vec3( 0.0 );\n  vec4 diffuseColor = vec4( diffuse, opacity );\n  vec3 totalAmbientLight = vec3( 1.0 ); // hardwired\n\n  // chunk( logdepthbuf_fragment );\n  vec4 texelColor = texture2D( map, vUv );\n	diffuseColor *= texelColor;\n  // chunk( color_fragment );\n\n  // chunk( linear_to_gamma_fragment );\n\n  outgoingLight = diffuseColor.rgb;\n\n  vec3 sunDir = normalize(sunPos - cameraPosition);\n  vec3 pixelPos = vWorldPosition2 - cameraPosition;\n  vec3 rayDir = normalize(pixelPos);\n  float distance = length(pixelPos);\n\n  vec4 fog = computeFog_1_0(distance, cameraPosition, sunDir, rayDir, fogColor, sunColor, globalColor, fogParams);\n\n  outgoingLight = mix(outgoingLight, fog.rgb, fog.a);\n\n  gl_FragColor = vec4( outgoingLight, diffuseColor.a);\n\n}\n");
        i.prototype = Object.create(o.ShaderMaterial.prototype),
        i.prototype.constructor = i,
        i.prototype.setParams = function(t) {
            var e = this.uniforms;
            e.sunColor.value.setHex(t.sunColor),
            e.fogColor.value.setHex(t.fogColor),
            e.globalColor.value.setHex(t.globalColor),
            e.sunPos.value.copy(t.sunPos),
            e.fogParams.value.copy(t.fogParams)
        }
        ,
        e.exports = i
    }
    , {
        "./../../edankwan/three/threeChunkParse.js": 116,
        "./../../libs/threejs/three.min.js": 139
    }],
    93: [function(t, e, n) {
        function r() {
            this.onEffectsChange = new s,
            this.transitionTime = 4,
            this.transitionRatio = 0,
            this.sunTransitionRatio = 0
        }
        function i(t, e, n) {
            var r = t >> 16 & 255
              , i = t >> 8 & 255
              , o = 255 & t
              , a = e >> 16 & 255
              , s = e >> 8 & 255
              , l = 255 & e
              , h = r + n * (a - r)
              , c = i + n * (s - i)
              , u = o + n * (l - o);
            return h << 16 | c << 8 | u
        }
        var o = t("./../../libs/threejs/three.min.js")
          , a = t("./../../libs/TweenMax.min.js")
          , s = t("../../grgrdvrt/Signal")
          , l = t("../../grgrdvrt/Log")();
        r.prototype = {
            initParams: function(t) {
                this.values = {
                    sunColor: t.sunColor,
                    fogColor: t.fogColor,
                    globalColor: t.globalColor,
                    sunPos: new o.Vector3,
                    fogParams: (new o.Vector4).copy(t.fogParams)
                }
            },
            startTransition: function(t, e) {
                l("startTransition"),
                this.beginValues = t,
                this.endValues = e,
                this.transitionRatio = 0,
                a.to(this, this.transitionTime, {
                    transitionRatio: 1,
                    onUpdate: this.onTransitionUpdate.bind(this)
                })
            },
            onTransitionUpdate: function() {
                l("onTransitionUpdate");
                var t = this.beginValues
                  , e = this.endValues
                  , n = this.values
                  , r = this.transitionRatio;
                n.globalColor = i(t.globalColor, e.globalColor, r),
                n.fogColor = i(t.fogColor, e.fogColor, r),
                n.sunColor = i(t.sunColor, e.sunColor, r),
                n.fogParams.lerpVectors(t.fogParams, e.fogParams, r),
                this.onEffectsChange.dispatch(this.values)
            }
        },
        e.exports = r
    }
    , {
        "../../grgrdvrt/Log": 121,
        "../../grgrdvrt/Signal": 123,
        "./../../libs/TweenMax.min.js": 130,
        "./../../libs/threejs/three.min.js": 139
    }],
    94: [function(t, e, n) {
        function r() {
            this.materials = []
        }
        function i(t) {
            this.setTarget(t)
        }
        var o = t("../utils/traverseTree");
        r.prototype = {
            enterNode: function(t) {
                var e = t.material;
                void 0 !== e && e.useMartellFog && this.materials.push(e)
            },
            exitNode: function(t) {},
            getResult: function() {
                return this.materials
            }
        },
        i.prototype = {
            setTarget: function(t) {
                var e = new r;
                o(t, [e]),
                this.materials = e.getResult()
            },
            setParams: function(t) {
                this.materials.forEach(function(e) {
                    e.setParams(t)
                })
            }
        },
        e.exports = i
    }
    , {
        "../utils/traverseTree": 113
    }],
    95: [function(t, e, n) {
        var r = t("./../../app/core/settings.js")
          , i = t("./../../libs/threejs/three.min.js");
        i.ShaderLib.mirror = {
            uniforms: {
                mirrorColor: {
                    type: "c",
                    value: new i.Color(8355711)
                },
                mirrorSampler: {
                    type: "t",
                    value: null
                },
                textureMatrix: {
                    type: "m4",
                    value: new i.Matrix4
                }
            },
            vertexShader: ["uniform mat4 textureMatrix;", "varying vec4 mirrorCoord;", "void main() {", "vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "vec4 worldPosition = modelMatrix * vec4( position, 1.0 );", "mirrorCoord = textureMatrix * worldPosition;", "gl_Position = projectionMatrix * mvPosition;", "}"].join("\n"),
            fragmentShader: ["uniform vec3 mirrorColor;", "uniform sampler2D mirrorSampler;", "varying vec4 mirrorCoord;", "float blendOverlay(float base, float blend) {", "return( base < 0.5 ? ( 2.0 * base * blend ) : (1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );", "}", "void main() {", "vec4 color = texture2DProj(mirrorSampler, mirrorCoord);", "color = vec4(blendOverlay(mirrorColor.r, color.r), blendOverlay(mirrorColor.g, color.g), blendOverlay(mirrorColor.b, color.b), 1.0);", "gl_FragColor = color;", "}"].join("\n")
        },
        i.Mirror = function(t, e, n) {
            i.Object3D.call(this),
            this.name = "mirror_" + this.id,
            n = n || {},
            this.matrixNeedsUpdate = !0;
            var r = void 0 !== n.textureWidth ? n.textureWidth : 512
              , o = void 0 !== n.textureHeight ? n.textureHeight : 512;
            this.clipBias = void 0 !== n.clipBias ? n.clipBias : 0;
            var a = void 0 !== n.color ? new i.Color(n.color) : new i.Color(8355711);
            this.renderer = t,
            this.mirrorPlane = new i.Plane,
            this.normal = new i.Vector3(0,0,1),
            this.mirrorWorldPosition = new i.Vector3,
            this.cameraWorldPosition = new i.Vector3,
            this.rotationMatrix = new i.Matrix4,
            this.lookAtPosition = new i.Vector3(0,0,-1),
            this.clipPlane = new i.Vector4;
            var s = void 0 !== n.debugMode ? n.debugMode : !1;
            if (s) {
                var l = new i.ArrowHelper(new i.Vector3(0,0,1),new i.Vector3(0,0,0),10,16777088)
                  , h = new i.Geometry;
                h.vertices.push(new i.Vector3(-10,-10,0)),
                h.vertices.push(new i.Vector3(10,-10,0)),
                h.vertices.push(new i.Vector3(10,10,0)),
                h.vertices.push(new i.Vector3(-10,10,0)),
                h.vertices.push(h.vertices[0]);
                var c = new i.Line(h,new i.LineBasicMaterial({
                    color: 16777088
                }));
                this.add(l),
                this.add(c)
            }
            e instanceof i.PerspectiveCamera ? this.camera = e : (this.camera = new i.PerspectiveCamera,
            console.log(this.name + ": camera is not a Perspective Camera!")),
            this.textureMatrix = new i.Matrix4,
            this.mirrorCamera = this.camera.clone(),
            this.mirrorCamera.matrixAutoUpdate = !0;
            var u = {
                minFilter: i.LinearFilter,
                magFilter: i.LinearFilter,
                format: i.RGBFormat,
                stencilBuffer: !1
            };
            this.texture = new i.WebGLRenderTarget(r,o,u),
            this.tempTexture = new i.WebGLRenderTarget(r,o,u);
            var p = i.ShaderLib.mirror
              , d = i.UniformsUtils.clone(p.uniforms);
            this.material = new i.ShaderMaterial({
                fragmentShader: p.fragmentShader,
                vertexShader: p.vertexShader,
                uniforms: d
            }),
            this.material.uniforms.mirrorSampler.value = this.texture,
            this.material.uniforms.mirrorColor.value = a,
            this.material.uniforms.textureMatrix.value = this.textureMatrix,
            i.Math.isPowerOfTwo(r) && i.Math.isPowerOfTwo(o) || (this.texture.generateMipmaps = !1,
            this.tempTexture.generateMipmaps = !1),
            this.updateTextureMatrix(),
            this.render()
        }
        ,
        i.Mirror.prototype = Object.create(i.Object3D.prototype),
        i.Mirror.prototype.constructor = i.Mirror,
        i.Mirror.prototype.renderWithMirror = function(t) {
            this.updateTextureMatrix(),
            this.matrixNeedsUpdate = !1;
            var e = t.camera;
            t.camera = this.mirrorCamera,
            t.renderTemp(),
            t.material.uniforms.mirrorSampler.value = t.tempTexture,
            this.render(),
            this.matrixNeedsUpdate = !0,
            t.material.uniforms.mirrorSampler.value = t.texture,
            t.camera = e,
            t.updateTextureMatrix()
        }
        ,
        i.Mirror.prototype.updateTextureMatrix = function() {
            this.updateMatrixWorld(),
            this.camera.updateMatrixWorld(),
            this.mirrorWorldPosition.setFromMatrixPosition(this.matrixWorld),
            this.cameraWorldPosition.setFromMatrixPosition(this.camera.matrixWorld),
            this.rotationMatrix.extractRotation(this.matrixWorld),
            this.normal.set(0, 0, 1),
            this.normal.applyMatrix4(this.rotationMatrix);
            var t = this.mirrorWorldPosition.clone().sub(this.cameraWorldPosition);
            t.reflect(this.normal).negate(),
            t.add(this.mirrorWorldPosition),
            this.rotationMatrix.extractRotation(this.camera.matrixWorld),
            this.lookAtPosition.set(0, 0, -1),
            this.lookAtPosition.applyMatrix4(this.rotationMatrix),
            this.lookAtPosition.add(this.cameraWorldPosition);
            var e = this.mirrorWorldPosition.clone().sub(this.lookAtPosition);
            e.reflect(this.normal).negate(),
            e.add(this.mirrorWorldPosition),
            this.up.set(0, -1, 0),
            this.up.applyMatrix4(this.rotationMatrix),
            this.up.reflect(this.normal).negate(),
            this.mirrorCamera.position.copy(t),
            this.mirrorCamera.up = this.up,
            this.mirrorCamera.lookAt(e),
            this.mirrorCamera.updateProjectionMatrix(),
            this.mirrorCamera.updateMatrixWorld(),
            this.mirrorCamera.matrixWorldInverse.getInverse(this.mirrorCamera.matrixWorld),
            this.textureMatrix.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1),
            this.textureMatrix.multiply(this.mirrorCamera.projectionMatrix),
            this.textureMatrix.multiply(this.mirrorCamera.matrixWorldInverse),
            this.mirrorPlane.setFromNormalAndCoplanarPoint(this.normal, this.mirrorWorldPosition),
            this.mirrorPlane.applyMatrix4(this.mirrorCamera.matrixWorldInverse),
            this.clipPlane.set(this.mirrorPlane.normal.x, this.mirrorPlane.normal.y, this.mirrorPlane.normal.z, this.mirrorPlane.constant);
            var n = new i.Vector4
              , r = this.mirrorCamera.projectionMatrix;
            n.x = (Math.sign(this.clipPlane.x) + r.elements[8]) / r.elements[0],
            n.y = (Math.sign(this.clipPlane.y) + r.elements[9]) / r.elements[5],
            n.z = -1,
            n.w = (1 + r.elements[10]) / r.elements[14];
            var o = new i.Vector4;
            o = this.clipPlane.multiplyScalar(2 / this.clipPlane.dot(n)),
            r.elements[2] = o.x,
            r.elements[6] = o.y,
            r.elements[10] = o.z + 1 - this.clipBias,
            r.elements[14] = o.w
        }
        ,
        i.Mirror.prototype.render = function() {
            if (this.matrixNeedsUpdate && this.updateTextureMatrix(),
            this.matrixNeedsUpdate = !0,
            !r.isShittyUCBrowser) {
                for (var t = this; null !== t.parent; )
                    t = t.parent;
                if (void 0 !== t && t instanceof i.Scene) {
                    var e = this.material.visible;
                    this.material.visible = !1,
                    this.renderer.render(t, this.mirrorCamera, this.texture, !0),
                    this.material.visible = e
                }
            }
        }
        ,
        i.Mirror.prototype.renderTemp = function() {
            this.matrixNeedsUpdate && this.updateTextureMatrix(),
            this.matrixNeedsUpdate = !0;
            for (var t = this; null !== t.parent; )
                t = t.parent;
            void 0 !== t && t instanceof i.Scene && this.renderer.render(t, this.mirrorCamera, this.tempTexture, !0)
        }
    }
    , {
        "./../../app/core/settings.js": 54,
        "./../../libs/threejs/three.min.js": 139
    }],
    96: [function(t, e, n) {
        function r() {
            this.uniforms = {
                map: {
                    type: "t",
                    value: null
                },
                tFlip: {
                    type: "f",
                    value: -1
                },
                sunColor: {
                    type: "c",
                    value: new i.Color(0)
                },
                fogColor: {
                    type: "c",
                    value: new i.Color(0)
                },
                globalColor: {
                    type: "c",
                    value: new i.Color(0)
                },
                sunPos: {
                    type: "v3",
                    value: new i.Vector3(0,0,0)
                }
            };
            var t = new i.ShaderMaterial({
                fragmentShader: s,
                vertexShader: a,
                uniforms: this.uniforms,
                depthWrite: !1,
                side: i.BackSide
            });
            this.mesh = new i.Mesh(new i.BoxGeometry(20,20,20),t),
            this.mesh.renderOrder = -1024
        }
        var i = t("./../../libs/threejs/three.min.js")
          , o = t("./../../edankwan/three/threeChunkParse.js")
          , a = o("#define GLSLIFY 1\nvarying vec3 vWorldPosition2;\nvarying vec3 vWorldPosition;\nvarying vec3 vSkyPos;\n\n// chunk(common );\n\nvarying vec2 vUv;\n\nvoid main() {\n\n  vWorldPosition = transformDirection( position, modelMatrix );\n  vUv = uv;\n\n  vSkyPos = position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  vec4 worldPosition2 = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition2 = worldPosition2.xyz;\n\n}\n")
          , s = o("#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D map;\nuniform float tFlip;\nuniform vec3 fogColor;\nuniform vec3 sunColor;\nuniform vec3 globalColor;\nuniform vec3 sunPos;\n\nvarying vec3 vWorldPosition2;\nvarying vec3 vWorldPosition;\nvarying vec3 vSkyPos;\n\n// chunk(common );\n\nvarying vec2 vUv;\n\nvoid main() {\n\n  vec3 sunDir = normalize(sunPos - cameraPosition);\n  vec3 pixelPos = vWorldPosition2 - cameraPosition;\n  vec3 rayDir = normalize(pixelPos);\n\n  float sunAmount = dot(rayDir, sunDir);\n\n  vec3 skyPos = normalize(pixelPos);\n  vec3 mapColor = texture2D(map, vUv).rgb;\n  vec3 finalSkyColor  = mix(globalColor, fogColor, pow((sunAmount + 1.0) / 2.0, 5.0));\n  finalSkyColor  = mix(finalSkyColor, sunColor, pow(clamp(sunAmount, 0.0, 1.0), 15.0));\n\n  float height = skyPos.y + 0.5;\n  finalSkyColor = mix(mapColor, vec3(0.0), step(0.0, -(2.0 * height - 1.0))) + finalSkyColor;\n  gl_FragColor = vec4(finalSkyColor, 1.0);\n}\n\n\n");
        r.prototype = {
            setTexture: function(t) {
                var e = this.uniforms.map;
                e.value = t,
                e.value.needsUpdate = !0
            },
            setParams: function(t) {
                var e = this.uniforms;
                e.sunColor.value.setHex(t.sunColor),
                e.fogColor.value.setHex(t.fogColor),
                e.globalColor.value.setHex(t.globalColor),
                e.sunPos.value.copy(t.sunPos)
            }
        },
        e.exports = r
    }
    , {
        "./../../edankwan/three/threeChunkParse.js": 116,
        "./../../libs/threejs/three.min.js": 139
    }],
    97: [function(t, e, n) {
        function r() {
            this.position = new i.Vector3
        }
        var i = t("./../../libs/threejs/three.min.js");
        r.prototype = {
            setPath: function(t) {
                for (var e, n = [], r = .1, o = 0, a = t.length / 3; a > o; o++)
                    e = 3 * o,
                    n[o] = new i.Vector3(r * t[e],r * t[e + 1],r * t[e + 2]);
                this.path = new i.CatmullRomCurve3(n)
            },
            setTimeRatio: function(t) {
                t = Math.min(Math.max(0, t), 1),
                this.position.copy(this.path.getPoint(t))
            }
        },
        e.exports = r
    }
    , {
        "./../../libs/threejs/three.min.js": 139
    }],
    98: [function(t, e, n) {
        function r(t) {
            return o.UniformsLib[t]
        }
        function i(t) {
            o.ShaderMaterial.call(this),
            this.type = "WaterMaterial",
            this.color = new o.Color(16777215),
            this.fog = !0,
            this.shading = o.SmoothShading,
            this.wireframe = !1,
            this.wireframeLinewidth = 1,
            this.wireframeLinecap = "round",
            this.wireframeLinejoin = "round",
            this.vertexColors = o.NoColors,
            this.waterNormals = t.waterNormals,
            this.time = 0;
            var e = {
                uniforms: o.UniformsUtils.merge([r("common"), {
                    time: {
                        type: "f",
                        value: this.time
                    },
                    normalSampler: {
                        type: "t",
                        value: t.waterNormals
                    },
                    sunColor: {
                        type: "c",
                        value: new o.Color(0)
                    },
                    fogColor: {
                        type: "c",
                        value: new o.Color(0)
                    },
                    globalColor: {
                        type: "c",
                        value: new o.Color(0)
                    },
                    sunPos: {
                        type: "v3",
                        value: new o.Vector3(0,0,0)
                    },
                    fogParams: {
                        type: "v4",
                        value: new o.Vector4(0,0,0,0)
                    },
                    diffuseMap: {
                        type: "t",
                        value: t.map
                    },
                    map: {
                        type: "t",
                        value: t.map
                    }
                }]),
                vertexShader: s,
                fragmentShader: l,
                shading: o.SmoothShading
            };
            for (var n in t)
                e[n] = t[n];
            this.setValues(e),
            this.uniforms.normalSampler.value.needsUpdate = !0
        }
        var o = t("./../../libs/threejs/three.min.js")
          , a = t("./../../edankwan/three/threeChunkParse.js")
          , s = (o.UniformsUtils.merge([]),
        a("#define GLSLIFY 1\n// chunk( common );\n// chunk( logdepthbuf_pars_vertex );\n// chunk( uv_pars_vertex ),\n// chunk( uv2_pars_vertex ),\n// chunk( envmap_pars_vertex ),\n// chunk( color_pars_vertex ),\n// chunk( morphtarget_pars_vertex ),\n// chunk( skinning_pars_vertex ),\n// chunk( shadowmap_pars_vertex ),\n\n\nvarying vec3 vWorldPosition2;\n\nvoid main() {\n\n  // chunk( uv_vertex );\n  // chunk( uv2_vertex );\n  // chunk( color_vertex );\n  // chunk( skinbase_vertex );\n\n   #ifdef USE_ENVMAP\n\n  // chunk( beginnormal_vertex );\n  // chunk( morphnormal_vertex );\n  // chunk( skinnormal_vertex );\n  // chunk( defaultnormal_vertex );\n\n   #endif\n\n  // chunk( begin_vertex );\n  // chunk( morphtarget_vertex );\n  // chunk( skinning_vertex );\n  // chunk( project_vertex );\n  // chunk( logdepthbuf_vertex );\n\n  // chunk( worldpos_vertex );\n  // chunk( envmap_vertex );\n  // chunk( shadowmap_vertex );\n\n  vec4 worldPosition2 = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition2 = worldPosition2.xyz;\n\n}\n"))
          , l = a("#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform float opacity;\n\n// chunk(common );\n// chunk(color_pars_fragment );\n// chunk(uv_pars_fragment );\n// chunk(uv2_pars_fragment );\n// chunk(map_pars_fragment );\n\nvec4 computeFog_1_0(\n    in float distance,\n    in vec3  rayOri,\n    in vec3  sunDir_1_1,\n    in vec3  rayDir_1_2,\n    in vec3 fogColor_1_3,\n    in vec3 sunColor_1_4,\n    in vec3 globalColor_1_5,\n    in vec4 fogParams_1_6\n)\n{\n  //float fogAmount = 1.0 - exp(-distance * 0.003);\n  float rayY_1_7 = 1.0 - exp(-rayDir_1_2.y);\n  float fogAmount = fogParams_1_6.y * exp(-(rayOri.y + fogParams_1_6.x) * fogParams_1_6.z) * (1.0 - exp(-distance * rayY_1_7 * fogParams_1_6.w)) / rayY_1_7;\n  fogAmount = clamp(fogAmount, 0.0, 1.0);\n  float sunAmount = dot(rayDir_1_2, sunDir_1_1);\n  vec3 finalFogColor  = mix(globalColor_1_5, fogColor_1_3, pow((sunAmount + 1.0) / 2.0, 5.0));\n  finalFogColor  = mix(finalFogColor, sunColor_1_4, pow(clamp(sunAmount, 0.0, 1.0), 15.0));\n  return vec4(finalFogColor, fogAmount);\n}\n\n\n\n\nuniform float time;\nuniform sampler2D normalSampler;\n\nvarying vec3 vWorldPosition2;\nuniform vec3 fogColor;\nuniform vec3 sunColor;\nuniform vec3 globalColor;\nuniform vec3 sunPos;\nuniform vec4 fogParams;\n\nvec4 getNoise( vec2 uv )\n{\n  vec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n  vec2 uv1 = uv / 107.0 - vec2( time / -19.0, time / 31.0 );\n  vec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n  vec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n  vec4 noise = ( texture2D( normalSampler, uv0 ) ) +\n    ( texture2D( normalSampler, uv1 ) ) +\n    ( texture2D( normalSampler, uv2 ) ) +\n    ( texture2D( normalSampler, uv3 ) );\n  return noise * 0.5 - 1.0;\n}\n\nvoid sunLight( const vec3 surfaceNormal, const vec3 rayDir, const vec3 sunDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor )\n{\n  vec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n  float direction = max( 0.0, dot( rayDir, reflection ) );\n  specularColor += pow( direction, shiny ) * sunColor * spec;\n  diffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n}\n\nvoid main() {\n\n  vec3 outgoingLight = vec3( 0.0 );\n  vec4 diffuseColor = vec4( diffuse, opacity );\n  vec3 totalAmbientLight = vec3( 1.0 ); // hardwired\n\n  // chunk( logdepthbuf_fragment );\n  // chunk( map_fragment );\n  // chunk( color_fragment );\n\n  outgoingLight = diffuseColor.rgb * totalAmbientLight; // simple shader\n\n  // chunk( linear_to_gamma_fragment );\n\n\n  vec4 noise = getNoise( vWorldPosition2.xz );\n  vec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n  vec3 diffuseLight = vec3(0.0);\n  vec3 specularLight = vec3(0.0);\n\n  vec3 sunDir = normalize(sunPos - cameraPosition);\n  vec3 pixelPos = vWorldPosition2 - cameraPosition;\n  vec3 rayDir = normalize(pixelPos);\n  float distance = length(pixelPos);\n\n  sunLight( surfaceNormal, -rayDir, sunDir, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n\n  float theta = max( dot( -rayDir, surfaceNormal ), 0.0 );\n  float rf0 = 0.3;\n  float reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n  vec3 scatter = max( 0.0, dot( surfaceNormal, -rayDir ) ) * globalColor;\n  outgoingLight = mix( sunColor * diffuseLight * 0.3 + scatter, specularLight, reflectance);\n  outgoingLight = mix(outgoingLight, mix(sunColor, fogColor, 0.5), 0.1);\n\n  vec4 fog = computeFog_1_0(distance, cameraPosition, sunDir, rayDir, fogColor, sunColor, globalColor, fogParams);\n  outgoingLight = mix(outgoingLight, fog.rgb, fog.a);\n\n  gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n}\n");
        i.prototype = Object.create(o.ShaderMaterial.prototype),
        i.prototype.constructor = o.Water,
        i.prototype.setParams = function(t) {
            var e = this.uniforms;
            e.sunColor.value.setHex(t.sunColor),
            e.fogColor.value.setHex(t.fogColor),
            e.globalColor.value.setHex(t.globalColor),
            e.sunPos.value.copy(t.sunPos),
            e.fogParams.value.copy(t.fogParams)
        }
        ,
        e.exports = i
    }
    , {
        "./../../edankwan/three/threeChunkParse.js": 116,
        "./../../libs/threejs/three.min.js": 139
    }],
    99: [function(t, e, n) {
        function r() {
            i("loader", v.loaderImg, y.loader, 45, -540, -960, .5)
        }
        function i(t, e, n, r, i, o, a) {
            D[t] = {
                id: t,
                texture: new b.Texture(e),
                scale: a,
                offsetX: i,
                offsetY: o,
                x: 0,
                y: 0,
                img: e,
                frameData: n,
                time: 0,
                fps: r
            }
        }
        function o() {
            k = n.container = new b.Object3D,
            S = new b.BufferGeometry,
            M = new Float32Array([-.5, -.5, 0, -.5, .5, 0, .5, .5, 0, -.5, -.5, 0, .5, .5, 0, .5, -.5, 0]),
            S.addAttribute("position", T = new b.BufferAttribute(M,3)),
            C = new b.Vector2(0,0),
            a();
            for (var t in D)
                s(D[t]);
            x.onCollected.add(d)
        }
        function a() {
            A = new b.ShaderMaterial({
                uniforms: {
                    uAlpha: E = {
                        type: "f",
                        value: 0
                    },
                    uBoundBox: {
                        type: "v4",
                        value: new b.Vector4(0,0,1,1)
                    },
                    uDimension: {
                        type: "v2",
                        value: C
                    },
                    uResolution: {
                        type: "v2",
                        value: C
                    },
                    uColor: {
                        type: "c",
                        value: L = new b.Color(0,0,0)
                    }
                },
                vertexShader: "#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform vec2 uResolution;\nuniform vec2 uDimension;\nuniform vec4 uBoundBox;\n\nvoid main() {\n    vec2 pos = ((modelMatrix * vec4(position.xy * uDimension, 0.0, 1.0)).xy / uResolution) * 2.0 - 1.0;\n    pos.y *= -1.0;\n    vUv = uBoundBox.xy + (vec2(position.x, position.y) + vec2(0.5)) * uBoundBox.zw;\n    gl_Position = vec4( pos, 0.0, 1.0 );\n}\n",
                fragmentShader: "#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform vec3 uColor;\nuniform float uAlpha;\n\nvoid main() {\n    gl_FragColor = vec4(uColor, 1.0) * uAlpha;\n}\n",
                side: b.DoubleSide,
                transparent: !0,
                depthWrite: !1,
                depthTest: !1
            }),
            P = new b.Mesh(S,A),
            P.visible = !0,
            P.frustumCulled = !1,
            P.renderOrder = O++,
            k.add(P)
        }
        function s(t) {
            t.texture.needsUpdate = !0,
            t.texture.flipY = !1,
            t.width = t.img.width,
            t.height = t.img.height;
            var e = t.material = new b.ShaderMaterial({
                uniforms: {
                    uMap: {
                        type: "t",
                        value: D.loader.texture
                    },
                    uAlpha: t.uAlpha = {
                        type: "f",
                        value: 0
                    },
                    uBoundBox: {
                        type: "v4",
                        value: t.bbox = new b.Vector4(0,0,1,1)
                    },
                    uDimension: {
                        type: "v2",
                        value: t.dimension = new b.Vector2(t.width,t.height)
                    },
                    uResolution: {
                        type: "v2",
                        value: C
                    }
                },
                vertexShader: "#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform vec2 uResolution;\nuniform vec2 uDimension;\nuniform vec4 uBoundBox;\n\nvoid main() {\n    vec2 pos = ((modelMatrix * vec4(position.xy * uDimension, 0.0, 1.0)).xy / uResolution) * 2.0 - 1.0;\n    pos.y *= -1.0;\n    vUv = uBoundBox.xy + (vec2(position.x, position.y) + vec2(0.5)) * uBoundBox.zw;\n    gl_Position = vec4( pos, 0.0, 1.0 );\n}\n",
                fragmentShader: "#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform sampler2D uMap;\nuniform float uAlpha;\n\nvoid main() {\n    vec4 color = texture2D( uMap, vUv);\n    gl_FragColor = color * uAlpha;\n}\n",
                side: b.DoubleSide,
                transparent: !0,
                depthWrite: !1,
                depthTest: !1
            })
              , n = t.mesh = new b.Mesh(S,e);
            n.visible = !1,
            n.frustumCulled = !1,
            n.renderOrder = O++,
            k.add(n)
        }
        function l(t, e) {
            var n = t.frameData[e]
              , r = n.spriteSourceSize;
            e = n.frame;
            var i = t.width
              , o = t.height
              , a = t.bbox
              , s = e.w
              , l = e.h
              , h = t.scale;
            a.x = e.x / i,
            a.y = e.y / o,
            a.z = s / i,
            a.w = l / o,
            t.x = (t.offsetX + r.x + s / 2) * h,
            t.y = (t.offsetY + r.y + l / 2) * h,
            t.dimension.set(s * h, l * h)
        }
        function h() {}
        function c(t) {
            var e = C.x = _.stageWidth * (v.isUsingVR ? .5 : 1)
              , n = C.y = _.stageHeight;
            P.visible = !!E.value,
            P.position.x = e / 2,
            P.position.y = n / 2;
            var r;
            for (var i in D)
                r = D[i],
                i === R && r.uAlpha.value > 0 ? (r.frameData && l(r, ~~((r.time += t || 0) / r.fps) % r.frameData.length),
                r.mesh.position.x = e / 2 + r.x,
                r.mesh.position.y = n / 2 + r.y,
                r.mesh.visible = !0) : r.mesh.visible = !1
        }
        function u(t, e) {
            R = "",
            L.setHex(0),
            A.blending = b.NormalBlending,
            w.set(E, {
                value: 0
            }),
            w.to(E, t || 2, {
                value: 1,
                onComplete: e
            })
        }
        function p(t, e) {
            R = "",
            w.set(E, {
                value: 1
            }),
            w.to(E, t || 2, {
                value: 0,
                onComplete: e
            })
        }
        function d(t) {
            R = "",
            L.setHex(16777215),
            A.blending = b.AdditiveBlending,
            w.set(E, {
                value: .7
            }),
            w.to(E, .18, {
                value: 0
            })
        }
        function f(t, e) {
            R = "loader",
            L.setHex(0),
            A.blending = b.NormalBlending,
            w.to(E, t || .3, {
                value: .5
            });
            var n = D.loader;
            n.time = 0,
            w.set(n.uAlpha, {
                value: 0
            }),
            w.to(n.uAlpha, t || .5, {
                value: 1,
                onComplete: e
            })
        }
        function m(t, e) {
            R = "loader",
            w.to(E, t || .3, {
                value: 0
            }),
            w.to(D.loader.uAlpha, t || .3, {
                value: 0,
                onComplete: e
            })
        }
        var g, v = t("./../../app/core/settings.js"), y = t("./../../app/controllers/dataController.js"), _ = (t("quick-loader"),
        t("./../../edankwan/core/stageReference.js")), x = t("./rings/ringController"), b = t("./../../libs/threejs/three.min.js"), w = t("./../../libs/TweenMax.min.js");
        t("./../../edankwan/utils/mathUtils"),
        t("./../../edankwan/utils/easeUtils");
        n.preInit = r,
        n.init = o,
        n.reset = h,
        n.update = c,
        n.fadeIn = u,
        n.fadeOut = p,
        n.blink = d,
        n.showLoader = f,
        n.hideLoader = m;
        var S, T, M, C, A, E, L, P, k = n.container = g, R = "", O = 2048, D = {}
    }
    , {
        "./../../app/controllers/dataController.js": 52,
        "./../../app/core/settings.js": 54,
        "./../../edankwan/core/stageReference.js": 115,
        "./../../edankwan/utils/easeUtils": 119,
        "./../../edankwan/utils/mathUtils": 120,
        "./../../libs/TweenMax.min.js": 130,
        "./../../libs/threejs/three.min.js": 139,
        "./rings/ringController": 101,
        "quick-loader": 38
    }],
    100: [function(t, e, n) {
        function r(t, e, n, r, o, a, s) {
            f.Object3D.call(this),
            this.score = t,
            this._initMaterial(),
            this.mesh = new f.Mesh(d || i(),this.mat),
            this.add(this.mesh),
            this.isVisible = !1,
            this.hasShown = !1,
            this.position.set(e / 10, n / 10, r / 10),
            this.rotation.set(o * S, a * S, s * S),
            this.plane = new f.Mesh(new f.PlaneGeometry(w,w),new f.MeshBasicMaterial),
            this.plane.fog = !1,
            this.plane.rotation.z = Math.PI / 4,
            this.add(this.plane),
            this.plane.visible = !1,
            this.boundUpdate = l.bind(this),
            this.reset()
        }
        function i() {
            d = new f.BufferGeometry;
            for (var t, e, n, r, i, o, a = new Float32Array(72), s = new Float32Array(24), l = 0; 4 > l; l++)
                t = 6 * l,
                e = 18 * l,
                n = Math.cos(l * Math.PI / 2),
                i = Math.sin(l * Math.PI / 2),
                r = Math.cos((l + 1) * Math.PI / 2),
                o = Math.sin((l + 1) * Math.PI / 2),
                a[e + 0] = n * x,
                a[e + 1] = i * x,
                s[t + 0] = 0,
                a[e + 3] = n * b,
                a[e + 4] = i * b,
                s[t + 1] = 1,
                a[e + 6] = r * b,
                a[e + 7] = o * b,
                s[t + 2] = 1,
                a[e + 9] = n * x,
                a[e + 10] = i * x,
                s[t + 3] = 0,
                a[e + 12] = r * b,
                a[e + 13] = o * b,
                s[t + 4] = 1,
                a[e + 15] = r * x,
                a[e + 16] = o * x,
                s[t + 5] = 0;
            return d.addAttribute("position", new f.BufferAttribute(a,3)),
            d.addAttribute("aLevel", new f.BufferAttribute(s,1)),
            d
        }
        function o() {
            this.mat = new f.ShaderMaterial({
                uniforms: {
                    uLevelOffset: this.uLevelOffset = {
                        type: "f",
                        value: 0
                    },
                    uStep: this.uStep = {
                        type: "f",
                        value: 0
                    },
                    uAlpha: this.uAlpha = {
                        type: "f",
                        value: 0
                    },
                    uColor: this.uColor = {
                        type: "c",
                        value: new f.Color(v[this.score])
                    }
                },
                vertexShader: "#define GLSLIFY 1\nattribute vec4 color;\nattribute float aLevel;\n\nvarying float vLevel;\nuniform float uLevelOffset;\n\nvoid main() {\n    vLevel = (aLevel + uLevelOffset) * 2.0 - 1.0;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",
                fragmentShader: "#define GLSLIFY 1\nvarying float vLevel;\nuniform float uStep;\nuniform float uAlpha;\nuniform vec3 uColor;\n\nvoid main() {\n    float a = max(1.0 - abs(vLevel), 0.0);\n    a = min(a * 0.63 + step(uStep, a), 1.0);\n    float alpha = pow(a * uAlpha, 2.5);\n    vec3 color = mix(uColor, vec3(1.0), pow(alpha, 2.5));\n    gl_FragColor = vec4(color, 0.9 * alpha);\n}\n",
                transparent: !0
            })
        }
        function a() {
            r.poolRelease(this)
        }
        function s() {
            this.isVisible = !1,
            this.hasShown = !1,
            m.killTweensOf(this),
            this.animation = 0,
            this.update()
        }
        function l() {
            var t = this.animation;
            if (this.visible = t > 0 && 2 > t,
            this.isVisible) {
                var e = t > 1 ? 1 : t;
                this.uAlpha.value = t > 1 ? 2 - t : t,
                this.uStep.value = .96 - .75 * (1 - g.easeInOutSine(e)),
                this.uLevelOffset.value = 1 - g.easeOutBack(e),
                this.mesh.scale.set(t, t, t),
                this.mesh.rotation.z = Math.PI * (1 > t ? 0 : g.easeOutCubic(t - 1))
            }
        }
        function h(t) {
            this.isVisible || (this.isVisible = !0,
            this.hasShown = !0,
            t = t === p ? .5 : t,
            m.killTweensOf(this),
            m.set(this, {
                animation: 0
            }),
            this.update(),
            m.to(this, t, {
                animation: 1,
                ease: "easeOutSine",
                onUpdate: this.boundUpdate
            }))
        }
        function c(t) {
            this.isVisible && (this.isVisible = !1,
            t = t === p ? .5 : t,
            m.killTweensOf(this),
            m.to(this, t, {
                animation: 2,
                ease: "linear",
                onUpdate: this.boundUpdate
            }))
        }
        function u(t) {
            this.isVisible && (this.isVisible = !1,
            t = t === p ? .2 : t,
            m.killTweensOf(this),
            m.to(this, t, {
                animation: 0,
                ease: "linear",
                onUpdate: this.boundUpdate
            }))
        }
        var p, d, f = (t("./../../../app/core/settings.js"),
        t("./../../../libs/threejs/three.min.js")), m = t("./../../../libs/TweenMax.min.js"), g = t("./../../../edankwan/utils/easeUtils"), v = {
            2: 16777215,
            4: 50943,
            8: 13329909
        };
        e.exports = r;
        var y = f.Object3D.prototype
          , _ = r.prototype = Object.create(y);
        _.constructor = r;
        var x = .675
          , b = 5.04
          , w = 5.04
          , S = Math.PI / 180;
        r.RADIUS = x + (b - x) / 2,
        _.release = a,
        _._initMaterial = o,
        _.update = l,
        _.reset = s,
        _.show = h,
        _.collect = c,
        _.hide = u
    }
    , {
        "./../../../app/core/settings.js": 54,
        "./../../../edankwan/utils/easeUtils": 119,
        "./../../../libs/TweenMax.min.js": 130,
        "./../../../libs/threejs/three.min.js": 139
    }],
    101: [function(t, e, n) {
        function r() {
            m = new h.Raycaster,
            g = new h.Vector3,
            v = new h.Vector3,
            d = n.container = new h.Object3D,
            i(l.xp),
            y = new h.Mesh(new h.OctahedronGeometry(.1,0),new h.MeshNormalMaterial),
            y.position.set(0, 0, 3),
            _ = new h.Mesh(new h.OctahedronGeometry(.1,0),new h.MeshBasicMaterial),
            _.position.set(.3, .1, -3),
            x = new h.Mesh(new h.BoxGeometry(.005,.005,1),new h.MeshBasicMaterial({
                color: 16777215
            })),
            b = new h.Mesh(new h.BoxGeometry(.2,.2,1),new h.MeshNormalMaterial({
                color: 16711680
            }))
        }
        function i(t) {
            p = n.data = t.rings;
            for (var e, r = 0, i = p.length; i > r; r += 7)
                e = new u(p[r + 0],p[r + 1],p[r + 2],p[r + 3],-p[r + 5],p[r + 4],p[r + 6]),
                f.push(e),
                d.add(e);
            o()
        }
        function o() {
            w = 0;
            for (var t, e = 0, n = f.length; n > e; e++)
                t = f[e],
                t.reset()
        }
        function a(t, e) {
            var r = t.mesh.position
              , i = t.birdMesh.position;
            v.copy(i).applyMatrix4(t.mesh.matrixWorld);
            var o, a, s, l = new h.Matrix4, c = v.clone().sub(g).normalize();
            if (e.speed > 0) {
                y.position.copy(g),
                _.position.copy(v);
                var u = _.position.distanceTo(y.position);
                u > 0 && (x.position.copy(y.position),
                x.lookAt(_.position),
                x.scale.z = u,
                x.translateZ(u / 2))
            }
            for (var p = 0, d = f.length; d > p; p++)
                if (o = f[p],
                s = o.position.distanceTo(r),
                S > s && (o.isVisible || o.hasShown || o.show()),
                o.isVisible) {
                    o.updateMatrixWorld(),
                    l.getInverse(o.matrixWorld),
                    b.position.copy(v);
                    var u = b.position.distanceTo(o.position);
                    b.lookAt(o.position),
                    b.scale.z = u,
                    b.translateZ(u / 2),
                    v.clone().applyMatrix4(l).z < 0 && (o.plane.visible = !0,
                    m.set(g.clone(), c),
                    a = m.intersectObject(o.plane, !1),
                    o.plane.visible = !1,
                    a.length ? (o.collect(),
                    n.onCollected.dispatch(o)) : (o.hide(),
                    n.onMissed.dispatch(o)),
                    w++,
                    w === d && n.onFinished.dispatch())
                }
            g.copy(v)
        }
        var s, l = t("./../../../app/controllers/dataController.js"), h = t("./../../../libs/threejs/three.min.js"), c = t("min-signal"), u = t("./Ring"), p = n.data = s, d = n.container = s, f = n.rings = [];
        n.init = r,
        n.update = a,
        n.reset = o,
        n.onCollected = new c,
        n.onMissed = new c,
        n.onFinished = new c;
        var m, g, v, y, _, x, b, w = 0, S = 200
    }
    , {
        "./../../../app/controllers/dataController.js": 52,
        "./../../../libs/threejs/three.min.js": 139,
        "./Ring": 100,
        "min-signal": 11
    }],
    102: [function(t, e, n) {
        function r() {
            E = new y.Texture(m.add("img/scores.png").content)
        }
        function i() {
            E.needsUpdate = !0,
            P = E.image.width,
            k = E.image.height,
            o(f.xp),
            S = new y.BufferGeometry,
            C = new Float32Array(18 * N),
            A = new Float32Array(12 * N),
            S.addAttribute("position", T = new y.BufferAttribute(C,3)),
            S.addAttribute("aUv", M = new y.BufferAttribute(A,2)),
            this.material = new y.ShaderMaterial({
                uniforms: {
                    uMap: {
                        type: "t",
                        value: E
                    },
                    uAlpha: this.uAlpha = {
                        type: "f",
                        value: 1
                    },
                    uRotate: {
                        type: "f",
                        value: window.isForcedPortrait ? 1 : 0
                    },
                    uResolution: {
                        type: "v2",
                        value: L = new y.Vector2
                    }
                },
                vertexShader: "#define GLSLIFY 1\nattribute vec2 aUv;\n\nvarying vec2 vUv;\nvarying float vAlpha;\n\nuniform vec2 uResolution;\nuniform float uRotate;\n\nconst mat2 rotate = mat2( 0.0, -1.0, 1.0,  0.0);\n\nvoid main() {\n    vUv = aUv;\n    vAlpha = position.z + 100.0;\n    vec2 pos = (position.xy / uResolution) * 2.0 - 1.0;\n    gl_Position = vec4( mix(pos, rotate * pos, uRotate) * vec2(1.0, -1.0), 0.0, 1.0 );\n}\n",
                fragmentShader: "#define GLSLIFY 1\nvarying vec2 vUv;\nvarying float vAlpha;\n\nuniform sampler2D uMap;\nuniform float uAlpha;\n\nvoid main() {\n    vec4 color = texture2D( uMap, vUv);\n    gl_FragColor = color * vAlpha * uAlpha;\n}\n",
                blending: y.AdditiveBlending,
                side: y.DoubleSide,
                transparent: !0,
                depthWrite: !1,
                depthTest: !1
            }),
            R = n.container = new y.Mesh(S,this.material),
            R.frustumCulled = !1,
            R.renderOrder = 1024,
            v.onCollected.add(l),
            v.onMissed.add(h),
            v.onFinished.add(h),
            a()
        }
        function o(t) {
            w = t.scoreSprite;
            var e;
            for (var n in w)
                e = w[n],
                e[4] = e[2],
                e[5] = e[3],
                e[0] /= P,
                e[1] /= k,
                e[2] = e[0] + e[2] / P,
                e[3] = e[1] + e[3] / k
        }
        function a() {
            O = {
                total: 0,
                totalAnimation: 1,
                comboAnimation: 1,
                plus: 0,
                plusAnimation: 0,
                firstAnimation: 0
            },
            D = 0,
            F = 0,
            U = 0,
            I = 0,
            B = 0
        }
        function s() {
            return {
                maxCombo: D,
                collected: B,
                score: I
            }
        }
        function l(t) {
            var e = t.score;
            F++,
            B++,
            D = Math.max(D, F),
            U += e,
            1 === B && _.to(O, .5, {
                firstAnimation: 1,
                ease: "easeInOutQuint"
            }),
            _.set(O, {
                plus: e,
                plusAnimation: 0,
                comboAnimation: 0,
                totalAnimation: 0
            }),
            _.to(O, .5 * (B > 1 ? 1 : 0), {
                total: I + U * F,
                totalAnimation: 1,
                ease: "linear"
            }),
            _.to(O, .5, {
                comboAnimation: 1,
                ease: "linear"
            }),
            _.to(O, 1, {
                plusAnimation: 1,
                ease: "linear"
            })
        }
        function h() {
            I += U * F,
            U && _.to(O, .5, {
                total: I,
                ease: "linear"
            }),
            U = 0,
            F = 0
        }
        function c(t, e, n, r, i, o, a) {
            var s = 12 * t
              , l = 18 * t;
            if ("" === e)
                C[l + 0] = C[l + 1] = C[l + 3] = C[l + 4] = C[l + 6] = C[l + 7] = C[l + 9] = C[l + 10] = C[l + 12] = C[l + 13] = C[l + 15] = C[l + 16] = 0;
            else {
                var h = w[e]
                  , c = i * h[4]
                  , u = i * h[5]
                  , p = n + c / 2
                  , d = r + u / 2;
                C[l + 2] = C[l + 5] = C[l + 8] = C[l + 11] = C[l + 14] = C[l + 17] = a - 100,
                C[l + 0] = C[l + 3] = C[l + 9] = p - c * o / 2,
                C[l + 6] = C[l + 12] = C[l + 15] = p + c * o / 2,
                C[l + 4] = C[l + 7] = C[l + 13] = d - u + u * o / 2,
                C[l + 1] = C[l + 10] = C[l + 16] = d - u - u * o / 2,
                A[s + 0] = A[s + 2] = A[s + 6] = h[0],
                A[s + 4] = A[s + 8] = A[s + 10] = h[2],
                A[s + 3] = A[s + 5] = A[s + 9] = 1 - h[3],
                A[s + 1] = A[s + 7] = A[s + 11] = 1 - h[1],
                n += c
            }
            return n
        }
        function u(t) {
            var e, n, r = d.isUsingVR ? .5 : 1;
            window.isForcedPortrait ? (e = g.stageHeight * r,
            n = g.stageWidth) : (e = g.stageWidth * r,
            n = g.stageHeight),
            this.material.uniforms.uRotate.value = window.isForcedPortrait ? 1 : 0,
            L.x = e,
            L.y = n;
            var i, o, a, s, l, h = O.total, u = O.totalAnimation, p = O.comboAnimation, f = O.plus, m = O.plusAnimation % 1, v = O.firstAnimation, y = (~~h).toString(), _ = F > 1 ? "cx" + F : "", w = m ? "+" + f.toString() : "", S = Math.min(e / 320, 1), C = .135 * e, A = .176 * n - 27 * (1 - v) * S;
            for (i = C,
            o = A,
            s = 1.5 - .5 * b.easeOutSine(u),
            l = b.easeOutSine(u) * v,
            a = 0; 5 > a; a++)
                i = c(a, y.substr(a, 1), i, o, .4 * S, s, l);
            for (i = C + 2,
            o = A + 27 * S,
            s = 1.5 - .5 * b.easeOutSine(p),
            l = b.easeOutSine(p),
            a = 0; 4 > a; a++)
                i = c(a + 5, _.substr(a, 1), i, o, .3 * S, s, l),
                0 === a ? (i += 8 * S,
                o += 2 * S) : 1 === a && (i += 5 * S,
                o += 2 * S);
            for (i = (1 + t.projectionVector.x) / 2 * e - 30 * S,
            o = (1 - t.projectionVector.y) / 2 * n - 30 * S,
            m && (o -= 80 * b.easeOutSine(m),
            l = 1 - x.clampNorm(2 * Math.abs(m - .5), .8, 1)),
            a = 0; 3 > a; a++)
                i = c(a + 9, w.substr(a, 1), i, o, .4 * S, 1, l);
            T.needsUpdate = !0,
            M.needsUpdate = !0
        }
        var p, d = t("./../../../app/core/settings.js"), f = t("./../../../app/controllers/dataController.js"), m = t("quick-loader"), g = t("./../../../edankwan/core/stageReference.js"), v = t("./../rings/ringController"), y = t("./../../../libs/threejs/three.min.js"), _ = t("./../../../libs/TweenMax.min.js"), x = t("./../../../edankwan/utils/mathUtils"), b = t("./../../../edankwan/utils/easeUtils");
        n.preInit = r,
        n.init = i,
        n.reset = a,
        n.update = u,
        n.getResult = window.getResult = s;
        var w, S, T, M, C, A, E, L, P, k, R = n.container = p, O = {
            total: 0,
            totalAnimation: 1,
            comboAnimation: 1,
            plus: 0,
            plusAnimation: 0,
            firstAnimation: 0
        }, D = 0, F = 0, U = 0, I = 0, B = 0, N = 12
    }
    , {
        "./../../../app/controllers/dataController.js": 52,
        "./../../../app/core/settings.js": 54,
        "./../../../edankwan/core/stageReference.js": 115,
        "./../../../edankwan/utils/easeUtils": 119,
        "./../../../edankwan/utils/mathUtils": 120,
        "./../../../libs/TweenMax.min.js": 130,
        "./../../../libs/threejs/three.min.js": 139,
        "./../rings/ringController": 101,
        "quick-loader": 38
    }],
    103: [function(t, e, n) {
        function r(t, e, n) {
            this.config = t,
            this.setup = e,
            this.data = n,
            this.timeRatio = 0,
            this.animals = [],
            this.inActiveAnimals = [],
            this.hasAnimals = !!this.data.animals,
            this.built = new f,
            this.boundAddNextChild = this.addNextChild.bind(this),
            this.boundAddNextAnimal = this.addNextAnimal.bind(this)
        }
        function i() {
            this.nodes = []
        }
        function o() {}
        var a = (t("./../../libs/threejs/three.min.js"),
        t("./../../libs/q.js"))
          , s = t("../utils/progressiveLoader")
          , l = t("./../../edankwan/core/stageReference.js")
          , h = t("./../animals/animalController")
          , c = t("./../animals/animals")
          , u = t("../effects/WaterMaterial")
          , p = t("../effects/Fog")
          , d = t("../utils/traverseTree")
          , f = t("../../grgrdvrt/Signal")
          , m = t("../../grgrdvrt/Log")();
        r.prototype = {
            preinit: function() {
                return m("preinit"),
                this.hasAnimals && this.loadAnimals(),
                s("models/" + this.data.id + "/map").load().then(function(t) {
                    return t.scale.set(.1, .1, .1),
                    this.init({
                        scene: t
                    }),
                    a(this)
                }
                .bind(this))["catch"](function(t) {
                    m("universeAssetsLoader", t)
                })
            },
            loadAnimals: function() {
                m("loadAnimals");
                for (var t, e, n, r, i, o, a = this.data.begin, s = this.data.end - a, l = this.data.animals, u = 0, p = l.length; p > u; ++u)
                    if (t = l[u],
                    n = h.data[t],
                    n.paths)
                        for (r = 0,
                        i = n.paths.length; i > r; ++r)
                            e = c[t].poolGet(),
                            e.preload(!0),
                            e.setPath(n.paths[r], (n.pathMinRatio - a) / s, (n.pathMaxRatio - a) / s),
                            this.animals.push(e);
                    else if (n.transforms)
                        for (r = 0,
                        i = n.transforms.length; i > r; ++r)
                            o = n.transforms[r],
                            e = c[t].poolGet(),
                            e.preload(!0),
                            e.position.set(o.x, o.y, o.z),
                            e.rotation.set(o.rX, o.rY, o.rZ),
                            this.animals.push(e)
            },
            init: function(t) {
                m("init", t),
                this.assets = t,
                this.mesh = t.scene,
                this.mesh.matrixAutoUpdate = !0,
                this.applyChanges(["backLight", "frontLight", "spot01", "spot02"]),
                this.initWater(),
                this.fog = new p(this.mesh)
            },
            applyChanges: function(t) {
                t.forEach(function(t) {
                    var e = this.mesh.getObjectByName(t);
                    e && (e.material.transparent = !0)
                }, this)
            },
            initWater: function() {
                var t = this.mesh.getObjectByName("water");
                void 0 !== t && (this.waterMaterial = new u({
                    waterNormals: this.config.waterNormals
                }),
                t.material = this.waterMaterial)
            },
            build: function() {
                var t = new i;
                d(this.mesh, [t]),
                this.children = t.getResult(),
                this.children.shift(),
                this.hasAnimals && (this.inActiveAnimals = this.animals.slice()),
                requestAnimationFrame(this.boundAddNextChild)
            },
            addNextChild: function() {
                var t = this.children.shift();
                t.universe_parent.add(t),
                this.children.length > 0 ? requestAnimationFrame(this.boundAddNextChild) : this.hasAnimals ? requestAnimationFrame(this.boundAddNextAnimal) : this.built.dispatch()
            },
            addNextAnimal: function() {
                var t = this.inActiveAnimals.shift();
                t.play("normal", .2 * this.inActiveAnimals.length),
                this.mesh.add(t),
                this.inActiveAnimals.length > 0 ? requestAnimationFrame(this.boundAddNextAnimal) : this.built.dispatch()
            },
            setEffects: function(t) {
                this.fog.setParams(t),
                void 0 !== this.waterMaterial && this.waterMaterial.setParams(t)
            },
            setTime: function(t) {
                if (this.timeRatio = t,
                this.hasAnimals)
                    for (var e = 0, n = this.animals.length; n > e; ++e)
                        this.animals[e].path && this.animals[e].updatePathPosition(t)
            },
            render: function() {
                if (void 0 !== this.waterMaterial && (this.waterMaterial.uniforms.time.value += .5 / 60),
                this.hasAnimals)
                    for (var t = 0, e = this.animals.length; e > t; ++t)
                        this.animals[t].update(l.deltaTime)
            },
            dispose: function() {
                d(this.mesh, [new o])
            }
        },
        i.prototype = {
            enterNode: function(t) {
                this.nodes.push(t)
            },
            exitNode: function(t) {
                t.children.length = 0,
                t.universe_parent = t.parent,
                t.parent = null
            },
            getResult: function() {
                return this.nodes
            }
        },
        o.prototype = {
            enterNode: function(t) {
                "Mesh" === t.type && (t.geometry.dispose(),
                t.material.dispose(),
                m("dispose"))
            },
            exitNode: function() {},
            getResult: function() {}
        },
        e.exports = r
    }
    , {
        "../../grgrdvrt/Log": 121,
        "../../grgrdvrt/Signal": 123,
        "../effects/Fog": 94,
        "../effects/WaterMaterial": 98,
        "../utils/progressiveLoader": 110,
        "../utils/traverseTree": 113,
        "./../../edankwan/core/stageReference.js": 115,
        "./../../libs/q.js": 131,
        "./../../libs/threejs/three.min.js": 139,
        "./../animals/animalController": 86,
        "./../animals/animals": 87
    }],
    104: [function(t, e, n) {
        function r(t, e) {
            this.universesLoader = t,
            this.setup = e,
            this.currentUniverse = void 0,
            this.nextUniverse = void 0
        }
        var i = (t("../../grgrdvrt/Signal"),
        t("./../../libs/q.js"))
          , o = t("../../grgrdvrt/Log")();
        r.prototype = {
            displayFirstsUniverses: function(t, e) {
                function n() {
                    0 === --a && r.resolve()
                }
                o("displayFirstsUniverses", t, e),
                o("mesh0", t.mesh),
                o("mesh1", e.mesh),
                this.currentUniverse = t,
                this.nextUniverse = e;
                var r = i.defer()
                  , a = 2;
                return this.currentUniverse.built.addOnce(n, this),
                this.addUniverseToDisplayList(this.currentUniverse),
                this.nextUniverse.built.addOnce(n, this),
                this.addUniverseToDisplayList(this.nextUniverse),
                r.promise
            },
            displayNextUniverse: function(t) {
                o("displayNextUniverse", t),
                void 0 !== this.currentUniverse && (this.setup.scene.remove(this.currentUniverse.mesh),
                this.universesLoader.removeUniverse(this.currentUniverse)),
                this.currentUniverse = this.nextUniverse;
                var e = this.universesLoader.getUniverse(t + 1);
                this.nextUniverse = e,
                this.addUniverseToDisplayList(this.nextUniverse),
                this.nextUniverse.setEffects(this.effectsValues)
            },
            addUniverseToDisplayList: function(t) {
                t.build(),
                this.setup.scene.add(t.mesh)
            },
            setEffectsParams: function(t) {
                this.effectsValues = t,
                this.currentUniverse && this.currentUniverse.setEffects(this.effectsValues),
                this.nextUniverse && this.nextUniverse.setEffects(this.effectsValues)
            },
            update: function(t) {
                if (this.currentUniverse) {
                    var e = this.currentUniverse.data
                      , n = (t - e.begin) / (e.end - e.begin);
                    this.currentUniverse.setTime(n),
                    this.currentUniverse.render(),
                    this.nextUniverse && this.nextUniverse.render()
                }
            },
            reset: function() {
                this.currentUniverse && (this.setup.scene.remove(this.currentUniverse.mesh),
                this.universesLoader.removeUniverse(this.currentUniverse)),
                this.nextUniverse && (this.setup.scene.remove(this.nextUniverse.mesh),
                this.universesLoader.removeUniverse(this.nextUniverse)),
                this.currentUniverse = void 0,
                this.nextUniverse = void 0
            }
        },
        e.exports = r
    }
    , {
        "../../grgrdvrt/Log": 121,
        "../../grgrdvrt/Signal": 123,
        "./../../libs/q.js": 131
    }],
    105: [function(t, e, n) {
        function r(t, e, n) {
            this.universesData = t,
            this.config = e,
            this.setup = n,
            this.universes = [],
            this.initialLoadingProgress = new i,
            this.progress = new i,
            this.initialLoadingComplete = new i,
            this.universeLoadingComplete = new i,
            this.onUniversesProgressBound = this.onUniverseProgress.bind(this),
            this.onUniversesLoadedBound = this.onUniverseLoaded.bind(this)
        }
        var i = t("../../grgrdvrt/Signal")
          , o = t("../../grgrdvrt/Log")();
        r.prototype = {
            startInitialLoading: function(t) {
                o("startInitialLoading"),
                this.universes.length = this.universesData.length,
                this.initialUniversesToLoad = t,
                this.loadedUniversesCount = 0,
                this.initialUniversesToLoad > 0 && this.loadUniverse(0)
            },
            loadUniverse: function(t) {
                o("loadUniverse", t);
                var e = this.universesData[t]
                  , n = new e.constructor(this.config,this.setup,e);
                o(n),
                n.preinit().then(this.onUniversesLoadedBound).progress(this.onUniversesProgressBound)
            },
            onUniverseLoaded: function(t) {
                o("onUniverseLoaded", t),
                this.loadedUniversesCount++,
                this.universes[this.loadedUniversesCount - 1] = t,
                this.universeLoadingComplete.dispatch(),
                this.loadedUniversesCount === this.initialUniversesToLoad && this.initialLoadingComplete.dispatch(),
                this.loadedUniversesCount < this.universesData.length && this.loadUniverse(this.loadedUniversesCount)
            },
            onUniverseProgress: function(t) {
                o("onUniverseProgress", this.loadedUniversesCount, t);
                var e = t.progress / t.total
                  , n = this.loadedUniversesCount + e
                  , r = {
                    src: "UniversesLoader",
                    progress: n
                };
                this.loadedUniversesCount < this.initialUniversesToLoad && (r.total = this.initialUniversesToLoad,
                this.initialLoadingProgress.dispatch(r)),
                r.total = this.universes.length,
                this.progress.dispatch(r)
            },
            getUniverse: function(t) {
                return this.universes[t]
            },
            isUniverseLoaded: function(t) {
                return void 0 !== this.universes[t]
            },
            removeUniverse: function(t) {
                t.dispose();
                var e = this.universes.indexOf(t);
                this.universes[e] = void 0
            },
            reset: function() {
                this.universes.length = 0,
                this.universes.forEach(function(t) {
                    void 0 !== t && t.dispose()
                })
            }
        },
        e.exports = r
    }
    , {
        "../../grgrdvrt/Log": 121,
        "../../grgrdvrt/Signal": 123
    }],
    106: [function(t, e, n) {
        function r(t) {
            var e = s[t]
              , r = n.universes;
            a.forEach(function(t) {
                -1 !== e.indexOf(t.id) && r.push(t)
            }),
            r.reduce(function(t, e) {
                return e.begin = t,
                e.end
            }, 0);
            var i = n.totalTime
              , o = r[r.length - 1]
              , l = o.begin
              , h = o.end
              , c = (h - l) * i
              , u = 2.9 * c;
            o.duration = u
        }
        var i = t("./../../libs/threejs/three.min.js")
          , o = (t("./../../app/controllers/dataController.js"),
        t("./Universe"))
          , a = (new i.Vector3(0,0,0),
        [{
            id: "01_Chanteloup",
            constructor: o,
            end: .094,
            effectsParams: {
                sunColor: 16773774,
                fogColor: 15503735,
                globalColor: 2628159,
                fogParams: new i.Vector4(0,.33,.018,.013)
            }
        }, {
            id: "02_Vineyard",
            constructor: o,
            end: .241,
            effectsParams: {
                sunColor: 16773774,
                fogColor: 15503735,
                globalColor: 2628159,
                fogParams: new i.Vector4(0,.7,.011,.003)
            },
            animals: ["deer"]
        }, {
            id: "03_Paris",
            constructor: o,
            end: .388,
            effectsParams: {
                sunColor: 9895922,
                fogColor: 39900,
                globalColor: 528672,
                fogParams: new i.Vector4(0,.31,.02,.011)
            }
        }, {
            id: "04_Boulevard",
            constructor: o,
            end: .49,
            effectsParams: {
                sunColor: 9895922,
                fogColor: 39900,
                globalColor: 528672,
                fogParams: new i.Vector4(0,.89,.035,.0066)
            }
        }, {
            id: "05_Clouds",
            constructor: o,
            end: .68,
            effectsParams: {
                sunColor: 16768886,
                fogColor: 15571318,
                globalColor: 2038585,
                fogParams: new i.Vector4(0,.7,.003,.003)
            }
        }, {
            id: "06_Mountain",
            constructor: o,
            end: .787,
            effectsParams: {
                sunColor: 16768886,
                fogColor: 15571318,
                globalColor: 2038585,
                fogParams: new i.Vector4(0,.32,.011,.011)
            },
            animals: ["tiger"]
        }, {
            id: "07_Sea",
            constructor: o,
            end: .93,
            effectsParams: {
                sunColor: 16764534,
                fogColor: 5766591,
                globalColor: 1117763,
                fogParams: new i.Vector4(-9,.17,.079,.009)
            }
        }, {
            id: "08_Shanghai",
            constructor: o,
            end: .99,
            effectsParams: {
                sunColor: 16764534,
                fogColor: 5766591,
                globalColor: 1117763,
                fogParams: new i.Vector4(17,.56,.044,.029)
            }
        }, {
            id: "08alt_City",
            constructor: o,
            end: .99,
            effectsParams: {
                sunColor: 16764534,
                fogColor: 5766591,
                globalColor: 1117763,
                fogParams: new i.Vector4(17,.56,.044,.029)
            }
        }, {
            id: "09_Club",
            constructor: o,
            end: 1,
            effectsParams: {
                sunColor: 12446719,
                fogColor: 39900,
                globalColor: 1187926,
                fogParams: new i.Vector4(17,.56,.031,.011)
            },
            animals: ["man"]
        }])
          , s = {
            altCity: ["01_Chanteloup", "02_Vineyard", "03_Paris", "04_Boulevard", "05_Clouds", "06_Mountain", "07_Sea", "08alt_City", "09_Club"],
            shanghai: ["01_Chanteloup", "02_Vineyard", "03_Paris", "04_Boulevard", "05_Clouds", "06_Mountain", "07_Sea", "08_Shanghai", "09_Club"]
        }
          , n = {
            init: r,
            totalTime: 167010,
            universes: []
        };
        e.exports = n
    }
    , {
        "./../../app/controllers/dataController.js": 52,
        "./../../libs/threejs/three.min.js": 139,
        "./Universe": 103
    }],
    107: [function(t, e, n) {
        function r(t, e, n) {
            this.compressionType = e,
            this.extensionName = t,
            this.loaderClass = n
        }
        function i() {
            try {
                var t = document.createElement("canvas")
                  , e = t.getContext("webgl") || t.getContext("experimental-webgl");
                return a.filter(function(t) {
                    return t.checkAvailability(e)
                })
            } catch (n) {
                return []
            }
        }
        var o = t("./../../libs/threejs/three.min.js");
        t("../../libs/threejs/DDSLoader"),
        t("../../libs/threejs/PVRLoader"),
        t("../../libs/threejs/ETC1Loader"),
        r.prototype.checkAvailability = function(t) {
            var e = ["", "WEBKIT_", "MOZ_"]
              , n = null ;
            for (var r in e)
                if (n = t.getExtension(e[r] + this.extensionName),
                Boolean(n))
                    return !0;
            return !1
        }
        ;
        var a = [new r("WEBGL_compressed_texture_s3tc","dxt",o.DDSLoader), new r("WEBGL_compressed_texture_pvrtc","pvrtc",o.PVRLoader), new r("WEBGL_compressed_texture_etc1","etc1",o.ETC1Loader)]
          , s = i();
        e.exports = function(t) {
            if (s.length) {
                var e, n;
                t: for (var r = 0, i = s.length; i > r; r++) {
                    e = s[r];
                    for (var o = 0, a = t.length; a > o; o++)
                        if (n = t[o],
                        n.compressionFormat === e.compressionType)
                            break t
                }
                return {
                    loaderClass: e.loaderClass,
                    format: n
                }
            }
        }
    }
    , {
        "../../libs/threejs/DDSLoader": 132,
        "../../libs/threejs/ETC1Loader": 134,
        "../../libs/threejs/PVRLoader": 137,
        "./../../libs/threejs/three.min.js": 139
    }],
    108: [function(t, e, n) {
        function r() {
            this.result = [],
            this.tabs = []
        }
        r.prototype = {
            enterNode: function(t) {
                this.result.push(this.tabs.join("") + t.type + (t.name ? " : " + t.name + " " : "")),
                this.tabs.push("	")
            },
            exitNode: function(t) {
                this.tabs.pop()
            },
            getResult: function() {
                return this.result.join("\n")
            }
        },
        e.exports = r
    }
    , {}],
    109: [function(t, e, n) {
        function r(t, e, n) {
            this.compressionFormat = t,
            this.directory = e,
            this.fileExt = n
        }
        var i = (t("./../../libs/threejs/three.min.js"),
        t("./../../libs/q.js"))
          , o = t("./CompressedTextureLoaderFactory")
          , a = t("../../libs/threejs/NonCompressedTextureLoader");
        r.prototype.getFilePath = function(t) {
            var e = t.split("/")
              , n = e.pop()
              , r = n.split(".")[0];
            return e.push(this.directory, r + "." + this.fileExt),
            e.join("/")
        }
        ;
        var s = [new r("pvrtc","pvr","pvr"), new r("etc1","etc1","pvr"), new r("dxt","dds","dds")]
          , l = new r("png","png","png");
        e.exports = function(t) {
            function e() {
                var t = new i.defer
                  , e = new r(void 0);
                return e.load(h, function(e) {
                    t.resolve(e)
                }, function(e) {
                    t.notify({
                        src: "ctLoader",
                        progress: e.loaded,
                        total: e.total
                    })
                }),
                t.promise
            }
            var n, r, h, c = o(s);
            return c ? (n = c.format,
            r = c.loaderClass,
            h = n.getFilePath(t)) : (n = "",
            r = a,
            h = l.getFilePath(t)),
            {
                load: e
            }
        }
    }
    , {
        "../../libs/threejs/NonCompressedTextureLoader": 135,
        "./../../libs/q.js": 131,
        "./../../libs/threejs/three.min.js": 139,
        "./CompressedTextureLoaderFactory": 107
    }],
    110: [function(t, e, n) {
        function r(t) {
            if ("" === t)
                return f(new d.Texture);
            var e = /(?:\.([^.]+))?$/
              , n = e.exec(t)[1] || "";
            n = n.toLowerCase();
            var r;
            return "tex" === n ? r = v(t) : (b("use", n),
            r = y(t)),
            r
        }
        function i(t, e) {
            b("buildMaterials");
            var n = t.map(function(t) {
                var n, r = {};
                return void 0 !== t.emissiveMapId && (n = e[t.emissiveMapId]),
                n && (r.map = n,
                r.map.needsUpdate = !0),
                new x(r)
            });
            return f(n)
        }
        function o(t, e) {
            b("buildGeometries");
            var n = [];
            return t.forEach(function(t) {
                var r = new d.BufferGeometry
                  , i = t.buffers
                  , o = [];
                for (var l in i) {
                    var h = i[l];
                    o.push(s(h, e, r).then(a.bind(null , r, h)))
                }
                n.push(f.all(o).then(function() {
                    return f(r)
                }))
            }),
            f.all(n)
        }
        function a(t, e, n) {
            var r, i = {
                ids: "index",
                VERTEX: "position",
                TEXCOORD: "uv",
                NORMAL: "normal"
            };
            r = i[e.name] || e.name,
            "index" === r ? t.setIndex(new d.BufferAttribute(n,e.itemSize)) : t.addAttribute(r, new d.BufferAttribute(n,e.itemSize))
        }
        function s(t, e, n) {
            b("readBuffer");
            var r = f.defer()
              , i = new FileReader;
            return i.addEventListener("loadend", function() {
                r.resolve(new window[t.constructorName](i.result))
            }),
            i.readAsArrayBuffer(e[e.slice ? "slice" : "webkitSlice"](t.offset, t.offset + t.length)),
            r.promise
        }
        function l(t, e, n) {
            b("buildScene");
            var r = [];
            t.forEach(function(t) {
                var i;
                switch (t.type) {
                case "group":
                    i = c(t, r);
                    break;
                case "light":
                    i = u(t);
                    break;
                case "camera":
                    console.warn("camera not supported");
                    break;
                case "mesh":
                    i = p(t, e, n);
                    break;
                case void 0:
                    i = c(t, r);
                    break;
                default:
                    throw new Error("unknown type : " + t.type)
                }
                i && (h(t, i),
                r.push(i))
            });
            var i = r[r.length - 1];
            return i.matrix.scale(.1, .1, .1),
            f(i)
        }
        function h(t, e) {
            if (b("initNode"),
            t.position && e.position.copy(t.position),
            t.rotation) {
                var n = t.rotation;
                e.rotation.copy(new d.Euler(n.x,n.y,n.z))
            }
            return t.scale && e.scale.copy(t.scale),
            e.name = t.name,
            e
        }
        function c(t, e) {
            if (void 0 === t.children)
                return new d.Group;
            for (var n = new d.Group, r = 0, i = t.children.length; i > r; r++) {
                var o = e[t.children[r]];
                o && !o.skip && (o.parent && (o = o.clone()),
                n.add(o))
            }
            return n
        }
        function u(t) {
            b("initLight", t)
        }
        function p(t, e, n) {
            var r = e[t.geometryId];
            if (!r || !r.attributes.position)
                return {
                    skip: !0
                };
            var i = n[t.materialId];
            return new d.Mesh(r,i)
        }
        var d = t("./../../libs/threejs/three.min.js")
          , f = t("./../../libs/q.js")
          , m = t("../../grgrdvrt/services/groupLoader")
          , g = t("../../grgrdvrt/services/dataLoader")
          , v = t("./ctLoader")
          , y = t("./textureLoader")
          , _ = t("./promiseAllProgress")
          , x = t("../effects/BasicFogMaterial")
          , b = t("../../grgrdvrt/Log")();
        e.exports = function(t) {
            function e() {
                var e = new f.defer
                  , a = _([g(t + ".json").load(), g(t + ".bin", {
                    responseType: "blob"
                }).load()]).progress(function(t) {
                    e.notify({
                        progress: t.progress / t.total,
                        total: 2
                    })
                });
                return a.spread(function(t, a) {
                    var s = JSON.parse(t);
                    b("descriptor", s);
                    var h = [o(s.geometries, a)];
                    return void 0 !== s.images && h.push(m(s.images.map(function(t) {
                        return r(n + t)
                    })).load().then(function(t) {
                        return i(s.materials, t)
                    })),
                    _(h).spread(function(t, e) {
                        return b("geometries & mat complete"),
                        l(s.scenes, t, e)
                    }).progress(function(t) {
                        e.notify({
                            progress: 1 + t.progress / t.total,
                            total: 2
                        })
                    })
                }).then(function(t) {
                    e.resolve(t)
                }),
                e.promise
            }
            var n = t.split("/");
            return n.length--,
            n = n.join("/") + "/",
            {
                load: e
            }
        }
    }
    , {
        "../../grgrdvrt/Log": 121,
        "../../grgrdvrt/services/dataLoader": 125,
        "../../grgrdvrt/services/groupLoader": 126,
        "../effects/BasicFogMaterial": 92,
        "./../../libs/q.js": 131,
        "./../../libs/threejs/three.min.js": 139,
        "./ctLoader": 109,
        "./promiseAllProgress": 111,
        "./textureLoader": 112
    }],
    111: [function(t, e, n) {
        function r(t) {
            var e = 0
              , n = i.defer();
            return t.forEach(function(r) {
                r.then(function() {
                    e++,
                    n.notify({
                        progress: e,
                        total: t.length
                    })
                })
            }),
            i.all(t).then(function(t) {
                n.resolve(t)
            }),
            n.promise
        }
        var i = t("./../../libs/q.js");
        e.exports = r
    }
    , {
        "./../../libs/q.js": 131
    }],
    112: [function(t, e, n) {
        var r = t("./../../libs/threejs/three.min.js")
          , i = t("./../../libs/q.js");
        e.exports = function(t) {
            function e() {
                var e = new i.defer
                  , n = new r.TextureLoader;
                return n.load(t, function(t) {
                    e.resolve(t)
                }, function(t) {
                    e.notify({
                        src: "textureLoader",
                        progress: t.loaded,
                        total: t.total
                    })
                }),
                e.promise
            }
            return {
                load: e
            }
        }
    }
    , {
        "./../../libs/q.js": 131,
        "./../../libs/threejs/three.min.js": 139
    }],
    113: [function(t, e, n) {
        function r(t, e) {
            var n = !0
              , i = e.filter(function(e) {
                return n ? (n = e.enterNode(t) !== !1,
                !0) : !1
            });
            n && t.children && t.children.forEach(function(t) {
                r(t, e)
            }),
            i.forEach(function(e) {
                e.exitNode(t)
            })
        }
        function i(t, e) {
            r(t, e)
        }
        e.exports = i
    }
    , {}],
    114: [function(t, e, n) {
        function r(t) {
            g(n, B, t),
            x = n.renderer = n.renderer || new f.WebGLRenderer(n.rendererConfig),
            w = n.camera = n.camera || new f.PerspectiveCamera(n.fov,1,n.near,n.far),
            b = n.scene = n.scene || new f.Scene,
            M = n.lookAtTarget = n.lookAtTarget || new f.Object3D,
            C = n.loader = n.loader || new f.JSONLoader,
            b.add(M),
            D = new f.Raycaster,
            F = new f.Vector2,
            n.useComposer,
            E = n.projectScreenMatrix = new f.Matrix4,
            S = n.container = n.renderer.domElement,
            S.className = n.className
        }
        function i() {
            return n.fixedScaleFactor = 2 * Math.tan(n.camera.fov / 360 * Math.PI) / (n.useContainerHeightAsReference ? n.height : n.idealHeight)
        }
        function o(t) {
            var e = n.useControl && n.controls.isActive
              , r = n.useView && n.view.isActive;
            if (e && (L.dispatch(t),
            T.update(t)),
            E.multiplyMatrices(w.projectionMatrix, w.matrixWorldInverse),
            P.dispatch(t),
            U.length) {
                a();
                var i = D.intersectObjects(U)
                  , o = n.interactiveObject;
                if (i.length) {
                    var s = i[0].object;
                    o != s && (o && o.onOut && o.onOut(s),
                    n.interactiveObject = s,
                    s && s.onOver && s.onOver(o))
                } else
                    o && o.onOut && o.onOut(),
                    n.interactiveObject = d
            }
            r || (n.useComposer ? n.composer && n.composer.render(.1) : x.render(b, w)),
            k.dispatch(t),
            I = !1
        }
        function a(t) {
            if (!I || t) {
                var e = new f.Vector3(F.x,F.y,1).unproject(w);
                D.set(w.position, e.sub(w.position).normalize()),
                I = !0
            }
        }
        function s(t, e) {
            if (n.isActive) {
                R.dispatch(t, e);
                var r = (n.useControl && n.controls.isActive,
                n.useView && n.view.isActive);
                if (n.width = t,
                n.height = e,
                n.halfWidth = t / 2,
                n.halfHeight = e / 2,
                r)
                    A.resize(t, e);
                else {
                    if (w instanceof f.OrthographicCamera)
                        w.left = -t / 2,
                        w.right = t / 2,
                        w.top = e / 2,
                        w.bottom = -e / 2;
                    else {
                        w.aspect = t / e;
                        var o = n.idealWidth = screen.width
                          , a = n.idealHeight = screen.height;
                        i(),
                        n.useFixedScale && w.setViewOffset(o, a, o - t >> 1, a - e >> 1, t, e)
                    }
                    w.updateProjectionMatrix(),
                    n.useComposer && n.composer && n.composer.setSize(t, e),
                    n.renderer.setSize(t, e)
                }
                O.dispatch(t, e)
            }
        }
        function l(t) {
            t ? (T = n.controls = t,
            n.useControl = !0) : (T = n.controls = null ,
            n.useControl = !1)
        }
        function h(t) {
            t ? (A = n.view = t,
            n.useView = !0) : (A = n.view = null ,
            n.useView = !1)
        }
        function c(t, e) {}
        function u(t) {
            _(t) || (t = [t]),
            v(U, t)
        }
        function p(t) {
            _(t) || (t = [t]),
            U = y(U, t)
        }
        var d, f = t("./../../libs/threejs/three.min.js"), m = t("min-signal"), g = (t("quick-loader"),
        t("mout/object/deepMixIn")), v = t("mout/array/combine"), y = t("mout/array/difference"), _ = t("mout/lang/isArray"), x = n.renderer = d, b = n.scene = d, w = n.camera = d, S = n.container = d, T = n.controls = d, M = n.lookAtTarget = d, C = n.loader = d, A = n.view = d, E = n.projectScreenMatrix = d, L = n.beforeControlUpdated = new m, P = n.beforeRendered = new m, k = n.afterRendered = new m, R = n.beforeResized = new m, O = n.afterResized = new m, D = d, F = d, U = [], I = !1;
        n.interactiveObject = d;
        var B = {
            rendererConfig: {
                alpha: !1,
                premultipliedAlpha: !1,
                antialias: !1,
                preserveDrawingBuffer: !0
            },
            composerConfig: {
                minFilter: f.LinearFilter,
                magFilter: f.LinearFilter,
                format: f.RGBFormat,
                stencilBuffer: !0
            },
            fov: 60,
            near: 1,
            far: 3e3,
            useControl: !1,
            useView: !1,
            useComposer: !1,
            useWindowSize: !0,
            useFixedScale: !1,
            fixedScaleFactor: 1,
            width: 1,
            height: 1,
            halfWidth: 1,
            halfHeight: 1,
            idealWidth: 1,
            idealHeight: 1,
            useContainerHeightAsReference: !0,
            isActive: !0,
            isDown: !1,
            className: "stage3d"
        };
        n.init = r,
        n.updateFixedScaleFactor = i,
        n.render = o,
        n.resize = s,
        n.setControl = l,
        n.setView = h,
        n.updateRaycaster = a,
        n.loadJSON = c,
        n.addInteractiveObjects = u,
        n.removeInteractiveObjects = p
    }
    , {
        "./../../libs/threejs/three.min.js": 139,
        "min-signal": 11,
        "mout/array/combine": 12,
        "mout/array/difference": 14,
        "mout/lang/isArray": 24,
        "mout/object/deepMixIn": 31,
        "quick-loader": 38
    }],
    115: [function(t, e, n) {
        function r() {
            "addEventListener"in p ? (p.addEventListener("resize", v, !1),
            p.addEventListener("orientationchange", function() {
                f.dispatch(n.stageWidth, n.stageHeight)
            }, !1),
            p.addEventListener("blur", y, !1)) : (p.attachEvent("onresize", v),
            p.attachEvent("onblur", y)),
            m.add(o),
            f.add(i),
            i()
        }
        function i() {
            d.documentElement && "outerHeight"in d.documentElement ? (n.windowWidth = d.documentElement.outerWidth,
            n.windowHeight = d.documentElement.outerHeight) : "outterWidth"in p ? (n.windowWidth = p.outterWidth,
            n.windowHeight = p.outterHeight) : d.documentElement ? (n.windowWidth = d.documentElement.clientWidth,
            n.windowHeight = d.documentElement.clientHeight) : (n.windowWidth = d.body.clientWidth,
            n.windowHeight = d.body.clientHeight),
            n.stageWidth = Math.max(n.windowWidth, n.minWidth),
            n.stageHeight = Math.max(n.windowHeight, n.minHeight)
        }
        function o() {
            var t = +new Date
              , e = t - n.currentTime;
            n.currentTime = t,
            0 !== e && (n.deltaTime = e)
        }
        function a() {
            n.isRendering && (c(a),
            m.dispatch(n.deltaTime || 0))
        }
        function s() {
            n.isRendering = !0,
            a()
        }
        function l() {
            c.caf(a),
            n.isRendering = !1
        }
        function h() {
            m.dispatch(n.deltaTime || 0)
        }
        var c = t("raf")
          , u = t("min-signal")
          , p = window
          , d = document;
        n.windowWidth = 0,
        n.windowHeight = 0,
        n.minWidth = 0,
        n.minHeight = 0,
        n.stageWidth = 0,
        n.stageHeight = 0,
        n.currentTime = +new Date,
        n.deltaTime = 0,
        n.isRendering = !1;
        var f = n.onResized = new u
          , m = n.onRendered = new u
          , g = n.onBlurred = new u
          , v = function() {
            f.dispatch(n.stageWidth, n.stageHeight)
        }
          , y = function() {
            g.dispatch()
        };
        n.init = r,
        n.onResized = f,
        n.onRendered = m,
        n.startRender = s,
        n.stopRender = l,
        n.renderOnce = h
    }
    , {
        "min-signal": 11,
        raf: 48
    }],
    116: [function(t, e, n) {
        function r(t) {
            return t = t.replace(a, i)
        }
        function i(t, e) {
            return o.ShaderChunk[e] + "\n"
        }
        var o = t("./../../libs/threejs/three.min.js")
          , a = /\/\/\s?chunk\(\s?(\w+)\s?\);/g;
        e.exports = r
    }
    , {
        "./../../libs/threejs/three.min.js": 139
    }],
    117: [function(t, e, n) {
        function r(t) {
            t.poolReset || (t.poolReset = l(s, t),
            t.poolGet = l(i, t),
            t.poolRelease = l(o, t),
            t.poolReleaseAll = l(a, t),
            t.poolReset())
        }
        function i() {
            var t;
            if (this.inactivePool.length)
                t = this.inactivePool.shift(),
                this.poolWasCreated = !1;
            else {
                if ("function" == typeof this) {
                    var e = arguments;
                    t = new this(e[0],e[1],e[2],e[3],e[4])
                } else
                    t = this.create(this.inactivePool.length);
                this.poolWasCreated = !0
            }
            return this.activePool.push(t),
            t
        }
        function o(t) {
            for (var e = this.activePool.length; e--; )
                if (this.activePool[e] === t)
                    return this.activePool.splice(e, 1),
                    this.inactivePool.push(t),
                    t
        }
        function a() {
            for (var t = this.activePool.length; t--; )
                this.inactivePool.push(this.activePool.splice(t, 1)[0])
        }
        function s() {
            this.activePool = [],
            this.inactivePool = []
        }
        var l = t("mout/function/bind");
        n.create = r
    }
    , {
        "mout/function/bind": 20
    }],
    118: [function(t, e, n) {
        function r(t) {
            l = l || document.createElement("div"),
            l.innerHTML = t;
            for (var e, n = l.childNodes, r = [], i = n.length; i--; )
                e = n[i],
                1 == e.nodeType && (r.unshift(e),
                l.removeChild(e));
            return l.innerHTML = "",
            r
        }
        function i(t) {
            return r(t)[0]
        }
        function o(t) {
            return t.parentNode && t.parentNode.removeChild(t),
            t
        }
        function a(t) {
            return r(t.outerHTML)[0]
        }
        function s(t, e, n) {
            for (var r = [], i = 0, o = t.length; o > i; i++)
                if (t[i].classList.contains(e)) {
                    if (n)
                        return t[i];
                    r.push(t[i])
                }
            return n ? null : r
        }
        var l;
        n.createElements = r,
        n.createElement = i,
        n.removeSelf = o,
        n.clone = a,
        n.filterByClass = s
    }
    , {}],
    119: [function(t, e, n) {
        var r = {
            Linear: {
                None: function(t) {
                    return t
                }
            },
            Quad: {
                In: function(t) {
                    return t * t
                },
                Out: function(t) {
                    return t * (2 - t)
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? .5 * t * t : -.5 * (--t * (t - 2) - 1)
                }
            },
            Cubic: {
                In: function(t) {
                    return t * t * t
                },
                Out: function(t) {
                    return --t * t * t + 1
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? .5 * t * t * t : .5 * ((t -= 2) * t * t + 2)
                }
            },
            Quart: {
                In: function(t) {
                    return t * t * t * t
                },
                Out: function(t) {
                    return 1 - --t * t * t * t
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? .5 * t * t * t * t : -.5 * ((t -= 2) * t * t * t - 2)
                }
            },
            Quint: {
                In: function(t) {
                    return t * t * t * t * t
                },
                Out: function(t) {
                    return --t * t * t * t * t + 1
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? .5 * t * t * t * t * t : .5 * ((t -= 2) * t * t * t * t + 2)
                }
            },
            Sine: {
                In: function(t) {
                    return 1 - Math.cos(t * Math.PI / 2)
                },
                Out: function(t) {
                    return Math.sin(t * Math.PI / 2)
                },
                InOut: function(t) {
                    return .5 * (1 - Math.cos(Math.PI * t))
                }
            },
            Expo: {
                In: function(t) {
                    return 0 === t ? 0 : Math.pow(1024, t - 1)
                },
                Out: function(t) {
                    return 1 === t ? 1 : 1 - Math.pow(2, -10 * t)
                },
                InOut: function(t) {
                    return 0 === t ? 0 : 1 === t ? 1 : (t *= 2) < 1 ? .5 * Math.pow(1024, t - 1) : .5 * (-Math.pow(2, -10 * (t - 1)) + 2)
                }
            },
            Circ: {
                In: function(t) {
                    return 1 - Math.sqrt(1 - t * t)
                },
                Out: function(t) {
                    return Math.sqrt(1 - --t * t)
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1)
                }
            },
            Elastic: {
                In: function(t) {
                    var e, n = .1, r = .4;
                    return 0 === t ? 0 : 1 === t ? 1 : (!n || 1 > n ? (n = 1,
                    e = r / 4) : e = r * Math.asin(1 / n) / (2 * Math.PI),
                    -(n * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (t - e) * Math.PI / r)))
                },
                Out: function(t) {
                    var e, n = .1, r = .4;
                    return 0 === t ? 0 : 1 === t ? 1 : (!n || 1 > n ? (n = 1,
                    e = r / 4) : e = r * Math.asin(1 / n) / (2 * Math.PI),
                    n * Math.pow(2, -10 * t) * Math.sin(2 * (t - e) * Math.PI / r) + 1)
                },
                InOut: function(t) {
                    var e, n = .1, r = .4;
                    return 0 === t ? 0 : 1 === t ? 1 : (!n || 1 > n ? (n = 1,
                    e = r / 4) : e = r * Math.asin(1 / n) / (2 * Math.PI),
                    (t *= 2) < 1 ? -.5 * n * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (t - e) * Math.PI / r) : n * Math.pow(2, -10 * (t -= 1)) * Math.sin(2 * (t - e) * Math.PI / r) * .5 + 1)
                }
            },
            Back: {
                In: function(t) {
                    var e = 1.70158;
                    return t * t * ((e + 1) * t - e)
                },
                Out: function(t) {
                    var e = 1.70158;
                    return --t * t * ((e + 1) * t + e) + 1
                },
                InOut: function(t) {
                    var e = 2.5949095;
                    return (t *= 2) < 1 ? .5 * t * t * ((e + 1) * t - e) : .5 * ((t -= 2) * t * ((e + 1) * t + e) + 2)
                }
            },
            Bounce: {
                In: function(t) {
                    return 1 - r.Bounce.Out(1 - t)
                },
                Out: function(t) {
                    return 1 / 2.75 > t ? 7.5625 * t * t : 2 / 2.75 > t ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : 2.5 / 2.75 > t ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375
                },
                InOut: function(t) {
                    return .5 > t ? .5 * r.Bounce.In(2 * t) : .5 * r.Bounce.Out(2 * t - 1) + .5
                }
            }
        };
        n.basic = r,
        n.linear = r.Linear;
        var i, o;
        for (i in r)
            "Linear" !== i && (o = r[i],
            n["easeIn" + i] = o.In,
            n["easeOut" + i] = o.Out,
            n["easeInOut" + i] = o.InOut)
    }
    , {}],
    120: [function(t, e, n) {
        function r(t, e, n) {
            return a(s(t, e, n), e, n)
        }
        function i(t, e, n, i) {
            return l[i](r(t, e, n))
        }
        function o(t, e) {
            return Math.sqrt(t * t + e * e)
        }
        var a = t("mout/math/norm")
          , s = t("mout/math/clamp")
          , l = t("./easeUtils");
        n.clampNorm = r,
        n.easeClampNorm = i,
        n.distance = o
    }
    , {
        "./easeUtils": 119,
        "mout/math/clamp": 28,
        "mout/math/norm": 29
    }],
    121: [function(t, e, n) {
        function r() {
            var t, e = !1, n = function() {
                if (e) {
                    var n = Array.prototype.slice.call(arguments);
                    void 0 !== t && n.unshift(t),
                    void 0 !== console.log.apply ? console.log.apply(console, n) : console.log(n.join(", "))
                }
            };
            return n.activate = function(n) {
                void 0 !== n && (t = n),
                e = !0
            }
            ,
            n
        }
        e.exports = r
    }
    , {}],
    122: [function(t, e, n) {
        MathUtils = {
            lerp: function(t, e, n) {
                return t + n * (e - t)
            },
            clamp: function(t, e, n) {
                return t > n ? n : e > t ? e : t
            },
            blendColor: function(t, e, n) {
                var r = t >> 16
                  , i = t >> 8 & 255
                  , o = 255 & t
                  , a = e >> 16
                  , s = e >> 8 & 255
                  , l = 255 & e
                  , h = r + n * (a - r)
                  , c = i + n * (s - i)
                  , u = o + n * (l - o);
                return h << 16 | c << 8 | u
            }
        },
        e.exports = MathUtils
    }
    , {}],
    123: [function(t, e, n) {
        function r() {
            this.listeners = []
        }
        Function.prototype.bind || (Function.prototype.bind = function(t) {
            if (!method)
                throw new Error("no method specified");
            var e = Array.prototype.slice.call(arguments, 2);
            return function() {
                var n = Array.prototype.slice.call(arguments);
                method.apply(t, n.concat(e))
            }
        }
        ),
        r.prototype = {
            add: function(t, e) {
                if (!t)
                    throw new Error("no callback specified");
                for (var n, r = Array.prototype.slice.call(arguments, 2), i = this.listeners.length, o = 0; i > o; o++)
                    if (n = this.listeners[o],
                    n.callback == t && n.scope == e)
                        return n.args = r,
                        n;
                return n = {
                    callback: t,
                    scope: e,
                    args: r
                },
                this.listeners.push(n),
                n
            },
            addOnce: function(t, e) {
                var n = this.add.apply(this, arguments);
                return n.once = !0,
                n
            },
            remove: function(t, e) {
                for (var n = this.listeners.length, r = 0; n > r; r++) {
                    var i = this.listeners[r];
                    if (i.callback == t && i.scope == e)
                        return void this.listeners.splice(r, 1)
                }
            },
            dispatch: function() {
                for (var t = Array.prototype.slice.call(arguments), e = this.listeners.length, n = 0; e > n; n++) {
                    var r = this.listeners[n];
                    r.callback.apply(r.scope, t.concat(r.args)),
                    r.once && (this.listeners.splice(n, 1),
                    e--,
                    n--)
                }
            },
            dispose: function() {
                this.listeners = []
            }
        },
        e.exports = r
    }
    , {}],
    124: [function(t, e, n) {
        window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || function(t) {
            return setTimeout(t, 50 / 3)
        }
        ,
        window.cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || function(t) {
            clearTimeout(t)
        }
        ,
        Function.prototype.bind || (Function.prototype.bind = function(t) {
            if (!method)
                throw new Error("no method specified");
            var e = Array.prototype.slice.call(arguments, 2);
            return function() {
                var n = Array.prototype.slice.call(arguments);
                method.apply(t, n.concat(e))
            }
        }
        ),
        (void 0 === window.console || void 0 === console.log) && (window.console = {
            log: function() {}
        })
    }
    , {}],
    125: [function(t, e, n) {
        var r = t("./../../libs/q.js")
          , i = t("../utils")
          , o = t("./servicesUtils");
        e.exports = function(t, e) {
            function n() {
                var n = r.defer();
                void 0 === t && n.reject(new Error("dataLoader no URL provided"));
                var i = t
                  , a = o.varsToString(e.GET);
                a.length > 0 && (i = o.urlAppendVars(i, a)),
                e.useCache || (i = o.urlAppendVars(i, "t=" + (new Date).getTime()));
                var s = o.varsToString(e.POST)
                  , l = new XMLHttpRequest;
                return l.addEventListener("progress", function(t) {
                    n.notify({
                        progress: t.loaded,
                        total: t.total
                    })
                }),
                l.addEventListener("load", function(t) {
                    var e = l.response;
                    void 0 === e && (e = l.responseText),
                    n.resolve(e)
                }),
                l.addEventListener("error", function(t) {
                    n.reject(new Error("dataLoader : loadingError"))
                }),
                l.addEventListener("abort", function(t) {
                    n.reject(new Error("dataLoader : loading aborted"))
                }),
                "" !== s ? l.open("POST", i) : l.open("GET", i),
                l.responseType = e.responseType,
                l.setRequestHeader("Content-type", "application/x-www-form-urlencoded"),
                l.send(s),
                n.promise
            }
            return e = i.defaultOptions(e, {
                useCache: !0,
                post: {},
                get: {},
                responseType: "text"
            }),
            {
                load: n
            }
        }
    }
    , {
        "../utils": 129,
        "./../../libs/q.js": 131,
        "./servicesUtils": 128
    }],
    126: [function(t, e, n) {
        function r(t) {
            function e() {
                function e() {
                    var t = {
                        src: "groupLoader",
                        progress: h,
                        total: c
                    };
                    o.notify(t)
                }
                function r() {
                    var t = l
                      , n = s[t];
                    l++,
                    n.load().then(function(n) {
                        return h++,
                        e(),
                        l < s.length ? r() : h === c && o.resolve(a),
                        a[t] = n,
                        n
                    })
                }
                for (var o = i.defer(), a = [], s = t.concat(), l = 0, h = 0, c = s.length, u = Math.min(n, c), p = 0; u > p; p++)
                    r();
                return o.promise
            }
            var n = 3;
            return {
                load: e
            }
        }
        var i = t("./../../libs/q.js");
        e.exports = r
    }
    , {
        "./../../libs/q.js": 131
    }],
    127: [function(t, e, n) {
        var r = t("./../../libs/q.js")
          , i = t("../utils")
          , o = t("./servicesUtils");
        e.exports = function(t, e) {
            function n() {
                var n = r.defer();
                void 0 === t && n.reject(new Error("imageLoader : no URL provided"));
                var i = t;
                e.useCache || (i = o.urlAppendVars(t, "t=" + (new Date).getTime()));
                var a = new Image;
                return a.addEventListener("progress", function(t) {
                    n.notify({
                        progress: t.loaded,
                        total: t.total
                    })
                }),
                a.addEventListener("load", function(t) {
                    n.resolve(a)
                }),
                a.addEventListener("error", function(t) {
                    n.reject(new Error("imageLoader : loadingError"))
                }),
                a.addEventListener("abort", function(t) {
                    n.reject(new Error("imageLoader : loading aborted"))
                }),
                a.src = i,
                n.promise
            }
            return e = i.defaultOptions(e, {
                useCache: !0
            }),
            {
                load: n
            }
        }
    }
    , {
        "../utils": 129,
        "./../../libs/q.js": 131,
        "./servicesUtils": 128
    }],
    128: [function(t, e, n) {
        e.exports = {
            varsToString: function(t) {
                var e = ""
                  , n = 0;
                for (var r in t)
                    n++ && (e += "&"),
                    e += r + "=" + t[r];
                return e
            },
            urlAppendVars: function(t, e) {
                return t + (/\?/.test(t) ? "&" : "?") + e
            }
        }
    }
    , {}],
    129: [function(t, e, n) {
        t("./polyfills"),
        e.exports = {
            isFunction: function(t) {
                var e = {};
                return t && "[object Function]" === e.toString.call(t)
            },
            defaultOptions: function(t, e) {
                void 0 === t && (t = {});
                for (var n in e)
                    void 0 === t[n] && (t[n] = e[n]);
                return t
            },
            wait: function(t, e) {
                !function n() {
                    t() ? e() : requestAnimationFrame(n)
                }()
            }
        }
    }
    , {
        "./polyfills": 124
    }],
    130: [function(t, e, n) {
        (function(t) {
            var n = "undefined" != typeof e && e.exports && "undefined" != typeof t ? t : this || window;
            (n._gsQueue || (n._gsQueue = [])).push(function() {
                "use strict";
                n._gsDefine("TweenMax", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(t, e, n) {
                    var r = function(t) {
                        var e, n = [], r = t.length;
                        for (e = 0; e !== r; n.push(t[e++]))
                            ;
                        return n
                    }
                      , i = function(t, e, r) {
                        n.call(this, t, e, r),
                        this._cycle = 0,
                        this._yoyo = this.vars.yoyo === !0,
                        this._repeat = this.vars.repeat || 0,
                        this._repeatDelay = this.vars.repeatDelay || 0,
                        this._dirty = !0,
                        this.render = i.prototype.render
                    }
                      , o = 1e-10
                      , a = n._internals
                      , s = a.isSelector
                      , l = a.isArray
                      , h = i.prototype = n.to({}, .1, {})
                      , c = [];
                    i.version = "1.17.0",
                    h.constructor = i,
                    h.kill()._gc = !1,
                    i.killTweensOf = i.killDelayedCallsTo = n.killTweensOf,
                    i.getTweensOf = n.getTweensOf,
                    i.lagSmoothing = n.lagSmoothing,
                    i.ticker = n.ticker,
                    i.render = n.render,
                    h.invalidate = function() {
                        return this._yoyo = this.vars.yoyo === !0,
                        this._repeat = this.vars.repeat || 0,
                        this._repeatDelay = this.vars.repeatDelay || 0,
                        this._uncache(!0),
                        n.prototype.invalidate.call(this)
                    }
                    ,
                    h.updateTo = function(t, e) {
                        var r, i = this.ratio, o = this.vars.immediateRender || t.immediateRender;
                        e && this._startTime < this._timeline._time && (this._startTime = this._timeline._time,
                        this._uncache(!1),
                        this._gc ? this._enabled(!0, !1) : this._timeline.insert(this, this._startTime - this._delay));
                        for (r in t)
                            this.vars[r] = t[r];
                        if (this._initted || o)
                            if (e)
                                this._initted = !1,
                                o && this.render(0, !0, !0);
                            else if (this._gc && this._enabled(!0, !1),
                            this._notifyPluginsOfEnabled && this._firstPT && n._onPluginEvent("_onDisable", this),
                            this._time / this._duration > .998) {
                                var a = this._time;
                                this.render(0, !0, !1),
                                this._initted = !1,
                                this.render(a, !0, !1)
                            } else if (this._time > 0 || o) {
                                this._initted = !1,
                                this._init();
                                for (var s, l = 1 / (1 - i), h = this._firstPT; h; )
                                    s = h.s + h.c,
                                    h.c *= l,
                                    h.s = s - h.c,
                                    h = h._next
                            }
                        return this
                    }
                    ,
                    h.render = function(t, e, n) {
                        this._initted || 0 === this._duration && this.vars.repeat && this.invalidate();
                        var r, i, s, l, h, c, u, p, d = this._dirty ? this.totalDuration() : this._totalDuration, f = this._time, m = this._totalTime, g = this._cycle, v = this._duration, y = this._rawPrevTime;
                        if (t >= d ? (this._totalTime = d,
                        this._cycle = this._repeat,
                        this._yoyo && 0 !== (1 & this._cycle) ? (this._time = 0,
                        this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0) : (this._time = v,
                        this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1),
                        this._reversed || (r = !0,
                        i = "onComplete",
                        n = n || this._timeline.autoRemoveChildren),
                        0 === v && (this._initted || !this.vars.lazy || n) && (this._startTime === this._timeline._duration && (t = 0),
                        (0 === t || 0 > y || y === o) && y !== t && (n = !0,
                        y > o && (i = "onReverseComplete")),
                        this._rawPrevTime = p = !e || t || y === t ? t : o)) : 1e-7 > t ? (this._totalTime = this._time = this._cycle = 0,
                        this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0,
                        (0 !== m || 0 === v && y > 0) && (i = "onReverseComplete",
                        r = this._reversed),
                        0 > t && (this._active = !1,
                        0 === v && (this._initted || !this.vars.lazy || n) && (y >= 0 && (n = !0),
                        this._rawPrevTime = p = !e || t || y === t ? t : o)),
                        this._initted || (n = !0)) : (this._totalTime = this._time = t,
                        0 !== this._repeat && (l = v + this._repeatDelay,
                        this._cycle = this._totalTime / l >> 0,
                        0 !== this._cycle && this._cycle === this._totalTime / l && this._cycle--,
                        this._time = this._totalTime - this._cycle * l,
                        this._yoyo && 0 !== (1 & this._cycle) && (this._time = v - this._time),
                        this._time > v ? this._time = v : 0 > this._time && (this._time = 0)),
                        this._easeType ? (h = this._time / v,
                        c = this._easeType,
                        u = this._easePower,
                        (1 === c || 3 === c && h >= .5) && (h = 1 - h),
                        3 === c && (h *= 2),
                        1 === u ? h *= h : 2 === u ? h *= h * h : 3 === u ? h *= h * h * h : 4 === u && (h *= h * h * h * h),
                        this.ratio = 1 === c ? 1 - h : 2 === c ? h : .5 > this._time / v ? h / 2 : 1 - h / 2) : this.ratio = this._ease.getRatio(this._time / v)),
                        f === this._time && !n && g === this._cycle)
                            return void (m !== this._totalTime && this._onUpdate && (e || this._callback("onUpdate")));
                        if (!this._initted) {
                            if (this._init(),
                            !this._initted || this._gc)
                                return;
                            if (!n && this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration))
                                return this._time = f,
                                this._totalTime = m,
                                this._rawPrevTime = y,
                                this._cycle = g,
                                a.lazyTweens.push(this),
                                void (this._lazy = [t, e]);
                            this._time && !r ? this.ratio = this._ease.getRatio(this._time / v) : r && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
                        }
                        for (this._lazy !== !1 && (this._lazy = !1),
                        this._active || !this._paused && this._time !== f && t >= 0 && (this._active = !0),
                        0 === m && (2 === this._initted && t > 0 && this._init(),
                        this._startAt && (t >= 0 ? this._startAt.render(t, e, n) : i || (i = "_dummyGS")),
                        this.vars.onStart && (0 !== this._totalTime || 0 === v) && (e || this._callback("onStart"))),
                        s = this._firstPT; s; )
                            s.f ? s.t[s.p](s.c * this.ratio + s.s) : s.t[s.p] = s.c * this.ratio + s.s,
                            s = s._next;
                        this._onUpdate && (0 > t && this._startAt && this._startTime && this._startAt.render(t, e, n),
                        e || (this._totalTime !== m || r) && this._callback("onUpdate")),
                        this._cycle !== g && (e || this._gc || this.vars.onRepeat && this._callback("onRepeat")),
                        i && (!this._gc || n) && (0 > t && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(t, e, n),
                        r && (this._timeline.autoRemoveChildren && this._enabled(!1, !1),
                        this._active = !1),
                        !e && this.vars[i] && this._callback(i),
                        0 === v && this._rawPrevTime === o && p !== o && (this._rawPrevTime = 0))
                    }
                    ,
                    i.to = function(t, e, n) {
                        return new i(t,e,n)
                    }
                    ,
                    i.from = function(t, e, n) {
                        return n.runBackwards = !0,
                        n.immediateRender = 0 != n.immediateRender,
                        new i(t,e,n)
                    }
                    ,
                    i.fromTo = function(t, e, n, r) {
                        return r.startAt = n,
                        r.immediateRender = 0 != r.immediateRender && 0 != n.immediateRender,
                        new i(t,e,r)
                    }
                    ,
                    i.staggerTo = i.allTo = function(t, e, o, a, h, u, p) {
                        a = a || 0;
                        var d, f, m, g, v = o.delay || 0, y = [], _ = function() {
                            o.onComplete && o.onComplete.apply(o.onCompleteScope || this, arguments),
                            h.apply(p || o.callbackScope || this, u || c)
                        };
                        for (l(t) || ("string" == typeof t && (t = n.selector(t) || t),
                        s(t) && (t = r(t))),
                        t = t || [],
                        0 > a && (t = r(t),
                        t.reverse(),
                        a *= -1),
                        d = t.length - 1,
                        m = 0; d >= m; m++) {
                            f = {};
                            for (g in o)
                                f[g] = o[g];
                            f.delay = v,
                            m === d && h && (f.onComplete = _),
                            y[m] = new i(t[m],e,f),
                            v += a
                        }
                        return y
                    }
                    ,
                    i.staggerFrom = i.allFrom = function(t, e, n, r, o, a, s) {
                        return n.runBackwards = !0,
                        n.immediateRender = 0 != n.immediateRender,
                        i.staggerTo(t, e, n, r, o, a, s)
                    }
                    ,
                    i.staggerFromTo = i.allFromTo = function(t, e, n, r, o, a, s, l) {
                        return r.startAt = n,
                        r.immediateRender = 0 != r.immediateRender && 0 != n.immediateRender,
                        i.staggerTo(t, e, r, o, a, s, l)
                    }
                    ,
                    i.delayedCall = function(t, e, n, r, o) {
                        return new i(e,0,{
                            delay: t,
                            onComplete: e,
                            onCompleteParams: n,
                            callbackScope: r,
                            onReverseComplete: e,
                            onReverseCompleteParams: n,
                            immediateRender: !1,
                            useFrames: o,
                            overwrite: 0
                        })
                    }
                    ,
                    i.set = function(t, e) {
                        return new i(t,0,e)
                    }
                    ,
                    i.isTweening = function(t) {
                        return n.getTweensOf(t, !0).length > 0
                    }
                    ;
                    var u = function(t, e) {
                        for (var r = [], i = 0, o = t._first; o; )
                            o instanceof n ? r[i++] = o : (e && (r[i++] = o),
                            r = r.concat(u(o, e)),
                            i = r.length),
                            o = o._next;
                        return r
                    }
                      , p = i.getAllTweens = function(e) {
                        return u(t._rootTimeline, e).concat(u(t._rootFramesTimeline, e))
                    }
                    ;
                    i.killAll = function(t, n, r, i) {
                        null == n && (n = !0),
                        null == r && (r = !0);
                        var o, a, s, l = p(0 != i), h = l.length, c = n && r && i;
                        for (s = 0; h > s; s++)
                            a = l[s],
                            (c || a instanceof e || (o = a.target === a.vars.onComplete) && r || n && !o) && (t ? a.totalTime(a._reversed ? 0 : a.totalDuration()) : a._enabled(!1, !1))
                    }
                    ,
                    i.killChildTweensOf = function(t, e) {
                        if (null != t) {
                            var o, h, c, u, p, d = a.tweenLookup;
                            if ("string" == typeof t && (t = n.selector(t) || t),
                            s(t) && (t = r(t)),
                            l(t))
                                for (u = t.length; --u > -1; )
                                    i.killChildTweensOf(t[u], e);
                            else {
                                o = [];
                                for (c in d)
                                    for (h = d[c].target.parentNode; h; )
                                        h === t && (o = o.concat(d[c].tweens)),
                                        h = h.parentNode;
                                for (p = o.length,
                                u = 0; p > u; u++)
                                    e && o[u].totalTime(o[u].totalDuration()),
                                    o[u]._enabled(!1, !1)
                            }
                        }
                    }
                    ;
                    var d = function(t, n, r, i) {
                        n = n !== !1,
                        r = r !== !1,
                        i = i !== !1;
                        for (var o, a, s = p(i), l = n && r && i, h = s.length; --h > -1; )
                            a = s[h],
                            (l || a instanceof e || (o = a.target === a.vars.onComplete) && r || n && !o) && a.paused(t)
                    };
                    return i.pauseAll = function(t, e, n) {
                        d(!0, t, e, n)
                    }
                    ,
                    i.resumeAll = function(t, e, n) {
                        d(!1, t, e, n)
                    }
                    ,
                    i.globalTimeScale = function(e) {
                        var r = t._rootTimeline
                          , i = n.ticker.time;
                        return arguments.length ? (e = e || o,
                        r._startTime = i - (i - r._startTime) * r._timeScale / e,
                        r = t._rootFramesTimeline,
                        i = n.ticker.frame,
                        r._startTime = i - (i - r._startTime) * r._timeScale / e,
                        r._timeScale = t._rootTimeline._timeScale = e,
                        e) : r._timeScale
                    }
                    ,
                    h.progress = function(t) {
                        return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - t : t) + this._cycle * (this._duration + this._repeatDelay), !1) : this._time / this.duration()
                    }
                    ,
                    h.totalProgress = function(t) {
                        return arguments.length ? this.totalTime(this.totalDuration() * t, !1) : this._totalTime / this.totalDuration()
                    }
                    ,
                    h.time = function(t, e) {
                        return arguments.length ? (this._dirty && this.totalDuration(),
                        t > this._duration && (t = this._duration),
                        this._yoyo && 0 !== (1 & this._cycle) ? t = this._duration - t + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (t += this._cycle * (this._duration + this._repeatDelay)),
                        this.totalTime(t, e)) : this._time
                    }
                    ,
                    h.duration = function(e) {
                        return arguments.length ? t.prototype.duration.call(this, e) : this._duration
                    }
                    ,
                    h.totalDuration = function(t) {
                        return arguments.length ? -1 === this._repeat ? this : this.duration((t - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat,
                        this._dirty = !1),
                        this._totalDuration)
                    }
                    ,
                    h.repeat = function(t) {
                        return arguments.length ? (this._repeat = t,
                        this._uncache(!0)) : this._repeat
                    }
                    ,
                    h.repeatDelay = function(t) {
                        return arguments.length ? (this._repeatDelay = t,
                        this._uncache(!0)) : this._repeatDelay
                    }
                    ,
                    h.yoyo = function(t) {
                        return arguments.length ? (this._yoyo = t,
                        this) : this._yoyo
                    }
                    ,
                    i
                }, !0),
                n._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(t, e, r) {
                    var i = function(t) {
                        e.call(this, t),
                        this._labels = {},
                        this.autoRemoveChildren = this.vars.autoRemoveChildren === !0,
                        this.smoothChildTiming = this.vars.smoothChildTiming === !0,
                        this._sortChildren = !0,
                        this._onUpdate = this.vars.onUpdate;
                        var n, r, i = this.vars;
                        for (r in i)
                            n = i[r],
                            h(n) && -1 !== n.join("").indexOf("{self}") && (i[r] = this._swapSelfInParams(n));
                        h(i.tweens) && this.add(i.tweens, 0, i.align, i.stagger)
                    }
                      , o = 1e-10
                      , a = r._internals
                      , s = i._internals = {}
                      , l = a.isSelector
                      , h = a.isArray
                      , c = a.lazyTweens
                      , u = a.lazyRender
                      , p = []
                      , d = n._gsDefine.globals
                      , f = function(t) {
                        var e, n = {};
                        for (e in t)
                            n[e] = t[e];
                        return n
                    }
                      , m = s.pauseCallback = function(t, e, n, r) {
                        var i, a = t._timeline, s = a._totalTime, l = t._startTime, h = 0 > t._rawPrevTime || 0 === t._rawPrevTime && a._reversed, c = h ? 0 : o, u = h ? o : 0;
                        if (e || !this._forcingPlayhead) {
                            for (a.pause(l),
                            i = t._prev; i && i._startTime === l; )
                                i._rawPrevTime = u,
                                i = i._prev;
                            for (i = t._next; i && i._startTime === l; )
                                i._rawPrevTime = c,
                                i = i._next;
                            e && e.apply(r || a.vars.callbackScope || a, n || p),
                            (this._forcingPlayhead || !a._paused) && a.seek(s)
                        }
                    }
                      , g = function(t) {
                        var e, n = [], r = t.length;
                        for (e = 0; e !== r; n.push(t[e++]))
                            ;
                        return n
                    }
                      , v = i.prototype = new e;
                    return i.version = "1.17.0",
                    v.constructor = i,
                    v.kill()._gc = v._forcingPlayhead = !1,
                    v.to = function(t, e, n, i) {
                        var o = n.repeat && d.TweenMax || r;
                        return e ? this.add(new o(t,e,n), i) : this.set(t, n, i)
                    }
                    ,
                    v.from = function(t, e, n, i) {
                        return this.add((n.repeat && d.TweenMax || r).from(t, e, n), i)
                    }
                    ,
                    v.fromTo = function(t, e, n, i, o) {
                        var a = i.repeat && d.TweenMax || r;
                        return e ? this.add(a.fromTo(t, e, n, i), o) : this.set(t, i, o)
                    }
                    ,
                    v.staggerTo = function(t, e, n, o, a, s, h, c) {
                        var u, p = new i({
                            onComplete: s,
                            onCompleteParams: h,
                            callbackScope: c,
                            smoothChildTiming: this.smoothChildTiming
                        });
                        for ("string" == typeof t && (t = r.selector(t) || t),
                        t = t || [],
                        l(t) && (t = g(t)),
                        o = o || 0,
                        0 > o && (t = g(t),
                        t.reverse(),
                        o *= -1),
                        u = 0; t.length > u; u++)
                            n.startAt && (n.startAt = f(n.startAt)),
                            p.to(t[u], e, f(n), u * o);
                        return this.add(p, a)
                    }
                    ,
                    v.staggerFrom = function(t, e, n, r, i, o, a, s) {
                        return n.immediateRender = 0 != n.immediateRender,
                        n.runBackwards = !0,
                        this.staggerTo(t, e, n, r, i, o, a, s)
                    }
                    ,
                    v.staggerFromTo = function(t, e, n, r, i, o, a, s, l) {
                        return r.startAt = n,
                        r.immediateRender = 0 != r.immediateRender && 0 != n.immediateRender,
                        this.staggerTo(t, e, r, i, o, a, s, l)
                    }
                    ,
                    v.call = function(t, e, n, i) {
                        return this.add(r.delayedCall(0, t, e, n), i)
                    }
                    ,
                    v.set = function(t, e, n) {
                        return n = this._parseTimeOrLabel(n, 0, !0),
                        null == e.immediateRender && (e.immediateRender = n === this._time && !this._paused),
                        this.add(new r(t,0,e), n)
                    }
                    ,
                    i.exportRoot = function(t, e) {
                        t = t || {},
                        null == t.smoothChildTiming && (t.smoothChildTiming = !0);
                        var n, o, a = new i(t), s = a._timeline;
                        for (null == e && (e = !0),
                        s._remove(a, !0),
                        a._startTime = 0,
                        a._rawPrevTime = a._time = a._totalTime = s._time,
                        n = s._first; n; )
                            o = n._next,
                            e && n instanceof r && n.target === n.vars.onComplete || a.add(n, n._startTime - n._delay),
                            n = o;
                        return s.add(a, 0),
                        a
                    }
                    ,
                    v.add = function(n, o, a, s) {
                        var l, c, u, p, d, f;
                        if ("number" != typeof o && (o = this._parseTimeOrLabel(o, 0, !0, n)),
                        !(n instanceof t)) {
                            if (n instanceof Array || n && n.push && h(n)) {
                                for (a = a || "normal",
                                s = s || 0,
                                l = o,
                                c = n.length,
                                u = 0; c > u; u++)
                                    h(p = n[u]) && (p = new i({
                                        tweens: p
                                    })),
                                    this.add(p, l),
                                    "string" != typeof p && "function" != typeof p && ("sequence" === a ? l = p._startTime + p.totalDuration() / p._timeScale : "start" === a && (p._startTime -= p.delay())),
                                    l += s;
                                return this._uncache(!0)
                            }
                            if ("string" == typeof n)
                                return this.addLabel(n, o);
                            if ("function" != typeof n)
                                throw "Cannot add " + n + " into the timeline; it is not a tween, timeline, function, or string.";
                            n = r.delayedCall(0, n)
                        }
                        if (e.prototype.add.call(this, n, o),
                        (this._gc || this._time === this._duration) && !this._paused && this._duration < this.duration())
                            for (d = this,
                            f = d.rawTime() > n._startTime; d._timeline; )
                                f && d._timeline.smoothChildTiming ? d.totalTime(d._totalTime, !0) : d._gc && d._enabled(!0, !1),
                                d = d._timeline;
                        return this
                    }
                    ,
                    v.remove = function(e) {
                        if (e instanceof t)
                            return this._remove(e, !1);
                        if (e instanceof Array || e && e.push && h(e)) {
                            for (var n = e.length; --n > -1; )
                                this.remove(e[n]);
                            return this
                        }
                        return "string" == typeof e ? this.removeLabel(e) : this.kill(null , e)
                    }
                    ,
                    v._remove = function(t, n) {
                        e.prototype._remove.call(this, t, n);
                        var r = this._last;
                        return r ? this._time > r._startTime + r._totalDuration / r._timeScale && (this._time = this.duration(),
                        this._totalTime = this._totalDuration) : this._time = this._totalTime = this._duration = this._totalDuration = 0,
                        this
                    }
                    ,
                    v.append = function(t, e) {
                        return this.add(t, this._parseTimeOrLabel(null , e, !0, t))
                    }
                    ,
                    v.insert = v.insertMultiple = function(t, e, n, r) {
                        return this.add(t, e || 0, n, r)
                    }
                    ,
                    v.appendMultiple = function(t, e, n, r) {
                        return this.add(t, this._parseTimeOrLabel(null , e, !0, t), n, r)
                    }
                    ,
                    v.addLabel = function(t, e) {
                        return this._labels[t] = this._parseTimeOrLabel(e),
                        this
                    }
                    ,
                    v.addPause = function(t, e, n, i) {
                        var o = r.delayedCall(0, m, ["{self}", e, n, i], this);
                        return o.data = "isPause",
                        this.add(o, t)
                    }
                    ,
                    v.removeLabel = function(t) {
                        return delete this._labels[t],
                        this
                    }
                    ,
                    v.getLabelTime = function(t) {
                        return null != this._labels[t] ? this._labels[t] : -1
                    }
                    ,
                    v._parseTimeOrLabel = function(e, n, r, i) {
                        var o;
                        if (i instanceof t && i.timeline === this)
                            this.remove(i);
                        else if (i && (i instanceof Array || i.push && h(i)))
                            for (o = i.length; --o > -1; )
                                i[o]instanceof t && i[o].timeline === this && this.remove(i[o]);
                        if ("string" == typeof n)
                            return this._parseTimeOrLabel(n, r && "number" == typeof e && null == this._labels[n] ? e - this.duration() : 0, r);
                        if (n = n || 0,
                        "string" != typeof e || !isNaN(e) && null == this._labels[e])
                            null == e && (e = this.duration());
                        else {
                            if (o = e.indexOf("="),
                            -1 === o)
                                return null == this._labels[e] ? r ? this._labels[e] = this.duration() + n : n : this._labels[e] + n;
                            n = parseInt(e.charAt(o - 1) + "1", 10) * Number(e.substr(o + 1)),
                            e = o > 1 ? this._parseTimeOrLabel(e.substr(0, o - 1), 0, r) : this.duration()
                        }
                        return Number(e) + n
                    }
                    ,
                    v.seek = function(t, e) {
                        return this.totalTime("number" == typeof t ? t : this._parseTimeOrLabel(t), e !== !1)
                    }
                    ,
                    v.stop = function() {
                        return this.paused(!0)
                    }
                    ,
                    v.gotoAndPlay = function(t, e) {
                        return this.play(t, e)
                    }
                    ,
                    v.gotoAndStop = function(t, e) {
                        return this.pause(t, e)
                    }
                    ,
                    v.render = function(t, e, n) {
                        this._gc && this._enabled(!0, !1);
                        var r, i, a, s, l, h = this._dirty ? this.totalDuration() : this._totalDuration, p = this._time, d = this._startTime, f = this._timeScale, m = this._paused;
                        if (t >= h)
                            this._totalTime = this._time = h,
                            this._reversed || this._hasPausedChild() || (i = !0,
                            s = "onComplete",
                            l = !!this._timeline.autoRemoveChildren,
                            0 === this._duration && (0 === t || 0 > this._rawPrevTime || this._rawPrevTime === o) && this._rawPrevTime !== t && this._first && (l = !0,
                            this._rawPrevTime > o && (s = "onReverseComplete"))),
                            this._rawPrevTime = this._duration || !e || t || this._rawPrevTime === t ? t : o,
                            t = h + 1e-4;
                        else if (1e-7 > t)
                            if (this._totalTime = this._time = 0,
                            (0 !== p || 0 === this._duration && this._rawPrevTime !== o && (this._rawPrevTime > 0 || 0 > t && this._rawPrevTime >= 0)) && (s = "onReverseComplete",
                            i = this._reversed),
                            0 > t)
                                this._active = !1,
                                this._timeline.autoRemoveChildren && this._reversed ? (l = i = !0,
                                s = "onReverseComplete") : this._rawPrevTime >= 0 && this._first && (l = !0),
                                this._rawPrevTime = t;
                            else {
                                if (this._rawPrevTime = this._duration || !e || t || this._rawPrevTime === t ? t : o,
                                0 === t && i)
                                    for (r = this._first; r && 0 === r._startTime; )
                                        r._duration || (i = !1),
                                        r = r._next;
                                t = 0,
                                this._initted || (l = !0)
                            }
                        else
                            this._totalTime = this._time = this._rawPrevTime = t;
                        if (this._time !== p && this._first || n || l) {
                            if (this._initted || (this._initted = !0),
                            this._active || !this._paused && this._time !== p && t > 0 && (this._active = !0),
                            0 === p && this.vars.onStart && 0 !== this._time && (e || this._callback("onStart")),
                            this._time >= p)
                                for (r = this._first; r && (a = r._next,
                                !this._paused || m); )
                                    (r._active || r._startTime <= this._time && !r._paused && !r._gc) && (r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (t - r._startTime) * r._timeScale, e, n) : r.render((t - r._startTime) * r._timeScale, e, n)),
                                    r = a;
                            else
                                for (r = this._last; r && (a = r._prev,
                                !this._paused || m); )
                                    (r._active || p >= r._startTime && !r._paused && !r._gc) && (r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (t - r._startTime) * r._timeScale, e, n) : r.render((t - r._startTime) * r._timeScale, e, n)),
                                    r = a;
                            this._onUpdate && (e || (c.length && u(),
                            this._callback("onUpdate"))),
                            s && (this._gc || (d === this._startTime || f !== this._timeScale) && (0 === this._time || h >= this.totalDuration()) && (i && (c.length && u(),
                            this._timeline.autoRemoveChildren && this._enabled(!1, !1),
                            this._active = !1),
                            !e && this.vars[s] && this._callback(s)))
                        }
                    }
                    ,
                    v._hasPausedChild = function() {
                        for (var t = this._first; t; ) {
                            if (t._paused || t instanceof i && t._hasPausedChild())
                                return !0;
                            t = t._next
                        }
                        return !1
                    }
                    ,
                    v.getChildren = function(t, e, n, i) {
                        i = i || -9999999999;
                        for (var o = [], a = this._first, s = 0; a; )
                            i > a._startTime || (a instanceof r ? e !== !1 && (o[s++] = a) : (n !== !1 && (o[s++] = a),
                            t !== !1 && (o = o.concat(a.getChildren(!0, e, n)),
                            s = o.length))),
                            a = a._next;
                        return o
                    }
                    ,
                    v.getTweensOf = function(t, e) {
                        var n, i, o = this._gc, a = [], s = 0;
                        for (o && this._enabled(!0, !0),
                        n = r.getTweensOf(t),
                        i = n.length; --i > -1; )
                            (n[i].timeline === this || e && this._contains(n[i])) && (a[s++] = n[i]);
                        return o && this._enabled(!1, !0),
                        a
                    }
                    ,
                    v.recent = function() {
                        return this._recent
                    }
                    ,
                    v._contains = function(t) {
                        for (var e = t.timeline; e; ) {
                            if (e === this)
                                return !0;
                            e = e.timeline
                        }
                        return !1
                    }
                    ,
                    v.shiftChildren = function(t, e, n) {
                        n = n || 0;
                        for (var r, i = this._first, o = this._labels; i; )
                            i._startTime >= n && (i._startTime += t),
                            i = i._next;
                        if (e)
                            for (r in o)
                                o[r] >= n && (o[r] += t);
                        return this._uncache(!0)
                    }
                    ,
                    v._kill = function(t, e) {
                        if (!t && !e)
                            return this._enabled(!1, !1);
                        for (var n = e ? this.getTweensOf(e) : this.getChildren(!0, !0, !1), r = n.length, i = !1; --r > -1; )
                            n[r]._kill(t, e) && (i = !0);
                        return i
                    }
                    ,
                    v.clear = function(t) {
                        var e = this.getChildren(!1, !0, !0)
                          , n = e.length;
                        for (this._time = this._totalTime = 0; --n > -1; )
                            e[n]._enabled(!1, !1);
                        return t !== !1 && (this._labels = {}),
                        this._uncache(!0)
                    }
                    ,
                    v.invalidate = function() {
                        for (var e = this._first; e; )
                            e.invalidate(),
                            e = e._next;
                        return t.prototype.invalidate.call(this)
                    }
                    ,
                    v._enabled = function(t, n) {
                        if (t === this._gc)
                            for (var r = this._first; r; )
                                r._enabled(t, !0),
                                r = r._next;
                        return e.prototype._enabled.call(this, t, n)
                    }
                    ,
                    v.totalTime = function() {
                        this._forcingPlayhead = !0;
                        var e = t.prototype.totalTime.apply(this, arguments);
                        return this._forcingPlayhead = !1,
                        e
                    }
                    ,
                    v.duration = function(t) {
                        return arguments.length ? (0 !== this.duration() && 0 !== t && this.timeScale(this._duration / t),
                        this) : (this._dirty && this.totalDuration(),
                        this._duration)
                    }
                    ,
                    v.totalDuration = function(t) {
                        if (!arguments.length) {
                            if (this._dirty) {
                                for (var e, n, r = 0, i = this._last, o = 999999999999; i; )
                                    e = i._prev,
                                    i._dirty && i.totalDuration(),
                                    i._startTime > o && this._sortChildren && !i._paused ? this.add(i, i._startTime - i._delay) : o = i._startTime,
                                    0 > i._startTime && !i._paused && (r -= i._startTime,
                                    this._timeline.smoothChildTiming && (this._startTime += i._startTime / this._timeScale),
                                    this.shiftChildren(-i._startTime, !1, -9999999999),
                                    o = 0),
                                    n = i._startTime + i._totalDuration / i._timeScale,
                                    n > r && (r = n),
                                    i = e;
                                this._duration = this._totalDuration = r,
                                this._dirty = !1
                            }
                            return this._totalDuration
                        }
                        return 0 !== this.totalDuration() && 0 !== t && this.timeScale(this._totalDuration / t),
                        this
                    }
                    ,
                    v.paused = function(e) {
                        if (!e)
                            for (var n = this._first, r = this._time; n; )
                                n._startTime === r && "isPause" === n.data && (n._rawPrevTime = 0),
                                n = n._next;
                        return t.prototype.paused.apply(this, arguments)
                    }
                    ,
                    v.usesFrames = function() {
                        for (var e = this._timeline; e._timeline; )
                            e = e._timeline;
                        return e === t._rootFramesTimeline
                    }
                    ,
                    v.rawTime = function() {
                        return this._paused ? this._totalTime : (this._timeline.rawTime() - this._startTime) * this._timeScale
                    }
                    ,
                    i
                }, !0),
                n._gsDefine("TimelineMax", ["TimelineLite", "TweenLite", "easing.Ease"], function(t, e, n) {
                    var r = function(e) {
                        t.call(this, e),
                        this._repeat = this.vars.repeat || 0,
                        this._repeatDelay = this.vars.repeatDelay || 0,
                        this._cycle = 0,
                        this._yoyo = this.vars.yoyo === !0,
                        this._dirty = !0
                    }
                      , i = 1e-10
                      , o = e._internals
                      , a = o.lazyTweens
                      , s = o.lazyRender
                      , l = new n(null ,null ,1,0)
                      , h = r.prototype = new t;
                    return h.constructor = r,
                    h.kill()._gc = !1,
                    r.version = "1.17.0",
                    h.invalidate = function() {
                        return this._yoyo = this.vars.yoyo === !0,
                        this._repeat = this.vars.repeat || 0,
                        this._repeatDelay = this.vars.repeatDelay || 0,
                        this._uncache(!0),
                        t.prototype.invalidate.call(this)
                    }
                    ,
                    h.addCallback = function(t, n, r, i) {
                        return this.add(e.delayedCall(0, t, r, i), n)
                    }
                    ,
                    h.removeCallback = function(t, e) {
                        if (t)
                            if (null == e)
                                this._kill(null , t);
                            else
                                for (var n = this.getTweensOf(t, !1), r = n.length, i = this._parseTimeOrLabel(e); --r > -1; )
                                    n[r]._startTime === i && n[r]._enabled(!1, !1);
                        return this
                    }
                    ,
                    h.removePause = function(e) {
                        return this.removeCallback(t._internals.pauseCallback, e)
                    }
                    ,
                    h.tweenTo = function(t, n) {
                        n = n || {};
                        var r, i, o, a = {
                            ease: l,
                            useFrames: this.usesFrames(),
                            immediateRender: !1
                        };
                        for (i in n)
                            a[i] = n[i];
                        return a.time = this._parseTimeOrLabel(t),
                        r = Math.abs(Number(a.time) - this._time) / this._timeScale || .001,
                        o = new e(this,r,a),
                        a.onStart = function() {
                            o.target.paused(!0),
                            o.vars.time !== o.target.time() && r === o.duration() && o.duration(Math.abs(o.vars.time - o.target.time()) / o.target._timeScale),
                            n.onStart && o._callback("onStart")
                        }
                        ,
                        o
                    }
                    ,
                    h.tweenFromTo = function(t, e, n) {
                        n = n || {},
                        t = this._parseTimeOrLabel(t),
                        n.startAt = {
                            onComplete: this.seek,
                            onCompleteParams: [t],
                            callbackScope: this
                        },
                        n.immediateRender = n.immediateRender !== !1;
                        var r = this.tweenTo(e, n);
                        return r.duration(Math.abs(r.vars.time - t) / this._timeScale || .001)
                    }
                    ,
                    h.render = function(t, e, n) {
                        this._gc && this._enabled(!0, !1);
                        var r, o, l, h, c, u, p = this._dirty ? this.totalDuration() : this._totalDuration, d = this._duration, f = this._time, m = this._totalTime, g = this._startTime, v = this._timeScale, y = this._rawPrevTime, _ = this._paused, x = this._cycle;
                        if (t >= p)
                            this._locked || (this._totalTime = p,
                            this._cycle = this._repeat),
                            this._reversed || this._hasPausedChild() || (o = !0,
                            h = "onComplete",
                            c = !!this._timeline.autoRemoveChildren,
                            0 === this._duration && (0 === t || 0 > y || y === i) && y !== t && this._first && (c = !0,
                            y > i && (h = "onReverseComplete"))),
                            this._rawPrevTime = this._duration || !e || t || this._rawPrevTime === t ? t : i,
                            this._yoyo && 0 !== (1 & this._cycle) ? this._time = t = 0 : (this._time = d,
                            t = d + 1e-4);
                        else if (1e-7 > t)
                            if (this._locked || (this._totalTime = this._cycle = 0),
                            this._time = 0,
                            (0 !== f || 0 === d && y !== i && (y > 0 || 0 > t && y >= 0) && !this._locked) && (h = "onReverseComplete",
                            o = this._reversed),
                            0 > t)
                                this._active = !1,
                                this._timeline.autoRemoveChildren && this._reversed ? (c = o = !0,
                                h = "onReverseComplete") : y >= 0 && this._first && (c = !0),
                                this._rawPrevTime = t;
                            else {
                                if (this._rawPrevTime = d || !e || t || this._rawPrevTime === t ? t : i,
                                0 === t && o)
                                    for (r = this._first; r && 0 === r._startTime; )
                                        r._duration || (o = !1),
                                        r = r._next;
                                t = 0,
                                this._initted || (c = !0)
                            }
                        else
                            0 === d && 0 > y && (c = !0),
                            this._time = this._rawPrevTime = t,
                            this._locked || (this._totalTime = t,
                            0 !== this._repeat && (u = d + this._repeatDelay,
                            this._cycle = this._totalTime / u >> 0,
                            0 !== this._cycle && this._cycle === this._totalTime / u && this._cycle--,
                            this._time = this._totalTime - this._cycle * u,
                            this._yoyo && 0 !== (1 & this._cycle) && (this._time = d - this._time),
                            this._time > d ? (this._time = d,
                            t = d + 1e-4) : 0 > this._time ? this._time = t = 0 : t = this._time));
                        if (this._cycle !== x && !this._locked) {
                            var b = this._yoyo && 0 !== (1 & x)
                              , w = b === (this._yoyo && 0 !== (1 & this._cycle))
                              , S = this._totalTime
                              , T = this._cycle
                              , M = this._rawPrevTime
                              , C = this._time;
                            if (this._totalTime = x * d,
                            x > this._cycle ? b = !b : this._totalTime += d,
                            this._time = f,
                            this._rawPrevTime = 0 === d ? y - 1e-4 : y,
                            this._cycle = x,
                            this._locked = !0,
                            f = b ? 0 : d,
                            this.render(f, e, 0 === d),
                            e || this._gc || this.vars.onRepeat && this._callback("onRepeat"),
                            w && (f = b ? d + 1e-4 : -1e-4,
                            this.render(f, !0, !1)),
                            this._locked = !1,
                            this._paused && !_)
                                return;
                            this._time = C,
                            this._totalTime = S,
                            this._cycle = T,
                            this._rawPrevTime = M
                        }
                        if (!(this._time !== f && this._first || n || c))
                            return void (m !== this._totalTime && this._onUpdate && (e || this._callback("onUpdate")));
                        if (this._initted || (this._initted = !0),
                        this._active || !this._paused && this._totalTime !== m && t > 0 && (this._active = !0),
                        0 === m && this.vars.onStart && 0 !== this._totalTime && (e || this._callback("onStart")),
                        this._time >= f)
                            for (r = this._first; r && (l = r._next,
                            !this._paused || _); )
                                (r._active || r._startTime <= this._time && !r._paused && !r._gc) && (r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (t - r._startTime) * r._timeScale, e, n) : r.render((t - r._startTime) * r._timeScale, e, n)),
                                r = l;
                        else
                            for (r = this._last; r && (l = r._prev,
                            !this._paused || _); )
                                (r._active || f >= r._startTime && !r._paused && !r._gc) && (r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (t - r._startTime) * r._timeScale, e, n) : r.render((t - r._startTime) * r._timeScale, e, n)),
                                r = l;
                        this._onUpdate && (e || (a.length && s(),
                        this._callback("onUpdate"))),
                        h && (this._locked || this._gc || (g === this._startTime || v !== this._timeScale) && (0 === this._time || p >= this.totalDuration()) && (o && (a.length && s(),
                        this._timeline.autoRemoveChildren && this._enabled(!1, !1),
                        this._active = !1),
                        !e && this.vars[h] && this._callback(h)))
                    }
                    ,
                    h.getActive = function(t, e, n) {
                        null == t && (t = !0),
                        null == e && (e = !0),
                        null == n && (n = !1);
                        var r, i, o = [], a = this.getChildren(t, e, n), s = 0, l = a.length;
                        for (r = 0; l > r; r++)
                            i = a[r],
                            i.isActive() && (o[s++] = i);
                        return o
                    }
                    ,
                    h.getLabelAfter = function(t) {
                        t || 0 !== t && (t = this._time);
                        var e, n = this.getLabelsArray(), r = n.length;
                        for (e = 0; r > e; e++)
                            if (n[e].time > t)
                                return n[e].name;
                        return null
                    }
                    ,
                    h.getLabelBefore = function(t) {
                        null == t && (t = this._time);
                        for (var e = this.getLabelsArray(), n = e.length; --n > -1; )
                            if (t > e[n].time)
                                return e[n].name;
                        return null
                    }
                    ,
                    h.getLabelsArray = function() {
                        var t, e = [], n = 0;
                        for (t in this._labels)
                            e[n++] = {
                                time: this._labels[t],
                                name: t
                            };
                        return e.sort(function(t, e) {
                            return t.time - e.time
                        }),
                        e
                    }
                    ,
                    h.progress = function(t, e) {
                        return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - t : t) + this._cycle * (this._duration + this._repeatDelay), e) : this._time / this.duration()
                    }
                    ,
                    h.totalProgress = function(t, e) {
                        return arguments.length ? this.totalTime(this.totalDuration() * t, e) : this._totalTime / this.totalDuration()
                    }
                    ,
                    h.totalDuration = function(e) {
                        return arguments.length ? -1 === this._repeat ? this : this.duration((e - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (t.prototype.totalDuration.call(this),
                        this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat),
                        this._totalDuration)
                    }
                    ,
                    h.time = function(t, e) {
                        return arguments.length ? (this._dirty && this.totalDuration(),
                        t > this._duration && (t = this._duration),
                        this._yoyo && 0 !== (1 & this._cycle) ? t = this._duration - t + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (t += this._cycle * (this._duration + this._repeatDelay)),
                        this.totalTime(t, e)) : this._time
                    }
                    ,
                    h.repeat = function(t) {
                        return arguments.length ? (this._repeat = t,
                        this._uncache(!0)) : this._repeat
                    }
                    ,
                    h.repeatDelay = function(t) {
                        return arguments.length ? (this._repeatDelay = t,
                        this._uncache(!0)) : this._repeatDelay
                    }
                    ,
                    h.yoyo = function(t) {
                        return arguments.length ? (this._yoyo = t,
                        this) : this._yoyo
                    }
                    ,
                    h.currentLabel = function(t) {
                        return arguments.length ? this.seek(t, !0) : this.getLabelBefore(this._time + 1e-8)
                    }
                    ,
                    r
                }, !0),
                function() {
                    var t = 180 / Math.PI
                      , e = []
                      , r = []
                      , i = []
                      , o = {}
                      , a = n._gsDefine.globals
                      , s = function(t, e, n, r) {
                        this.a = t,
                        this.b = e,
                        this.c = n,
                        this.d = r,
                        this.da = r - t,
                        this.ca = n - t,
                        this.ba = e - t
                    }
                      , l = ",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,"
                      , h = function(t, e, n, r) {
                        var i = {
                            a: t
                        }
                          , o = {}
                          , a = {}
                          , s = {
                            c: r
                        }
                          , l = (t + e) / 2
                          , h = (e + n) / 2
                          , c = (n + r) / 2
                          , u = (l + h) / 2
                          , p = (h + c) / 2
                          , d = (p - u) / 8;
                        return i.b = l + (t - l) / 4,
                        o.b = u + d,
                        i.c = o.a = (i.b + o.b) / 2,
                        o.c = a.a = (u + p) / 2,
                        a.b = p - d,
                        s.b = c + (r - c) / 4,
                        a.c = s.a = (a.b + s.b) / 2,
                        [i, o, a, s]
                    }
                      , c = function(t, n, o, a, s) {
                        var l, c, u, p, d, f, m, g, v, y, _, x, b, w = t.length - 1, S = 0, T = t[0].a;
                        for (l = 0; w > l; l++)
                            d = t[S],
                            c = d.a,
                            u = d.d,
                            p = t[S + 1].d,
                            s ? (_ = e[l],
                            x = r[l],
                            b = .25 * (x + _) * n / (a ? .5 : i[l] || .5),
                            f = u - (u - c) * (a ? .5 * n : 0 !== _ ? b / _ : 0),
                            m = u + (p - u) * (a ? .5 * n : 0 !== x ? b / x : 0),
                            g = u - (f + ((m - f) * (3 * _ / (_ + x) + .5) / 4 || 0))) : (f = u - .5 * (u - c) * n,
                            m = u + .5 * (p - u) * n,
                            g = u - (f + m) / 2),
                            f += g,
                            m += g,
                            d.c = v = f,
                            d.b = 0 !== l ? T : T = d.a + .6 * (d.c - d.a),
                            d.da = u - c,
                            d.ca = v - c,
                            d.ba = T - c,
                            o ? (y = h(c, T, v, u),
                            t.splice(S, 1, y[0], y[1], y[2], y[3]),
                            S += 4) : S++,
                            T = m;
                        d = t[S],
                        d.b = T,
                        d.c = T + .4 * (d.d - T),
                        d.da = d.d - d.a,
                        d.ca = d.c - d.a,
                        d.ba = T - d.a,
                        o && (y = h(d.a, T, d.c, d.d),
                        t.splice(S, 1, y[0], y[1], y[2], y[3]))
                    }
                      , u = function(t, n, i, o) {
                        var a, l, h, c, u, p, d = [];
                        if (o)
                            for (t = [o].concat(t),
                            l = t.length; --l > -1; )
                                "string" == typeof (p = t[l][n]) && "=" === p.charAt(1) && (t[l][n] = o[n] + Number(p.charAt(0) + p.substr(2)));
                        if (a = t.length - 2,
                        0 > a)
                            return d[0] = new s(t[0][n],0,0,t[-1 > a ? 0 : 1][n]),
                            d;
                        for (l = 0; a > l; l++)
                            h = t[l][n],
                            c = t[l + 1][n],
                            d[l] = new s(h,0,0,c),
                            i && (u = t[l + 2][n],
                            e[l] = (e[l] || 0) + (c - h) * (c - h),
                            r[l] = (r[l] || 0) + (u - c) * (u - c));
                        return d[l] = new s(t[l][n],0,0,t[l + 1][n]),
                        d
                    }
                      , p = function(t, n, a, s, h, p) {
                        var d, f, m, g, v, y, _, x, b = {}, w = [], S = p || t[0];
                        h = "string" == typeof h ? "," + h + "," : l,
                        null == n && (n = 1);
                        for (f in t[0])
                            w.push(f);
                        if (t.length > 1) {
                            for (x = t[t.length - 1],
                            _ = !0,
                            d = w.length; --d > -1; )
                                if (f = w[d],
                                Math.abs(S[f] - x[f]) > .05) {
                                    _ = !1;
                                    break
                                }
                            _ && (t = t.concat(),
                            p && t.unshift(p),
                            t.push(t[1]),
                            p = t[t.length - 3])
                        }
                        for (e.length = r.length = i.length = 0,
                        d = w.length; --d > -1; )
                            f = w[d],
                            o[f] = -1 !== h.indexOf("," + f + ","),
                            b[f] = u(t, f, o[f], p);
                        for (d = e.length; --d > -1; )
                            e[d] = Math.sqrt(e[d]),
                            r[d] = Math.sqrt(r[d]);
                        if (!s) {
                            for (d = w.length; --d > -1; )
                                if (o[f])
                                    for (m = b[w[d]],
                                    y = m.length - 1,
                                    g = 0; y > g; g++)
                                        v = m[g + 1].da / r[g] + m[g].da / e[g],
                                        i[g] = (i[g] || 0) + v * v;
                            for (d = i.length; --d > -1; )
                                i[d] = Math.sqrt(i[d])
                        }
                        for (d = w.length,
                        g = a ? 4 : 1; --d > -1; )
                            f = w[d],
                            m = b[f],
                            c(m, n, a, s, o[f]),
                            _ && (m.splice(0, g),
                            m.splice(m.length - g, g));
                        return b
                    }
                      , d = function(t, e, n) {
                        e = e || "soft";
                        var r, i, o, a, l, h, c, u, p, d, f, m = {}, g = "cubic" === e ? 3 : 2, v = "soft" === e, y = [];
                        if (v && n && (t = [n].concat(t)),
                        null == t || g + 1 > t.length)
                            throw "invalid Bezier data";
                        for (p in t[0])
                            y.push(p);
                        for (h = y.length; --h > -1; ) {
                            for (p = y[h],
                            m[p] = l = [],
                            d = 0,
                            u = t.length,
                            c = 0; u > c; c++)
                                r = null == n ? t[c][p] : "string" == typeof (f = t[c][p]) && "=" === f.charAt(1) ? n[p] + Number(f.charAt(0) + f.substr(2)) : Number(f),
                                v && c > 1 && u - 1 > c && (l[d++] = (r + l[d - 2]) / 2),
                                l[d++] = r;
                            for (u = d - g + 1,
                            d = 0,
                            c = 0; u > c; c += g)
                                r = l[c],
                                i = l[c + 1],
                                o = l[c + 2],
                                a = 2 === g ? 0 : l[c + 3],
                                l[d++] = f = 3 === g ? new s(r,i,o,a) : new s(r,(2 * i + r) / 3,(2 * i + o) / 3,o);
                            l.length = d
                        }
                        return m
                    }
                      , f = function(t, e, n) {
                        for (var r, i, o, a, s, l, h, c, u, p, d, f = 1 / n, m = t.length; --m > -1; )
                            for (p = t[m],
                            o = p.a,
                            a = p.d - o,
                            s = p.c - o,
                            l = p.b - o,
                            r = i = 0,
                            c = 1; n >= c; c++)
                                h = f * c,
                                u = 1 - h,
                                r = i - (i = (h * h * a + 3 * u * (h * s + u * l)) * h),
                                d = m * n + c - 1,
                                e[d] = (e[d] || 0) + r * r
                    }
                      , m = function(t, e) {
                        e = e >> 0 || 6;
                        var n, r, i, o, a = [], s = [], l = 0, h = 0, c = e - 1, u = [], p = [];
                        for (n in t)
                            f(t[n], a, e);
                        for (i = a.length,
                        r = 0; i > r; r++)
                            l += Math.sqrt(a[r]),
                            o = r % e,
                            p[o] = l,
                            o === c && (h += l,
                            o = r / e >> 0,
                            u[o] = p,
                            s[o] = h,
                            l = 0,
                            p = []);
                        return {
                            length: h,
                            lengths: s,
                            segments: u
                        }
                    }
                      , g = n._gsDefine.plugin({
                        propName: "bezier",
                        priority: -1,
                        version: "1.3.4",
                        API: 2,
                        global: !0,
                        init: function(t, e, n) {
                            this._target = t,
                            e instanceof Array && (e = {
                                values: e
                            }),
                            this._func = {},
                            this._round = {},
                            this._props = [],
                            this._timeRes = null == e.timeResolution ? 6 : parseInt(e.timeResolution, 10);
                            var r, i, o, a, s, l = e.values || [], h = {}, c = l[0], u = e.autoRotate || n.vars.orientToBezier;
                            this._autoRotate = u ? u instanceof Array ? u : [["x", "y", "rotation", u === !0 ? 0 : Number(u) || 0]] : null ;
                            for (r in c)
                                this._props.push(r);
                            for (o = this._props.length; --o > -1; )
                                r = this._props[o],
                                this._overwriteProps.push(r),
                                i = this._func[r] = "function" == typeof t[r],
                                h[r] = i ? t[r.indexOf("set") || "function" != typeof t["get" + r.substr(3)] ? r : "get" + r.substr(3)]() : parseFloat(t[r]),
                                s || h[r] !== l[0][r] && (s = h);
                            if (this._beziers = "cubic" !== e.type && "quadratic" !== e.type && "soft" !== e.type ? p(l, isNaN(e.curviness) ? 1 : e.curviness, !1, "thruBasic" === e.type, e.correlate, s) : d(l, e.type, h),
                            this._segCount = this._beziers[r].length,
                            this._timeRes) {
                                var f = m(this._beziers, this._timeRes);
                                this._length = f.length,
                                this._lengths = f.lengths,
                                this._segments = f.segments,
                                this._l1 = this._li = this._s1 = this._si = 0,
                                this._l2 = this._lengths[0],
                                this._curSeg = this._segments[0],
                                this._s2 = this._curSeg[0],
                                this._prec = 1 / this._curSeg.length
                            }
                            if (u = this._autoRotate)
                                for (this._initialRotations = [],
                                u[0]instanceof Array || (this._autoRotate = u = [u]),
                                o = u.length; --o > -1; ) {
                                    for (a = 0; 3 > a; a++)
                                        r = u[o][a],
                                        this._func[r] = "function" == typeof t[r] ? t[r.indexOf("set") || "function" != typeof t["get" + r.substr(3)] ? r : "get" + r.substr(3)] : !1;
                                    r = u[o][2],
                                    this._initialRotations[o] = this._func[r] ? this._func[r].call(this._target) : this._target[r]
                                }
                            return this._startRatio = n.vars.runBackwards ? 1 : 0,
                            !0
                        },
                        set: function(e) {
                            var n, r, i, o, a, s, l, h, c, u, p = this._segCount, d = this._func, f = this._target, m = e !== this._startRatio;
                            if (this._timeRes) {
                                if (c = this._lengths,
                                u = this._curSeg,
                                e *= this._length,
                                i = this._li,
                                e > this._l2 && p - 1 > i) {
                                    for (h = p - 1; h > i && e >= (this._l2 = c[++i]); )
                                        ;
                                    this._l1 = c[i - 1],
                                    this._li = i,
                                    this._curSeg = u = this._segments[i],
                                    this._s2 = u[this._s1 = this._si = 0]
                                } else if (this._l1 > e && i > 0) {
                                    for (; i > 0 && (this._l1 = c[--i]) >= e; )
                                        ;
                                    0 === i && this._l1 > e ? this._l1 = 0 : i++,
                                    this._l2 = c[i],
                                    this._li = i,
                                    this._curSeg = u = this._segments[i],
                                    this._s1 = u[(this._si = u.length - 1) - 1] || 0,
                                    this._s2 = u[this._si]
                                }
                                if (n = i,
                                e -= this._l1,
                                i = this._si,
                                e > this._s2 && u.length - 1 > i) {
                                    for (h = u.length - 1; h > i && e >= (this._s2 = u[++i]); )
                                        ;
                                    this._s1 = u[i - 1],
                                    this._si = i
                                } else if (this._s1 > e && i > 0) {
                                    for (; i > 0 && (this._s1 = u[--i]) >= e; )
                                        ;
                                    0 === i && this._s1 > e ? this._s1 = 0 : i++,
                                    this._s2 = u[i],
                                    this._si = i
                                }
                                s = (i + (e - this._s1) / (this._s2 - this._s1)) * this._prec
                            } else
                                n = 0 > e ? 0 : e >= 1 ? p - 1 : p * e >> 0,
                                s = (e - n * (1 / p)) * p;
                            for (r = 1 - s,
                            i = this._props.length; --i > -1; )
                                o = this._props[i],
                                a = this._beziers[o][n],
                                l = (s * s * a.da + 3 * r * (s * a.ca + r * a.ba)) * s + a.a,
                                this._round[o] && (l = Math.round(l)),
                                d[o] ? f[o](l) : f[o] = l;
                            if (this._autoRotate) {
                                var g, v, y, _, x, b, w, S = this._autoRotate;
                                for (i = S.length; --i > -1; )
                                    o = S[i][2],
                                    b = S[i][3] || 0,
                                    w = S[i][4] === !0 ? 1 : t,
                                    a = this._beziers[S[i][0]],
                                    g = this._beziers[S[i][1]],
                                    a && g && (a = a[n],
                                    g = g[n],
                                    v = a.a + (a.b - a.a) * s,
                                    _ = a.b + (a.c - a.b) * s,
                                    v += (_ - v) * s,
                                    _ += (a.c + (a.d - a.c) * s - _) * s,
                                    y = g.a + (g.b - g.a) * s,
                                    x = g.b + (g.c - g.b) * s,
                                    y += (x - y) * s,
                                    x += (g.c + (g.d - g.c) * s - x) * s,
                                    l = m ? Math.atan2(x - y, _ - v) * w + b : this._initialRotations[i],
                                    d[o] ? f[o](l) : f[o] = l);
                            }
                        }
                    })
                      , v = g.prototype;
                    g.bezierThrough = p,
                    g.cubicToQuadratic = h,
                    g._autoCSS = !0,
                    g.quadraticToCubic = function(t, e, n) {
                        return new s(t,(2 * e + t) / 3,(2 * e + n) / 3,n)
                    }
                    ,
                    g._cssRegister = function() {
                        var t = a.CSSPlugin;
                        if (t) {
                            var e = t._internals
                              , n = e._parseToProxy
                              , r = e._setPluginRatio
                              , i = e.CSSPropTween;
                            e._registerComplexSpecialProp("bezier", {
                                parser: function(t, e, o, a, s, l) {
                                    e instanceof Array && (e = {
                                        values: e
                                    }),
                                    l = new g;
                                    var h, c, u, p = e.values, d = p.length - 1, f = [], m = {};
                                    if (0 > d)
                                        return s;
                                    for (h = 0; d >= h; h++)
                                        u = n(t, p[h], a, s, l, d !== h),
                                        f[h] = u.end;
                                    for (c in e)
                                        m[c] = e[c];
                                    return m.values = f,
                                    s = new i(t,"bezier",0,0,u.pt,2),
                                    s.data = u,
                                    s.plugin = l,
                                    s.setRatio = r,
                                    0 === m.autoRotate && (m.autoRotate = !0),
                                    !m.autoRotate || m.autoRotate instanceof Array || (h = m.autoRotate === !0 ? 0 : Number(m.autoRotate),
                                    m.autoRotate = null != u.end.left ? [["left", "top", "rotation", h, !1]] : null != u.end.x ? [["x", "y", "rotation", h, !1]] : !1),
                                    m.autoRotate && (a._transform || a._enableTransforms(!1),
                                    u.autoRotate = a._target._gsTransform),
                                    l._onInitTween(u.proxy, m, a._tween),
                                    s
                                }
                            })
                        }
                    }
                    ,
                    v._roundProps = function(t, e) {
                        for (var n = this._overwriteProps, r = n.length; --r > -1; )
                            (t[n[r]] || t.bezier || t.bezierThrough) && (this._round[n[r]] = e)
                    }
                    ,
                    v._kill = function(t) {
                        var e, n, r = this._props;
                        for (e in this._beziers)
                            if (e in t)
                                for (delete this._beziers[e],
                                delete this._func[e],
                                n = r.length; --n > -1; )
                                    r[n] === e && r.splice(n, 1);
                        return this._super._kill.call(this, t)
                    }
                }(),
                n._gsDefine("plugins.CSSPlugin", ["plugins.TweenPlugin", "TweenLite"], function(t, e) {
                    var r, i, o, a, s = function() {
                        t.call(this, "css"),
                        this._overwriteProps.length = 0,
                        this.setRatio = s.prototype.setRatio
                    }, l = n._gsDefine.globals, h = {}, c = s.prototype = new t("css");
                    c.constructor = s,
                    s.version = "1.17.0",
                    s.API = 2,
                    s.defaultTransformPerspective = 0,
                    s.defaultSkewType = "compensated",
                    s.defaultSmoothOrigin = !0,
                    c = "px",
                    s.suffixMap = {
                        top: c,
                        right: c,
                        bottom: c,
                        left: c,
                        width: c,
                        height: c,
                        fontSize: c,
                        padding: c,
                        margin: c,
                        perspective: c,
                        lineHeight: ""
                    };
                    var u, p, d, f, m, g, v = /(?:\d|\-\d|\.\d|\-\.\d)+/g, y = /(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g, _ = /(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi, x = /(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g, b = /(?:\d|\-|\+|=|#|\.)*/g, w = /opacity *= *([^)]*)/i, S = /opacity:([^;]*)/i, T = /alpha\(opacity *=.+?\)/i, M = /^(rgb|hsl)/, C = /([A-Z])/g, A = /-([a-z])/gi, E = /(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi, L = function(t, e) {
                        return e.toUpperCase()
                    }, P = /(?:Left|Right|Width)/i, k = /(M11|M12|M21|M22)=[\d\-\.e]+/gi, R = /progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i, O = /,(?=[^\)]*(?:\(|$))/gi, D = Math.PI / 180, F = 180 / Math.PI, U = {}, I = document, B = function(t) {
                        return I.createElementNS ? I.createElementNS("http://www.w3.org/1999/xhtml", t) : I.createElement(t)
                    }, N = B("div"), j = B("img"), V = s._internals = {
                        _specialProps: h
                    }, G = navigator.userAgent, z = function() {
                        var t = G.indexOf("Android")
                          , e = B("a");
                        return d = -1 !== G.indexOf("Safari") && -1 === G.indexOf("Chrome") && (-1 === t || Number(G.substr(t + 8, 1)) > 3),
                        m = d && 6 > Number(G.substr(G.indexOf("Version/") + 8, 1)),
                        f = -1 !== G.indexOf("Firefox"),
                        (/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(G) || /Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(G)) && (g = parseFloat(RegExp.$1)),
                        e ? (e.style.cssText = "top:1px;opacity:.55;",
                        /^0.55/.test(e.style.opacity)) : !1
                    }(), H = function(t) {
                        return w.test("string" == typeof t ? t : (t.currentStyle ? t.currentStyle.filter : t.style.filter) || "") ? parseFloat(RegExp.$1) / 100 : 1
                    }, W = function(t) {
                        window.console && console.log(t)
                    }, q = "", X = "", Y = function(t, e) {
                        e = e || N;
                        var n, r, i = e.style;
                        if (void 0 !== i[t])
                            return t;
                        for (t = t.charAt(0).toUpperCase() + t.substr(1),
                        n = ["O", "Moz", "ms", "Ms", "Webkit"],
                        r = 5; --r > -1 && void 0 === i[n[r] + t]; )
                            ;
                        return r >= 0 ? (X = 3 === r ? "ms" : n[r],
                        q = "-" + X.toLowerCase() + "-",
                        X + t) : null
                    }, K = I.defaultView ? I.defaultView.getComputedStyle : function() {}
                    , Q = s.getStyle = function(t, e, n, r, i) {
                        var o;
                        return z || "opacity" !== e ? (!r && t.style[e] ? o = t.style[e] : (n = n || K(t)) ? o = n[e] || n.getPropertyValue(e) || n.getPropertyValue(e.replace(C, "-$1").toLowerCase()) : t.currentStyle && (o = t.currentStyle[e]),
                        null == i || o && "none" !== o && "auto" !== o && "auto auto" !== o ? o : i) : H(t)
                    }
                    , Z = V.convertToPixels = function(t, n, r, i, o) {
                        if ("px" === i || !i)
                            return r;
                        if ("auto" === i || !r)
                            return 0;
                        var a, l, h, c = P.test(n), u = t, p = N.style, d = 0 > r;
                        if (d && (r = -r),
                        "%" === i && -1 !== n.indexOf("border"))
                            a = r / 100 * (c ? t.clientWidth : t.clientHeight);
                        else {
                            if (p.cssText = "border:0 solid red;position:" + Q(t, "position") + ";line-height:0;",
                            "%" !== i && u.appendChild)
                                p[c ? "borderLeftWidth" : "borderTopWidth"] = r + i;
                            else {
                                if (u = t.parentNode || I.body,
                                l = u._gsCache,
                                h = e.ticker.frame,
                                l && c && l.time === h)
                                    return l.width * r / 100;
                                p[c ? "width" : "height"] = r + i
                            }
                            u.appendChild(N),
                            a = parseFloat(N[c ? "offsetWidth" : "offsetHeight"]),
                            u.removeChild(N),
                            c && "%" === i && s.cacheWidths !== !1 && (l = u._gsCache = u._gsCache || {},
                            l.time = h,
                            l.width = 100 * (a / r)),
                            0 !== a || o || (a = Z(t, n, r, i, !0))
                        }
                        return d ? -a : a
                    }
                    , J = V.calculateOffset = function(t, e, n) {
                        if ("absolute" !== Q(t, "position", n))
                            return 0;
                        var r = "left" === e ? "Left" : "Top"
                          , i = Q(t, "margin" + r, n);
                        return t["offset" + r] - (Z(t, e, parseFloat(i), i.replace(b, "")) || 0)
                    }
                    , $ = function(t, e) {
                        var n, r, i, o = {};
                        if (e = e || K(t, null ))
                            if (n = e.length)
                                for (; --n > -1; )
                                    i = e[n],
                                    (-1 === i.indexOf("-transform") || Mt === i) && (o[i.replace(A, L)] = e.getPropertyValue(i));
                            else
                                for (n in e)
                                    (-1 === n.indexOf("Transform") || Tt === n) && (o[n] = e[n]);
                        else if (e = t.currentStyle || t.style)
                            for (n in e)
                                "string" == typeof n && void 0 === o[n] && (o[n.replace(A, L)] = e[n]);
                        return z || (o.opacity = H(t)),
                        r = It(t, e, !1),
                        o.rotation = r.rotation,
                        o.skewX = r.skewX,
                        o.scaleX = r.scaleX,
                        o.scaleY = r.scaleY,
                        o.x = r.x,
                        o.y = r.y,
                        At && (o.z = r.z,
                        o.rotationX = r.rotationX,
                        o.rotationY = r.rotationY,
                        o.scaleZ = r.scaleZ),
                        o.filters && delete o.filters,
                        o
                    }, tt = function(t, e, n, r, i) {
                        var o, a, s, l = {}, h = t.style;
                        for (a in n)
                            "cssText" !== a && "length" !== a && isNaN(a) && (e[a] !== (o = n[a]) || i && i[a]) && -1 === a.indexOf("Origin") && ("number" == typeof o || "string" == typeof o) && (l[a] = "auto" !== o || "left" !== a && "top" !== a ? "" !== o && "auto" !== o && "none" !== o || "string" != typeof e[a] || "" === e[a].replace(x, "") ? o : 0 : J(t, a),
                            void 0 !== h[a] && (s = new ft(h,a,h[a],s)));
                        if (r)
                            for (a in r)
                                "className" !== a && (l[a] = r[a]);
                        return {
                            difs: l,
                            firstMPT: s
                        }
                    }, et = {
                        width: ["Left", "Right"],
                        height: ["Top", "Bottom"]
                    }, nt = ["marginLeft", "marginRight", "marginTop", "marginBottom"], rt = function(t, e, n) {
                        var r = parseFloat("width" === e ? t.offsetWidth : t.offsetHeight)
                          , i = et[e]
                          , o = i.length;
                        for (n = n || K(t, null ); --o > -1; )
                            r -= parseFloat(Q(t, "padding" + i[o], n, !0)) || 0,
                            r -= parseFloat(Q(t, "border" + i[o] + "Width", n, !0)) || 0;
                        return r
                    }, it = function(t, e) {
                        (null == t || "" === t || "auto" === t || "auto auto" === t) && (t = "0 0");
                        var n = t.split(" ")
                          , r = -1 !== t.indexOf("left") ? "0%" : -1 !== t.indexOf("right") ? "100%" : n[0]
                          , i = -1 !== t.indexOf("top") ? "0%" : -1 !== t.indexOf("bottom") ? "100%" : n[1];
                        return null == i ? i = "center" === r ? "50%" : "0" : "center" === i && (i = "50%"),
                        ("center" === r || isNaN(parseFloat(r)) && -1 === (r + "").indexOf("=")) && (r = "50%"),
                        t = r + " " + i + (n.length > 2 ? " " + n[2] : ""),
                        e && (e.oxp = -1 !== r.indexOf("%"),
                        e.oyp = -1 !== i.indexOf("%"),
                        e.oxr = "=" === r.charAt(1),
                        e.oyr = "=" === i.charAt(1),
                        e.ox = parseFloat(r.replace(x, "")),
                        e.oy = parseFloat(i.replace(x, "")),
                        e.v = t),
                        e || t
                    }, ot = function(t, e) {
                        return "string" == typeof t && "=" === t.charAt(1) ? parseInt(t.charAt(0) + "1", 10) * parseFloat(t.substr(2)) : parseFloat(t) - parseFloat(e)
                    }, at = function(t, e) {
                        return null == t ? e : "string" == typeof t && "=" === t.charAt(1) ? parseInt(t.charAt(0) + "1", 10) * parseFloat(t.substr(2)) + e : parseFloat(t)
                    }, st = function(t, e, n, r) {
                        var i, o, a, s, l, h = 1e-6;
                        return null == t ? s = e : "number" == typeof t ? s = t : (i = 360,
                        o = t.split("_"),
                        l = "=" === t.charAt(1),
                        a = (l ? parseInt(t.charAt(0) + "1", 10) * parseFloat(o[0].substr(2)) : parseFloat(o[0])) * (-1 === t.indexOf("rad") ? 1 : F) - (l ? 0 : e),
                        o.length && (r && (r[n] = e + a),
                        -1 !== t.indexOf("short") && (a %= i,
                        a !== a % (i / 2) && (a = 0 > a ? a + i : a - i)),
                        -1 !== t.indexOf("_cw") && 0 > a ? a = (a + 9999999999 * i) % i - (0 | a / i) * i : -1 !== t.indexOf("ccw") && a > 0 && (a = (a - 9999999999 * i) % i - (0 | a / i) * i)),
                        s = e + a),
                        h > s && s > -h && (s = 0),
                        s
                    }, lt = {
                        aqua: [0, 255, 255],
                        lime: [0, 255, 0],
                        silver: [192, 192, 192],
                        black: [0, 0, 0],
                        maroon: [128, 0, 0],
                        teal: [0, 128, 128],
                        blue: [0, 0, 255],
                        navy: [0, 0, 128],
                        white: [255, 255, 255],
                        fuchsia: [255, 0, 255],
                        olive: [128, 128, 0],
                        yellow: [255, 255, 0],
                        orange: [255, 165, 0],
                        gray: [128, 128, 128],
                        purple: [128, 0, 128],
                        green: [0, 128, 0],
                        red: [255, 0, 0],
                        pink: [255, 192, 203],
                        cyan: [0, 255, 255],
                        transparent: [255, 255, 255, 0]
                    }, ht = function(t, e, n) {
                        return t = 0 > t ? t + 1 : t > 1 ? t - 1 : t,
                        0 | 255 * (1 > 6 * t ? e + 6 * (n - e) * t : .5 > t ? n : 2 > 3 * t ? e + 6 * (n - e) * (2 / 3 - t) : e) + .5
                    }, ct = s.parseColor = function(t) {
                        var e, n, r, i, o, a;
                        return t && "" !== t ? "number" == typeof t ? [t >> 16, 255 & t >> 8, 255 & t] : ("," === t.charAt(t.length - 1) && (t = t.substr(0, t.length - 1)),
                        lt[t] ? lt[t] : "#" === t.charAt(0) ? (4 === t.length && (e = t.charAt(1),
                        n = t.charAt(2),
                        r = t.charAt(3),
                        t = "#" + e + e + n + n + r + r),
                        t = parseInt(t.substr(1), 16),
                        [t >> 16, 255 & t >> 8, 255 & t]) : "hsl" === t.substr(0, 3) ? (t = t.match(v),
                        i = Number(t[0]) % 360 / 360,
                        o = Number(t[1]) / 100,
                        a = Number(t[2]) / 100,
                        n = .5 >= a ? a * (o + 1) : a + o - a * o,
                        e = 2 * a - n,
                        t.length > 3 && (t[3] = Number(t[3])),
                        t[0] = ht(i + 1 / 3, e, n),
                        t[1] = ht(i, e, n),
                        t[2] = ht(i - 1 / 3, e, n),
                        t) : (t = t.match(v) || lt.transparent,
                        t[0] = Number(t[0]),
                        t[1] = Number(t[1]),
                        t[2] = Number(t[2]),
                        t.length > 3 && (t[3] = Number(t[3])),
                        t)) : lt.black
                    }
                    , ut = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";
                    for (c in lt)
                        ut += "|" + c + "\\b";
                    ut = RegExp(ut + ")", "gi");
                    var pt = function(t, e, n, r) {
                        if (null == t)
                            return function(t) {
                                return t
                            }
                            ;
                        var i, o = e ? (t.match(ut) || [""])[0] : "", a = t.split(o).join("").match(_) || [], s = t.substr(0, t.indexOf(a[0])), l = ")" === t.charAt(t.length - 1) ? ")" : "", h = -1 !== t.indexOf(" ") ? " " : ",", c = a.length, u = c > 0 ? a[0].replace(v, "") : "";
                        return c ? i = e ? function(t) {
                            var e, p, d, f;
                            if ("number" == typeof t)
                                t += u;
                            else if (r && O.test(t)) {
                                for (f = t.replace(O, "|").split("|"),
                                d = 0; f.length > d; d++)
                                    f[d] = i(f[d]);
                                return f.join(",")
                            }
                            if (e = (t.match(ut) || [o])[0],
                            p = t.split(e).join("").match(_) || [],
                            d = p.length,
                            c > d--)
                                for (; c > ++d; )
                                    p[d] = n ? p[0 | (d - 1) / 2] : a[d];
                            return s + p.join(h) + h + e + l + (-1 !== t.indexOf("inset") ? " inset" : "")
                        }
                        : function(t) {
                            var e, o, p;
                            if ("number" == typeof t)
                                t += u;
                            else if (r && O.test(t)) {
                                for (o = t.replace(O, "|").split("|"),
                                p = 0; o.length > p; p++)
                                    o[p] = i(o[p]);
                                return o.join(",")
                            }
                            if (e = t.match(_) || [],
                            p = e.length,
                            c > p--)
                                for (; c > ++p; )
                                    e[p] = n ? e[0 | (p - 1) / 2] : a[p];
                            return s + e.join(h) + l
                        }
                        : function(t) {
                            return t
                        }
                    }
                      , dt = function(t) {
                        return t = t.split(","),
                        function(e, n, r, i, o, a, s) {
                            var l, h = (n + "").split(" ");
                            for (s = {},
                            l = 0; 4 > l; l++)
                                s[t[l]] = h[l] = h[l] || h[(l - 1) / 2 >> 0];
                            return i.parse(e, s, o, a)
                        }
                    }
                      , ft = (V._setPluginRatio = function(t) {
                        this.plugin.setRatio(t);
                        for (var e, n, r, i, o = this.data, a = o.proxy, s = o.firstMPT, l = 1e-6; s; )
                            e = a[s.v],
                            s.r ? e = Math.round(e) : l > e && e > -l && (e = 0),
                            s.t[s.p] = e,
                            s = s._next;
                        if (o.autoRotate && (o.autoRotate.rotation = a.rotation),
                        1 === t)
                            for (s = o.firstMPT; s; ) {
                                if (n = s.t,
                                n.type) {
                                    if (1 === n.type) {
                                        for (i = n.xs0 + n.s + n.xs1,
                                        r = 1; n.l > r; r++)
                                            i += n["xn" + r] + n["xs" + (r + 1)];
                                        n.e = i
                                    }
                                } else
                                    n.e = n.s + n.xs0;
                                s = s._next
                            }
                    }
                    ,
                    function(t, e, n, r, i) {
                        this.t = t,
                        this.p = e,
                        this.v = n,
                        this.r = i,
                        r && (r._prev = this,
                        this._next = r)
                    }
                    )
                      , mt = (V._parseToProxy = function(t, e, n, r, i, o) {
                        var a, s, l, h, c, u = r, p = {}, d = {}, f = n._transform, m = U;
                        for (n._transform = null ,
                        U = e,
                        r = c = n.parse(t, e, r, i),
                        U = m,
                        o && (n._transform = f,
                        u && (u._prev = null ,
                        u._prev && (u._prev._next = null ))); r && r !== u; ) {
                            if (1 >= r.type && (s = r.p,
                            d[s] = r.s + r.c,
                            p[s] = r.s,
                            o || (h = new ft(r,"s",s,h,r.r),
                            r.c = 0),
                            1 === r.type))
                                for (a = r.l; --a > 0; )
                                    l = "xn" + a,
                                    s = r.p + "_" + l,
                                    d[s] = r.data[l],
                                    p[s] = r[l],
                                    o || (h = new ft(r,l,s,h,r.rxp[l]));
                            r = r._next
                        }
                        return {
                            proxy: p,
                            end: d,
                            firstMPT: h,
                            pt: c
                        }
                    }
                    ,
                    V.CSSPropTween = function(t, e, n, i, o, s, l, h, c, u, p) {
                        this.t = t,
                        this.p = e,
                        this.s = n,
                        this.c = i,
                        this.n = l || e,
                        t instanceof mt || a.push(this.n),
                        this.r = h,
                        this.type = s || 0,
                        c && (this.pr = c,
                        r = !0),
                        this.b = void 0 === u ? n : u,
                        this.e = void 0 === p ? n + i : p,
                        o && (this._next = o,
                        o._prev = this)
                    }
                    )
                      , gt = function(t, e, n, r, i, o) {
                        var a = new mt(t,e,n,r - n,i,-1,o);
                        return a.b = n,
                        a.e = a.xs0 = r,
                        a
                    }
                      , vt = s.parseComplex = function(t, e, n, r, i, o, a, s, l, h) {
                        n = n || o || "",
                        a = new mt(t,e,0,0,a,h ? 2 : 1,null ,!1,s,n,r),
                        r += "";
                        var c, p, d, f, m, g, _, x, b, w, S, T, C = n.split(", ").join(",").split(" "), A = r.split(", ").join(",").split(" "), E = C.length, L = u !== !1;
                        for ((-1 !== r.indexOf(",") || -1 !== n.indexOf(",")) && (C = C.join(" ").replace(O, ", ").split(" "),
                        A = A.join(" ").replace(O, ", ").split(" "),
                        E = C.length),
                        E !== A.length && (C = (o || "").split(" "),
                        E = C.length),
                        a.plugin = l,
                        a.setRatio = h,
                        c = 0; E > c; c++)
                            if (f = C[c],
                            m = A[c],
                            x = parseFloat(f),
                            x || 0 === x)
                                a.appendXtra("", x, ot(m, x), m.replace(y, ""), L && -1 !== m.indexOf("px"), !0);
                            else if (i && ("#" === f.charAt(0) || lt[f] || M.test(f)))
                                T = "," === m.charAt(m.length - 1) ? ")," : ")",
                                f = ct(f),
                                m = ct(m),
                                b = f.length + m.length > 6,
                                b && !z && 0 === m[3] ? (a["xs" + a.l] += a.l ? " transparent" : "transparent",
                                a.e = a.e.split(A[c]).join("transparent")) : (z || (b = !1),
                                a.appendXtra(b ? "rgba(" : "rgb(", f[0], m[0] - f[0], ",", !0, !0).appendXtra("", f[1], m[1] - f[1], ",", !0).appendXtra("", f[2], m[2] - f[2], b ? "," : T, !0),
                                b && (f = 4 > f.length ? 1 : f[3],
                                a.appendXtra("", f, (4 > m.length ? 1 : m[3]) - f, T, !1)));
                            else if (g = f.match(v)) {
                                if (_ = m.match(y),
                                !_ || _.length !== g.length)
                                    return a;
                                for (d = 0,
                                p = 0; g.length > p; p++)
                                    S = g[p],
                                    w = f.indexOf(S, d),
                                    a.appendXtra(f.substr(d, w - d), Number(S), ot(_[p], S), "", L && "px" === f.substr(w + S.length, 2), 0 === p),
                                    d = w + S.length;
                                a["xs" + a.l] += f.substr(d)
                            } else
                                a["xs" + a.l] += a.l ? " " + f : f;
                        if (-1 !== r.indexOf("=") && a.data) {
                            for (T = a.xs0 + a.data.s,
                            c = 1; a.l > c; c++)
                                T += a["xs" + c] + a.data["xn" + c];
                            a.e = T + a["xs" + c]
                        }
                        return a.l || (a.type = -1,
                        a.xs0 = a.e),
                        a.xfirst || a
                    }
                      , yt = 9;
                    for (c = mt.prototype,
                    c.l = c.pr = 0; --yt > 0; )
                        c["xn" + yt] = 0,
                        c["xs" + yt] = "";
                    c.xs0 = "",
                    c._next = c._prev = c.xfirst = c.data = c.plugin = c.setRatio = c.rxp = null ,
                    c.appendXtra = function(t, e, n, r, i, o) {
                        var a = this
                          , s = a.l;
                        return a["xs" + s] += o && s ? " " + t : t || "",
                        n || 0 === s || a.plugin ? (a.l++,
                        a.type = a.setRatio ? 2 : 1,
                        a["xs" + a.l] = r || "",
                        s > 0 ? (a.data["xn" + s] = e + n,
                        a.rxp["xn" + s] = i,
                        a["xn" + s] = e,
                        a.plugin || (a.xfirst = new mt(a,"xn" + s,e,n,a.xfirst || a,0,a.n,i,a.pr),
                        a.xfirst.xs0 = 0),
                        a) : (a.data = {
                            s: e + n
                        },
                        a.rxp = {},
                        a.s = e,
                        a.c = n,
                        a.r = i,
                        a)) : (a["xs" + s] += e + (r || ""),
                        a)
                    }
                    ;
                    var _t = function(t, e) {
                        e = e || {},
                        this.p = e.prefix ? Y(t) || t : t,
                        h[t] = h[this.p] = this,
                        this.format = e.formatter || pt(e.defaultValue, e.color, e.collapsible, e.multi),
                        e.parser && (this.parse = e.parser),
                        this.clrs = e.color,
                        this.multi = e.multi,
                        this.keyword = e.keyword,
                        this.dflt = e.defaultValue,
                        this.pr = e.priority || 0
                    }
                      , xt = V._registerComplexSpecialProp = function(t, e, n) {
                        "object" != typeof e && (e = {
                            parser: n
                        });
                        var r, i, o = t.split(","), a = e.defaultValue;
                        for (n = n || [a],
                        r = 0; o.length > r; r++)
                            e.prefix = 0 === r && e.prefix,
                            e.defaultValue = n[r] || a,
                            i = new _t(o[r],e)
                    }
                      , bt = function(t) {
                        if (!h[t]) {
                            var e = t.charAt(0).toUpperCase() + t.substr(1) + "Plugin";
                            xt(t, {
                                parser: function(t, n, r, i, o, a, s) {
                                    var c = l.com.greensock.plugins[e];
                                    return c ? (c._cssRegister(),
                                    h[r].parse(t, n, r, i, o, a, s)) : (W("Error: " + e + " js file not loaded."),
                                    o)
                                }
                            })
                        }
                    };
                    c = _t.prototype,
                    c.parseComplex = function(t, e, n, r, i, o) {
                        var a, s, l, h, c, u, p = this.keyword;
                        if (this.multi && (O.test(n) || O.test(e) ? (s = e.replace(O, "|").split("|"),
                        l = n.replace(O, "|").split("|")) : p && (s = [e],
                        l = [n])),
                        l) {
                            for (h = l.length > s.length ? l.length : s.length,
                            a = 0; h > a; a++)
                                e = s[a] = s[a] || this.dflt,
                                n = l[a] = l[a] || this.dflt,
                                p && (c = e.indexOf(p),
                                u = n.indexOf(p),
                                c !== u && (-1 === u ? s[a] = s[a].split(p).join("") : -1 === c && (s[a] += " " + p)));
                            e = s.join(", "),
                            n = l.join(", ")
                        }
                        return vt(t, this.p, e, n, this.clrs, this.dflt, r, this.pr, i, o)
                    }
                    ,
                    c.parse = function(t, e, n, r, i, a) {
                        return this.parseComplex(t.style, this.format(Q(t, this.p, o, !1, this.dflt)), this.format(e), i, a)
                    }
                    ,
                    s.registerSpecialProp = function(t, e, n) {
                        xt(t, {
                            parser: function(t, r, i, o, a, s) {
                                var l = new mt(t,i,0,0,a,2,i,!1,n);
                                return l.plugin = s,
                                l.setRatio = e(t, r, o._tween, i),
                                l
                            },
                            priority: n
                        })
                    }
                    ,
                    s.useSVGTransformAttr = d || f;
                    var wt, St = "scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","), Tt = Y("transform"), Mt = q + "transform", Ct = Y("transformOrigin"), At = null !== Y("perspective"), Et = V.Transform = function() {
                        this.perspective = parseFloat(s.defaultTransformPerspective) || 0,
                        this.force3D = s.defaultForce3D !== !1 && At ? s.defaultForce3D || "auto" : !1
                    }
                    , Lt = window.SVGElement, Pt = function(t, e, n) {
                        var r, i = I.createElementNS("http://www.w3.org/2000/svg", t), o = /([a-z])([A-Z])/g;
                        for (r in n)
                            i.setAttributeNS(null , r.replace(o, "$1-$2").toLowerCase(), n[r]);
                        return e.appendChild(i),
                        i
                    }, kt = I.documentElement, Rt = function() {
                        var t, e, n, r = g || /Android/i.test(G) && !window.chrome;
                        return I.createElementNS && !r && (t = Pt("svg", kt),
                        e = Pt("rect", t, {
                            width: 100,
                            height: 50,
                            x: 100
                        }),
                        n = e.getBoundingClientRect().width,
                        e.style[Ct] = "50% 50%",
                        e.style[Tt] = "scaleX(0.5)",
                        r = n === e.getBoundingClientRect().width && !(f && At),
                        kt.removeChild(t)),
                        r
                    }(), Ot = function(t, e, n, r, i) {
                        var o, a, l, h, c, u, p, d, f, m, g, v, y, _, x = t._gsTransform, b = Ut(t, !0);
                        x && (y = x.xOrigin,
                        _ = x.yOrigin),
                        (!r || 2 > (o = r.split(" ")).length) && (p = t.getBBox(),
                        e = it(e).split(" "),
                        o = [(-1 !== e[0].indexOf("%") ? parseFloat(e[0]) / 100 * p.width : parseFloat(e[0])) + p.x, (-1 !== e[1].indexOf("%") ? parseFloat(e[1]) / 100 * p.height : parseFloat(e[1])) + p.y]),
                        n.xOrigin = h = parseFloat(o[0]),
                        n.yOrigin = c = parseFloat(o[1]),
                        r && b !== Ft && (u = b[0],
                        p = b[1],
                        d = b[2],
                        f = b[3],
                        m = b[4],
                        g = b[5],
                        v = u * f - p * d,
                        a = h * (f / v) + c * (-d / v) + (d * g - f * m) / v,
                        l = h * (-p / v) + c * (u / v) - (u * g - p * m) / v,
                        h = n.xOrigin = o[0] = a,
                        c = n.yOrigin = o[1] = l),
                        x && (i || i !== !1 && s.defaultSmoothOrigin !== !1 ? (a = h - y,
                        l = c - _,
                        x.xOffset += a * b[0] + l * b[2] - a,
                        x.yOffset += a * b[1] + l * b[3] - l) : x.xOffset = x.yOffset = 0),
                        t.setAttribute("data-svg-origin", o.join(" "))
                    }, Dt = function(t) {
                        return !!(Lt && "function" == typeof t.getBBox && t.getCTM && (!t.parentNode || t.parentNode.getBBox && t.parentNode.getCTM))
                    }, Ft = [1, 0, 0, 1, 0, 0], Ut = function(t, e) {
                        var n, r, i, o, a, s = t._gsTransform || new Et, l = 1e5;
                        if (Tt ? r = Q(t, Mt, null , !0) : t.currentStyle && (r = t.currentStyle.filter.match(k),
                        r = r && 4 === r.length ? [r[0].substr(4), Number(r[2].substr(4)), Number(r[1].substr(4)), r[3].substr(4), s.x || 0, s.y || 0].join(",") : ""),
                        n = !r || "none" === r || "matrix(1, 0, 0, 1, 0, 0)" === r,
                        (s.svg || t.getBBox && Dt(t)) && (n && -1 !== (t.style[Tt] + "").indexOf("matrix") && (r = t.style[Tt],
                        n = 0),
                        i = t.getAttribute("transform"),
                        n && i && (-1 !== i.indexOf("matrix") ? (r = i,
                        n = 0) : -1 !== i.indexOf("translate") && (r = "matrix(1,0,0,1," + i.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",") + ")",
                        n = 0))),
                        n)
                            return Ft;
                        for (i = (r || "").match(/(?:\-|\b)[\d\-\.e]+\b/gi) || [],
                        yt = i.length; --yt > -1; )
                            o = Number(i[yt]),
                            i[yt] = (a = o - (o |= 0)) ? (0 | a * l + (0 > a ? -.5 : .5)) / l + o : o;
                        return e && i.length > 6 ? [i[0], i[1], i[4], i[5], i[12], i[13]] : i
                    }, It = V.getTransform = function(t, n, r, i) {
                        if (t._gsTransform && r && !i)
                            return t._gsTransform;
                        var a, l, h, c, u, p, d = r ? t._gsTransform || new Et : new Et, f = 0 > d.scaleX, m = 2e-5, g = 1e5, v = At ? parseFloat(Q(t, Ct, n, !1, "0 0 0").split(" ")[2]) || d.zOrigin || 0 : 0, y = parseFloat(s.defaultTransformPerspective) || 0;
                        if (d.svg = !(!t.getBBox || !Dt(t)),
                        d.svg && (Ot(t, Q(t, Ct, o, !1, "50% 50%") + "", d, t.getAttribute("data-svg-origin")),
                        wt = s.useSVGTransformAttr || Rt),
                        a = Ut(t),
                        a !== Ft) {
                            if (16 === a.length) {
                                var _, x, b, w, S, T = a[0], M = a[1], C = a[2], A = a[3], E = a[4], L = a[5], P = a[6], k = a[7], R = a[8], O = a[9], D = a[10], U = a[12], I = a[13], B = a[14], N = a[11], j = Math.atan2(P, D);
                                d.zOrigin && (B = -d.zOrigin,
                                U = R * B - a[12],
                                I = O * B - a[13],
                                B = D * B + d.zOrigin - a[14]),
                                d.rotationX = j * F,
                                j && (w = Math.cos(-j),
                                S = Math.sin(-j),
                                _ = E * w + R * S,
                                x = L * w + O * S,
                                b = P * w + D * S,
                                R = E * -S + R * w,
                                O = L * -S + O * w,
                                D = P * -S + D * w,
                                N = k * -S + N * w,
                                E = _,
                                L = x,
                                P = b),
                                j = Math.atan2(R, D),
                                d.rotationY = j * F,
                                j && (w = Math.cos(-j),
                                S = Math.sin(-j),
                                _ = T * w - R * S,
                                x = M * w - O * S,
                                b = C * w - D * S,
                                O = M * S + O * w,
                                D = C * S + D * w,
                                N = A * S + N * w,
                                T = _,
                                M = x,
                                C = b),
                                j = Math.atan2(M, T),
                                d.rotation = j * F,
                                j && (w = Math.cos(-j),
                                S = Math.sin(-j),
                                T = T * w + E * S,
                                x = M * w + L * S,
                                L = M * -S + L * w,
                                P = C * -S + P * w,
                                M = x),
                                d.rotationX && Math.abs(d.rotationX) + Math.abs(d.rotation) > 359.9 && (d.rotationX = d.rotation = 0,
                                d.rotationY += 180),
                                d.scaleX = (0 | Math.sqrt(T * T + M * M) * g + .5) / g,
                                d.scaleY = (0 | Math.sqrt(L * L + O * O) * g + .5) / g,
                                d.scaleZ = (0 | Math.sqrt(P * P + D * D) * g + .5) / g,
                                d.skewX = 0,
                                d.perspective = N ? 1 / (0 > N ? -N : N) : 0,
                                d.x = U,
                                d.y = I,
                                d.z = B,
                                d.svg && (d.x -= d.xOrigin - (d.xOrigin * T - d.yOrigin * E),
                                d.y -= d.yOrigin - (d.yOrigin * M - d.xOrigin * L))
                            } else if (!(At && !i && a.length && d.x === a[4] && d.y === a[5] && (d.rotationX || d.rotationY) || void 0 !== d.x && "none" === Q(t, "display", n))) {
                                var V = a.length >= 6
                                  , G = V ? a[0] : 1
                                  , z = a[1] || 0
                                  , H = a[2] || 0
                                  , W = V ? a[3] : 1;
                                d.x = a[4] || 0,
                                d.y = a[5] || 0,
                                h = Math.sqrt(G * G + z * z),
                                c = Math.sqrt(W * W + H * H),
                                u = G || z ? Math.atan2(z, G) * F : d.rotation || 0,
                                p = H || W ? Math.atan2(H, W) * F + u : d.skewX || 0,
                                Math.abs(p) > 90 && 270 > Math.abs(p) && (f ? (h *= -1,
                                p += 0 >= u ? 180 : -180,
                                u += 0 >= u ? 180 : -180) : (c *= -1,
                                p += 0 >= p ? 180 : -180)),
                                d.scaleX = h,
                                d.scaleY = c,
                                d.rotation = u,
                                d.skewX = p,
                                At && (d.rotationX = d.rotationY = d.z = 0,
                                d.perspective = y,
                                d.scaleZ = 1),
                                d.svg && (d.x -= d.xOrigin - (d.xOrigin * G + d.yOrigin * H),
                                d.y -= d.yOrigin - (d.xOrigin * z + d.yOrigin * W))
                            }
                            d.zOrigin = v;
                            for (l in d)
                                m > d[l] && d[l] > -m && (d[l] = 0)
                        }
                        return r && (t._gsTransform = d,
                        d.svg && (wt && t.style[Tt] ? e.delayedCall(.001, function() {
                            Vt(t.style, Tt)
                        }) : !wt && t.getAttribute("transform") && e.delayedCall(.001, function() {
                            t.removeAttribute("transform")
                        }))),
                        d
                    }
                    , Bt = function(t) {
                        var e, n, r = this.data, i = -r.rotation * D, o = i + r.skewX * D, a = 1e5, s = (0 | Math.cos(i) * r.scaleX * a) / a, l = (0 | Math.sin(i) * r.scaleX * a) / a, h = (0 | Math.sin(o) * -r.scaleY * a) / a, c = (0 | Math.cos(o) * r.scaleY * a) / a, u = this.t.style, p = this.t.currentStyle;
                        if (p) {
                            n = l,
                            l = -h,
                            h = -n,
                            e = p.filter,
                            u.filter = "";
                            var d, f, m = this.t.offsetWidth, v = this.t.offsetHeight, y = "absolute" !== p.position, _ = "progid:DXImageTransform.Microsoft.Matrix(M11=" + s + ", M12=" + l + ", M21=" + h + ", M22=" + c, x = r.x + m * r.xPercent / 100, S = r.y + v * r.yPercent / 100;
                            if (null != r.ox && (d = (r.oxp ? .01 * m * r.ox : r.ox) - m / 2,
                            f = (r.oyp ? .01 * v * r.oy : r.oy) - v / 2,
                            x += d - (d * s + f * l),
                            S += f - (d * h + f * c)),
                            y ? (d = m / 2,
                            f = v / 2,
                            _ += ", Dx=" + (d - (d * s + f * l) + x) + ", Dy=" + (f - (d * h + f * c) + S) + ")") : _ += ", sizingMethod='auto expand')",
                            u.filter = -1 !== e.indexOf("DXImageTransform.Microsoft.Matrix(") ? e.replace(R, _) : _ + " " + e,
                            (0 === t || 1 === t) && 1 === s && 0 === l && 0 === h && 1 === c && (y && -1 === _.indexOf("Dx=0, Dy=0") || w.test(e) && 100 !== parseFloat(RegExp.$1) || -1 === e.indexOf(e.indexOf("Alpha")) && u.removeAttribute("filter")),
                            !y) {
                                var T, M, C, A = 8 > g ? 1 : -1;
                                for (d = r.ieOffsetX || 0,
                                f = r.ieOffsetY || 0,
                                r.ieOffsetX = Math.round((m - ((0 > s ? -s : s) * m + (0 > l ? -l : l) * v)) / 2 + x),
                                r.ieOffsetY = Math.round((v - ((0 > c ? -c : c) * v + (0 > h ? -h : h) * m)) / 2 + S),
                                yt = 0; 4 > yt; yt++)
                                    M = nt[yt],
                                    T = p[M],
                                    n = -1 !== T.indexOf("px") ? parseFloat(T) : Z(this.t, M, parseFloat(T), T.replace(b, "")) || 0,
                                    C = n !== r[M] ? 2 > yt ? -r.ieOffsetX : -r.ieOffsetY : 2 > yt ? d - r.ieOffsetX : f - r.ieOffsetY,
                                    u[M] = (r[M] = Math.round(n - C * (0 === yt || 2 === yt ? 1 : A))) + "px"
                            }
                        }
                    }, Nt = V.set3DTransformRatio = V.setTransformRatio = function(t) {
                        var e, n, r, i, o, a, s, l, h, c, u, p, d, m, g, v, y, _, x, b, w, S, T, M = this.data, C = this.t.style, A = M.rotation, E = M.rotationX, L = M.rotationY, P = M.scaleX, k = M.scaleY, R = M.scaleZ, O = M.x, F = M.y, U = M.z, I = M.svg, B = M.perspective, N = M.force3D;
                        if (!((1 !== t && 0 !== t || "auto" !== N || this.tween._totalTime !== this.tween._totalDuration && this.tween._totalTime) && N || U || B || L || E) || wt && I || !At)
                            return void (A || M.skewX || I ? (A *= D,
                            S = M.skewX * D,
                            T = 1e5,
                            e = Math.cos(A) * P,
                            i = Math.sin(A) * P,
                            n = Math.sin(A - S) * -k,
                            o = Math.cos(A - S) * k,
                            S && "simple" === M.skewType && (y = Math.tan(S),
                            y = Math.sqrt(1 + y * y),
                            n *= y,
                            o *= y,
                            M.skewY && (e *= y,
                            i *= y)),
                            I && (O += M.xOrigin - (M.xOrigin * e + M.yOrigin * n) + M.xOffset,
                            F += M.yOrigin - (M.xOrigin * i + M.yOrigin * o) + M.yOffset,
                            wt && (M.xPercent || M.yPercent) && (m = this.t.getBBox(),
                            O += .01 * M.xPercent * m.width,
                            F += .01 * M.yPercent * m.height),
                            m = 1e-6,
                            m > O && O > -m && (O = 0),
                            m > F && F > -m && (F = 0)),
                            x = (0 | e * T) / T + "," + (0 | i * T) / T + "," + (0 | n * T) / T + "," + (0 | o * T) / T + "," + O + "," + F + ")",
                            I && wt ? this.t.setAttribute("transform", "matrix(" + x) : C[Tt] = (M.xPercent || M.yPercent ? "translate(" + M.xPercent + "%," + M.yPercent + "%) matrix(" : "matrix(") + x) : C[Tt] = (M.xPercent || M.yPercent ? "translate(" + M.xPercent + "%," + M.yPercent + "%) matrix(" : "matrix(") + P + ",0,0," + k + "," + O + "," + F + ")");
                        if (f && (m = 1e-4,
                        m > P && P > -m && (P = R = 2e-5),
                        m > k && k > -m && (k = R = 2e-5),
                        !B || M.z || M.rotationX || M.rotationY || (B = 0)),
                        A || M.skewX)
                            A *= D,
                            g = e = Math.cos(A),
                            v = i = Math.sin(A),
                            M.skewX && (A -= M.skewX * D,
                            g = Math.cos(A),
                            v = Math.sin(A),
                            "simple" === M.skewType && (y = Math.tan(M.skewX * D),
                            y = Math.sqrt(1 + y * y),
                            g *= y,
                            v *= y,
                            M.skewY && (e *= y,
                            i *= y))),
                            n = -v,
                            o = g;
                        else {
                            if (!(L || E || 1 !== R || B || I))
                                return void (C[Tt] = (M.xPercent || M.yPercent ? "translate(" + M.xPercent + "%," + M.yPercent + "%) translate3d(" : "translate3d(") + O + "px," + F + "px," + U + "px)" + (1 !== P || 1 !== k ? " scale(" + P + "," + k + ")" : ""));
                            e = o = 1,
                            n = i = 0
                        }
                        h = 1,
                        r = a = s = l = c = u = 0,
                        p = B ? -1 / B : 0,
                        d = M.zOrigin,
                        m = 1e-6,
                        b = ",",
                        w = "0",
                        A = L * D,
                        A && (g = Math.cos(A),
                        v = Math.sin(A),
                        s = -v,
                        c = p * -v,
                        r = e * v,
                        a = i * v,
                        h = g,
                        p *= g,
                        e *= g,
                        i *= g),
                        A = E * D,
                        A && (g = Math.cos(A),
                        v = Math.sin(A),
                        y = n * g + r * v,
                        _ = o * g + a * v,
                        l = h * v,
                        u = p * v,
                        r = n * -v + r * g,
                        a = o * -v + a * g,
                        h *= g,
                        p *= g,
                        n = y,
                        o = _),
                        1 !== R && (r *= R,
                        a *= R,
                        h *= R,
                        p *= R),
                        1 !== k && (n *= k,
                        o *= k,
                        l *= k,
                        u *= k),
                        1 !== P && (e *= P,
                        i *= P,
                        s *= P,
                        c *= P),
                        (d || I) && (d && (O += r * -d,
                        F += a * -d,
                        U += h * -d + d),
                        I && (O += M.xOrigin - (M.xOrigin * e + M.yOrigin * n) + M.xOffset,
                        F += M.yOrigin - (M.xOrigin * i + M.yOrigin * o) + M.yOffset),
                        m > O && O > -m && (O = w),
                        m > F && F > -m && (F = w),
                        m > U && U > -m && (U = 0)),
                        x = M.xPercent || M.yPercent ? "translate(" + M.xPercent + "%," + M.yPercent + "%) matrix3d(" : "matrix3d(",
                        x += (m > e && e > -m ? w : e) + b + (m > i && i > -m ? w : i) + b + (m > s && s > -m ? w : s),
                        x += b + (m > c && c > -m ? w : c) + b + (m > n && n > -m ? w : n) + b + (m > o && o > -m ? w : o),
                        E || L ? (x += b + (m > l && l > -m ? w : l) + b + (m > u && u > -m ? w : u) + b + (m > r && r > -m ? w : r),
                        x += b + (m > a && a > -m ? w : a) + b + (m > h && h > -m ? w : h) + b + (m > p && p > -m ? w : p) + b) : x += ",0,0,0,0,1,0,",
                        x += O + b + F + b + U + b + (B ? 1 + -U / B : 1) + ")",
                        C[Tt] = x
                    }
                    ;
                    c = Et.prototype,
                    c.x = c.y = c.z = c.skewX = c.skewY = c.rotation = c.rotationX = c.rotationY = c.zOrigin = c.xPercent = c.yPercent = c.xOffset = c.yOffset = 0,
                    c.scaleX = c.scaleY = c.scaleZ = 1,
                    xt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin", {
                        parser: function(t, e, n, r, i, a, l) {
                            if (r._lastParsedTransform === l)
                                return i;
                            r._lastParsedTransform = l;
                            var h, c, u, p, d, f, m, g, v, y = t._gsTransform, _ = r._transform = It(t, o, !0, l.parseTransform), x = t.style, b = 1e-6, w = St.length, S = l, T = {}, M = "transformOrigin";
                            if ("string" == typeof S.transform && Tt)
                                u = N.style,
                                u[Tt] = S.transform,
                                u.display = "block",
                                u.position = "absolute",
                                I.body.appendChild(N),
                                h = It(N, null , !1),
                                I.body.removeChild(N),
                                null != S.xPercent && (h.xPercent = at(S.xPercent, _.xPercent)),
                                null != S.yPercent && (h.yPercent = at(S.yPercent, _.yPercent));
                            else if ("object" == typeof S) {
                                if (h = {
                                    scaleX: at(null != S.scaleX ? S.scaleX : S.scale, _.scaleX),
                                    scaleY: at(null != S.scaleY ? S.scaleY : S.scale, _.scaleY),
                                    scaleZ: at(S.scaleZ, _.scaleZ),
                                    x: at(S.x, _.x),
                                    y: at(S.y, _.y),
                                    z: at(S.z, _.z),
                                    xPercent: at(S.xPercent, _.xPercent),
                                    yPercent: at(S.yPercent, _.yPercent),
                                    perspective: at(S.transformPerspective, _.perspective)
                                },
                                m = S.directionalRotation,
                                null != m)
                                    if ("object" == typeof m)
                                        for (u in m)
                                            S[u] = m[u];
                                    else
                                        S.rotation = m;
                                "string" == typeof S.x && -1 !== S.x.indexOf("%") && (h.x = 0,
                                h.xPercent = at(S.x, _.xPercent)),
                                "string" == typeof S.y && -1 !== S.y.indexOf("%") && (h.y = 0,
                                h.yPercent = at(S.y, _.yPercent)),
                                h.rotation = st("rotation"in S ? S.rotation : "shortRotation"in S ? S.shortRotation + "_short" : "rotationZ"in S ? S.rotationZ : _.rotation, _.rotation, "rotation", T),
                                At && (h.rotationX = st("rotationX"in S ? S.rotationX : "shortRotationX"in S ? S.shortRotationX + "_short" : _.rotationX || 0, _.rotationX, "rotationX", T),
                                h.rotationY = st("rotationY"in S ? S.rotationY : "shortRotationY"in S ? S.shortRotationY + "_short" : _.rotationY || 0, _.rotationY, "rotationY", T)),
                                h.skewX = null == S.skewX ? _.skewX : st(S.skewX, _.skewX),
                                h.skewY = null == S.skewY ? _.skewY : st(S.skewY, _.skewY),
                                (c = h.skewY - _.skewY) && (h.skewX += c,
                                h.rotation += c)
                            }
                            for (At && null != S.force3D && (_.force3D = S.force3D,
                            f = !0),
                            _.skewType = S.skewType || _.skewType || s.defaultSkewType,
                            d = _.force3D || _.z || _.rotationX || _.rotationY || h.z || h.rotationX || h.rotationY || h.perspective,
                            d || null == S.scale || (h.scaleZ = 1); --w > -1; )
                                n = St[w],
                                p = h[n] - _[n],
                                (p > b || -b > p || null != S[n] || null != U[n]) && (f = !0,
                                i = new mt(_,n,_[n],p,i),
                                n in T && (i.e = T[n]),
                                i.xs0 = 0,
                                i.plugin = a,
                                r._overwriteProps.push(i.n));
                            return p = S.transformOrigin,
                            _.svg && (p || S.svgOrigin) && (g = _.xOffset,
                            v = _.yOffset,
                            Ot(t, it(p), h, S.svgOrigin, S.smoothOrigin),
                            i = gt(_, "xOrigin", (y ? _ : h).xOrigin, h.xOrigin, i, M),
                            i = gt(_, "yOrigin", (y ? _ : h).yOrigin, h.yOrigin, i, M),
                            (g !== _.xOffset || v !== _.yOffset) && (i = gt(_, "xOffset", y ? g : _.xOffset, _.xOffset, i, M),
                            i = gt(_, "yOffset", y ? v : _.yOffset, _.yOffset, i, M)),
                            p = wt ? null : "0px 0px"),
                            (p || At && d && _.zOrigin) && (Tt ? (f = !0,
                            n = Ct,
                            p = (p || Q(t, n, o, !1, "50% 50%")) + "",
                            i = new mt(x,n,0,0,i,-1,M),
                            i.b = x[n],
                            i.plugin = a,
                            At ? (u = _.zOrigin,
                            p = p.split(" "),
                            _.zOrigin = (p.length > 2 && (0 === u || "0px" !== p[2]) ? parseFloat(p[2]) : u) || 0,
                            i.xs0 = i.e = p[0] + " " + (p[1] || "50%") + " 0px",
                            i = new mt(_,"zOrigin",0,0,i,-1,i.n),
                            i.b = u,
                            i.xs0 = i.e = _.zOrigin) : i.xs0 = i.e = p) : it(p + "", _)),
                            f && (r._transformType = _.svg && wt || !d && 3 !== this._transformType ? 2 : 3),
                            i
                        },
                        prefix: !0
                    }),
                    xt("boxShadow", {
                        defaultValue: "0px 0px 0px 0px #999",
                        prefix: !0,
                        color: !0,
                        multi: !0,
                        keyword: "inset"
                    }),
                    xt("borderRadius", {
                        defaultValue: "0px",
                        parser: function(t, e, n, r, a) {
                            e = this.format(e);
                            var s, l, h, c, u, p, d, f, m, g, v, y, _, x, b, w, S = ["borderTopLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "borderBottomLeftRadius"], T = t.style;
                            for (m = parseFloat(t.offsetWidth),
                            g = parseFloat(t.offsetHeight),
                            s = e.split(" "),
                            l = 0; S.length > l; l++)
                                this.p.indexOf("border") && (S[l] = Y(S[l])),
                                u = c = Q(t, S[l], o, !1, "0px"),
                                -1 !== u.indexOf(" ") && (c = u.split(" "),
                                u = c[0],
                                c = c[1]),
                                p = h = s[l],
                                d = parseFloat(u),
                                y = u.substr((d + "").length),
                                _ = "=" === p.charAt(1),
                                _ ? (f = parseInt(p.charAt(0) + "1", 10),
                                p = p.substr(2),
                                f *= parseFloat(p),
                                v = p.substr((f + "").length - (0 > f ? 1 : 0)) || "") : (f = parseFloat(p),
                                v = p.substr((f + "").length)),
                                "" === v && (v = i[n] || y),
                                v !== y && (x = Z(t, "borderLeft", d, y),
                                b = Z(t, "borderTop", d, y),
                                "%" === v ? (u = 100 * (x / m) + "%",
                                c = 100 * (b / g) + "%") : "em" === v ? (w = Z(t, "borderLeft", 1, "em"),
                                u = x / w + "em",
                                c = b / w + "em") : (u = x + "px",
                                c = b + "px"),
                                _ && (p = parseFloat(u) + f + v,
                                h = parseFloat(c) + f + v)),
                                a = vt(T, S[l], u + " " + c, p + " " + h, !1, "0px", a);
                            return a
                        },
                        prefix: !0,
                        formatter: pt("0px 0px 0px 0px", !1, !0)
                    }),
                    xt("backgroundPosition", {
                        defaultValue: "0 0",
                        parser: function(t, e, n, r, i, a) {
                            var s, l, h, c, u, p, d = "background-position", f = o || K(t, null ), m = this.format((f ? g ? f.getPropertyValue(d + "-x") + " " + f.getPropertyValue(d + "-y") : f.getPropertyValue(d) : t.currentStyle.backgroundPositionX + " " + t.currentStyle.backgroundPositionY) || "0 0"), v = this.format(e);
                            if (-1 !== m.indexOf("%") != (-1 !== v.indexOf("%")) && (p = Q(t, "backgroundImage").replace(E, ""),
                            p && "none" !== p)) {
                                for (s = m.split(" "),
                                l = v.split(" "),
                                j.setAttribute("src", p),
                                h = 2; --h > -1; )
                                    m = s[h],
                                    c = -1 !== m.indexOf("%"),
                                    c !== (-1 !== l[h].indexOf("%")) && (u = 0 === h ? t.offsetWidth - j.width : t.offsetHeight - j.height,
                                    s[h] = c ? parseFloat(m) / 100 * u + "px" : 100 * (parseFloat(m) / u) + "%");
                                m = s.join(" ")
                            }
                            return this.parseComplex(t.style, m, v, i, a)
                        },
                        formatter: it
                    }),
                    xt("backgroundSize", {
                        defaultValue: "0 0",
                        formatter: it
                    }),
                    xt("perspective", {
                        defaultValue: "0px",
                        prefix: !0
                    }),
                    xt("perspectiveOrigin", {
                        defaultValue: "50% 50%",
                        prefix: !0
                    }),
                    xt("transformStyle", {
                        prefix: !0
                    }),
                    xt("backfaceVisibility", {
                        prefix: !0
                    }),
                    xt("userSelect", {
                        prefix: !0
                    }),
                    xt("margin", {
                        parser: dt("marginTop,marginRight,marginBottom,marginLeft")
                    }),
                    xt("padding", {
                        parser: dt("paddingTop,paddingRight,paddingBottom,paddingLeft")
                    }),
                    xt("clip", {
                        defaultValue: "rect(0px,0px,0px,0px)",
                        parser: function(t, e, n, r, i, a) {
                            var s, l, h;
                            return 9 > g ? (l = t.currentStyle,
                            h = 8 > g ? " " : ",",
                            s = "rect(" + l.clipTop + h + l.clipRight + h + l.clipBottom + h + l.clipLeft + ")",
                            e = this.format(e).split(",").join(h)) : (s = this.format(Q(t, this.p, o, !1, this.dflt)),
                            e = this.format(e)),
                            this.parseComplex(t.style, s, e, i, a)
                        }
                    }),
                    xt("textShadow", {
                        defaultValue: "0px 0px 0px #999",
                        color: !0,
                        multi: !0
                    }),
                    xt("autoRound,strictUnits", {
                        parser: function(t, e, n, r, i) {
                            return i
                        }
                    }),
                    xt("border", {
                        defaultValue: "0px solid #000",
                        parser: function(t, e, n, r, i, a) {
                            return this.parseComplex(t.style, this.format(Q(t, "borderTopWidth", o, !1, "0px") + " " + Q(t, "borderTopStyle", o, !1, "solid") + " " + Q(t, "borderTopColor", o, !1, "#000")), this.format(e), i, a)
                        },
                        color: !0,
                        formatter: function(t) {
                            var e = t.split(" ");
                            return e[0] + " " + (e[1] || "solid") + " " + (t.match(ut) || ["#000"])[0]
                        }
                    }),
                    xt("borderWidth", {
                        parser: dt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")
                    }),
                    xt("float,cssFloat,styleFloat", {
                        parser: function(t, e, n, r, i) {
                            var o = t.style
                              , a = "cssFloat"in o ? "cssFloat" : "styleFloat";
                            return new mt(o,a,0,0,i,-1,n,!1,0,o[a],e)
                        }
                    });
                    var jt = function(t) {
                        var e, n = this.t, r = n.filter || Q(this.data, "filter") || "", i = 0 | this.s + this.c * t;
                        100 === i && (-1 === r.indexOf("atrix(") && -1 === r.indexOf("radient(") && -1 === r.indexOf("oader(") ? (n.removeAttribute("filter"),
                        e = !Q(this.data, "filter")) : (n.filter = r.replace(T, ""),
                        e = !0)),
                        e || (this.xn1 && (n.filter = r = r || "alpha(opacity=" + i + ")"),
                        -1 === r.indexOf("pacity") ? 0 === i && this.xn1 || (n.filter = r + " alpha(opacity=" + i + ")") : n.filter = r.replace(w, "opacity=" + i))
                    };
                    xt("opacity,alpha,autoAlpha", {
                        defaultValue: "1",
                        parser: function(t, e, n, r, i, a) {
                            var s = parseFloat(Q(t, "opacity", o, !1, "1"))
                              , l = t.style
                              , h = "autoAlpha" === n;
                            return "string" == typeof e && "=" === e.charAt(1) && (e = ("-" === e.charAt(0) ? -1 : 1) * parseFloat(e.substr(2)) + s),
                            h && 1 === s && "hidden" === Q(t, "visibility", o) && 0 !== e && (s = 0),
                            z ? i = new mt(l,"opacity",s,e - s,i) : (i = new mt(l,"opacity",100 * s,100 * (e - s),i),
                            i.xn1 = h ? 1 : 0,
                            l.zoom = 1,
                            i.type = 2,
                            i.b = "alpha(opacity=" + i.s + ")",
                            i.e = "alpha(opacity=" + (i.s + i.c) + ")",
                            i.data = t,
                            i.plugin = a,
                            i.setRatio = jt),
                            h && (i = new mt(l,"visibility",0,0,i,-1,null ,!1,0,0 !== s ? "inherit" : "hidden",0 === e ? "hidden" : "inherit"),
                            i.xs0 = "inherit",
                            r._overwriteProps.push(i.n),
                            r._overwriteProps.push(n)),
                            i
                        }
                    });
                    var Vt = function(t, e) {
                        e && (t.removeProperty ? (("ms" === e.substr(0, 2) || "webkit" === e.substr(0, 6)) && (e = "-" + e),
                        t.removeProperty(e.replace(C, "-$1").toLowerCase())) : t.removeAttribute(e))
                    }
                      , Gt = function(t) {
                        if (this.t._gsClassPT = this,
                        1 === t || 0 === t) {
                            this.t.setAttribute("class", 0 === t ? this.b : this.e);
                            for (var e = this.data, n = this.t.style; e; )
                                e.v ? n[e.p] = e.v : Vt(n, e.p),
                                e = e._next;
                            1 === t && this.t._gsClassPT === this && (this.t._gsClassPT = null )
                        } else
                            this.t.getAttribute("class") !== this.e && this.t.setAttribute("class", this.e)
                    };
                    xt("className", {
                        parser: function(t, e, n, i, a, s, l) {
                            var h, c, u, p, d, f = t.getAttribute("class") || "", m = t.style.cssText;
                            if (a = i._classNamePT = new mt(t,n,0,0,a,2),
                            a.setRatio = Gt,
                            a.pr = -11,
                            r = !0,
                            a.b = f,
                            c = $(t, o),
                            u = t._gsClassPT) {
                                for (p = {},
                                d = u.data; d; )
                                    p[d.p] = 1,
                                    d = d._next;
                                u.setRatio(1)
                            }
                            return t._gsClassPT = a,
                            a.e = "=" !== e.charAt(1) ? e : f.replace(RegExp("\\s*\\b" + e.substr(2) + "\\b"), "") + ("+" === e.charAt(0) ? " " + e.substr(2) : ""),
                            t.setAttribute("class", a.e),
                            h = tt(t, c, $(t), l, p),
                            t.setAttribute("class", f),
                            a.data = h.firstMPT,
                            t.style.cssText = m,
                            a = a.xfirst = i.parse(t, h.difs, a, s)
                        }
                    });
                    var zt = function(t) {
                        if ((1 === t || 0 === t) && this.data._totalTime === this.data._totalDuration && "isFromStart" !== this.data.data) {
                            var e, n, r, i, o, a = this.t.style, s = h.transform.parse;
                            if ("all" === this.e)
                                a.cssText = "",
                                i = !0;
                            else
                                for (e = this.e.split(" ").join("").split(","),
                                r = e.length; --r > -1; )
                                    n = e[r],
                                    h[n] && (h[n].parse === s ? i = !0 : n = "transformOrigin" === n ? Ct : h[n].p),
                                    Vt(a, n);
                            i && (Vt(a, Tt),
                            o = this.t._gsTransform,
                            o && (o.svg && this.t.removeAttribute("data-svg-origin"),
                            delete this.t._gsTransform))
                        }
                    };
                    for (xt("clearProps", {
                        parser: function(t, e, n, i, o) {
                            return o = new mt(t,n,0,0,o,2),
                            o.setRatio = zt,
                            o.e = e,
                            o.pr = -10,
                            o.data = i._tween,
                            r = !0,
                            o
                        }
                    }),
                    c = "bezier,throwProps,physicsProps,physics2D".split(","),
                    yt = c.length; yt--; )
                        bt(c[yt]);
                    c = s.prototype,
                    c._firstPT = c._lastParsedTransform = c._transform = null ,
                    c._onInitTween = function(t, e, n) {
                        if (!t.nodeType)
                            return !1;
                        this._target = t,
                        this._tween = n,
                        this._vars = e,
                        u = e.autoRound,
                        r = !1,
                        i = e.suffixMap || s.suffixMap,
                        o = K(t, ""),
                        a = this._overwriteProps;
                        var l, c, f, g, v, y, _, x, b, w = t.style;
                        if (p && "" === w.zIndex && (l = Q(t, "zIndex", o),
                        ("auto" === l || "" === l) && this._addLazySet(w, "zIndex", 0)),
                        "string" == typeof e && (g = w.cssText,
                        l = $(t, o),
                        w.cssText = g + ";" + e,
                        l = tt(t, l, $(t)).difs,
                        !z && S.test(e) && (l.opacity = parseFloat(RegExp.$1)),
                        e = l,
                        w.cssText = g),
                        this._firstPT = c = e.className ? h.className.parse(t, e.className, "className", this, null , null , e) : this.parse(t, e, null ),
                        this._transformType) {
                            for (b = 3 === this._transformType,
                            Tt ? d && (p = !0,
                            "" === w.zIndex && (_ = Q(t, "zIndex", o),
                            ("auto" === _ || "" === _) && this._addLazySet(w, "zIndex", 0)),
                            m && this._addLazySet(w, "WebkitBackfaceVisibility", this._vars.WebkitBackfaceVisibility || (b ? "visible" : "hidden"))) : w.zoom = 1,
                            f = c; f && f._next; )
                                f = f._next;
                            x = new mt(t,"transform",0,0,null ,2),
                            this._linkCSSP(x, null , f),
                            x.setRatio = Tt ? Nt : Bt,
                            x.data = this._transform || It(t, o, !0),
                            x.tween = n,
                            x.pr = -1,
                            a.pop()
                        }
                        if (r) {
                            for (; c; ) {
                                for (y = c._next,
                                f = g; f && f.pr > c.pr; )
                                    f = f._next;
                                (c._prev = f ? f._prev : v) ? c._prev._next = c : g = c,
                                (c._next = f) ? f._prev = c : v = c,
                                c = y
                            }
                            this._firstPT = g
                        }
                        return !0
                    }
                    ,
                    c.parse = function(t, e, n, r) {
                        var a, s, l, c, p, d, f, m, g, v, y = t.style;
                        for (a in e)
                            d = e[a],
                            s = h[a],
                            s ? n = s.parse(t, d, a, this, n, r, e) : (p = Q(t, a, o) + "",
                            g = "string" == typeof d,
                            "color" === a || "fill" === a || "stroke" === a || -1 !== a.indexOf("Color") || g && M.test(d) ? (g || (d = ct(d),
                            d = (d.length > 3 ? "rgba(" : "rgb(") + d.join(",") + ")"),
                            n = vt(y, a, p, d, !0, "transparent", n, 0, r)) : !g || -1 === d.indexOf(" ") && -1 === d.indexOf(",") ? (l = parseFloat(p),
                            f = l || 0 === l ? p.substr((l + "").length) : "",
                            ("" === p || "auto" === p) && ("width" === a || "height" === a ? (l = rt(t, a, o),
                            f = "px") : "left" === a || "top" === a ? (l = J(t, a, o),
                            f = "px") : (l = "opacity" !== a ? 0 : 1,
                            f = "")),
                            v = g && "=" === d.charAt(1),
                            v ? (c = parseInt(d.charAt(0) + "1", 10),
                            d = d.substr(2),
                            c *= parseFloat(d),
                            m = d.replace(b, "")) : (c = parseFloat(d),
                            m = g ? d.replace(b, "") : ""),
                            "" === m && (m = a in i ? i[a] : f),
                            d = c || 0 === c ? (v ? c + l : c) + m : e[a],
                            f !== m && "" !== m && (c || 0 === c) && l && (l = Z(t, a, l, f),
                            "%" === m ? (l /= Z(t, a, 100, "%") / 100,
                            e.strictUnits !== !0 && (p = l + "%")) : "em" === m ? l /= Z(t, a, 1, "em") : "px" !== m && (c = Z(t, a, c, m),
                            m = "px"),
                            v && (c || 0 === c) && (d = c + l + m)),
                            v && (c += l),
                            !l && 0 !== l || !c && 0 !== c ? void 0 !== y[a] && (d || "NaN" != d + "" && null != d) ? (n = new mt(y,a,c || l || 0,0,n,-1,a,!1,0,p,d),
                            n.xs0 = "none" !== d || "display" !== a && -1 === a.indexOf("Style") ? d : p) : W("invalid " + a + " tween value: " + e[a]) : (n = new mt(y,a,l,c - l,n,0,a,u !== !1 && ("px" === m || "zIndex" === a),0,p,d),
                            n.xs0 = m)) : n = vt(y, a, p, d, !0, null , n, 0, r)),
                            r && n && !n.plugin && (n.plugin = r);
                        return n
                    }
                    ,
                    c.setRatio = function(t) {
                        var e, n, r, i = this._firstPT, o = 1e-6;
                        if (1 !== t || this._tween._time !== this._tween._duration && 0 !== this._tween._time)
                            if (t || this._tween._time !== this._tween._duration && 0 !== this._tween._time || this._tween._rawPrevTime === -1e-6)
                                for (; i; ) {
                                    if (e = i.c * t + i.s,
                                    i.r ? e = Math.round(e) : o > e && e > -o && (e = 0),
                                    i.type)
                                        if (1 === i.type)
                                            if (r = i.l,
                                            2 === r)
                                                i.t[i.p] = i.xs0 + e + i.xs1 + i.xn1 + i.xs2;
                                            else if (3 === r)
                                                i.t[i.p] = i.xs0 + e + i.xs1 + i.xn1 + i.xs2 + i.xn2 + i.xs3;
                                            else if (4 === r)
                                                i.t[i.p] = i.xs0 + e + i.xs1 + i.xn1 + i.xs2 + i.xn2 + i.xs3 + i.xn3 + i.xs4;
                                            else if (5 === r)
                                                i.t[i.p] = i.xs0 + e + i.xs1 + i.xn1 + i.xs2 + i.xn2 + i.xs3 + i.xn3 + i.xs4 + i.xn4 + i.xs5;
                                            else {
                                                for (n = i.xs0 + e + i.xs1,
                                                r = 1; i.l > r; r++)
                                                    n += i["xn" + r] + i["xs" + (r + 1)];
                                                i.t[i.p] = n
                                            }
                                        else
                                            -1 === i.type ? i.t[i.p] = i.xs0 : i.setRatio && i.setRatio(t);
                                    else
                                        i.t[i.p] = e + i.xs0;
                                    i = i._next
                                }
                            else
                                for (; i; )
                                    2 !== i.type ? i.t[i.p] = i.b : i.setRatio(t),
                                    i = i._next;
                        else
                            for (; i; ) {
                                if (2 !== i.type)
                                    if (i.r && -1 !== i.type)
                                        if (e = Math.round(i.s + i.c),
                                        i.type) {
                                            if (1 === i.type) {
                                                for (r = i.l,
                                                n = i.xs0 + e + i.xs1,
                                                r = 1; i.l > r; r++)
                                                    n += i["xn" + r] + i["xs" + (r + 1)];
                                                i.t[i.p] = n
                                            }
                                        } else
                                            i.t[i.p] = e + i.xs0;
                                    else
                                        i.t[i.p] = i.e;
                                else
                                    i.setRatio(t);
                                i = i._next
                            }
                    }
                    ,
                    c._enableTransforms = function(t) {
                        this._transform = this._transform || It(this._target, o, !0),
                        this._transformType = this._transform.svg && wt || !t && 3 !== this._transformType ? 2 : 3
                    }
                    ;
                    var Ht = function() {
                        this.t[this.p] = this.e,
                        this.data._linkCSSP(this, this._next, null , !0)
                    };
                    c._addLazySet = function(t, e, n) {
                        var r = this._firstPT = new mt(t,e,0,0,this._firstPT,2);
                        r.e = n,
                        r.setRatio = Ht,
                        r.data = this
                    }
                    ,
                    c._linkCSSP = function(t, e, n, r) {
                        return t && (e && (e._prev = t),
                        t._next && (t._next._prev = t._prev),
                        t._prev ? t._prev._next = t._next : this._firstPT === t && (this._firstPT = t._next,
                        r = !0),
                        n ? n._next = t : r || null !== this._firstPT || (this._firstPT = t),
                        t._next = e,
                        t._prev = n),
                        t
                    }
                    ,
                    c._kill = function(e) {
                        var n, r, i, o = e;
                        if (e.autoAlpha || e.alpha) {
                            o = {};
                            for (r in e)
                                o[r] = e[r];
                            o.opacity = 1,
                            o.autoAlpha && (o.visibility = 1)
                        }
                        return e.className && (n = this._classNamePT) && (i = n.xfirst,
                        i && i._prev ? this._linkCSSP(i._prev, n._next, i._prev._prev) : i === this._firstPT && (this._firstPT = n._next),
                        n._next && this._linkCSSP(n._next, n._next._next, i._prev),
                        this._classNamePT = null ),
                        t.prototype._kill.call(this, o)
                    }
                    ;
                    var Wt = function(t, e, n) {
                        var r, i, o, a;
                        if (t.slice)
                            for (i = t.length; --i > -1; )
                                Wt(t[i], e, n);
                        else
                            for (r = t.childNodes,
                            i = r.length; --i > -1; )
                                o = r[i],
                                a = o.type,
                                o.style && (e.push($(o)),
                                n && n.push(o)),
                                1 !== a && 9 !== a && 11 !== a || !o.childNodes.length || Wt(o, e, n)
                    };
                    return s.cascadeTo = function(t, n, r) {
                        var i, o, a, s, l = e.to(t, n, r), h = [l], c = [], u = [], p = [], d = e._internals.reservedProps;
                        for (t = l._targets || l.target,
                        Wt(t, c, p),
                        l.render(n, !0, !0),
                        Wt(t, u),
                        l.render(0, !0, !0),
                        l._enabled(!0),
                        i = p.length; --i > -1; )
                            if (o = tt(p[i], c[i], u[i]),
                            o.firstMPT) {
                                o = o.difs;
                                for (a in r)
                                    d[a] && (o[a] = r[a]);
                                s = {};
                                for (a in o)
                                    s[a] = c[i][a];
                                h.push(e.fromTo(p[i], n, s, o))
                            }
                        return h
                    }
                    ,
                    t.activate([s]),
                    s
                }, !0),
                function() {
                    var t = n._gsDefine.plugin({
                        propName: "roundProps",
                        priority: -1,
                        API: 2,
                        init: function(t, e, n) {
                            return this._tween = n,
                            !0
                        }
                    })
                      , e = t.prototype;
                    e._onInitAllProps = function() {
                        for (var t, e, n, r = this._tween, i = r.vars.roundProps instanceof Array ? r.vars.roundProps : r.vars.roundProps.split(","), o = i.length, a = {}, s = r._propLookup.roundProps; --o > -1; )
                            a[i[o]] = 1;
                        for (o = i.length; --o > -1; )
                            for (t = i[o],
                            e = r._firstPT; e; )
                                n = e._next,
                                e.pg ? e.t._roundProps(a, !0) : e.n === t && (this._add(e.t, t, e.s, e.c),
                                n && (n._prev = e._prev),
                                e._prev ? e._prev._next = n : r._firstPT === e && (r._firstPT = n),
                                e._next = e._prev = null ,
                                r._propLookup[t] = s),
                                e = n;
                        return !1
                    }
                    ,
                    e._add = function(t, e, n, r) {
                        this._addTween(t, e, n, n + r, e, !0),
                        this._overwriteProps.push(e)
                    }
                }(),
                function() {
                    var t = /(?:\d|\-|\+|=|#|\.)*/g
                      , e = /[A-Za-z%]/g;
                    n._gsDefine.plugin({
                        propName: "attr",
                        API: 2,
                        version: "0.4.0",
                        init: function(n, r) {
                            var i, o, a, s, l;
                            if ("function" != typeof n.setAttribute)
                                return !1;
                            this._target = n,
                            this._proxy = {},
                            this._start = {},
                            this._end = {},
                            this._suffix = {};
                            for (i in r)
                                this._start[i] = this._proxy[i] = o = n.getAttribute(i) + "",
                                this._end[i] = a = r[i] + "",
                                this._suffix[i] = s = e.test(a) ? a.replace(t, "") : e.test(o) ? o.replace(t, "") : "",
                                s && (l = a.indexOf(s),
                                -1 !== l && (a = a.substr(0, l))),
                                this._addTween(this._proxy, i, parseFloat(o), a, i) || (this._suffix[i] = ""),
                                "=" === a.charAt(1) && (this._end[i] = this._firstPT.s + this._firstPT.c + s),
                                this._overwriteProps.push(i);
                            return !0
                        },
                        set: function(t) {
                            this._super.setRatio.call(this, t);
                            for (var e, n = this._overwriteProps, r = n.length, i = 1 === t ? this._end : t ? this._proxy : this._start, o = i === this._proxy; --r > -1; )
                                e = n[r],
                                this._target.setAttribute(e, i[e] + (o ? this._suffix[e] : ""))
                        }
                    })
                }(),
                n._gsDefine.plugin({
                    propName: "directionalRotation",
                    version: "0.2.1",
                    API: 2,
                    init: function(t, e) {
                        "object" != typeof e && (e = {
                            rotation: e
                        }),
                        this.finals = {};
                        var n, r, i, o, a, s, l = e.useRadians === !0 ? 2 * Math.PI : 360, h = 1e-6;
                        for (n in e)
                            "useRadians" !== n && (s = (e[n] + "").split("_"),
                            r = s[0],
                            i = parseFloat("function" != typeof t[n] ? t[n] : t[n.indexOf("set") || "function" != typeof t["get" + n.substr(3)] ? n : "get" + n.substr(3)]()),
                            o = this.finals[n] = "string" == typeof r && "=" === r.charAt(1) ? i + parseInt(r.charAt(0) + "1", 10) * Number(r.substr(2)) : Number(r) || 0,
                            a = o - i,
                            s.length && (r = s.join("_"),
                            -1 !== r.indexOf("short") && (a %= l,
                            a !== a % (l / 2) && (a = 0 > a ? a + l : a - l)),
                            -1 !== r.indexOf("_cw") && 0 > a ? a = (a + 9999999999 * l) % l - (0 | a / l) * l : -1 !== r.indexOf("ccw") && a > 0 && (a = (a - 9999999999 * l) % l - (0 | a / l) * l)),
                            (a > h || -h > a) && (this._addTween(t, n, i, i + a, n),
                            this._overwriteProps.push(n)));
                        return !0
                    },
                    set: function(t) {
                        var e;
                        if (1 !== t)
                            this._super.setRatio.call(this, t);
                        else
                            for (e = this._firstPT; e; )
                                e.f ? e.t[e.p](this.finals[e.p]) : e.t[e.p] = this.finals[e.p],
                                e = e._next
                    }
                })._autoCSS = !0,
                n._gsDefine("easing.Back", ["easing.Ease"], function(t) {
                    var e, r, i, o = n.GreenSockGlobals || n, a = o.com.greensock, s = 2 * Math.PI, l = Math.PI / 2, h = a._class, c = function(e, n) {
                        var r = h("easing." + e, function() {}, !0)
                          , i = r.prototype = new t;
                        return i.constructor = r,
                        i.getRatio = n,
                        r
                    }, u = t.register || function() {}
                    , p = function(t, e, n, r) {
                        var i = h("easing." + t, {
                            easeOut: new e,
                            easeIn: new n,
                            easeInOut: new r
                        }, !0);
                        return u(i, t),
                        i
                    }, d = function(t, e, n) {
                        this.t = t,
                        this.v = e,
                        n && (this.next = n,
                        n.prev = this,
                        this.c = n.v - e,
                        this.gap = n.t - t)
                    }, f = function(e, n) {
                        var r = h("easing." + e, function(t) {
                            this._p1 = t || 0 === t ? t : 1.70158,
                            this._p2 = 1.525 * this._p1
                        }, !0)
                          , i = r.prototype = new t;
                        return i.constructor = r,
                        i.getRatio = n,
                        i.config = function(t) {
                            return new r(t)
                        }
                        ,
                        r
                    }, m = p("Back", f("BackOut", function(t) {
                        return (t -= 1) * t * ((this._p1 + 1) * t + this._p1) + 1
                    }), f("BackIn", function(t) {
                        return t * t * ((this._p1 + 1) * t - this._p1)
                    }), f("BackInOut", function(t) {
                        return 1 > (t *= 2) ? .5 * t * t * ((this._p2 + 1) * t - this._p2) : .5 * ((t -= 2) * t * ((this._p2 + 1) * t + this._p2) + 2)
                    })), g = h("easing.SlowMo", function(t, e, n) {
                        e = e || 0 === e ? e : .7,
                        null == t ? t = .7 : t > 1 && (t = 1),
                        this._p = 1 !== t ? e : 0,
                        this._p1 = (1 - t) / 2,
                        this._p2 = t,
                        this._p3 = this._p1 + this._p2,
                        this._calcEnd = n === !0
                    }, !0), v = g.prototype = new t;
                    return v.constructor = g,
                    v.getRatio = function(t) {
                        var e = t + (.5 - t) * this._p;
                        return this._p1 > t ? this._calcEnd ? 1 - (t = 1 - t / this._p1) * t : e - (t = 1 - t / this._p1) * t * t * t * e : t > this._p3 ? this._calcEnd ? 1 - (t = (t - this._p3) / this._p1) * t : e + (t - e) * (t = (t - this._p3) / this._p1) * t * t * t : this._calcEnd ? 1 : e
                    }
                    ,
                    g.ease = new g(.7,.7),
                    v.config = g.config = function(t, e, n) {
                        return new g(t,e,n)
                    }
                    ,
                    e = h("easing.SteppedEase", function(t) {
                        t = t || 1,
                        this._p1 = 1 / t,
                        this._p2 = t + 1
                    }, !0),
                    v = e.prototype = new t,
                    v.constructor = e,
                    v.getRatio = function(t) {
                        return 0 > t ? t = 0 : t >= 1 && (t = .999999999),
                        (this._p2 * t >> 0) * this._p1
                    }
                    ,
                    v.config = e.config = function(t) {
                        return new e(t)
                    }
                    ,
                    r = h("easing.RoughEase", function(e) {
                        e = e || {};
                        for (var n, r, i, o, a, s, l = e.taper || "none", h = [], c = 0, u = 0 | (e.points || 20), p = u, f = e.randomize !== !1, m = e.clamp === !0, g = e.template instanceof t ? e.template : null , v = "number" == typeof e.strength ? .4 * e.strength : .4; --p > -1; )
                            n = f ? Math.random() : 1 / u * p,
                            r = g ? g.getRatio(n) : n,
                            "none" === l ? i = v : "out" === l ? (o = 1 - n,
                            i = o * o * v) : "in" === l ? i = n * n * v : .5 > n ? (o = 2 * n,
                            i = .5 * o * o * v) : (o = 2 * (1 - n),
                            i = .5 * o * o * v),
                            f ? r += Math.random() * i - .5 * i : p % 2 ? r += .5 * i : r -= .5 * i,
                            m && (r > 1 ? r = 1 : 0 > r && (r = 0)),
                            h[c++] = {
                                x: n,
                                y: r
                            };
                        for (h.sort(function(t, e) {
                            return t.x - e.x
                        }),
                        s = new d(1,1,null ),
                        p = u; --p > -1; )
                            a = h[p],
                            s = new d(a.x,a.y,s);
                        this._prev = new d(0,0,0 !== s.t ? s : s.next)
                    }, !0),
                    v = r.prototype = new t,
                    v.constructor = r,
                    v.getRatio = function(t) {
                        var e = this._prev;
                        if (t > e.t) {
                            for (; e.next && t >= e.t; )
                                e = e.next;
                            e = e.prev
                        } else
                            for (; e.prev && e.t >= t; )
                                e = e.prev;
                        return this._prev = e,
                        e.v + (t - e.t) / e.gap * e.c
                    }
                    ,
                    v.config = function(t) {
                        return new r(t)
                    }
                    ,
                    r.ease = new r,
                    p("Bounce", c("BounceOut", function(t) {
                        return 1 / 2.75 > t ? 7.5625 * t * t : 2 / 2.75 > t ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : 2.5 / 2.75 > t ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375
                    }), c("BounceIn", function(t) {
                        return 1 / 2.75 > (t = 1 - t) ? 1 - 7.5625 * t * t : 2 / 2.75 > t ? 1 - (7.5625 * (t -= 1.5 / 2.75) * t + .75) : 2.5 / 2.75 > t ? 1 - (7.5625 * (t -= 2.25 / 2.75) * t + .9375) : 1 - (7.5625 * (t -= 2.625 / 2.75) * t + .984375)
                    }), c("BounceInOut", function(t) {
                        var e = .5 > t;
                        return t = e ? 1 - 2 * t : 2 * t - 1,
                        t = 1 / 2.75 > t ? 7.5625 * t * t : 2 / 2.75 > t ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : 2.5 / 2.75 > t ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375,
                        e ? .5 * (1 - t) : .5 * t + .5
                    })),
                    p("Circ", c("CircOut", function(t) {
                        return Math.sqrt(1 - (t -= 1) * t)
                    }), c("CircIn", function(t) {
                        return -(Math.sqrt(1 - t * t) - 1)
                    }), c("CircInOut", function(t) {
                        return 1 > (t *= 2) ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1)
                    })),
                    i = function(e, n, r) {
                        var i = h("easing." + e, function(t, e) {
                            this._p1 = t >= 1 ? t : 1,
                            this._p2 = (e || r) / (1 > t ? t : 1),
                            this._p3 = this._p2 / s * (Math.asin(1 / this._p1) || 0),
                            this._p2 = s / this._p2
                        }, !0)
                          , o = i.prototype = new t;
                        return o.constructor = i,
                        o.getRatio = n,
                        o.config = function(t, e) {
                            return new i(t,e)
                        }
                        ,
                        i
                    }
                    ,
                    p("Elastic", i("ElasticOut", function(t) {
                        return this._p1 * Math.pow(2, -10 * t) * Math.sin((t - this._p3) * this._p2) + 1
                    }, .3), i("ElasticIn", function(t) {
                        return -(this._p1 * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - this._p3) * this._p2))
                    }, .3), i("ElasticInOut", function(t) {
                        return 1 > (t *= 2) ? -.5 * this._p1 * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - this._p3) * this._p2) : .5 * this._p1 * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - this._p3) * this._p2) + 1
                    }, .45)),
                    p("Expo", c("ExpoOut", function(t) {
                        return 1 - Math.pow(2, -10 * t)
                    }), c("ExpoIn", function(t) {
                        return Math.pow(2, 10 * (t - 1)) - .001
                    }), c("ExpoInOut", function(t) {
                        return 1 > (t *= 2) ? .5 * Math.pow(2, 10 * (t - 1)) : .5 * (2 - Math.pow(2, -10 * (t - 1)))
                    })),
                    p("Sine", c("SineOut", function(t) {
                        return Math.sin(t * l)
                    }), c("SineIn", function(t) {
                        return -Math.cos(t * l) + 1
                    }), c("SineInOut", function(t) {
                        return -.5 * (Math.cos(Math.PI * t) - 1)
                    })),
                    h("easing.EaseLookup", {
                        find: function(e) {
                            return t.map[e]
                        }
                    }, !0),
                    u(o.SlowMo, "SlowMo", "ease,"),
                    u(r, "RoughEase", "ease,"),
                    u(e, "SteppedEase", "ease,"),
                    m
                }, !0)
            }),
            n._gsDefine && n._gsQueue.pop()(),
            function(t, n) {
                "use strict";
                var r = t.GreenSockGlobals = t.GreenSockGlobals || t;
                if (!r.TweenLite) {
                    var i, o, a, s, l, h = function(t) {
                        var e, n = t.split("."), i = r;
                        for (e = 0; n.length > e; e++)
                            i[n[e]] = i = i[n[e]] || {};
                        return i
                    }, c = h("com.greensock"), u = 1e-10, p = function(t) {
                        var e, n = [], r = t.length;
                        for (e = 0; e !== r; n.push(t[e++]))
                            ;
                        return n
                    }, d = function() {}, f = function() {
                        var t = Object.prototype.toString
                          , e = t.call([]);
                        return function(n) {
                            return null != n && (n instanceof Array || "object" == typeof n && !!n.push && t.call(n) === e)
                        }
                    }(), m = {}, g = function(i, o, a, s) {
                        this.sc = m[i] ? m[i].sc : [],
                        m[i] = this,
                        this.gsClass = null ,
                        this.func = a;
                        var l = [];
                        this.check = function(c) {
                            for (var u, p, d, f, v = o.length, y = v; --v > -1; )
                                (u = m[o[v]] || new g(o[v],[])).gsClass ? (l[v] = u.gsClass,
                                y--) : c && u.sc.push(this);
                            if (0 === y && a)
                                for (p = ("com.greensock." + i).split("."),
                                d = p.pop(),
                                f = h(p.join("."))[d] = this.gsClass = a.apply(a, l),
                                s && (r[d] = f,
                                "function" == typeof define && define.amd ? define((t.GreenSockAMDPath ? t.GreenSockAMDPath + "/" : "") + i.split(".").pop(), [], function() {
                                    return f
                                }) : i === n && "undefined" != typeof e && e.exports && (e.exports = f)),
                                v = 0; this.sc.length > v; v++)
                                    this.sc[v].check()
                        }
                        ,
                        this.check(!0)
                    }, v = t._gsDefine = function(t, e, n, r) {
                        return new g(t,e,n,r)
                    }
                    , y = c._class = function(t, e, n) {
                        return e = e || function() {}
                        ,
                        v(t, [], function() {
                            return e
                        }, n),
                        e
                    }
                    ;
                    v.globals = r;
                    var _ = [0, 0, 1, 1]
                      , x = []
                      , b = y("easing.Ease", function(t, e, n, r) {
                        this._func = t,
                        this._type = n || 0,
                        this._power = r || 0,
                        this._params = e ? _.concat(e) : _
                    }, !0)
                      , w = b.map = {}
                      , S = b.register = function(t, e, n, r) {
                        for (var i, o, a, s, l = e.split(","), h = l.length, u = (n || "easeIn,easeOut,easeInOut").split(","); --h > -1; )
                            for (o = l[h],
                            i = r ? y("easing." + o, null , !0) : c.easing[o] || {},
                            a = u.length; --a > -1; )
                                s = u[a],
                                w[o + "." + s] = w[s + o] = i[s] = t.getRatio ? t : t[s] || new t
                    }
                    ;
                    for (a = b.prototype,
                    a._calcEnd = !1,
                    a.getRatio = function(t) {
                        if (this._func)
                            return this._params[0] = t,
                            this._func.apply(null , this._params);
                        var e = this._type
                          , n = this._power
                          , r = 1 === e ? 1 - t : 2 === e ? t : .5 > t ? 2 * t : 2 * (1 - t);
                        return 1 === n ? r *= r : 2 === n ? r *= r * r : 3 === n ? r *= r * r * r : 4 === n && (r *= r * r * r * r),
                        1 === e ? 1 - r : 2 === e ? r : .5 > t ? r / 2 : 1 - r / 2
                    }
                    ,
                    i = ["Linear", "Quad", "Cubic", "Quart", "Quint,Strong"],
                    o = i.length; --o > -1; )
                        a = i[o] + ",Power" + o,
                        S(new b(null ,null ,1,o), a, "easeOut", !0),
                        S(new b(null ,null ,2,o), a, "easeIn" + (0 === o ? ",easeNone" : "")),
                        S(new b(null ,null ,3,o), a, "easeInOut");
                    w.linear = c.easing.Linear.easeIn,
                    w.swing = c.easing.Quad.easeInOut;
                    var T = y("events.EventDispatcher", function(t) {
                        this._listeners = {},
                        this._eventTarget = t || this
                    });
                    a = T.prototype,
                    a.addEventListener = function(t, e, n, r, i) {
                        i = i || 0;
                        var o, a, h = this._listeners[t], c = 0;
                        for (null == h && (this._listeners[t] = h = []),
                        a = h.length; --a > -1; )
                            o = h[a],
                            o.c === e && o.s === n ? h.splice(a, 1) : 0 === c && i > o.pr && (c = a + 1);
                        h.splice(c, 0, {
                            c: e,
                            s: n,
                            up: r,
                            pr: i
                        }),
                        this !== s || l || s.wake()
                    }
                    ,
                    a.removeEventListener = function(t, e) {
                        var n, r = this._listeners[t];
                        if (r)
                            for (n = r.length; --n > -1; )
                                if (r[n].c === e)
                                    return void r.splice(n, 1)
                    }
                    ,
                    a.dispatchEvent = function(t) {
                        var e, n, r, i = this._listeners[t];
                        if (i)
                            for (e = i.length,
                            n = this._eventTarget; --e > -1; )
                                r = i[e],
                                r && (r.up ? r.c.call(r.s || n, {
                                    type: t,
                                    target: n
                                }) : r.c.call(r.s || n))
                    }
                    ;
                    var M = t.requestAnimationFrame
                      , C = t.cancelAnimationFrame
                      , A = Date.now || function() {
                        return (new Date).getTime()
                    }
                      , E = A();
                    for (i = ["ms", "moz", "webkit", "o"],
                    o = i.length; --o > -1 && !M; )
                        M = t[i[o] + "RequestAnimationFrame"],
                        C = t[i[o] + "CancelAnimationFrame"] || t[i[o] + "CancelRequestAnimationFrame"];
                    y("Ticker", function(t, e) {
                        var n, r, i, o, a, h = this, c = A(), p = e !== !1 && M, f = 500, m = 33, g = "tick", v = function(t) {
                            var e, s, l = A() - E;
                            l > f && (c += l - m),
                            E += l,
                            h.time = (E - c) / 1e3,
                            e = h.time - a,
                            (!n || e > 0 || t === !0) && (h.frame++,
                            a += e + (e >= o ? .004 : o - e),
                            s = !0),
                            t !== !0 && (i = r(v)),
                            s && h.dispatchEvent(g)
                        };
                        T.call(h),
                        h.time = h.frame = 0,
                        h.tick = function() {
                            v(!0)
                        }
                        ,
                        h.lagSmoothing = function(t, e) {
                            f = t || 1 / u,
                            m = Math.min(e, f, 0)
                        }
                        ,
                        h.sleep = function() {
                            null != i && (p && C ? C(i) : clearTimeout(i),
                            r = d,
                            i = null ,
                            h === s && (l = !1))
                        }
                        ,
                        h.wake = function() {
                            null !== i ? h.sleep() : h.frame > 10 && (E = A() - f + 5),
                            r = 0 === n ? d : p && M ? M : function(t) {
                                return setTimeout(t, 0 | 1e3 * (a - h.time) + 1)
                            }
                            ,
                            h === s && (l = !0),
                            v(2)
                        }
                        ,
                        h.fps = function(t) {
                            return arguments.length ? (n = t,
                            o = 1 / (n || 60),
                            a = this.time + o,
                            void h.wake()) : n
                        }
                        ,
                        h.useRAF = function(t) {
                            return arguments.length ? (h.sleep(),
                            p = t,
                            void h.fps(n)) : p
                        }
                        ,
                        h.fps(t),
                        setTimeout(function() {
                            p && 5 > h.frame && h.useRAF(!1)
                        }, 1500)
                    }),
                    a = c.Ticker.prototype = new c.events.EventDispatcher,
                    a.constructor = c.Ticker;
                    var L = y("core.Animation", function(t, e) {
                        if (this.vars = e = e || {},
                        this._duration = this._totalDuration = t || 0,
                        this._delay = Number(e.delay) || 0,
                        this._timeScale = 1,
                        this._active = e.immediateRender === !0,
                        this.data = e.data,
                        this._reversed = e.reversed === !0,
                        H) {
                            l || s.wake();
                            var n = this.vars.useFrames ? z : H;
                            n.add(this, n._time),
                            this.vars.paused && this.paused(!0)
                        }
                    });
                    s = L.ticker = new c.Ticker,
                    a = L.prototype,
                    a._dirty = a._gc = a._initted = a._paused = !1,
                    a._totalTime = a._time = 0,
                    a._rawPrevTime = -1,
                    a._next = a._last = a._onUpdate = a._timeline = a.timeline = null ,
                    a._paused = !1;
                    var P = function() {
                        l && A() - E > 2e3 && s.wake(),
                        setTimeout(P, 2e3)
                    };
                    P(),
                    a.play = function(t, e) {
                        return null != t && this.seek(t, e),
                        this.reversed(!1).paused(!1)
                    }
                    ,
                    a.pause = function(t, e) {
                        return null != t && this.seek(t, e),
                        this.paused(!0)
                    }
                    ,
                    a.resume = function(t, e) {
                        return null != t && this.seek(t, e),
                        this.paused(!1)
                    }
                    ,
                    a.seek = function(t, e) {
                        return this.totalTime(Number(t), e !== !1)
                    }
                    ,
                    a.restart = function(t, e) {
                        return this.reversed(!1).paused(!1).totalTime(t ? -this._delay : 0, e !== !1, !0)
                    }
                    ,
                    a.reverse = function(t, e) {
                        return null != t && this.seek(t || this.totalDuration(), e),
                        this.reversed(!0).paused(!1)
                    }
                    ,
                    a.render = function() {}
                    ,
                    a.invalidate = function() {
                        return this._time = this._totalTime = 0,
                        this._initted = this._gc = !1,
                        this._rawPrevTime = -1,
                        (this._gc || !this.timeline) && this._enabled(!0),
                        this
                    }
                    ,
                    a.isActive = function() {
                        var t, e = this._timeline, n = this._startTime;
                        return !e || !this._gc && !this._paused && e.isActive() && (t = e.rawTime()) >= n && n + this.totalDuration() / this._timeScale > t
                    }
                    ,
                    a._enabled = function(t, e) {
                        return l || s.wake(),
                        this._gc = !t,
                        this._active = this.isActive(),
                        e !== !0 && (t && !this.timeline ? this._timeline.add(this, this._startTime - this._delay) : !t && this.timeline && this._timeline._remove(this, !0)),
                        !1
                    }
                    ,
                    a._kill = function() {
                        return this._enabled(!1, !1)
                    }
                    ,
                    a.kill = function(t, e) {
                        return this._kill(t, e),
                        this
                    }
                    ,
                    a._uncache = function(t) {
                        for (var e = t ? this : this.timeline; e; )
                            e._dirty = !0,
                            e = e.timeline;
                        return this
                    }
                    ,
                    a._swapSelfInParams = function(t) {
                        for (var e = t.length, n = t.concat(); --e > -1; )
                            "{self}" === t[e] && (n[e] = this);
                        return n
                    }
                    ,
                    a._callback = function(t) {
                        var e = this.vars;
                        e[t].apply(e[t + "Scope"] || e.callbackScope || this, e[t + "Params"] || x)
                    }
                    ,
                    a.eventCallback = function(t, e, n, r) {
                        if ("on" === (t || "").substr(0, 2)) {
                            var i = this.vars;
                            if (1 === arguments.length)
                                return i[t];
                            null == e ? delete i[t] : (i[t] = e,
                            i[t + "Params"] = f(n) && -1 !== n.join("").indexOf("{self}") ? this._swapSelfInParams(n) : n,
                            i[t + "Scope"] = r),
                            "onUpdate" === t && (this._onUpdate = e)
                        }
                        return this
                    }
                    ,
                    a.delay = function(t) {
                        return arguments.length ? (this._timeline.smoothChildTiming && this.startTime(this._startTime + t - this._delay),
                        this._delay = t,
                        this) : this._delay
                    }
                    ,
                    a.duration = function(t) {
                        return arguments.length ? (this._duration = this._totalDuration = t,
                        this._uncache(!0),
                        this._timeline.smoothChildTiming && this._time > 0 && this._time < this._duration && 0 !== t && this.totalTime(this._totalTime * (t / this._duration), !0),
                        this) : (this._dirty = !1,
                        this._duration)
                    }
                    ,
                    a.totalDuration = function(t) {
                        return this._dirty = !1,
                        arguments.length ? this.duration(t) : this._totalDuration
                    }
                    ,
                    a.time = function(t, e) {
                        return arguments.length ? (this._dirty && this.totalDuration(),
                        this.totalTime(t > this._duration ? this._duration : t, e)) : this._time
                    }
                    ,
                    a.totalTime = function(t, e, n) {
                        if (l || s.wake(),
                        !arguments.length)
                            return this._totalTime;
                        if (this._timeline) {
                            if (0 > t && !n && (t += this.totalDuration()),
                            this._timeline.smoothChildTiming) {
                                this._dirty && this.totalDuration();
                                var r = this._totalDuration
                                  , i = this._timeline;
                                if (t > r && !n && (t = r),
                                this._startTime = (this._paused ? this._pauseTime : i._time) - (this._reversed ? r - t : t) / this._timeScale,
                                i._dirty || this._uncache(!1),
                                i._timeline)
                                    for (; i._timeline; )
                                        i._timeline._time !== (i._startTime + i._totalTime) / i._timeScale && i.totalTime(i._totalTime, !0),
                                        i = i._timeline
                            }
                            this._gc && this._enabled(!0, !1),
                            (this._totalTime !== t || 0 === this._duration) && (this.render(t, e, !1),
                            F.length && q())
                        }
                        return this
                    }
                    ,
                    a.progress = a.totalProgress = function(t, e) {
                        return arguments.length ? this.totalTime(this.duration() * t, e) : this._time / this.duration()
                    }
                    ,
                    a.startTime = function(t) {
                        return arguments.length ? (t !== this._startTime && (this._startTime = t,
                        this.timeline && this.timeline._sortChildren && this.timeline.add(this, t - this._delay)),
                        this) : this._startTime
                    }
                    ,
                    a.endTime = function(t) {
                        return this._startTime + (0 != t ? this.totalDuration() : this.duration()) / this._timeScale
                    }
                    ,
                    a.timeScale = function(t) {
                        if (!arguments.length)
                            return this._timeScale;
                        if (t = t || u,
                        this._timeline && this._timeline.smoothChildTiming) {
                            var e = this._pauseTime
                              , n = e || 0 === e ? e : this._timeline.totalTime();
                            this._startTime = n - (n - this._startTime) * this._timeScale / t
                        }
                        return this._timeScale = t,
                        this._uncache(!1)
                    }
                    ,
                    a.reversed = function(t) {
                        return arguments.length ? (t != this._reversed && (this._reversed = t,
                        this.totalTime(this._timeline && !this._timeline.smoothChildTiming ? this.totalDuration() - this._totalTime : this._totalTime, !0)),
                        this) : this._reversed
                    }
                    ,
                    a.paused = function(t) {
                        if (!arguments.length)
                            return this._paused;
                        var e, n, r = this._timeline;
                        return t != this._paused && r && (l || t || s.wake(),
                        e = r.rawTime(),
                        n = e - this._pauseTime,
                        !t && r.smoothChildTiming && (this._startTime += n,
                        this._uncache(!1)),
                        this._pauseTime = t ? e : null ,
                        this._paused = t,
                        this._active = this.isActive(),
                        !t && 0 !== n && this._initted && this.duration() && this.render(r.smoothChildTiming ? this._totalTime : (e - this._startTime) / this._timeScale, !0, !0)),
                        this._gc && !t && this._enabled(!0, !1),
                        this
                    }
                    ;
                    var k = y("core.SimpleTimeline", function(t) {
                        L.call(this, 0, t),
                        this.autoRemoveChildren = this.smoothChildTiming = !0
                    });
                    a = k.prototype = new L,
                    a.constructor = k,
                    a.kill()._gc = !1,
                    a._first = a._last = a._recent = null ,
                    a._sortChildren = !1,
                    a.add = a.insert = function(t, e) {
                        var n, r;
                        if (t._startTime = Number(e || 0) + t._delay,
                        t._paused && this !== t._timeline && (t._pauseTime = t._startTime + (this.rawTime() - t._startTime) / t._timeScale),
                        t.timeline && t.timeline._remove(t, !0),
                        t.timeline = t._timeline = this,
                        t._gc && t._enabled(!0, !0),
                        n = this._last,
                        this._sortChildren)
                            for (r = t._startTime; n && n._startTime > r; )
                                n = n._prev;
                        return n ? (t._next = n._next,
                        n._next = t) : (t._next = this._first,
                        this._first = t),
                        t._next ? t._next._prev = t : this._last = t,
                        t._prev = n,
                        this._recent = t,
                        this._timeline && this._uncache(!0),
                        this
                    }
                    ,
                    a._remove = function(t, e) {
                        return t.timeline === this && (e || t._enabled(!1, !0),
                        t._prev ? t._prev._next = t._next : this._first === t && (this._first = t._next),
                        t._next ? t._next._prev = t._prev : this._last === t && (this._last = t._prev),
                        t._next = t._prev = t.timeline = null ,
                        t === this._recent && (this._recent = this._last),
                        this._timeline && this._uncache(!0)),
                        this
                    }
                    ,
                    a.render = function(t, e, n) {
                        var r, i = this._first;
                        for (this._totalTime = this._time = this._rawPrevTime = t; i; )
                            r = i._next,
                            (i._active || t >= i._startTime && !i._paused) && (i._reversed ? i.render((i._dirty ? i.totalDuration() : i._totalDuration) - (t - i._startTime) * i._timeScale, e, n) : i.render((t - i._startTime) * i._timeScale, e, n)),
                            i = r
                    }
                    ,
                    a.rawTime = function() {
                        return l || s.wake(),
                        this._totalTime
                    }
                    ;
                    var R = y("TweenLite", function(e, n, r) {
                        if (L.call(this, n, r),
                        this.render = R.prototype.render,
                        null == e)
                            throw "Cannot tween a null target.";
                        this.target = e = "string" != typeof e ? e : R.selector(e) || e;
                        var i, o, a, s = e.jquery || e.length && e !== t && e[0] && (e[0] === t || e[0].nodeType && e[0].style && !e.nodeType), l = this.vars.overwrite;
                        if (this._overwrite = l = null == l ? G[R.defaultOverwrite] : "number" == typeof l ? l >> 0 : G[l],
                        (s || e instanceof Array || e.push && f(e)) && "number" != typeof e[0])
                            for (this._targets = a = p(e),
                            this._propLookup = [],
                            this._siblings = [],
                            i = 0; a.length > i; i++)
                                o = a[i],
                                o ? "string" != typeof o ? o.length && o !== t && o[0] && (o[0] === t || o[0].nodeType && o[0].style && !o.nodeType) ? (a.splice(i--, 1),
                                this._targets = a = a.concat(p(o))) : (this._siblings[i] = X(o, this, !1),
                                1 === l && this._siblings[i].length > 1 && K(o, this, null , 1, this._siblings[i])) : (o = a[i--] = R.selector(o),
                                "string" == typeof o && a.splice(i + 1, 1)) : a.splice(i--, 1);
                        else
                            this._propLookup = {},
                            this._siblings = X(e, this, !1),
                            1 === l && this._siblings.length > 1 && K(e, this, null , 1, this._siblings);
                        (this.vars.immediateRender || 0 === n && 0 === this._delay && this.vars.immediateRender !== !1) && (this._time = -u,
                        this.render(-this._delay))
                    }, !0)
                      , O = function(e) {
                        return e && e.length && e !== t && e[0] && (e[0] === t || e[0].nodeType && e[0].style && !e.nodeType)
                    }
                      , D = function(t, e) {
                        var n, r = {};
                        for (n in t)
                            V[n] || n in e && "transform" !== n && "x" !== n && "y" !== n && "width" !== n && "height" !== n && "className" !== n && "border" !== n || !(!B[n] || B[n] && B[n]._autoCSS) || (r[n] = t[n],
                            delete t[n]);
                        t.css = r
                    };
                    a = R.prototype = new L,
                    a.constructor = R,
                    a.kill()._gc = !1,
                    a.ratio = 0,
                    a._firstPT = a._targets = a._overwrittenProps = a._startAt = null ,
                    a._notifyPluginsOfEnabled = a._lazy = !1,
                    R.version = "1.17.0",
                    R.defaultEase = a._ease = new b(null ,null ,1,1),
                    R.defaultOverwrite = "auto",
                    R.ticker = s,
                    R.autoSleep = 120,
                    R.lagSmoothing = function(t, e) {
                        s.lagSmoothing(t, e)
                    }
                    ,
                    R.selector = t.$ || t.jQuery || function(e) {
                        var n = t.$ || t.jQuery;
                        return n ? (R.selector = n,
                        n(e)) : "undefined" == typeof document ? e : document.querySelectorAll ? document.querySelectorAll(e) : document.getElementById("#" === e.charAt(0) ? e.substr(1) : e)
                    }
                    ;
                    var F = []
                      , U = {}
                      , I = R._internals = {
                        isArray: f,
                        isSelector: O,
                        lazyTweens: F
                    }
                      , B = R._plugins = {}
                      , N = I.tweenLookup = {}
                      , j = 0
                      , V = I.reservedProps = {
                        ease: 1,
                        delay: 1,
                        overwrite: 1,
                        onComplete: 1,
                        onCompleteParams: 1,
                        onCompleteScope: 1,
                        useFrames: 1,
                        runBackwards: 1,
                        startAt: 1,
                        onUpdate: 1,
                        onUpdateParams: 1,
                        onUpdateScope: 1,
                        onStart: 1,
                        onStartParams: 1,
                        onStartScope: 1,
                        onReverseComplete: 1,
                        onReverseCompleteParams: 1,
                        onReverseCompleteScope: 1,
                        onRepeat: 1,
                        onRepeatParams: 1,
                        onRepeatScope: 1,
                        easeParams: 1,
                        yoyo: 1,
                        immediateRender: 1,
                        repeat: 1,
                        repeatDelay: 1,
                        data: 1,
                        paused: 1,
                        reversed: 1,
                        autoCSS: 1,
                        lazy: 1,
                        onOverwrite: 1,
                        callbackScope: 1
                    }
                      , G = {
                        none: 0,
                        all: 1,
                        auto: 2,
                        concurrent: 3,
                        allOnStart: 4,
                        preexisting: 5,
                        "true": 1,
                        "false": 0
                    }
                      , z = L._rootFramesTimeline = new k
                      , H = L._rootTimeline = new k
                      , W = 30
                      , q = I.lazyRender = function() {
                        var t, e = F.length;
                        for (U = {}; --e > -1; )
                            t = F[e],
                            t && t._lazy !== !1 && (t.render(t._lazy[0], t._lazy[1], !0),
                            t._lazy = !1);
                        F.length = 0
                    }
                    ;
                    H._startTime = s.time,
                    z._startTime = s.frame,
                    H._active = z._active = !0,
                    setTimeout(q, 1),
                    L._updateRoot = R.render = function() {
                        var t, e, n;
                        if (F.length && q(),
                        H.render((s.time - H._startTime) * H._timeScale, !1, !1),
                        z.render((s.frame - z._startTime) * z._timeScale, !1, !1),
                        F.length && q(),
                        s.frame >= W) {
                            W = s.frame + (parseInt(R.autoSleep, 10) || 120);
                            for (n in N) {
                                for (e = N[n].tweens,
                                t = e.length; --t > -1; )
                                    e[t]._gc && e.splice(t, 1);
                                0 === e.length && delete N[n]
                            }
                            if (n = H._first,
                            (!n || n._paused) && R.autoSleep && !z._first && 1 === s._listeners.tick.length) {
                                for (; n && n._paused; )
                                    n = n._next;
                                n || s.sleep()
                            }
                        }
                    }
                    ,
                    s.addEventListener("tick", L._updateRoot);
                    var X = function(t, e, n) {
                        var r, i, o = t._gsTweenID;
                        if (N[o || (t._gsTweenID = o = "t" + j++)] || (N[o] = {
                            target: t,
                            tweens: []
                        }),
                        e && (r = N[o].tweens,
                        r[i = r.length] = e,
                        n))
                            for (; --i > -1; )
                                r[i] === e && r.splice(i, 1);
                        return N[o].tweens
                    }
                      , Y = function(t, e, n, r) {
                        var i, o, a = t.vars.onOverwrite;
                        return a && (i = a(t, e, n, r)),
                        a = R.onOverwrite,
                        a && (o = a(t, e, n, r)),
                        i !== !1 && o !== !1
                    }
                      , K = function(t, e, n, r, i) {
                        var o, a, s, l;
                        if (1 === r || r >= 4) {
                            for (l = i.length,
                            o = 0; l > o; o++)
                                if ((s = i[o]) !== e)
                                    s._gc || s._kill(null , t, e) && (a = !0);
                                else if (5 === r)
                                    break;
                            return a
                        }
                        var h, c = e._startTime + u, p = [], d = 0, f = 0 === e._duration;
                        for (o = i.length; --o > -1; )
                            (s = i[o]) === e || s._gc || s._paused || (s._timeline !== e._timeline ? (h = h || Q(e, 0, f),
                            0 === Q(s, h, f) && (p[d++] = s)) : c >= s._startTime && s._startTime + s.totalDuration() / s._timeScale > c && ((f || !s._initted) && 2e-10 >= c - s._startTime || (p[d++] = s)));
                        for (o = d; --o > -1; )
                            if (s = p[o],
                            2 === r && s._kill(n, t, e) && (a = !0),
                            2 !== r || !s._firstPT && s._initted) {
                                if (2 !== r && !Y(s, e))
                                    continue;
                                s._enabled(!1, !1) && (a = !0)
                            }
                        return a
                    }
                      , Q = function(t, e, n) {
                        for (var r = t._timeline, i = r._timeScale, o = t._startTime; r._timeline; ) {
                            if (o += r._startTime,
                            i *= r._timeScale,
                            r._paused)
                                return -100;
                            r = r._timeline
                        }
                        return o /= i,
                        o > e ? o - e : n && o === e || !t._initted && 2 * u > o - e ? u : (o += t.totalDuration() / t._timeScale / i) > e + u ? 0 : o - e - u
                    };
                    a._init = function() {
                        var t, e, n, r, i, o = this.vars, a = this._overwrittenProps, s = this._duration, l = !!o.immediateRender, h = o.ease;
                        if (o.startAt) {
                            this._startAt && (this._startAt.render(-1, !0),
                            this._startAt.kill()),
                            i = {};
                            for (r in o.startAt)
                                i[r] = o.startAt[r];
                            if (i.overwrite = !1,
                            i.immediateRender = !0,
                            i.lazy = l && o.lazy !== !1,
                            i.startAt = i.delay = null ,
                            this._startAt = R.to(this.target, 0, i),
                            l)
                                if (this._time > 0)
                                    this._startAt = null ;
                                else if (0 !== s)
                                    return
                        } else if (o.runBackwards && 0 !== s)
                            if (this._startAt)
                                this._startAt.render(-1, !0),
                                this._startAt.kill(),
                                this._startAt = null ;
                            else {
                                0 !== this._time && (l = !1),
                                n = {};
                                for (r in o)
                                    V[r] && "autoCSS" !== r || (n[r] = o[r]);
                                if (n.overwrite = 0,
                                n.data = "isFromStart",
                                n.lazy = l && o.lazy !== !1,
                                n.immediateRender = l,
                                this._startAt = R.to(this.target, 0, n),
                                l) {
                                    if (0 === this._time)
                                        return
                                } else
                                    this._startAt._init(),
                                    this._startAt._enabled(!1),
                                    this.vars.immediateRender && (this._startAt = null )
                            }
                        if (this._ease = h = h ? h instanceof b ? h : "function" == typeof h ? new b(h,o.easeParams) : w[h] || R.defaultEase : R.defaultEase,
                        o.easeParams instanceof Array && h.config && (this._ease = h.config.apply(h, o.easeParams)),
                        this._easeType = this._ease._type,
                        this._easePower = this._ease._power,
                        this._firstPT = null ,
                        this._targets)
                            for (t = this._targets.length; --t > -1; )
                                this._initProps(this._targets[t], this._propLookup[t] = {}, this._siblings[t], a ? a[t] : null ) && (e = !0);
                        else
                            e = this._initProps(this.target, this._propLookup, this._siblings, a);
                        if (e && R._onPluginEvent("_onInitAllProps", this),
                        a && (this._firstPT || "function" != typeof this.target && this._enabled(!1, !1)),
                        o.runBackwards)
                            for (n = this._firstPT; n; )
                                n.s += n.c,
                                n.c = -n.c,
                                n = n._next;
                        this._onUpdate = o.onUpdate,
                        this._initted = !0
                    }
                    ,
                    a._initProps = function(e, n, r, i) {
                        var o, a, s, l, h, c;
                        if (null == e)
                            return !1;
                        U[e._gsTweenID] && q(),
                        this.vars.css || e.style && e !== t && e.nodeType && B.css && this.vars.autoCSS !== !1 && D(this.vars, e);
                        for (o in this.vars) {
                            if (c = this.vars[o],
                            V[o])
                                c && (c instanceof Array || c.push && f(c)) && -1 !== c.join("").indexOf("{self}") && (this.vars[o] = c = this._swapSelfInParams(c, this));
                            else if (B[o] && (l = new B[o])._onInitTween(e, this.vars[o], this)) {
                                for (this._firstPT = h = {
                                    _next: this._firstPT,
                                    t: l,
                                    p: "setRatio",
                                    s: 0,
                                    c: 1,
                                    f: !0,
                                    n: o,
                                    pg: !0,
                                    pr: l._priority
                                },
                                a = l._overwriteProps.length; --a > -1; )
                                    n[l._overwriteProps[a]] = this._firstPT;
                                (l._priority || l._onInitAllProps) && (s = !0),
                                (l._onDisable || l._onEnable) && (this._notifyPluginsOfEnabled = !0)
                            } else
                                this._firstPT = n[o] = h = {
                                    _next: this._firstPT,
                                    t: e,
                                    p: o,
                                    f: "function" == typeof e[o],
                                    n: o,
                                    pg: !1,
                                    pr: 0
                                },
                                h.s = h.f ? e[o.indexOf("set") || "function" != typeof e["get" + o.substr(3)] ? o : "get" + o.substr(3)]() : parseFloat(e[o]),
                                h.c = "string" == typeof c && "=" === c.charAt(1) ? parseInt(c.charAt(0) + "1", 10) * Number(c.substr(2)) : Number(c) - h.s || 0;
                            h && h._next && (h._next._prev = h)
                        }
                        return i && this._kill(i, e) ? this._initProps(e, n, r, i) : this._overwrite > 1 && this._firstPT && r.length > 1 && K(e, this, n, this._overwrite, r) ? (this._kill(n, e),
                        this._initProps(e, n, r, i)) : (this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration) && (U[e._gsTweenID] = !0),
                        s)
                    }
                    ,
                    a.render = function(t, e, n) {
                        var r, i, o, a, s = this._time, l = this._duration, h = this._rawPrevTime;
                        if (t >= l)
                            this._totalTime = this._time = l,
                            this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1,
                            this._reversed || (r = !0,
                            i = "onComplete",
                            n = n || this._timeline.autoRemoveChildren),
                            0 === l && (this._initted || !this.vars.lazy || n) && (this._startTime === this._timeline._duration && (t = 0),
                            (0 === t || 0 > h || h === u && "isPause" !== this.data) && h !== t && (n = !0,
                            h > u && (i = "onReverseComplete")),
                            this._rawPrevTime = a = !e || t || h === t ? t : u);
                        else if (1e-7 > t)
                            this._totalTime = this._time = 0,
                            this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0,
                            (0 !== s || 0 === l && h > 0) && (i = "onReverseComplete",
                            r = this._reversed),
                            0 > t && (this._active = !1,
                            0 === l && (this._initted || !this.vars.lazy || n) && (h >= 0 && (h !== u || "isPause" !== this.data) && (n = !0),
                            this._rawPrevTime = a = !e || t || h === t ? t : u)),
                            this._initted || (n = !0);
                        else if (this._totalTime = this._time = t,
                        this._easeType) {
                            var c = t / l
                              , p = this._easeType
                              , d = this._easePower;
                            (1 === p || 3 === p && c >= .5) && (c = 1 - c),
                            3 === p && (c *= 2),
                            1 === d ? c *= c : 2 === d ? c *= c * c : 3 === d ? c *= c * c * c : 4 === d && (c *= c * c * c * c),
                            this.ratio = 1 === p ? 1 - c : 2 === p ? c : .5 > t / l ? c / 2 : 1 - c / 2
                        } else
                            this.ratio = this._ease.getRatio(t / l);
                        if (this._time !== s || n) {
                            if (!this._initted) {
                                if (this._init(),
                                !this._initted || this._gc)
                                    return;
                                if (!n && this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration))
                                    return this._time = this._totalTime = s,
                                    this._rawPrevTime = h,
                                    F.push(this),
                                    void (this._lazy = [t, e]);
                                this._time && !r ? this.ratio = this._ease.getRatio(this._time / l) : r && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
                            }
                            for (this._lazy !== !1 && (this._lazy = !1),
                            this._active || !this._paused && this._time !== s && t >= 0 && (this._active = !0),
                            0 === s && (this._startAt && (t >= 0 ? this._startAt.render(t, e, n) : i || (i = "_dummyGS")),
                            this.vars.onStart && (0 !== this._time || 0 === l) && (e || this._callback("onStart"))),
                            o = this._firstPT; o; )
                                o.f ? o.t[o.p](o.c * this.ratio + o.s) : o.t[o.p] = o.c * this.ratio + o.s,
                                o = o._next;
                            this._onUpdate && (0 > t && this._startAt && t !== -1e-4 && this._startAt.render(t, e, n),
                            e || (this._time !== s || r) && this._callback("onUpdate")),
                            i && (!this._gc || n) && (0 > t && this._startAt && !this._onUpdate && t !== -1e-4 && this._startAt.render(t, e, n),
                            r && (this._timeline.autoRemoveChildren && this._enabled(!1, !1),
                            this._active = !1),
                            !e && this.vars[i] && this._callback(i),
                            0 === l && this._rawPrevTime === u && a !== u && (this._rawPrevTime = 0))
                        }
                    }
                    ,
                    a._kill = function(t, e, n) {
                        if ("all" === t && (t = null ),
                        null == t && (null == e || e === this.target))
                            return this._lazy = !1,
                            this._enabled(!1, !1);
                        e = "string" != typeof e ? e || this._targets || this.target : R.selector(e) || e;
                        var r, i, o, a, s, l, h, c, u, p = n && this._time && n._startTime === this._startTime && this._timeline === n._timeline;
                        if ((f(e) || O(e)) && "number" != typeof e[0])
                            for (r = e.length; --r > -1; )
                                this._kill(t, e[r], n) && (l = !0);
                        else {
                            if (this._targets) {
                                for (r = this._targets.length; --r > -1; )
                                    if (e === this._targets[r]) {
                                        s = this._propLookup[r] || {},
                                        this._overwrittenProps = this._overwrittenProps || [],
                                        i = this._overwrittenProps[r] = t ? this._overwrittenProps[r] || {} : "all";
                                        break
                                    }
                            } else {
                                if (e !== this.target)
                                    return !1;
                                s = this._propLookup,
                                i = this._overwrittenProps = t ? this._overwrittenProps || {} : "all"
                            }
                            if (s) {
                                if (h = t || s,
                                c = t !== i && "all" !== i && t !== s && ("object" != typeof t || !t._tempKill),
                                n && (R.onOverwrite || this.vars.onOverwrite)) {
                                    for (o in h)
                                        s[o] && (u || (u = []),
                                        u.push(o));
                                    if ((u || !t) && !Y(this, n, e, u))
                                        return !1
                                }
                                for (o in h)
                                    (a = s[o]) && (p && (a.f ? a.t[a.p](a.s) : a.t[a.p] = a.s,
                                    l = !0),
                                    a.pg && a.t._kill(h) && (l = !0),
                                    a.pg && 0 !== a.t._overwriteProps.length || (a._prev ? a._prev._next = a._next : a === this._firstPT && (this._firstPT = a._next),
                                    a._next && (a._next._prev = a._prev),
                                    a._next = a._prev = null ),
                                    delete s[o]),
                                    c && (i[o] = 1);
                                !this._firstPT && this._initted && this._enabled(!1, !1)
                            }
                        }
                        return l
                    }
                    ,
                    a.invalidate = function() {
                        return this._notifyPluginsOfEnabled && R._onPluginEvent("_onDisable", this),
                        this._firstPT = this._overwrittenProps = this._startAt = this._onUpdate = null ,
                        this._notifyPluginsOfEnabled = this._active = this._lazy = !1,
                        this._propLookup = this._targets ? {} : [],
                        L.prototype.invalidate.call(this),
                        this.vars.immediateRender && (this._time = -u,
                        this.render(-this._delay)),
                        this
                    }
                    ,
                    a._enabled = function(t, e) {
                        if (l || s.wake(),
                        t && this._gc) {
                            var n, r = this._targets;
                            if (r)
                                for (n = r.length; --n > -1; )
                                    this._siblings[n] = X(r[n], this, !0);
                            else
                                this._siblings = X(this.target, this, !0)
                        }
                        return L.prototype._enabled.call(this, t, e),
                        this._notifyPluginsOfEnabled && this._firstPT ? R._onPluginEvent(t ? "_onEnable" : "_onDisable", this) : !1
                    }
                    ,
                    R.to = function(t, e, n) {
                        return new R(t,e,n)
                    }
                    ,
                    R.from = function(t, e, n) {
                        return n.runBackwards = !0,
                        n.immediateRender = 0 != n.immediateRender,
                        new R(t,e,n)
                    }
                    ,
                    R.fromTo = function(t, e, n, r) {
                        return r.startAt = n,
                        r.immediateRender = 0 != r.immediateRender && 0 != n.immediateRender,
                        new R(t,e,r)
                    }
                    ,
                    R.delayedCall = function(t, e, n, r, i) {
                        return new R(e,0,{
                            delay: t,
                            onComplete: e,
                            onCompleteParams: n,
                            callbackScope: r,
                            onReverseComplete: e,
                            onReverseCompleteParams: n,
                            immediateRender: !1,
                            lazy: !1,
                            useFrames: i,
                            overwrite: 0
                        })
                    }
                    ,
                    R.set = function(t, e) {
                        return new R(t,0,e)
                    }
                    ,
                    R.getTweensOf = function(t, e) {
                        if (null == t)
                            return [];
                        t = "string" != typeof t ? t : R.selector(t) || t;
                        var n, r, i, o;
                        if ((f(t) || O(t)) && "number" != typeof t[0]) {
                            for (n = t.length,
                            r = []; --n > -1; )
                                r = r.concat(R.getTweensOf(t[n], e));
                            for (n = r.length; --n > -1; )
                                for (o = r[n],
                                i = n; --i > -1; )
                                    o === r[i] && r.splice(n, 1)
                        } else
                            for (r = X(t).concat(),
                            n = r.length; --n > -1; )
                                (r[n]._gc || e && !r[n].isActive()) && r.splice(n, 1);
                        return r
                    }
                    ,
                    R.killTweensOf = R.killDelayedCallsTo = function(t, e, n) {
                        "object" == typeof e && (n = e,
                        e = !1);
                        for (var r = R.getTweensOf(t, e), i = r.length; --i > -1; )
                            r[i]._kill(n, t)
                    }
                    ;
                    var Z = y("plugins.TweenPlugin", function(t, e) {
                        this._overwriteProps = (t || "").split(","),
                        this._propName = this._overwriteProps[0],
                        this._priority = e || 0,
                        this._super = Z.prototype
                    }, !0);
                    if (a = Z.prototype,
                    Z.version = "1.10.1",
                    Z.API = 2,
                    a._firstPT = null ,
                    a._addTween = function(t, e, n, r, i, o) {
                        var a, s;
                        return null != r && (a = "number" == typeof r || "=" !== r.charAt(1) ? Number(r) - Number(n) : parseInt(r.charAt(0) + "1", 10) * Number(r.substr(2))) ? (this._firstPT = s = {
                            _next: this._firstPT,
                            t: t,
                            p: e,
                            s: n,
                            c: a,
                            f: "function" == typeof t[e],
                            n: i || e,
                            r: o
                        },
                        s._next && (s._next._prev = s),
                        s) : void 0
                    }
                    ,
                    a.setRatio = function(t) {
                        for (var e, n = this._firstPT, r = 1e-6; n; )
                            e = n.c * t + n.s,
                            n.r ? e = Math.round(e) : r > e && e > -r && (e = 0),
                            n.f ? n.t[n.p](e) : n.t[n.p] = e,
                            n = n._next
                    }
                    ,
                    a._kill = function(t) {
                        var e, n = this._overwriteProps, r = this._firstPT;
                        if (null != t[this._propName])
                            this._overwriteProps = [];
                        else
                            for (e = n.length; --e > -1; )
                                null != t[n[e]] && n.splice(e, 1);
                        for (; r; )
                            null != t[r.n] && (r._next && (r._next._prev = r._prev),
                            r._prev ? (r._prev._next = r._next,
                            r._prev = null ) : this._firstPT === r && (this._firstPT = r._next)),
                            r = r._next;
                        return !1
                    }
                    ,
                    a._roundProps = function(t, e) {
                        for (var n = this._firstPT; n; )
                            (t[this._propName] || null != n.n && t[n.n.split(this._propName + "_").join("")]) && (n.r = e),
                            n = n._next
                    }
                    ,
                    R._onPluginEvent = function(t, e) {
                        var n, r, i, o, a, s = e._firstPT;
                        if ("_onInitAllProps" === t) {
                            for (; s; ) {
                                for (a = s._next,
                                r = i; r && r.pr > s.pr; )
                                    r = r._next;
                                (s._prev = r ? r._prev : o) ? s._prev._next = s : i = s,
                                (s._next = r) ? r._prev = s : o = s,
                                s = a
                            }
                            s = e._firstPT = i
                        }
                        for (; s; )
                            s.pg && "function" == typeof s.t[t] && s.t[t]() && (n = !0),
                            s = s._next;
                        return n
                    }
                    ,
                    Z.activate = function(t) {
                        for (var e = t.length; --e > -1; )
                            t[e].API === Z.API && (B[(new t[e])._propName] = t[e]);
                        return !0
                    }
                    ,
                    v.plugin = function(t) {
                        if (!(t && t.propName && t.init && t.API))
                            throw "illegal plugin definition.";
                        var e, n = t.propName, r = t.priority || 0, i = t.overwriteProps, o = {
                            init: "_onInitTween",
                            set: "setRatio",
                            kill: "_kill",
                            round: "_roundProps",
                            initAll: "_onInitAllProps"
                        }, a = y("plugins." + n.charAt(0).toUpperCase() + n.substr(1) + "Plugin", function() {
                            Z.call(this, n, r),
                            this._overwriteProps = i || []
                        }, t.global === !0), s = a.prototype = new Z(n);
                        s.constructor = a,
                        a.API = t.API;
                        for (e in o)
                            "function" == typeof t[e] && (s[o[e]] = t[e]);
                        return a.version = t.version,
                        Z.activate([a]),
                        a
                    }
                    ,
                    i = t._gsQueue) {
                        for (o = 0; i.length > o; o++)
                            i[o]();
                        for (a in m)
                            m[a].func || t.console.log("GSAP encountered missing dependency: com.greensock." + a)
                    }
                    l = !1
                }
            }("undefined" != typeof e && e.exports && "undefined" != typeof t ? t : this || window, "TweenMax")
        }
        ).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
    }
    , {}],
    131: [function(t, e, n) {
        (function(t) {
            !function(t) {
                "use strict";
                if ("function" == typeof bootstrap)
                    bootstrap("promise", t);
                else if ("object" == typeof n && "object" == typeof e)
                    e.exports = t();
                else if ("function" == typeof define && define.amd)
                    define(t);
                else if ("undefined" != typeof ses) {
                    if (!ses.ok())
                        return;
                    ses.makeQ = t
                } else {
                    if ("undefined" == typeof window && "undefined" == typeof self)
                        throw new Error("This environment was not anticipated by Q. Please file a bug.");
                    var r = "undefined" != typeof window ? window : self
                      , i = r.Q;
                    r.Q = t(),
                    r.Q.noConflict = function() {
                        return r.Q = i,
                        this
                    }
                }
            }(function() {
                "use strict";
                function e(t) {
                    return function() {
                        return K.apply(t, arguments)
                    }
                }
                function n(t) {
                    return t === Object(t)
                }
                function r(t) {
                    return "[object StopIteration]" === rt(t) || t instanceof W
                }
                function i(t, e) {
                    if (G && e.stack && "object" == typeof t && null !== t && t.stack && -1 === t.stack.indexOf(it)) {
                        for (var n = [], r = e; r; r = r.source)
                            r.stack && n.unshift(r.stack);
                        n.unshift(t.stack);
                        var i = n.join("\n" + it + "\n");
                        t.stack = o(i)
                    }
                }
                function o(t) {
                    for (var e = t.split("\n"), n = [], r = 0; r < e.length; ++r) {
                        var i = e[r];
                        l(i) || a(i) || !i || n.push(i)
                    }
                    return n.join("\n")
                }
                function a(t) {
                    return -1 !== t.indexOf("(module.js:") || -1 !== t.indexOf("(node.js:")
                }
                function s(t) {
                    var e = /at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);
                    if (e)
                        return [e[1], Number(e[2])];
                    var n = /at ([^ ]+):(\d+):(?:\d+)$/.exec(t);
                    if (n)
                        return [n[1], Number(n[2])];
                    var r = /.*@(.+):(\d+)$/.exec(t);
                    return r ? [r[1], Number(r[2])] : void 0
                }
                function l(t) {
                    var e = s(t);
                    if (!e)
                        return !1;
                    var n = e[0]
                      , r = e[1];
                    return n === H && r >= q && ht >= r
                }
                function h() {
                    if (G)
                        try {
                            throw new Error
                        } catch (t) {
                            var e = t.stack.split("\n")
                              , n = e[0].indexOf("@") > 0 ? e[1] : e[2]
                              , r = s(n);
                            if (!r)
                                return;
                            return H = r[0],
                            r[1]
                        }
                }
                function c(t, e, n) {
                    return function() {
                        return "undefined" != typeof console && "function" == typeof console.warn && console.warn(e + " is deprecated, use " + n + " instead.", new Error("").stack),
                        t.apply(t, arguments)
                    }
                }
                function u(t) {
                    return t instanceof m ? t : _(t) ? E(t) : A(t)
                }
                function p() {
                    function t(t) {
                        e = t,
                        o.source = t,
                        Z(n, function(e, n) {
                            u.nextTick(function() {
                                t.promiseDispatch.apply(t, n)
                            })
                        }, void 0),
                        n = void 0,
                        r = void 0
                    }
                    var e, n = [], r = [], i = tt(p.prototype), o = tt(m.prototype);
                    if (o.promiseDispatch = function(t, i, o) {
                        var a = Q(arguments);
                        n ? (n.push(a),
                        "when" === i && o[1] && r.push(o[1])) : u.nextTick(function() {
                            e.promiseDispatch.apply(e, a)
                        })
                    }
                    ,
                    o.valueOf = function() {
                        if (n)
                            return o;
                        var t = v(e);
                        return y(t) && (e = t),
                        t
                    }
                    ,
                    o.inspect = function() {
                        return e ? e.inspect() : {
                            state: "pending"
                        }
                    }
                    ,
                    u.longStackSupport && G)
                        try {
                            throw new Error
                        } catch (a) {
                            o.stack = a.stack.substring(a.stack.indexOf("\n") + 1)
                        }
                    return i.promise = o,
                    i.resolve = function(n) {
                        e || t(u(n))
                    }
                    ,
                    i.fulfill = function(n) {
                        e || t(A(n))
                    }
                    ,
                    i.reject = function(n) {
                        e || t(C(n))
                    }
                    ,
                    i.notify = function(t) {
                        e || Z(r, function(e, n) {
                            u.nextTick(function() {
                                n(t)
                            })
                        }, void 0)
                    }
                    ,
                    i
                }
                function d(t) {
                    if ("function" != typeof t)
                        throw new TypeError("resolver must be a function.");
                    var e = p();
                    try {
                        t(e.resolve, e.reject, e.notify)
                    } catch (n) {
                        e.reject(n)
                    }
                    return e.promise
                }
                function f(t) {
                    return d(function(e, n) {
                        for (var r = 0, i = t.length; i > r; r++)
                            u(t[r]).then(e, n)
                    })
                }
                function m(t, e, n) {
                    void 0 === e && (e = function(t) {
                        return C(new Error("Promise does not support operation: " + t))
                    }
                    ),
                    void 0 === n && (n = function() {
                        return {
                            state: "unknown"
                        }
                    }
                    );
                    var r = tt(m.prototype);
                    if (r.promiseDispatch = function(n, i, o) {
                        var a;
                        try {
                            a = t[i] ? t[i].apply(r, o) : e.call(r, i, o)
                        } catch (s) {
                            a = C(s)
                        }
                        n && n(a)
                    }
                    ,
                    r.inspect = n,
                    n) {
                        var i = n();
                        "rejected" === i.state && (r.exception = i.reason),
                        r.valueOf = function() {
                            var t = n();
                            return "pending" === t.state || "rejected" === t.state ? r : t.value
                        }
                    }
                    return r
                }
                function g(t, e, n, r) {
                    return u(t).then(e, n, r)
                }
                function v(t) {
                    if (y(t)) {
                        var e = t.inspect();
                        if ("fulfilled" === e.state)
                            return e.value
                    }
                    return t
                }
                function y(t) {
                    return t instanceof m
                }
                function _(t) {
                    return n(t) && "function" == typeof t.then
                }
                function x(t) {
                    return y(t) && "pending" === t.inspect().state
                }
                function b(t) {
                    return !y(t) || "fulfilled" === t.inspect().state
                }
                function w(t) {
                    return y(t) && "rejected" === t.inspect().state
                }
                function S() {
                    ot.length = 0,
                    at.length = 0,
                    lt || (lt = !0)
                }
                function T(e, n) {
                    lt && ("object" == typeof t && "function" == typeof t.emit && u.nextTick.runAfter(function() {
                        -1 !== J(at, e) && (t.emit("unhandledRejection", n, e),
                        st.push(e))
                    }),
                    at.push(e),
                    n && "undefined" != typeof n.stack ? ot.push(n.stack) : ot.push("(no stack) " + n))
                }
                function M(e) {
                    if (lt) {
                        var n = J(at, e);
                        -1 !== n && ("object" == typeof t && "function" == typeof t.emit && u.nextTick.runAfter(function() {
                            var r = J(st, e);
                            -1 !== r && (t.emit("rejectionHandled", ot[n], e),
                            st.splice(r, 1))
                        }),
                        at.splice(n, 1),
                        ot.splice(n, 1))
                    }
                }
                function C(t) {
                    var e = m({
                        when: function(e) {
                            return e && M(this),
                            e ? e(t) : this
                        }
                    }, function() {
                        return this
                    }, function() {
                        return {
                            state: "rejected",
                            reason: t
                        }
                    });
                    return T(e, t),
                    e
                }
                function A(t) {
                    return m({
                        when: function() {
                            return t
                        },
                        get: function(e) {
                            return t[e]
                        },
                        set: function(e, n) {
                            t[e] = n
                        },
                        "delete": function(e) {
                            delete t[e]
                        },
                        post: function(e, n) {
                            return null === e || void 0 === e ? t.apply(void 0, n) : t[e].apply(t, n)
                        },
                        apply: function(e, n) {
                            return t.apply(e, n)
                        },
                        keys: function() {
                            return nt(t)
                        }
                    }, void 0, function() {
                        return {
                            state: "fulfilled",
                            value: t
                        }
                    })
                }
                function E(t) {
                    var e = p();
                    return u.nextTick(function() {
                        try {
                            t.then(e.resolve, e.reject, e.notify)
                        } catch (n) {
                            e.reject(n)
                        }
                    }),
                    e.promise
                }
                function L(t) {
                    return m({
                        isDef: function() {}
                    }, function(e, n) {
                        return F(t, e, n)
                    }, function() {
                        return u(t).inspect()
                    })
                }
                function P(t, e, n) {
                    return u(t).spread(e, n)
                }
                function k(t) {
                    return function() {
                        function e(t, e) {
                            var a;
                            if ("undefined" == typeof StopIteration) {
                                try {
                                    a = n[t](e)
                                } catch (s) {
                                    return C(s)
                                }
                                return a.done ? u(a.value) : g(a.value, i, o)
                            }
                            try {
                                a = n[t](e)
                            } catch (s) {
                                return r(s) ? u(s.value) : C(s)
                            }
                            return g(a, i, o)
                        }
                        var n = t.apply(this, arguments)
                          , i = e.bind(e, "next")
                          , o = e.bind(e, "throw");
                        return i()
                    }
                }
                function R(t) {
                    u.done(u.async(t)())
                }
                function O(t) {
                    throw new W(t)
                }
                function D(t) {
                    return function() {
                        return P([this, U(arguments)], function(e, n) {
                            return t.apply(e, n)
                        })
                    }
                }
                function F(t, e, n) {
                    return u(t).dispatch(e, n)
                }
                function U(t) {
                    return g(t, function(t) {
                        var e = 0
                          , n = p();
                        return Z(t, function(r, i, o) {
                            var a;
                            y(i) && "fulfilled" === (a = i.inspect()).state ? t[o] = a.value : (++e,
                            g(i, function(r) {
                                t[o] = r,
                                0 === --e && n.resolve(t)
                            }, n.reject, function(t) {
                                n.notify({
                                    index: o,
                                    value: t
                                })
                            }))
                        }, void 0),
                        0 === e && n.resolve(t),
                        n.promise
                    })
                }
                function I(t) {
                    if (0 === t.length)
                        return u.resolve();
                    var e = u.defer()
                      , n = 0;
                    return Z(t, function(r, i, o) {
                        function a(t) {
                            e.resolve(t)
                        }
                        function s() {
                            n--,
                            0 === n && e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))
                        }
                        function l(t) {
                            e.notify({
                                index: o,
                                value: t
                            })
                        }
                        var h = t[o];
                        n++,
                        g(h, a, s, l)
                    }, void 0),
                    e.promise
                }
                function B(t) {
                    return g(t, function(t) {
                        return t = $(t, u),
                        g(U($(t, function(t) {
                            return g(t, X, X)
                        })), function() {
                            return t
                        })
                    })
                }
                function N(t) {
                    return u(t).allSettled()
                }
                function j(t, e) {
                    return u(t).then(void 0, void 0, e)
                }
                function V(t, e) {
                    return u(t).nodeify(e)
                }
                var G = !1;
                try {
                    throw new Error
                } catch (z) {
                    G = !!z.stack
                }
                var H, W, q = h(), X = function() {}, Y = function() {
                    function e() {
                        for (var t, e; r.next; )
                            r = r.next,
                            t = r.task,
                            r.task = void 0,
                            e = r.domain,
                            e && (r.domain = void 0,
                            e.enter()),
                            n(t, e);
                        for (; l.length; )
                            t = l.pop(),
                            n(t);
                        o = !1
                    }
                    function n(t, n) {
                        try {
                            t()
                        } catch (r) {
                            if (s)
                                throw n && n.exit(),
                                setTimeout(e, 0),
                                n && n.enter(),
                                r;
                            setTimeout(function() {
                                throw r
                            }, 0)
                        }
                        n && n.exit()
                    }
                    var r = {
                        task: void 0,
                        next: null
                    }
                      , i = r
                      , o = !1
                      , a = void 0
                      , s = !1
                      , l = [];
                    if (Y = function(e) {
                        i = i.next = {
                            task: e,
                            domain: s && t.domain,
                            next: null
                        },
                        o || (o = !0,
                        a())
                    }
                    ,
                    "object" == typeof t && "[object process]" === t.toString() && t.nextTick)
                        s = !0,
                        a = function() {
                            t.nextTick(e)
                        }
                        ;
                    else if ("function" == typeof setImmediate)
                        a = "undefined" != typeof window ? setImmediate.bind(window, e) : function() {
                            setImmediate(e)
                        }
                        ;
                    else if ("undefined" != typeof MessageChannel) {
                        var h = new MessageChannel;
                        h.port1.onmessage = function() {
                            a = c,
                            h.port1.onmessage = e,
                            e()
                        }
                        ;
                        var c = function() {
                            h.port2.postMessage(0)
                        };
                        a = function() {
                            setTimeout(e, 0),
                            c()
                        }
                    } else
                        a = function() {
                            setTimeout(e, 0)
                        }
                        ;
                    return Y.runAfter = function(t) {
                        l.push(t),
                        o || (o = !0,
                        a())
                    }
                    ,
                    Y
                }(), K = Function.call, Q = e(Array.prototype.slice), Z = e(Array.prototype.reduce || function(t, e) {
                    var n = 0
                      , r = this.length;
                    if (1 === arguments.length)
                        for (; ; ) {
                            if (n in this) {
                                e = this[n++];
                                break
                            }
                            if (++n >= r)
                                throw new TypeError
                        }
                    for (; r > n; n++)
                        n in this && (e = t(e, this[n], n));
                    return e
                }
                ), J = e(Array.prototype.indexOf || function(t) {
                    for (var e = 0; e < this.length; e++)
                        if (this[e] === t)
                            return e;
                    return -1
                }
                ), $ = e(Array.prototype.map || function(t, e) {
                    var n = this
                      , r = [];
                    return Z(n, function(i, o, a) {
                        r.push(t.call(e, o, a, n))
                    }, void 0),
                    r
                }
                ), tt = Object.create || function(t) {
                    function e() {}
                    return e.prototype = t,
                    new e
                }
                , et = e(Object.prototype.hasOwnProperty), nt = Object.keys || function(t) {
                    var e = [];
                    for (var n in t)
                        et(t, n) && e.push(n);
                    return e
                }
                , rt = e(Object.prototype.toString);
                W = "undefined" != typeof ReturnValue ? ReturnValue : function(t) {
                    this.value = t
                }
                ;
                var it = "From previous event:";
                u.resolve = u,
                u.nextTick = Y,
                u.longStackSupport = !1,
                "object" == typeof t && t && t.env && t.env.Q_DEBUG && (u.longStackSupport = !0),
                u.defer = p,
                p.prototype.makeNodeResolver = function() {
                    var t = this;
                    return function(e, n) {
                        e ? t.reject(e) : arguments.length > 2 ? t.resolve(Q(arguments, 1)) : t.resolve(n)
                    }
                }
                ,
                u.Promise = d,
                u.promise = d,
                d.race = f,
                d.all = U,
                d.reject = C,
                d.resolve = u,
                u.passByCopy = function(t) {
                    return t
                }
                ,
                m.prototype.passByCopy = function() {
                    return this
                }
                ,
                u.join = function(t, e) {
                    return u(t).join(e)
                }
                ,
                m.prototype.join = function(t) {
                    return u([this, t]).spread(function(t, e) {
                        if (t === e)
                            return t;
                        throw new Error("Can't join: not the same: " + t + " " + e)
                    })
                }
                ,
                u.race = f,
                m.prototype.race = function() {
                    return this.then(u.race)
                }
                ,
                u.makePromise = m,
                m.prototype.toString = function() {
                    return "[object Promise]"
                }
                ,
                m.prototype.then = function(t, e, n) {
                    function r(e) {
                        try {
                            return "function" == typeof t ? t(e) : e
                        } catch (n) {
                            return C(n)
                        }
                    }
                    function o(t) {
                        if ("function" == typeof e) {
                            i(t, s);
                            try {
                                return e(t)
                            } catch (n) {
                                return C(n)
                            }
                        }
                        return C(t)
                    }
                    function a(t) {
                        return "function" == typeof n ? n(t) : t
                    }
                    var s = this
                      , l = p()
                      , h = !1;
                    return u.nextTick(function() {
                        s.promiseDispatch(function(t) {
                            h || (h = !0,
                            l.resolve(r(t)))
                        }, "when", [function(t) {
                            h || (h = !0,
                            l.resolve(o(t)))
                        }
                        ])
                    }),
                    s.promiseDispatch(void 0, "when", [void 0, function(t) {
                        var e, n = !1;
                        try {
                            e = a(t)
                        } catch (r) {
                            if (n = !0,
                            !u.onerror)
                                throw r;
                            u.onerror(r)
                        }
                        n || l.notify(e)
                    }
                    ]),
                    l.promise
                }
                ,
                u.tap = function(t, e) {
                    return u(t).tap(e)
                }
                ,
                m.prototype.tap = function(t) {
                    return t = u(t),
                    this.then(function(e) {
                        return t.fcall(e).thenResolve(e)
                    })
                }
                ,
                u.when = g,
                m.prototype.thenResolve = function(t) {
                    return this.then(function() {
                        return t
                    })
                }
                ,
                u.thenResolve = function(t, e) {
                    return u(t).thenResolve(e)
                }
                ,
                m.prototype.thenReject = function(t) {
                    return this.then(function() {
                        throw t
                    })
                }
                ,
                u.thenReject = function(t, e) {
                    return u(t).thenReject(e)
                }
                ,
                u.nearer = v,
                u.isPromise = y,
                u.isPromiseAlike = _,
                u.isPending = x,
                m.prototype.isPending = function() {
                    return "pending" === this.inspect().state
                }
                ,
                u.isFulfilled = b,
                m.prototype.isFulfilled = function() {
                    return "fulfilled" === this.inspect().state
                }
                ,
                u.isRejected = w,
                m.prototype.isRejected = function() {
                    return "rejected" === this.inspect().state
                }
                ;
                var ot = []
                  , at = []
                  , st = []
                  , lt = !0;
                u.resetUnhandledRejections = S,
                u.getUnhandledReasons = function() {
                    return ot.slice()
                }
                ,
                u.stopUnhandledRejectionTracking = function() {
                    S(),
                    lt = !1
                }
                ,
                S(),
                u.reject = C,
                u.fulfill = A,
                u.master = L,
                u.spread = P,
                m.prototype.spread = function(t, e) {
                    return this.all().then(function(e) {
                        return t.apply(void 0, e)
                    }, e)
                }
                ,
                u.async = k,
                u.spawn = R,
                u["return"] = O,
                u.promised = D,
                u.dispatch = F,
                m.prototype.dispatch = function(t, e) {
                    var n = this
                      , r = p();
                    return u.nextTick(function() {
                        n.promiseDispatch(r.resolve, t, e)
                    }),
                    r.promise
                }
                ,
                u.get = function(t, e) {
                    return u(t).dispatch("get", [e])
                }
                ,
                m.prototype.get = function(t) {
                    return this.dispatch("get", [t])
                }
                ,
                u.set = function(t, e, n) {
                    return u(t).dispatch("set", [e, n])
                }
                ,
                m.prototype.set = function(t, e) {
                    return this.dispatch("set", [t, e])
                }
                ,
                u.del = u["delete"] = function(t, e) {
                    return u(t).dispatch("delete", [e])
                }
                ,
                m.prototype.del = m.prototype["delete"] = function(t) {
                    return this.dispatch("delete", [t])
                }
                ,
                u.mapply = u.post = function(t, e, n) {
                    return u(t).dispatch("post", [e, n])
                }
                ,
                m.prototype.mapply = m.prototype.post = function(t, e) {
                    return this.dispatch("post", [t, e])
                }
                ,
                u.send = u.mcall = u.invoke = function(t, e) {
                    return u(t).dispatch("post", [e, Q(arguments, 2)])
                }
                ,
                m.prototype.send = m.prototype.mcall = m.prototype.invoke = function(t) {
                    return this.dispatch("post", [t, Q(arguments, 1)])
                }
                ,
                u.fapply = function(t, e) {
                    return u(t).dispatch("apply", [void 0, e])
                }
                ,
                m.prototype.fapply = function(t) {
                    return this.dispatch("apply", [void 0, t])
                }
                ,
                u["try"] = u.fcall = function(t) {
                    return u(t).dispatch("apply", [void 0, Q(arguments, 1)])
                }
                ,
                m.prototype.fcall = function() {
                    return this.dispatch("apply", [void 0, Q(arguments)])
                }
                ,
                u.fbind = function(t) {
                    var e = u(t)
                      , n = Q(arguments, 1);
                    return function() {
                        return e.dispatch("apply", [this, n.concat(Q(arguments))])
                    }
                }
                ,
                m.prototype.fbind = function() {
                    var t = this
                      , e = Q(arguments);
                    return function() {
                        return t.dispatch("apply", [this, e.concat(Q(arguments))])
                    }
                }
                ,
                u.keys = function(t) {
                    return u(t).dispatch("keys", [])
                }
                ,
                m.prototype.keys = function() {
                    return this.dispatch("keys", [])
                }
                ,
                u.all = U,
                m.prototype.all = function() {
                    return U(this)
                }
                ,
                u.any = I,
                m.prototype.any = function() {
                    return I(this)
                }
                ,
                u.allResolved = c(B, "allResolved", "allSettled"),
                m.prototype.allResolved = function() {
                    return B(this)
                }
                ,
                u.allSettled = N,
                m.prototype.allSettled = function() {
                    return this.then(function(t) {
                        return U($(t, function(t) {
                            function e() {
                                return t.inspect()
                            }
                            return t = u(t),
                            t.then(e, e)
                        }))
                    })
                }
                ,
                u.fail = u["catch"] = function(t, e) {
                    return u(t).then(void 0, e)
                }
                ,
                m.prototype.fail = m.prototype["catch"] = function(t) {
                    return this.then(void 0, t)
                }
                ,
                u.progress = j,
                m.prototype.progress = function(t) {
                    return this.then(void 0, void 0, t)
                }
                ,
                u.fin = u["finally"] = function(t, e) {
                    return u(t)["finally"](e)
                }
                ,
                m.prototype.fin = m.prototype["finally"] = function(t) {
                    if (!t || "function" != typeof t.apply)
                        throw new Error("Can't apply finally callback");
                    return t = u(t),
                    this.then(function(e) {
                        return t.fcall().then(function() {
                            return e
                        })
                    }, function(e) {
                        return t.fcall().then(function() {
                            throw e
                        })
                    })
                }
                ,
                u.done = function(t, e, n, r) {
                    return u(t).done(e, n, r)
                }
                ,
                m.prototype.done = function(e, n, r) {
                    var o = function(t) {
                        u.nextTick(function() {
                            if (i(t, a),
                            !u.onerror)
                                throw t;
                            u.onerror(t)
                        })
                    }
                      , a = e || n || r ? this.then(e, n, r) : this;
                    "object" == typeof t && t && t.domain && (o = t.domain.bind(o)),
                    a.then(void 0, o)
                }
                ,
                u.timeout = function(t, e, n) {
                    return u(t).timeout(e, n)
                }
                ,
                m.prototype.timeout = function(t, e) {
                    var n = p()
                      , r = setTimeout(function() {
                        e && "string" != typeof e || (e = new Error(e || "Timed out after " + t + " ms"),
                        e.code = "ETIMEDOUT"),
                        n.reject(e)
                    }, t);
                    return this.then(function(t) {
                        clearTimeout(r),
                        n.resolve(t)
                    }, function(t) {
                        clearTimeout(r),
                        n.reject(t)
                    }, n.notify),
                    n.promise
                }
                ,
                u.delay = function(t, e) {
                    return void 0 === e && (e = t,
                    t = void 0),
                    u(t).delay(e)
                }
                ,
                m.prototype.delay = function(t) {
                    return this.then(function(e) {
                        var n = p();
                        return setTimeout(function() {
                            n.resolve(e)
                        }, t),
                        n.promise
                    })
                }
                ,
                u.nfapply = function(t, e) {
                    return u(t).nfapply(e)
                }
                ,
                m.prototype.nfapply = function(t) {
                    var e = p()
                      , n = Q(t);
                    return n.push(e.makeNodeResolver()),
                    this.fapply(n).fail(e.reject),
                    e.promise
                }
                ,
                u.nfcall = function(t) {
                    var e = Q(arguments, 1);
                    return u(t).nfapply(e)
                }
                ,
                m.prototype.nfcall = function() {
                    var t = Q(arguments)
                      , e = p();
                    return t.push(e.makeNodeResolver()),
                    this.fapply(t).fail(e.reject),
                    e.promise
                }
                ,
                u.nfbind = u.denodeify = function(t) {
                    var e = Q(arguments, 1);
                    return function() {
                        var n = e.concat(Q(arguments))
                          , r = p();
                        return n.push(r.makeNodeResolver()),
                        u(t).fapply(n).fail(r.reject),
                        r.promise
                    }
                }
                ,
                m.prototype.nfbind = m.prototype.denodeify = function() {
                    var t = Q(arguments);
                    return t.unshift(this),
                    u.denodeify.apply(void 0, t)
                }
                ,
                u.nbind = function(t, e) {
                    var n = Q(arguments, 2);
                    return function() {
                        function r() {
                            return t.apply(e, arguments)
                        }
                        var i = n.concat(Q(arguments))
                          , o = p();
                        return i.push(o.makeNodeResolver()),
                        u(r).fapply(i).fail(o.reject),
                        o.promise
                    }
                }
                ,
                m.prototype.nbind = function() {
                    var t = Q(arguments, 0);
                    return t.unshift(this),
                    u.nbind.apply(void 0, t)
                }
                ,
                u.nmapply = u.npost = function(t, e, n) {
                    return u(t).npost(e, n)
                }
                ,
                m.prototype.nmapply = m.prototype.npost = function(t, e) {
                    var n = Q(e || [])
                      , r = p();
                    return n.push(r.makeNodeResolver()),
                    this.dispatch("post", [t, n]).fail(r.reject),
                    r.promise
                }
                ,
                u.nsend = u.nmcall = u.ninvoke = function(t, e) {
                    var n = Q(arguments, 2)
                      , r = p();
                    return n.push(r.makeNodeResolver()),
                    u(t).dispatch("post", [e, n]).fail(r.reject),
                    r.promise
                }
                ,
                m.prototype.nsend = m.prototype.nmcall = m.prototype.ninvoke = function(t) {
                    var e = Q(arguments, 1)
                      , n = p();
                    return e.push(n.makeNodeResolver()),
                    this.dispatch("post", [t, e]).fail(n.reject),
                    n.promise
                }
                ,
                u.nodeify = V,
                m.prototype.nodeify = function(t) {
                    return t ? void this.then(function(e) {
                        u.nextTick(function() {
                            t(null , e)
                        })
                    }, function(e) {
                        u.nextTick(function() {
                            t(e)
                        })
                    }) : this
                }
                ,
                u.noConflict = function() {
                    throw new Error("Q.noConflict only works when Q is used as a global")
                }
                ;
                var ht = h();
                return u
            })
        }
        ).call(this, t("_process"))
    }
    , {
        _process: 1
    }],
    132: [function(t, e, n) {
        var r = t("./three.min.js");
        r.DDSLoader = function() {
            this._parser = r.DDSLoader.parse
        }
        ,
        r.DDSLoader.prototype = Object.create(r.CompressedTextureLoader.prototype),
        r.DDSLoader.prototype.constructor = r.DDSLoader,
        r.DDSLoader.parse = function(t, e) {
            function n(t) {
                return t.charCodeAt(0) + (t.charCodeAt(1) << 8) + (t.charCodeAt(2) << 16) + (t.charCodeAt(3) << 24)
            }
            function i(t) {
                return String.fromCharCode(255 & t, t >> 8 & 255, t >> 16 & 255, t >> 24 & 255)
            }
            function o(t, e, n, r) {
                for (var i = n * r * 4, o = new Uint8Array(t,e,i), a = new Uint8Array(i), s = 0, l = 0, h = 0; r > h; h++)
                    for (var c = 0; n > c; c++) {
                        var u = o[l];
                        l++;
                        var p = o[l];
                        l++;
                        var d = o[l];
                        l++;
                        var f = o[l];
                        l++,
                        a[s] = d,
                        s++,
                        a[s] = p,
                        s++,
                        a[s] = u,
                        s++,
                        a[s] = f,
                        s++
                    }
                return a
            }
            var a = {
                mipmaps: [],
                width: 0,
                height: 0,
                format: null ,
                mipmapCount: 1
            }
              , s = 542327876
              , l = 131072
              , h = 512
              , c = 1024
              , u = 2048
              , p = 4096
              , d = 8192
              , f = 16384
              , m = 32768
              , g = 4
              , v = n("DXT1")
              , y = n("DXT3")
              , _ = n("DXT5")
              , x = 31
              , b = 0
              , w = 1
              , S = 2
              , T = 3
              , M = 4
              , C = 7
              , A = 20
              , E = 21
              , L = 22
              , P = 23
              , k = 24
              , R = 25
              , O = 26
              , D = 28
              , F = new Int32Array(t,0,x);
            if (F[b] !== s)
                return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),
                a;
            if (!F[A] & g)
                return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),
                a;
            var U, I = F[E], B = !1;
            switch (I) {
            case v:
                U = 8,
                a.format = r.RGB_S3TC_DXT1_Format;
                break;
            case y:
                U = 16,
                a.format = r.RGBA_S3TC_DXT3_Format;
                break;
            case _:
                U = 16,
                a.format = r.RGBA_S3TC_DXT5_Format;
                break;
            default:
                if (!(32 === F[L] && 16711680 & F[P] && 65280 & F[k] && 255 & F[R] && 4278190080 & F[O]))
                    return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ", i(I)),
                    a;
                B = !0,
                U = 64,
                a.format = r.RGBAFormat
            }
            a.mipmapCount = 1,
            F[S] & l && e !== !1 && (a.mipmapCount = Math.max(1, F[C]));
            var N = F[D];
            if (a.isCubemap = N & h ? !0 : !1,
            a.isCubemap && (!(N & c) || !(N & u) || !(N & p) || !(N & d) || !(N & f) || !(N & m)))
                return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),
                a;
            a.width = F[M],
            a.height = F[T];
            for (var j = F[w] + 4, V = a.isCubemap ? 6 : 1, G = 0; V > G; G++)
                for (var z = a.width, H = a.height, W = 0; W < a.mipmapCount; W++) {
                    if (B)
                        var q = o(t, j, z, H)
                          , X = q.length;
                    else
                        var X = Math.max(4, z) / 4 * Math.max(4, H) / 4 * U
                          , q = new Uint8Array(t,j,X);
                    var Y = {
                        data: q,
                        width: z,
                        height: H
                    };
                    a.mipmaps.push(Y),
                    j += X,
                    z = Math.max(z >> 1, 1),
                    H = Math.max(H >> 1, 1)
                }
            return a
        }
    }
    , {
        "./three.min.js": 139
    }],
    133: [function(t, e, n) {
        var r = t("./../../app/core/settings.js")
          , i = t("./three.min.js");
        !function() {
            function t(t) {
                o = t
            }
            function e() {
                switch (window.screen.orientation || window.screen.mozOrientation) {
                case "landscape-primary":
                    return 90;
                case "landscape-secondary":
                    return -90;
                case "portrait-secondary":
                    return 180;
                case "portrait-primary":
                    return 0
                }
                return window.orientation || 0
            }
            function n() {
                a = e()
            }
            var o = {}
              , a = window.orientation || 0;
            window.addEventListener("deviceorientation", t, !1),
            window.addEventListener("orientationchange", n, !1),
            i.DeviceOrientationControls = function(t) {
                this.lockBackRatio = 0,
                this.object = t,
                this.object.rotation.reorder("YXZ"),
                this.freeze = !0,
                this.movementSpeed = 1,
                this.rollSpeed = .005,
                this.autoAlign = !0,
                this.autoForward = !1,
                this.alpha = 0,
                this.beta = 0,
                this.gamma = 0,
                this.orient = 0,
                this.alignQuaternion = new i.Quaternion,
                this.orientationQuaternion = new i.Quaternion;
                var e = new i.Quaternion
                  , n = new i.Quaternion
                  , s = new i.Vector3
                  , l = new i.Matrix4
                  , h = new i.Euler(0,0,0,"YXZ")
                  , c = new i.Quaternion
                  , u = new i.Vector3(0,0,1)
                  , p = new i.Vector3(0,1,0)
                  , d = new i.Vector3(0,0,0)
                  , f = new i.Euler
                  , m = new i.Quaternion
                  , g = new i.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));
                this.update = function(t) {
                    return function(t) {
                        this.freeze || (this.alpha = o.gamma ? i.Math.degToRad(o.alpha) : 0,
                        this.beta = o.beta ? i.Math.degToRad(o.beta) : 0,
                        this.gamma = o.gamma ? i.Math.degToRad(o.gamma) : 0,
                        this.orient = a ? i.Math.degToRad(a) : 0,
                        f.set(this.beta, this.alpha, -this.gamma, r.isShittyUCBrowser && !r.iphone5 ? "YZX" : "YXZ"),
                        e.setFromEuler(f),
                        n.slerp(e, .5),
                        this.autoAlign ? this.orientationQuaternion.copy(e) : this.orientationQuaternion.copy(n),
                        this.orientationQuaternion.multiply(g),
                        window.isForcedPortrait ? this.orientationQuaternion.multiply(m.setFromAxisAngle(u, Math.PI / 2)) : this.orientationQuaternion.multiply(m.setFromAxisAngle(u, -this.orient)),
                        this.object.quaternion.copy(this.alignQuaternion),
                        this.object.quaternion.multiply(this.orientationQuaternion),
                        this.autoForward && (s.set(0, 0, -1).applyQuaternion(this.object.quaternion, "ZXY").setLength(this.movementSpeed / 50),
                        this.object.position.add(s)),
                        this.autoAlign && 0 !== this.alpha && (this.autoAlign = !1,
                        this.align()),
                        this.object.quaternion.slerp(new i.Quaternion(0,.9998612158552823,.016659727883530383,0), this.lockBackRatio))
                    }
                }(),
                this.align = function() {
                    s.set(0, 0, -1).applyQuaternion(c.copy(this.orientationQuaternion).inverse(), "ZXY"),
                    h.setFromQuaternion(c.setFromRotationMatrix(l.lookAt(s, d, p))),
                    h.set(0, h.y, 0),
                    this.alignQuaternion.setFromEuler(h)
                }
                ,
                this.connect = function() {
                    this.freeze = !1
                }
                ,
                this.disconnect = function() {
                    this.freze = !0
                }
            }
        }()
    }
    , {
        "./../../app/core/settings.js": 54,
        "./three.min.js": 139
    }],
    134: [function(t, e, n) {
        var r = t("./three.min.js")
          , i = 6
          , o = 13
          , a = 55727696
          , s = 0
          , l = 2
          , h = 6
          , c = 7
          , u = 11
          , p = 12;
        r.ETC1Loader = function(t) {
            this.manager = void 0 !== t ? t : r.DefaultLoadingManager,
            this._parser = r.ETC1Loader.parse
        }
        ,
        r.ETC1Loader.prototype = Object.create(r.CompressedTextureLoader.prototype),
        r.ETC1Loader.prototype.constructor = r.ETC1Loader,
        r.ETC1Loader.parse = function(t) {
            var e = new Int32Array(t,0,o);
            if (e[s] != a)
                throw new Error("Invalid magic number in PVR header");
            var n;
            if (e[l] !== i)
                throw new Error("Unsupported PVR format: " + e[l]);
            n = r.RGB_ETC1_Format;
            for (var d = e[p] + 52, f = new Uint8Array(t,d), m = e[c], g = e[h], v = e[u], y = 0, _ = m, x = g, b = [], w = 0; v > w; ++w) {
                var S = (_ + 3 >> 2) * (x + 3 >> 2) * 8;
                b.push({
                    data: new Uint8Array(f.buffer,f.byteOffset + y,S),
                    width: _,
                    height: x
                }),
                _ >>= 1,
                x >>= 1,
                y += S
            }
            return {
                mipmaps: b,
                width: m,
                height: g,
                format: n,
                mipmapsCount: v
            }
        }
    }
    , {
        "./three.min.js": 139
    }],
    135: [function(t, e, n) {
        function r() {}
        var i = t("./three.min.js")
          , o = (t("./../q.js"),
        r.prototype);
        o.load = function(t, e) {
            function n() {
                var t = new i.Texture(r);
                t.generateMipmaps = !1,
                t.magFilter = i.LinearFilter,
                t.minFilter = i.LinearFilter,
                e(t)
            }
            var r = new Image;
            r.src = t,
            r.width ? setTimeout(n, 4) : r.onload = n
        }
        ,
        e.exports = r
    }
    , {
        "./../q.js": 131,
        "./three.min.js": 139
    }],
    136: [function(t, e, n) {
        var r = t("./three.min.js");
        r.OrbitControls = function(t, e) {
            function n() {
                return 2 * Math.PI / 60 / 60 * d.autoRotateSpeed
            }
            function i() {
                return Math.pow(.95, d.zoomSpeed)
            }
            function o(t) {
                if (d.enabled !== !1) {
                    if (t.preventDefault(),
                    0 === t.button) {
                        if (d.noRotate === !0)
                            return;
                        R = k.ROTATE,
                        m.set(t.clientX, t.clientY)
                    } else if (1 === t.button) {
                        if (d.noZoom === !0)
                            return;
                        R = k.DOLLY,
                        S.set(t.clientX, t.clientY)
                    } else if (2 === t.button) {
                        if (d.noPan === !0)
                            return;
                        R = k.PAN,
                        y.set(t.clientX, t.clientY)
                    }
                    d.domElement.addEventListener("mousemove", a, !1),
                    d.domElement.addEventListener("mouseup", s, !1),
                    d.dispatchEvent(U)
                }
            }
            function a(t) {
                if (d.enabled !== !1) {
                    t.preventDefault();
                    var e = d.domElement === document ? d.domElement.body : d.domElement;
                    if (R === k.ROTATE) {
                        if (d.noRotate === !0)
                            return;
                        g.set(t.clientX, t.clientY),
                        v.subVectors(g, m),
                        d.rotateLeft(2 * Math.PI * v.x / e.clientWidth * d.rotateSpeed),
                        d.rotateUp(2 * Math.PI * v.y / e.clientHeight * d.rotateSpeed),
                        m.copy(g)
                    } else if (R === k.DOLLY) {
                        if (d.noZoom === !0)
                            return;
                        T.set(t.clientX, t.clientY),
                        M.subVectors(T, S),
                        M.y > 0 ? d.dollyIn() : d.dollyOut(),
                        S.copy(T)
                    } else if (R === k.PAN) {
                        if (d.noPan === !0)
                            return;
                        _.set(t.clientX, t.clientY),
                        x.subVectors(_, y),
                        d.pan(x.x, x.y),
                        y.copy(_)
                    }
                    d.update()
                }
            }
            function s() {
                d.enabled !== !1 && (d.domElement.removeEventListener("mousemove", a, !1),
                d.domElement.removeEventListener("mouseup", s, !1),
                d.dispatchEvent(I),
                R = k.NONE)
            }
            function l(t) {
                if (d.enabled !== !1 && d.noZoom !== !0) {
                    t.preventDefault(),
                    t.stopPropagation();
                    var e = 0;
                    void 0 !== t.wheelDelta ? e = t.wheelDelta : void 0 !== t.detail && (e = -t.detail),
                    e > 0 ? d.dollyOut() : d.dollyIn(),
                    d.update(),
                    d.dispatchEvent(U),
                    d.dispatchEvent(I)
                }
            }
            function h(t) {
                if (d.enabled !== !1 && d.noKeys !== !0 && d.noPan !== !0)
                    switch (t.keyCode) {
                    case d.keys.UP:
                        d.pan(0, d.keyPanSpeed),
                        d.update();
                        break;
                    case d.keys.BOTTOM:
                        d.pan(0, -d.keyPanSpeed),
                        d.update();
                        break;
                    case d.keys.LEFT:
                        d.pan(d.keyPanSpeed, 0),
                        d.update();
                        break;
                    case d.keys.RIGHT:
                        d.pan(-d.keyPanSpeed, 0),
                        d.update()
                    }
            }
            function c(t) {
                if (d.enabled !== !1) {
                    switch (t.touches.length) {
                    case 1:
                        if (d.noRotate === !0)
                            return;
                        R = k.TOUCH_ROTATE,
                        m.set(t.touches[0].pageX, t.touches[0].pageY);
                        break;
                    case 2:
                        if (d.noZoom === !0)
                            return;
                        R = k.TOUCH_DOLLY;
                        var e = t.touches[0].pageX - t.touches[1].pageX
                          , n = t.touches[0].pageY - t.touches[1].pageY
                          , r = Math.sqrt(e * e + n * n);
                        S.set(0, r);
                        break;
                    case 3:
                        if (d.noPan === !0)
                            return;
                        R = k.TOUCH_PAN,
                        y.set(t.touches[0].pageX, t.touches[0].pageY);
                        break;
                    default:
                        R = k.NONE
                    }
                    d.dispatchEvent(U)
                }
            }
            function u(t) {
                if (d.enabled !== !1) {
                    t.preventDefault(),
                    t.stopPropagation();
                    var e = d.domElement === document ? d.domElement.body : d.domElement;
                    switch (t.touches.length) {
                    case 1:
                        if (d.noRotate === !0)
                            return;
                        if (R !== k.TOUCH_ROTATE)
                            return;
                        g.set(t.touches[0].pageX, t.touches[0].pageY),
                        v.subVectors(g, m),
                        d.rotateLeft(2 * Math.PI * v.x / e.clientWidth * d.rotateSpeed),
                        d.rotateUp(2 * Math.PI * v.y / e.clientHeight * d.rotateSpeed),
                        m.copy(g),
                        d.update();
                        break;
                    case 2:
                        if (d.noZoom === !0)
                            return;
                        if (R !== k.TOUCH_DOLLY)
                            return;
                        var n = t.touches[0].pageX - t.touches[1].pageX
                          , r = t.touches[0].pageY - t.touches[1].pageY
                          , i = Math.sqrt(n * n + r * r);
                        T.set(0, i),
                        M.subVectors(T, S),
                        M.y > 0 ? d.dollyOut() : d.dollyIn(),
                        S.copy(T),
                        d.update();
                        break;
                    case 3:
                        if (d.noPan === !0)
                            return;
                        if (R !== k.TOUCH_PAN)
                            return;
                        _.set(t.touches[0].pageX, t.touches[0].pageY),
                        x.subVectors(_, y),
                        d.pan(x.x, x.y),
                        y.copy(_),
                        d.update();
                        break;
                    default:
                        R = k.NONE
                    }
                }
            }
            function p() {
                d.enabled !== !1 && (d.dispatchEvent(I),
                R = k.NONE)
            }
            this.object = t,
            this.backPosition = new r.Vector3(0,.05,-1.5),
            this.domElement = void 0 !== e ? e : document,
            this.lockBackRatio = 0,
            this.enabled = !0,
            this.target = new r.Vector3,
            this.center = this.target,
            this.noZoom = !1,
            this.zoomSpeed = 1,
            this.minDistance = 0,
            this.maxDistance = 1 / 0,
            this.noRotate = !1,
            this.rotateSpeed = 1,
            this.noPan = !1,
            this.keyPanSpeed = 7,
            this.autoRotate = !1,
            this.autoRotateSpeed = 2,
            this.minPolarAngle = 0,
            this.maxPolarAngle = Math.PI,
            this.noKeys = !1,
            this.keys = {
                LEFT: 37,
                UP: 38,
                RIGHT: 39,
                BOTTOM: 40
            };
            var d = this
              , f = 1e-6
              , m = new r.Vector2
              , g = new r.Vector2
              , v = new r.Vector2
              , y = new r.Vector2
              , _ = new r.Vector2
              , x = new r.Vector2
              , b = new r.Vector3
              , w = new r.Vector3
              , S = new r.Vector2
              , T = new r.Vector2
              , M = new r.Vector2
              , C = 0
              , A = 0
              , E = 1
              , L = new r.Vector3
              , P = new r.Vector3
              , k = {
                NONE: -1,
                ROTATE: 0,
                DOLLY: 1,
                PAN: 2,
                TOUCH_ROTATE: 3,
                TOUCH_DOLLY: 4,
                TOUCH_PAN: 5
            }
              , R = k.NONE;
            this.target0 = this.target.clone(),
            this.position0 = this.object.position.clone();
            var O = (new r.Quaternion).setFromUnitVectors(t.up, new r.Vector3(0,1,0))
              , D = O.clone().inverse()
              , F = {
                type: "change"
            }
              , U = {
                type: "start"
            }
              , I = {
                type: "end"
            };
            this.rotateLeft = function(t) {
                void 0 === t && (t = n()),
                A -= t
            }
            ,
            this.rotateUp = function(t) {
                void 0 === t && (t = n()),
                C -= t
            }
            ,
            this.panLeft = function(t) {
                var e = this.object.matrix.elements;
                b.set(e[0], e[1], e[2]),
                b.multiplyScalar(-t),
                L.add(b)
            }
            ,
            this.panUp = function(t) {
                var e = this.object.matrix.elements;
                b.set(e[4], e[5], e[6]),
                b.multiplyScalar(t),
                L.add(b)
            }
            ,
            this.pan = function(t, e) {
                var n = d.domElement === document ? d.domElement.body : d.domElement;
                if (void 0 !== d.object.fov) {
                    var r = d.object.position
                      , i = r.clone().sub(d.target)
                      , o = i.length();
                    o *= Math.tan(d.object.fov / 2 * Math.PI / 180),
                    d.panLeft(2 * t * o / n.clientHeight),
                    d.panUp(2 * e * o / n.clientHeight)
                } else
                    void 0 !== d.object.top ? (d.panLeft(t * (d.object.right - d.object.left) / n.clientWidth),
                    d.panUp(e * (d.object.top - d.object.bottom) / n.clientHeight)) : console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")
            }
            ,
            this.dollyIn = function(t) {
                void 0 === t && (t = i()),
                E /= t
            }
            ,
            this.dollyOut = function(t) {
                void 0 === t && (t = i()),
                E *= t
            }
            ,
            this.update = function() {
                var t = this.object.position;
                w.copy(t).sub(this.target),
                w.applyQuaternion(O);
                var e = Math.atan2(w.x, w.z)
                  , r = Math.atan2(Math.sqrt(w.x * w.x + w.z * w.z), w.y);
                this.autoRotate && this.rotateLeft(n()),
                e += A,
                r += C,
                r = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, r)),
                r = Math.max(f, Math.min(Math.PI - f, r));
                var i = w.length() * E;
                i = Math.max(this.minDistance, Math.min(this.maxDistance, i)),
                this.target.add(L),
                w.x = i * Math.sin(r) * Math.sin(e),
                w.y = i * Math.cos(r),
                w.z = i * Math.sin(r) * Math.cos(e),
                w.applyQuaternion(D),
                t.copy(this.target).add(w),
                t.copy(w).lerp(this.backPosition, this.lockBackRatio).add(this.target),
                this.object.lookAt(this.target),
                A = 0,
                C = 0,
                E = 1,
                L.set(0, 0, 0),
                P.distanceToSquared(this.object.position) > f && (this.dispatchEvent(F),
                P.copy(this.object.position))
            }
            ,
            this.reset = function() {
                R = k.NONE,
                this.target.copy(this.target0),
                this.object.position.copy(this.position0),
                this.update()
            }
            ;
            var B = function(t) {
                t.preventDefault()
            };
            this.domElement.addEventListener("contextmenu", B, !1),
            this.domElement.addEventListener("mousedown", o, !1),
            this.domElement.addEventListener("mousewheel", l, !1),
            this.domElement.addEventListener("DOMMouseScroll", l, !1),
            this.domElement.addEventListener("touchstart", c, !1),
            this.domElement.addEventListener("touchend", p, !1),
            this.domElement.addEventListener("touchmove", u, !1),
            window.addEventListener("keydown", h, !1),
            this.removeEventListeners = function() {
                this.domElement.removeEventListener("contextmenu", B, !1),
                this.domElement.removeEventListener("mousedown", o, !1),
                this.domElement.removeEventListener("mousewheel", l, !1),
                this.domElement.removeEventListener("DOMMouseScroll", l, !1),
                this.domElement.removeEventListener("touchstart", c, !1),
                this.domElement.removeEventListener("touchend", p, !1),
                this.domElement.removeEventListener("touchmove", u, !1)
            }
            ,
            this.update()
        }
        ,
        r.OrbitControls.prototype = Object.create(r.EventDispatcher.prototype)
    }
    , {
        "./three.min.js": 139
    }],
    137: [function(t, e, n) {
        var r = t("./three.min.js");
        r.PVRLoader = function(t) {
            this.manager = void 0 !== t ? t : r.DefaultLoadingManager,
            this._parser = r.PVRLoader.parse
        }
        ,
        r.PVRLoader.prototype = Object.create(r.CompressedTextureLoader.prototype),
        r.PVRLoader.prototype.constructor = r.PVRLoader,
        r.PVRLoader.parse = function(t, e) {
            var n = 13
              , i = new Uint32Array(t,0,n)
              , o = {
                buffer: t,
                header: i,
                loadMipmaps: e
            };
            if (55727696 === i[0])
                return r.PVRLoader._parseV3(o);
            if (559044176 === i[11])
                return r.PVRLoader._parseV2(o);
            throw new Error("[THREE.PVRLoader] Unknown PVR format")
        }
        ,
        r.PVRLoader._parseV3 = function(t) {
            var e, n, i = t.header, o = i[12], a = i[2], s = i[6], l = i[7], h = (i[9],
            i[10]), c = i[11];
            switch (a) {
            case 0:
                e = 2,
                n = r.RGB_PVRTC_2BPPV1_Format;
                break;
            case 1:
                e = 2,
                n = r.RGBA_PVRTC_2BPPV1_Format;
                break;
            case 2:
                e = 4,
                n = r.RGB_PVRTC_4BPPV1_Format;
                break;
            case 3:
                e = 4,
                n = r.RGBA_PVRTC_4BPPV1_Format;
                break;
            default:
                throw new Error("pvrtc - unsupported PVR format " + a)
            }
            return t.dataPtr = 52 + o,
            t.bpp = e,
            t.format = n,
            t.width = l,
            t.height = s,
            t.numSurfaces = h,
            t.numMipmaps = c,
            t.isCubemap = 6 === h,
            r.PVRLoader._extract(t)
        }
        ,
        r.PVRLoader._parseV2 = function(t) {
            var e, n, i = t.header, o = i[0], a = i[1], s = i[2], l = i[3], h = i[4], e = (i[5],
            i[6]), c = (i[7],
            i[8],
            i[9],
            i[10]), u = (i[11],
            i[12]), p = 255, d = 24, f = 25, m = h & p, g = c > 0;
            if (m === f)
                n = g ? r.RGBA_PVRTC_4BPPV1_Format : r.RGB_PVRTC_4BPPV1_Format,
                e = 4;
            else {
                if (m !== d)
                    throw new Error("pvrtc - unknown format " + m);
                n = g ? r.RGBA_PVRTC_2BPPV1_Format : r.RGB_PVRTC_2BPPV1_Format,
                e = 2
            }
            return t.dataPtr = o,
            t.bpp = e,
            t.format = n,
            t.width = s,
            t.height = a,
            t.numSurfaces = u,
            t.numMipmaps = l + 1,
            t.isCubemap = 6 === u,
            r.PVRLoader._extract(t)
        }
        ,
        r.PVRLoader._extract = function(t) {
            var e = {
                mipmaps: [],
                width: t.width,
                height: t.height,
                format: t.format,
                mipmapCount: t.numMipmaps,
                isCubemap: t.isCubemap
            }
              , n = t.buffer
              , r = t.dataPtr
              , i = t.bpp
              , o = t.numSurfaces
              , a = 0
              , s = 0
              , l = 0
              , h = 0
              , c = 0
              , u = 0;
            2 === i ? (l = 8,
            h = 4) : (l = 4,
            h = 4),
            s = l * h * i / 8,
            e.mipmaps.length = t.numMipmaps * o;
            for (var p = 0; p < t.numMipmaps; ) {
                var d = t.width >> p
                  , f = t.height >> p;
                c = d / l,
                u = f / h,
                2 > c && (c = 2),
                2 > u && (u = 2),
                a = c * u * s;
                for (var m = 0; o > m; m++) {
                    var g = new Uint8Array(n,r,a)
                      , v = {
                        data: g,
                        width: d,
                        height: f
                    };
                    e.mipmaps[m * t.numMipmaps + p] = v,
                    r += a
                }
                p++
            }
            return e
        }
    }
    , {
        "./three.min.js": 139
    }],
    138: [function(t, e, n) {
        var r = (t("./../../app/core/settings.js"),
        t("./three.min.js"));
        r.StereoEffect = function(t) {
            this.separation = 3,
            this.focalLength = 15;
            var e, n, i, o, a, s, l, h, c, u, p, d, f = new r.Vector3, m = new r.Quaternion, g = new r.Vector3, v = new r.PerspectiveCamera, y = new r.PerspectiveCamera, _ = (new r.Quaternion).setFromAxisAngle(new r.Vector3(0,0,1), -Math.PI / 2);
            t.autoClear = !1,
            this.setSize = function(r, i) {
                e = r / 2,
                n = i,
                t.setSize(r, i)
            }
            ,
            this.render = function(x, b) {
                var w = window.isForcedPortrait;
                x.updateMatrixWorld(),
                void 0 === b.parent && b.updateMatrixWorld(),
                b.matrixWorld.decompose(f, m, g),
                i = r.Math.radToDeg(2 * Math.atan(Math.tan(.5 * r.Math.degToRad(b.fov)))),
                h = b.near / this.focalLength,
                u = Math.tan(.5 * r.Math.degToRad(i)) * this.focalLength,
                c = w ? 2 * u * b.aspect : .5 * u * b.aspect,
                s = u * h,
                l = -s,
                p = (c + this.separation / 2) / (2 * c),
                d = 1 - p,
                o = 2 * c * h * d,
                a = 2 * c * h * p,
                v.projectionMatrix.makeFrustum(-o, a, l, s, b.near, b.far),
                v.position.copy(f),
                v.quaternion.copy(m),
                w && v.quaternion.multiply(_),
                v.translateX(-this.separation / 2),
                y.projectionMatrix.makeFrustum(-a, o, l, s, b.near, b.far),
                y.position.copy(f),
                y.quaternion.copy(m),
                w && y.quaternion.multiply(_),
                y.translateX(this.separation / 2),
                t.setViewport(0, 0, 2 * e, n),
                t.clear(),
                w ? t.setViewport(0, 0, 2 * e, n / 2) : t.setViewport(0, 0, e, n),
                t.render(x, v),
                w ? t.setViewport(0, n / 2, 2 * e, n / 2) : t.setViewport(e, 0, e, n),
                t.render(x, y),
                t.setViewport(0, 0, 2 * e, n)
            }
        }
    }
    , {
        "./../../app/core/settings.js": 54,
        "./three.min.js": 139
    }],
    139: [function(t, e, n) {
        "use strict";
        var r = {
            REVISION: "72"
        };
        "function" == typeof define && define.amd ? define("three", r) : "undefined" != typeof n && "undefined" != typeof e && (e.exports = r),
        void 0 !== self.requestAnimationFrame && void 0 !== self.cancelAnimationFrame || function() {
            for (var t = 0, e = ["ms", "moz", "webkit", "o"], n = 0; n < e.length && !self.requestAnimationFrame; ++n)
                self.requestAnimationFrame = self[e[n] + "RequestAnimationFrame"],
                self.cancelAnimationFrame = self[e[n] + "CancelAnimationFrame"] || self[e[n] + "CancelRequestAnimationFrame"];
            void 0 === self.requestAnimationFrame && void 0 !== self.setTimeout && (self.requestAnimationFrame = function(e) {
                var n = Date.now()
                  , r = Math.max(0, 16 - (n - t))
                  , i = self.setTimeout(function() {
                    e(n + r)
                }, r);
                return t = n + r,
                i
            }
            ),
            void 0 === self.cancelAnimationFrame && void 0 !== self.clearTimeout && (self.cancelAnimationFrame = function(t) {
                self.clearTimeout(t)
            }
            )
        }(),
        void 0 === Math.sign && (Math.sign = function(t) {
            return 0 > t ? -1 : t > 0 ? 1 : +t
        }
        ),
        void 0 === Function.prototype.name && void 0 !== Object.defineProperty && Object.defineProperty(Function.prototype, "name", {
            get: function() {
                return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]
            }
        }),
        r.MOUSE = {
            LEFT: 0,
            MIDDLE: 1,
            RIGHT: 2
        },
        r.CullFaceNone = 0,
        r.CullFaceBack = 1,
        r.CullFaceFront = 2,
        r.CullFaceFrontBack = 3,
        r.FrontFaceDirectionCW = 0,
        r.FrontFaceDirectionCCW = 1,
        r.BasicShadowMap = 0,
        r.PCFShadowMap = 1,
        r.PCFSoftShadowMap = 2,
        r.FrontSide = 0,
        r.BackSide = 1,
        r.DoubleSide = 2,
        r.FlatShading = 1,
        r.SmoothShading = 2,
        r.NoColors = 0,
        r.FaceColors = 1,
        r.VertexColors = 2,
        r.NoBlending = 0,
        r.NormalBlending = 1,
        r.AdditiveBlending = 2,
        r.SubtractiveBlending = 3,
        r.MultiplyBlending = 4,
        r.CustomBlending = 5,
        r.AddEquation = 100,
        r.SubtractEquation = 101,
        r.ReverseSubtractEquation = 102,
        r.MinEquation = 103,
        r.MaxEquation = 104,
        r.ZeroFactor = 200,
        r.OneFactor = 201,
        r.SrcColorFactor = 202,
        r.OneMinusSrcColorFactor = 203,
        r.SrcAlphaFactor = 204,
        r.OneMinusSrcAlphaFactor = 205,
        r.DstAlphaFactor = 206,
        r.OneMinusDstAlphaFactor = 207,
        r.DstColorFactor = 208,
        r.OneMinusDstColorFactor = 209,
        r.SrcAlphaSaturateFactor = 210,
        r.NeverDepth = 0,
        r.AlwaysDepth = 1,
        r.LessDepth = 2,
        r.LessEqualDepth = 3,
        r.EqualDepth = 4,
        r.GreaterEqualDepth = 5,
        r.GreaterDepth = 6,
        r.NotEqualDepth = 7,
        r.MultiplyOperation = 0,
        r.MixOperation = 1,
        r.AddOperation = 2,
        r.UVMapping = 300,
        r.CubeReflectionMapping = 301,
        r.CubeRefractionMapping = 302,
        r.EquirectangularReflectionMapping = 303,
        r.EquirectangularRefractionMapping = 304,
        r.SphericalReflectionMapping = 305,
        r.RepeatWrapping = 1e3,
        r.ClampToEdgeWrapping = 1001,
        r.MirroredRepeatWrapping = 1002,
        r.NearestFilter = 1003,
        r.NearestMipMapNearestFilter = 1004,
        r.NearestMipMapLinearFilter = 1005,
        r.LinearFilter = 1006,
        r.LinearMipMapNearestFilter = 1007,
        r.LinearMipMapLinearFilter = 1008,
        r.UnsignedByteType = 1009,
        r.ByteType = 1010,
        r.ShortType = 1011,
        r.UnsignedShortType = 1012,
        r.IntType = 1013,
        r.UnsignedIntType = 1014,
        r.FloatType = 1015,
        r.HalfFloatType = 1025,
        r.UnsignedShort4444Type = 1016,
        r.UnsignedShort5551Type = 1017,
        r.UnsignedShort565Type = 1018,
        r.AlphaFormat = 1019,
        r.RGBFormat = 1020,
        r.RGBAFormat = 1021,
        r.LuminanceFormat = 1022,
        r.LuminanceAlphaFormat = 1023,
        r.RGBEFormat = r.RGBAFormat,
        r.RGB_S3TC_DXT1_Format = 2001,
        r.RGBA_S3TC_DXT1_Format = 2002,
        r.RGBA_S3TC_DXT3_Format = 2003,
        r.RGBA_S3TC_DXT5_Format = 2004,
        r.RGB_PVRTC_4BPPV1_Format = 2100,
        r.RGB_PVRTC_2BPPV1_Format = 2101,
        r.RGBA_PVRTC_4BPPV1_Format = 2102,
        r.RGBA_PVRTC_2BPPV1_Format = 2103,
        r.RGB_ETC1_Format = 2110,
        r.Projector = function() {
            console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),
            this.projectVector = function(t, e) {
                console.warn("THREE.Projector: .projectVector() is now vector.project()."),
                t.project(e)
            }
            ,
            this.unprojectVector = function(t, e) {
                console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),
                t.unproject(e)
            }
            ,
            this.pickingRay = function(t, e) {
                console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")
            }
        }
        ,
        r.CanvasRenderer = function() {
            console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),
            this.domElement = document.createElement("canvas"),
            this.clear = function() {}
            ,
            this.render = function() {}
            ,
            this.setClearColor = function() {}
            ,
            this.setSize = function() {}
        }
        ,
        r.Color = function(t) {
            return 3 === arguments.length ? this.setRGB(arguments[0], arguments[1], arguments[2]) : this.set(t)
        }
        ,
        r.Color.prototype = {
            constructor: r.Color,
            r: 1,
            g: 1,
            b: 1,
            set: function(t) {
                return t instanceof r.Color ? this.copy(t) : "number" == typeof t ? this.setHex(t) : "string" == typeof t && this.setStyle(t),
                this
            },
            setHex: function(t) {
                return t = Math.floor(t),
                this.r = (t >> 16 & 255) / 255,
                this.g = (t >> 8 & 255) / 255,
                this.b = (255 & t) / 255,
                this
            },
            setRGB: function(t, e, n) {
                return this.r = t,
                this.g = e,
                this.b = n,
                this
            },
            setHSL: function() {
                function t(t, e, n) {
                    return 0 > n && (n += 1),
                    n > 1 && (n -= 1),
                    1 / 6 > n ? t + 6 * (e - t) * n : .5 > n ? e : 2 / 3 > n ? t + 6 * (e - t) * (2 / 3 - n) : t
                }
                return function(e, n, i) {
                    return e = r.Math.euclideanModulo(e, 1),
                    n = r.Math.clamp(n, 0, 1),
                    i = r.Math.clamp(i, 0, 1),
                    0 === n ? this.r = this.g = this.b = i : (n = .5 >= i ? i * (1 + n) : i + n - i * n,
                    i = 2 * i - n,
                    this.r = t(i, n, e + 1 / 3),
                    this.g = t(i, n, e),
                    this.b = t(i, n, e - 1 / 3)),
                    this
                }
            }(),
            setStyle: function(t) {
                var e, n = function(e) {
                    return e = parseFloat(e),
                    1 > e && console.warn("THREE.Color: Alpha component of color " + t + " will be ignored."),
                    e
                };
                if (e = /^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)) {
                    var i = e[2];
                    switch (e[1]) {
                    case "rgb":
                        if (e = /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*$/.exec(i))
                            return this.r = Math.min(255, parseInt(e[1], 10)) / 255,
                            this.g = Math.min(255, parseInt(e[2], 10)) / 255,
                            this.b = Math.min(255, parseInt(e[3], 10)) / 255,
                            this;
                        if (e = /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/.exec(i))
                            return this.r = Math.min(100, parseInt(e[1], 10)) / 100,
                            this.g = Math.min(100, parseInt(e[2], 10)) / 100,
                            this.b = Math.min(100, parseInt(e[3], 10)) / 100,
                            this;
                        break;
                    case "rgba":
                        if (e = /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(i))
                            return this.r = Math.min(255, parseInt(e[1], 10)) / 255,
                            this.g = Math.min(255, parseInt(e[2], 10)) / 255,
                            this.b = Math.min(255, parseInt(e[3], 10)) / 255,
                            n(e[4]),
                            this;
                        if (e = /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(i))
                            return this.r = Math.min(100, parseInt(e[1], 10)) / 100,
                            this.g = Math.min(100, parseInt(e[2], 10)) / 100,
                            this.b = Math.min(100, parseInt(e[3], 10)) / 100,
                            n(e[4]),
                            this;
                        break;
                    case "hsl":
                        if (e = /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/.exec(i)) {
                            var i = parseFloat(e[1])
                              , o = parseInt(e[2], 10) / 100
                              , a = parseInt(e[3], 10) / 100;
                            return this.setHSL(i, o, a)
                        }
                        break;
                    case "hsla":
                        if (e = /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(i))
                            return i = parseFloat(e[1]),
                            o = parseInt(e[2], 10) / 100,
                            a = parseInt(e[3], 10) / 100,
                            n(e[4]),
                            this.setHSL(i, o, a)
                    }
                } else if (e = /^\#([A-Fa-f0-9]+)$/.exec(t)) {
                    if (n = e[1],
                    e = n.length,
                    3 === e)
                        return this.r = parseInt(n.charAt(0) + n.charAt(0), 16) / 255,
                        this.g = parseInt(n.charAt(1) + n.charAt(1), 16) / 255,
                        this.b = parseInt(n.charAt(2) + n.charAt(2), 16) / 255,
                        this;
                    if (6 === e)
                        return this.r = parseInt(n.charAt(0) + n.charAt(1), 16) / 255,
                        this.g = parseInt(n.charAt(2) + n.charAt(3), 16) / 255,
                        this.b = parseInt(n.charAt(4) + n.charAt(5), 16) / 255,
                        this
                }
                return t && 0 < t.length && (n = r.ColorKeywords[t],
                void 0 !== n ? this.setHex(n) : console.warn("THREE.Color: Unknown color " + t)),
                this
            },
            clone: function() {
                return new this.constructor(this.r,this.g,this.b)
            },
            copy: function(t) {
                return this.r = t.r,
                this.g = t.g,
                this.b = t.b,
                this
            },
            copyGammaToLinear: function(t, e) {
                return void 0 === e && (e = 2),
                this.r = Math.pow(t.r, e),
                this.g = Math.pow(t.g, e),
                this.b = Math.pow(t.b, e),
                this
            },
            copyLinearToGamma: function(t, e) {
                void 0 === e && (e = 2);
                var n = e > 0 ? 1 / e : 1;
                return this.r = Math.pow(t.r, n),
                this.g = Math.pow(t.g, n),
                this.b = Math.pow(t.b, n),
                this
            },
            convertGammaToLinear: function() {
                var t = this.r
                  , e = this.g
                  , n = this.b;
                return this.r = t * t,
                this.g = e * e,
                this.b = n * n,
                this
            },
            convertLinearToGamma: function() {
                return this.r = Math.sqrt(this.r),
                this.g = Math.sqrt(this.g),
                this.b = Math.sqrt(this.b),
                this
            },
            getHex: function() {
                return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0
            },
            getHexString: function() {
                return ("000000" + this.getHex().toString(16)).slice(-6)
            },
            getHSL: function(t) {
                t = t || {
                    h: 0,
                    s: 0,
                    l: 0
                };
                var e, n = this.r, r = this.g, i = this.b, o = Math.max(n, r, i), a = Math.min(n, r, i), s = (a + o) / 2;
                if (a === o)
                    a = e = 0;
                else {
                    var l = o - a
                      , a = .5 >= s ? l / (o + a) : l / (2 - o - a);
                    switch (o) {
                    case n:
                        e = (r - i) / l + (i > r ? 6 : 0);
                        break;
                    case r:
                        e = (i - n) / l + 2;
                        break;
                    case i:
                        e = (n - r) / l + 4
                    }
                    e /= 6
                }
                return t.h = e,
                t.s = a,
                t.l = s,
                t
            },
            getStyle: function() {
                return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"
            },
            offsetHSL: function(t, e, n) {
                var r = this.getHSL();
                return r.h += t,
                r.s += e,
                r.l += n,
                this.setHSL(r.h, r.s, r.l),
                this
            },
            add: function(t) {
                return this.r += t.r,
                this.g += t.g,
                this.b += t.b,
                this
            },
            addColors: function(t, e) {
                return this.r = t.r + e.r,
                this.g = t.g + e.g,
                this.b = t.b + e.b,
                this
            },
            addScalar: function(t) {
                return this.r += t,
                this.g += t,
                this.b += t,
                this
            },
            multiply: function(t) {
                return this.r *= t.r,
                this.g *= t.g,
                this.b *= t.b,
                this
            },
            multiplyScalar: function(t) {
                return this.r *= t,
                this.g *= t,
                this.b *= t,
                this
            },
            lerp: function(t, e) {
                return this.r += (t.r - this.r) * e,
                this.g += (t.g - this.g) * e,
                this.b += (t.b - this.b) * e,
                this
            },
            equals: function(t) {
                return t.r === this.r && t.g === this.g && t.b === this.b
            },
            fromArray: function(t) {
                return this.r = t[0],
                this.g = t[1],
                this.b = t[2],
                this
            },
            toArray: function(t, e) {
                return void 0 === t && (t = []),
                void 0 === e && (e = 0),
                t[e] = this.r,
                t[e + 1] = this.g,
                t[e + 2] = this.b,
                t
            }
        },
        r.ColorKeywords = {
            aliceblue: 15792383,
            antiquewhite: 16444375,
            aqua: 65535,
            aquamarine: 8388564,
            azure: 15794175,
            beige: 16119260,
            bisque: 16770244,
            black: 0,
            blanchedalmond: 16772045,
            blue: 255,
            blueviolet: 9055202,
            brown: 10824234,
            burlywood: 14596231,
            cadetblue: 6266528,
            chartreuse: 8388352,
            chocolate: 13789470,
            coral: 16744272,
            cornflowerblue: 6591981,
            cornsilk: 16775388,
            crimson: 14423100,
            cyan: 65535,
            darkblue: 139,
            darkcyan: 35723,
            darkgoldenrod: 12092939,
            darkgray: 11119017,
            darkgreen: 25600,
            darkgrey: 11119017,
            darkkhaki: 12433259,
            darkmagenta: 9109643,
            darkolivegreen: 5597999,
            darkorange: 16747520,
            darkorchid: 10040012,
            darkred: 9109504,
            darksalmon: 15308410,
            darkseagreen: 9419919,
            darkslateblue: 4734347,
            darkslategray: 3100495,
            darkslategrey: 3100495,
            darkturquoise: 52945,
            darkviolet: 9699539,
            deeppink: 16716947,
            deepskyblue: 49151,
            dimgray: 6908265,
            dimgrey: 6908265,
            dodgerblue: 2003199,
            firebrick: 11674146,
            floralwhite: 16775920,
            forestgreen: 2263842,
            fuchsia: 16711935,
            gainsboro: 14474460,
            ghostwhite: 16316671,
            gold: 16766720,
            goldenrod: 14329120,
            gray: 8421504,
            green: 32768,
            greenyellow: 11403055,
            grey: 8421504,
            honeydew: 15794160,
            hotpink: 16738740,
            indianred: 13458524,
            indigo: 4915330,
            ivory: 16777200,
            khaki: 15787660,
            lavender: 15132410,
            lavenderblush: 16773365,
            lawngreen: 8190976,
            lemonchiffon: 16775885,
            lightblue: 11393254,
            lightcoral: 15761536,
            lightcyan: 14745599,
            lightgoldenrodyellow: 16448210,
            lightgray: 13882323,
            lightgreen: 9498256,
            lightgrey: 13882323,
            lightpink: 16758465,
            lightsalmon: 16752762,
            lightseagreen: 2142890,
            lightskyblue: 8900346,
            lightslategray: 7833753,
            lightslategrey: 7833753,
            lightsteelblue: 11584734,
            lightyellow: 16777184,
            lime: 65280,
            limegreen: 3329330,
            linen: 16445670,
            magenta: 16711935,
            maroon: 8388608,
            mediumaquamarine: 6737322,
            mediumblue: 205,
            mediumorchid: 12211667,
            mediumpurple: 9662683,
            mediumseagreen: 3978097,
            mediumslateblue: 8087790,
            mediumspringgreen: 64154,
            mediumturquoise: 4772300,
            mediumvioletred: 13047173,
            midnightblue: 1644912,
            mintcream: 16121850,
            mistyrose: 16770273,
            moccasin: 16770229,
            navajowhite: 16768685,
            navy: 128,
            oldlace: 16643558,
            olive: 8421376,
            olivedrab: 7048739,
            orange: 16753920,
            orangered: 16729344,
            orchid: 14315734,
            palegoldenrod: 15657130,
            palegreen: 10025880,
            paleturquoise: 11529966,
            palevioletred: 14381203,
            papayawhip: 16773077,
            peachpuff: 16767673,
            peru: 13468991,
            pink: 16761035,
            plum: 14524637,
            powderblue: 11591910,
            purple: 8388736,
            red: 16711680,
            rosybrown: 12357519,
            royalblue: 4286945,
            saddlebrown: 9127187,
            salmon: 16416882,
            sandybrown: 16032864,
            seagreen: 3050327,
            seashell: 16774638,
            sienna: 10506797,
            silver: 12632256,
            skyblue: 8900331,
            slateblue: 6970061,
            slategray: 7372944,
            slategrey: 7372944,
            snow: 16775930,
            springgreen: 65407,
            steelblue: 4620980,
            tan: 13808780,
            teal: 32896,
            thistle: 14204888,
            tomato: 16737095,
            turquoise: 4251856,
            violet: 15631086,
            wheat: 16113331,
            white: 16777215,
            whitesmoke: 16119285,
            yellow: 16776960,
            yellowgreen: 10145074
        },
        r.Quaternion = function(t, e, n, r) {
            this._x = t || 0,
            this._y = e || 0,
            this._z = n || 0,
            this._w = void 0 !== r ? r : 1
        }
        ,
        r.Quaternion.prototype = {
            constructor: r.Quaternion,
            get x() {
                return this._x
            },
            set x(t) {
                this._x = t,
                this.onChangeCallback()
            },
            get y() {
                return this._y
            },
            set y(t) {
                this._y = t,
                this.onChangeCallback()
            },
            get z() {
                return this._z
            },
            set z(t) {
                this._z = t,
                this.onChangeCallback()
            },
            get w() {
                return this._w
            },
            set w(t) {
                this._w = t,
                this.onChangeCallback()
            },
            set: function(t, e, n, r) {
                return this._x = t,
                this._y = e,
                this._z = n,
                this._w = r,
                this.onChangeCallback(),
                this
            },
            clone: function() {
                return new this.constructor(this._x,this._y,this._z,this._w)
            },
            copy: function(t) {
                return this._x = t.x,
                this._y = t.y,
                this._z = t.z,
                this._w = t.w,
                this.onChangeCallback(),
                this
            },
            setFromEuler: function(t, e) {
                if (!1 == t instanceof r.Euler)
                    throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
                var n = Math.cos(t._x / 2)
                  , i = Math.cos(t._y / 2)
                  , o = Math.cos(t._z / 2)
                  , a = Math.sin(t._x / 2)
                  , s = Math.sin(t._y / 2)
                  , l = Math.sin(t._z / 2)
                  , h = t.order;
                return "XYZ" === h ? (this._x = a * i * o + n * s * l,
                this._y = n * s * o - a * i * l,
                this._z = n * i * l + a * s * o,
                this._w = n * i * o - a * s * l) : "YXZ" === h ? (this._x = a * i * o + n * s * l,
                this._y = n * s * o - a * i * l,
                this._z = n * i * l - a * s * o,
                this._w = n * i * o + a * s * l) : "ZXY" === h ? (this._x = a * i * o - n * s * l,
                this._y = n * s * o + a * i * l,
                this._z = n * i * l + a * s * o,
                this._w = n * i * o - a * s * l) : "ZYX" === h ? (this._x = a * i * o - n * s * l,
                this._y = n * s * o + a * i * l,
                this._z = n * i * l - a * s * o,
                this._w = n * i * o + a * s * l) : "YZX" === h ? (this._x = a * i * o + n * s * l,
                this._y = n * s * o + a * i * l,
                this._z = n * i * l - a * s * o,
                this._w = n * i * o - a * s * l) : "XZY" === h && (this._x = a * i * o - n * s * l,
                this._y = n * s * o - a * i * l,
                this._z = n * i * l + a * s * o,
                this._w = n * i * o + a * s * l),
                !1 !== e && this.onChangeCallback(),
                this
            },
            setFromAxisAngle: function(t, e) {
                var n = e / 2
                  , r = Math.sin(n);
                return this._x = t.x * r,
                this._y = t.y * r,
                this._z = t.z * r,
                this._w = Math.cos(n),
                this.onChangeCallback(),
                this
            },
            setFromRotationMatrix: function(t) {
                var e = t.elements
                  , n = e[0];
                t = e[4];
                var r = e[8]
                  , i = e[1]
                  , o = e[5]
                  , a = e[9]
                  , s = e[2]
                  , l = e[6]
                  , e = e[10]
                  , h = n + o + e;
                return h > 0 ? (n = .5 / Math.sqrt(h + 1),
                this._w = .25 / n,
                this._x = (l - a) * n,
                this._y = (r - s) * n,
                this._z = (i - t) * n) : n > o && n > e ? (n = 2 * Math.sqrt(1 + n - o - e),
                this._w = (l - a) / n,
                this._x = .25 * n,
                this._y = (t + i) / n,
                this._z = (r + s) / n) : o > e ? (n = 2 * Math.sqrt(1 + o - n - e),
                this._w = (r - s) / n,
                this._x = (t + i) / n,
                this._y = .25 * n,
                this._z = (a + l) / n) : (n = 2 * Math.sqrt(1 + e - n - o),
                this._w = (i - t) / n,
                this._x = (r + s) / n,
                this._y = (a + l) / n,
                this._z = .25 * n),
                this.onChangeCallback(),
                this
            },
            setFromUnitVectors: function() {
                var t, e;
                return function(n, i) {
                    return void 0 === t && (t = new r.Vector3),
                    e = n.dot(i) + 1,
                    1e-6 > e ? (e = 0,
                    Math.abs(n.x) > Math.abs(n.z) ? t.set(-n.y, n.x, 0) : t.set(0, -n.z, n.y)) : t.crossVectors(n, i),
                    this._x = t.x,
                    this._y = t.y,
                    this._z = t.z,
                    this._w = e,
                    this.normalize(),
                    this
                }
            }(),
            inverse: function() {
                return this.conjugate().normalize(),
                this
            },
            conjugate: function() {
                return this._x *= -1,
                this._y *= -1,
                this._z *= -1,
                this.onChangeCallback(),
                this
            },
            dot: function(t) {
                return this._x * t._x + this._y * t._y + this._z * t._z + this._w * t._w
            },
            lengthSq: function() {
                return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
            },
            length: function() {
                return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
            },
            normalize: function() {
                var t = this.length();
                return 0 === t ? (this._z = this._y = this._x = 0,
                this._w = 1) : (t = 1 / t,
                this._x *= t,
                this._y *= t,
                this._z *= t,
                this._w *= t),
                this.onChangeCallback(),
                this
            },
            multiply: function(t, e) {
                return void 0 !== e ? (console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
                this.multiplyQuaternions(t, e)) : this.multiplyQuaternions(this, t)
            },
            multiplyQuaternions: function(t, e) {
                var n = t._x
                  , r = t._y
                  , i = t._z
                  , o = t._w
                  , a = e._x
                  , s = e._y
                  , l = e._z
                  , h = e._w;
                return this._x = n * h + o * a + r * l - i * s,
                this._y = r * h + o * s + i * a - n * l,
                this._z = i * h + o * l + n * s - r * a,
                this._w = o * h - n * a - r * s - i * l,
                this.onChangeCallback(),
                this
            },
            multiplyVector3: function(t) {
                return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),
                t.applyQuaternion(this)
            },
            slerp: function(t, e) {
                if (0 === e)
                    return this;
                if (1 === e)
                    return this.copy(t);
                var n = this._x
                  , r = this._y
                  , i = this._z
                  , o = this._w
                  , a = o * t._w + n * t._x + r * t._y + i * t._z;
                if (0 > a ? (this._w = -t._w,
                this._x = -t._x,
                this._y = -t._y,
                this._z = -t._z,
                a = -a) : this.copy(t),
                a >= 1)
                    return this._w = o,
                    this._x = n,
                    this._y = r,
                    this._z = i,
                    this;
                var s = Math.acos(a)
                  , l = Math.sqrt(1 - a * a);
                return .001 > Math.abs(l) ? (this._w = .5 * (o + this._w),
                this._x = .5 * (n + this._x),
                this._y = .5 * (r + this._y),
                this._z = .5 * (i + this._z),
                this) : (a = Math.sin((1 - e) * s) / l,
                s = Math.sin(e * s) / l,
                this._w = o * a + this._w * s,
                this._x = n * a + this._x * s,
                this._y = r * a + this._y * s,
                this._z = i * a + this._z * s,
                this.onChangeCallback(),
                this)
            },
            equals: function(t) {
                return t._x === this._x && t._y === this._y && t._z === this._z && t._w === this._w
            },
            fromArray: function(t, e) {
                return void 0 === e && (e = 0),
                this._x = t[e],
                this._y = t[e + 1],
                this._z = t[e + 2],
                this._w = t[e + 3],
                this.onChangeCallback(),
                this
            },
            toArray: function(t, e) {
                return void 0 === t && (t = []),
                void 0 === e && (e = 0),
                t[e] = this._x,
                t[e + 1] = this._y,
                t[e + 2] = this._z,
                t[e + 3] = this._w,
                t
            },
            onChange: function(t) {
                return this.onChangeCallback = t,
                this
            },
            onChangeCallback: function() {}
        },
        r.Quaternion.slerp = function(t, e, n, r) {
            return n.copy(t).slerp(e, r)
        }
        ,
        r.Vector2 = function(t, e) {
            this.x = t || 0,
            this.y = e || 0
        }
        ,
        r.Vector2.prototype = {
            constructor: r.Vector2,
            set: function(t, e) {
                return this.x = t,
                this.y = e,
                this
            },
            setX: function(t) {
                return this.x = t,
                this
            },
            setY: function(t) {
                return this.y = t,
                this
            },
            setComponent: function(t, e) {
                switch (t) {
                case 0:
                    this.x = e;
                    break;
                case 1:
                    this.y = e;
                    break;
                default:
                    throw Error("index is out of range: " + t)
                }
            },
            getComponent: function(t) {
                switch (t) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                default:
                    throw Error("index is out of range: " + t)
                }
            },
            clone: function() {
                return new this.constructor(this.x,this.y)
            },
            copy: function(t) {
                return this.x = t.x,
                this.y = t.y,
                this
            },
            add: function(t, e) {
                return void 0 !== e ? (console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
                this.addVectors(t, e)) : (this.x += t.x,
                this.y += t.y,
                this)
            },
            addScalar: function(t) {
                return this.x += t,
                this.y += t,
                this
            },
            addVectors: function(t, e) {
                return this.x = t.x + e.x,
                this.y = t.y + e.y,
                this
            },
            addScaledVector: function(t, e) {
                return this.x += t.x * e,
                this.y += t.y * e,
                this
            },
            sub: function(t, e) {
                return void 0 !== e ? (console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
                this.subVectors(t, e)) : (this.x -= t.x,
                this.y -= t.y,
                this)
            },
            subScalar: function(t) {
                return this.x -= t,
                this.y -= t,
                this
            },
            subVectors: function(t, e) {
                return this.x = t.x - e.x,
                this.y = t.y - e.y,
                this
            },
            multiply: function(t) {
                return this.x *= t.x,
                this.y *= t.y,
                this
            },
            multiplyScalar: function(t) {
                return this.x *= t,
                this.y *= t,
                this
            },
            divide: function(t) {
                return this.x /= t.x,
                this.y /= t.y,
                this
            },
            divideScalar: function(t) {
                return 0 !== t ? (t = 1 / t,
                this.x *= t,
                this.y *= t) : this.y = this.x = 0,
                this
            },
            min: function(t) {
                return this.x > t.x && (this.x = t.x),
                this.y > t.y && (this.y = t.y),
                this
            },
            max: function(t) {
                return this.x < t.x && (this.x = t.x),
                this.y < t.y && (this.y = t.y),
                this
            },
            clamp: function(t, e) {
                return this.x < t.x ? this.x = t.x : this.x > e.x && (this.x = e.x),
                this.y < t.y ? this.y = t.y : this.y > e.y && (this.y = e.y),
                this
            },
            clampScalar: function() {
                var t, e;
                return function(n, i) {
                    return void 0 === t && (t = new r.Vector2,
                    e = new r.Vector2),
                    t.set(n, n),
                    e.set(i, i),
                    this.clamp(t, e)
                }
            }(),
            floor: function() {
                return this.x = Math.floor(this.x),
                this.y = Math.floor(this.y),
                this
            },
            ceil: function() {
                return this.x = Math.ceil(this.x),
                this.y = Math.ceil(this.y),
                this
            },
            round: function() {
                return this.x = Math.round(this.x),
                this.y = Math.round(this.y),
                this
            },
            roundToZero: function() {
                return this.x = 0 > this.x ? Math.ceil(this.x) : Math.floor(this.x),
                this.y = 0 > this.y ? Math.ceil(this.y) : Math.floor(this.y),
                this
            },
            negate: function() {
                return this.x = -this.x,
                this.y = -this.y,
                this
            },
            dot: function(t) {
                return this.x * t.x + this.y * t.y
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y)
            },
            lengthManhattan: function() {
                return Math.abs(this.x) + Math.abs(this.y)
            },
            normalize: function() {
                return this.divideScalar(this.length())
            },
            distanceTo: function(t) {
                return Math.sqrt(this.distanceToSquared(t))
            },
            distanceToSquared: function(t) {
                var e = this.x - t.x;
                return t = this.y - t.y,
                e * e + t * t
            },
            setLength: function(t) {
                var e = this.length();
                return 0 !== e && t !== e && this.multiplyScalar(t / e),
                this
            },
            lerp: function(t, e) {
                return this.x += (t.x - this.x) * e,
                this.y += (t.y - this.y) * e,
                this
            },
            lerpVectors: function(t, e, n) {
                return this.subVectors(e, t).multiplyScalar(n).add(t),
                this
            },
            equals: function(t) {
                return t.x === this.x && t.y === this.y
            },
            fromArray: function(t, e) {
                return void 0 === e && (e = 0),
                this.x = t[e],
                this.y = t[e + 1],
                this
            },
            toArray: function(t, e) {
                return void 0 === t && (t = []),
                void 0 === e && (e = 0),
                t[e] = this.x,
                t[e + 1] = this.y,
                t
            },
            fromAttribute: function(t, e, n) {
                return void 0 === n && (n = 0),
                e = e * t.itemSize + n,
                this.x = t.array[e],
                this.y = t.array[e + 1],
                this
            }
        },
        r.Vector3 = function(t, e, n) {
            this.x = t || 0,
            this.y = e || 0,
            this.z = n || 0
        }
        ,
        r.Vector3.prototype = {
            constructor: r.Vector3,
            set: function(t, e, n) {
                return this.x = t,
                this.y = e,
                this.z = n,
                this
            },
            setX: function(t) {
                return this.x = t,
                this
            },
            setY: function(t) {
                return this.y = t,
                this
            },
            setZ: function(t) {
                return this.z = t,
                this
            },
            setComponent: function(t, e) {
                switch (t) {
                case 0:
                    this.x = e;
                    break;
                case 1:
                    this.y = e;
                    break;
                case 2:
                    this.z = e;
                    break;
                default:
                    throw Error("index is out of range: " + t)
                }
            },
            getComponent: function(t) {
                switch (t) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                case 2:
                    return this.z;
                default:
                    throw Error("index is out of range: " + t)
                }
            },
            clone: function() {
                return new this.constructor(this.x,this.y,this.z)
            },
            copy: function(t) {
                return this.x = t.x,
                this.y = t.y,
                this.z = t.z,
                this
            },
            add: function(t, e) {
                return void 0 !== e ? (console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
                this.addVectors(t, e)) : (this.x += t.x,
                this.y += t.y,
                this.z += t.z,
                this)
            },
            addScalar: function(t) {
                return this.x += t,
                this.y += t,
                this.z += t,
                this
            },
            addVectors: function(t, e) {
                return this.x = t.x + e.x,
                this.y = t.y + e.y,
                this.z = t.z + e.z,
                this
            },
            addScaledVector: function(t, e) {
                return this.x += t.x * e,
                this.y += t.y * e,
                this.z += t.z * e,
                this
            },
            sub: function(t, e) {
                return void 0 !== e ? (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
                this.subVectors(t, e)) : (this.x -= t.x,
                this.y -= t.y,
                this.z -= t.z,
                this)
            },
            subScalar: function(t) {
                return this.x -= t,
                this.y -= t,
                this.z -= t,
                this
            },
            subVectors: function(t, e) {
                return this.x = t.x - e.x,
                this.y = t.y - e.y,
                this.z = t.z - e.z,
                this
            },
            multiply: function(t, e) {
                return void 0 !== e ? (console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
                this.multiplyVectors(t, e)) : (this.x *= t.x,
                this.y *= t.y,
                this.z *= t.z,
                this)
            },
            multiplyScalar: function(t) {
                return this.x *= t,
                this.y *= t,
                this.z *= t,
                this
            },
            multiplyVectors: function(t, e) {
                return this.x = t.x * e.x,
                this.y = t.y * e.y,
                this.z = t.z * e.z,
                this
            },
            applyEuler: function() {
                var t;
                return function(e) {
                    return !1 == e instanceof r.Euler && console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),
                    void 0 === t && (t = new r.Quaternion),
                    this.applyQuaternion(t.setFromEuler(e)),
                    this
                }
            }(),
            applyAxisAngle: function() {
                var t;
                return function(e, n) {
                    return void 0 === t && (t = new r.Quaternion),
                    this.applyQuaternion(t.setFromAxisAngle(e, n)),
                    this
                }
            }(),
            applyMatrix3: function(t) {
                var e = this.x
                  , n = this.y
                  , r = this.z;
                return t = t.elements,
                this.x = t[0] * e + t[3] * n + t[6] * r,
                this.y = t[1] * e + t[4] * n + t[7] * r,
                this.z = t[2] * e + t[5] * n + t[8] * r,
                this
            },
            applyMatrix4: function(t) {
                var e = this.x
                  , n = this.y
                  , r = this.z;
                return t = t.elements,
                this.x = t[0] * e + t[4] * n + t[8] * r + t[12],
                this.y = t[1] * e + t[5] * n + t[9] * r + t[13],
                this.z = t[2] * e + t[6] * n + t[10] * r + t[14],
                this
            },
            applyProjection: function(t) {
                var e = this.x
                  , n = this.y
                  , r = this.z;
                t = t.elements;
                var i = 1 / (t[3] * e + t[7] * n + t[11] * r + t[15]);
                return this.x = (t[0] * e + t[4] * n + t[8] * r + t[12]) * i,
                this.y = (t[1] * e + t[5] * n + t[9] * r + t[13]) * i,
                this.z = (t[2] * e + t[6] * n + t[10] * r + t[14]) * i,
                this
            },
            applyQuaternion: function(t) {
                var e = this.x
                  , n = this.y
                  , r = this.z
                  , i = t.x
                  , o = t.y
                  , a = t.z;
                t = t.w;
                var s = t * e + o * r - a * n
                  , l = t * n + a * e - i * r
                  , h = t * r + i * n - o * e
                  , e = -i * e - o * n - a * r;
                return this.x = s * t + e * -i + l * -a - h * -o,
                this.y = l * t + e * -o + h * -i - s * -a,
                this.z = h * t + e * -a + s * -o - l * -i,
                this
            },
            project: function() {
                var t;
                return function(e) {
                    return void 0 === t && (t = new r.Matrix4),
                    t.multiplyMatrices(e.projectionMatrix, t.getInverse(e.matrixWorld)),
                    this.applyProjection(t)
                }
            }(),
            unproject: function() {
                var t;
                return function(e) {
                    return void 0 === t && (t = new r.Matrix4),
                    t.multiplyMatrices(e.matrixWorld, t.getInverse(e.projectionMatrix)),
                    this.applyProjection(t)
                }
            }(),
            transformDirection: function(t) {
                var e = this.x
                  , n = this.y
                  , r = this.z;
                return t = t.elements,
                this.x = t[0] * e + t[4] * n + t[8] * r,
                this.y = t[1] * e + t[5] * n + t[9] * r,
                this.z = t[2] * e + t[6] * n + t[10] * r,
                this.normalize(),
                this
            },
            divide: function(t) {
                return this.x /= t.x,
                this.y /= t.y,
                this.z /= t.z,
                this
            },
            divideScalar: function(t) {
                return 0 !== t ? (t = 1 / t,
                this.x *= t,
                this.y *= t,
                this.z *= t) : this.z = this.y = this.x = 0,
                this
            },
            min: function(t) {
                return this.x > t.x && (this.x = t.x),
                this.y > t.y && (this.y = t.y),
                this.z > t.z && (this.z = t.z),
                this
            },
            max: function(t) {
                return this.x < t.x && (this.x = t.x),
                this.y < t.y && (this.y = t.y),
                this.z < t.z && (this.z = t.z),
                this
            },
            clamp: function(t, e) {
                return this.x < t.x ? this.x = t.x : this.x > e.x && (this.x = e.x),
                this.y < t.y ? this.y = t.y : this.y > e.y && (this.y = e.y),
                this.z < t.z ? this.z = t.z : this.z > e.z && (this.z = e.z),
                this
            },
            clampScalar: function() {
                var t, e;
                return function(n, i) {
                    return void 0 === t && (t = new r.Vector3,
                    e = new r.Vector3),
                    t.set(n, n, n),
                    e.set(i, i, i),
                    this.clamp(t, e)
                }
            }(),
            floor: function() {
                return this.x = Math.floor(this.x),
                this.y = Math.floor(this.y),
                this.z = Math.floor(this.z),
                this
            },
            ceil: function() {
                return this.x = Math.ceil(this.x),
                this.y = Math.ceil(this.y),
                this.z = Math.ceil(this.z),
                this
            },
            round: function() {
                return this.x = Math.round(this.x),
                this.y = Math.round(this.y),
                this.z = Math.round(this.z),
                this
            },
            roundToZero: function() {
                return this.x = 0 > this.x ? Math.ceil(this.x) : Math.floor(this.x),
                this.y = 0 > this.y ? Math.ceil(this.y) : Math.floor(this.y),
                this.z = 0 > this.z ? Math.ceil(this.z) : Math.floor(this.z),
                this
            },
            negate: function() {
                return this.x = -this.x,
                this.y = -this.y,
                this.z = -this.z,
                this
            },
            dot: function(t) {
                return this.x * t.x + this.y * t.y + this.z * t.z
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y + this.z * this.z
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
            },
            lengthManhattan: function() {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
            },
            normalize: function() {
                return this.divideScalar(this.length())
            },
            setLength: function(t) {
                var e = this.length();
                return 0 !== e && t !== e && this.multiplyScalar(t / e),
                this
            },
            lerp: function(t, e) {
                return this.x += (t.x - this.x) * e,
                this.y += (t.y - this.y) * e,
                this.z += (t.z - this.z) * e,
                this
            },
            lerpVectors: function(t, e, n) {
                return this.subVectors(e, t).multiplyScalar(n).add(t),
                this
            },
            cross: function(t, e) {
                if (void 0 !== e)
                    return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
                    this.crossVectors(t, e);
                var n = this.x
                  , r = this.y
                  , i = this.z;
                return this.x = r * t.z - i * t.y,
                this.y = i * t.x - n * t.z,
                this.z = n * t.y - r * t.x,
                this
            },
            crossVectors: function(t, e) {
                var n = t.x
                  , r = t.y
                  , i = t.z
                  , o = e.x
                  , a = e.y
                  , s = e.z;
                return this.x = r * s - i * a,
                this.y = i * o - n * s,
                this.z = n * a - r * o,
                this
            },
            projectOnVector: function() {
                var t, e;
                return function(n) {
                    return void 0 === t && (t = new r.Vector3),
                    t.copy(n).normalize(),
                    e = this.dot(t),
                    this.copy(t).multiplyScalar(e)
                }
            }(),
            projectOnPlane: function() {
                var t;
                return function(e) {
                    return void 0 === t && (t = new r.Vector3),
                    t.copy(this).projectOnVector(e),
                    this.sub(t)
                }
            }(),
            reflect: function() {
                var t;
                return function(e) {
                    return void 0 === t && (t = new r.Vector3),
                    this.sub(t.copy(e).multiplyScalar(2 * this.dot(e)))
                }
            }(),
            angleTo: function(t) {
                return t = this.dot(t) / (this.length() * t.length()),
                Math.acos(r.Math.clamp(t, -1, 1))
            },
            distanceTo: function(t) {
                return Math.sqrt(this.distanceToSquared(t))
            },
            distanceToSquared: function(t) {
                var e = this.x - t.x
                  , n = this.y - t.y;
                return t = this.z - t.z,
                e * e + n * n + t * t
            },
            setEulerFromRotationMatrix: function(t, e) {
                console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")
            },
            setEulerFromQuaternion: function(t, e) {
                console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")
            },
            getPositionFromMatrix: function(t) {
                return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),
                this.setFromMatrixPosition(t)
            },
            getScaleFromMatrix: function(t) {
                return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),
                this.setFromMatrixScale(t)
            },
            getColumnFromMatrix: function(t, e) {
                return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),
                this.setFromMatrixColumn(t, e)
            },
            setFromMatrixPosition: function(t) {
                return this.x = t.elements[12],
                this.y = t.elements[13],
                this.z = t.elements[14],
                this
            },
            setFromMatrixScale: function(t) {
                var e = this.set(t.elements[0], t.elements[1], t.elements[2]).length()
                  , n = this.set(t.elements[4], t.elements[5], t.elements[6]).length();
                return t = this.set(t.elements[8], t.elements[9], t.elements[10]).length(),
                this.x = e,
                this.y = n,
                this.z = t,
                this
            },
            setFromMatrixColumn: function(t, e) {
                var n = 4 * t
                  , r = e.elements;
                return this.x = r[n],
                this.y = r[n + 1],
                this.z = r[n + 2],
                this
            },
            equals: function(t) {
                return t.x === this.x && t.y === this.y && t.z === this.z
            },
            fromArray: function(t, e) {
                return void 0 === e && (e = 0),
                this.x = t[e],
                this.y = t[e + 1],
                this.z = t[e + 2],
                this
            },
            toArray: function(t, e) {
                return void 0 === t && (t = []),
                void 0 === e && (e = 0),
                t[e] = this.x,
                t[e + 1] = this.y,
                t[e + 2] = this.z,
                t
            },
            fromAttribute: function(t, e, n) {
                return void 0 === n && (n = 0),
                e = e * t.itemSize + n,
                this.x = t.array[e],
                this.y = t.array[e + 1],
                this.z = t.array[e + 2],
                this
            }
        },
        r.Vector4 = function(t, e, n, r) {
            this.x = t || 0,
            this.y = e || 0,
            this.z = n || 0,
            this.w = void 0 !== r ? r : 1
        }
        ,
        r.Vector4.prototype = {
            constructor: r.Vector4,
            set: function(t, e, n, r) {
                return this.x = t,
                this.y = e,
                this.z = n,
                this.w = r,
                this
            },
            setX: function(t) {
                return this.x = t,
                this
            },
            setY: function(t) {
                return this.y = t,
                this
            },
            setZ: function(t) {
                return this.z = t,
                this
            },
            setW: function(t) {
                return this.w = t,
                this
            },
            setComponent: function(t, e) {
                switch (t) {
                case 0:
                    this.x = e;
                    break;
                case 1:
                    this.y = e;
                    break;
                case 2:
                    this.z = e;
                    break;
                case 3:
                    this.w = e;
                    break;
                default:
                    throw Error("index is out of range: " + t)
                }
            },
            getComponent: function(t) {
                switch (t) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                case 2:
                    return this.z;
                case 3:
                    return this.w;
                default:
                    throw Error("index is out of range: " + t)
                }
            },
            clone: function() {
                return new this.constructor(this.x,this.y,this.z,this.w)
            },
            copy: function(t) {
                return this.x = t.x,
                this.y = t.y,
                this.z = t.z,
                this.w = void 0 !== t.w ? t.w : 1,
                this
            },
            add: function(t, e) {
                return void 0 !== e ? (console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
                this.addVectors(t, e)) : (this.x += t.x,
                this.y += t.y,
                this.z += t.z,
                this.w += t.w,
                this)
            },
            addScalar: function(t) {
                return this.x += t,
                this.y += t,
                this.z += t,
                this.w += t,
                this
            },
            addVectors: function(t, e) {
                return this.x = t.x + e.x,
                this.y = t.y + e.y,
                this.z = t.z + e.z,
                this.w = t.w + e.w,
                this
            },
            addScaledVector: function(t, e) {
                return this.x += t.x * e,
                this.y += t.y * e,
                this.z += t.z * e,
                this.w += t.w * e,
                this
            },
            sub: function(t, e) {
                return void 0 !== e ? (console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
                this.subVectors(t, e)) : (this.x -= t.x,
                this.y -= t.y,
                this.z -= t.z,
                this.w -= t.w,
                this)
            },
            subScalar: function(t) {
                return this.x -= t,
                this.y -= t,
                this.z -= t,
                this.w -= t,
                this
            },
            subVectors: function(t, e) {
                return this.x = t.x - e.x,
                this.y = t.y - e.y,
                this.z = t.z - e.z,
                this.w = t.w - e.w,
                this
            },
            multiplyScalar: function(t) {
                return this.x *= t,
                this.y *= t,
                this.z *= t,
                this.w *= t,
                this
            },
            applyMatrix4: function(t) {
                var e = this.x
                  , n = this.y
                  , r = this.z
                  , i = this.w;
                return t = t.elements,
                this.x = t[0] * e + t[4] * n + t[8] * r + t[12] * i,
                this.y = t[1] * e + t[5] * n + t[9] * r + t[13] * i,
                this.z = t[2] * e + t[6] * n + t[10] * r + t[14] * i,
                this.w = t[3] * e + t[7] * n + t[11] * r + t[15] * i,
                this
            },
            divideScalar: function(t) {
                return 0 !== t ? (t = 1 / t,
                this.x *= t,
                this.y *= t,
                this.z *= t,
                this.w *= t) : (this.z = this.y = this.x = 0,
                this.w = 1),
                this
            },
            setAxisAngleFromQuaternion: function(t) {
                this.w = 2 * Math.acos(t.w);
                var e = Math.sqrt(1 - t.w * t.w);
                return 1e-4 > e ? (this.x = 1,
                this.z = this.y = 0) : (this.x = t.x / e,
                this.y = t.y / e,
                this.z = t.z / e),
                this
            },
            setAxisAngleFromRotationMatrix: function(t) {
                var e, n, r;
                t = t.elements;
                var i = t[0];
                r = t[4];
                var o = t[8]
                  , a = t[1]
                  , s = t[5]
                  , l = t[9];
                n = t[2],
                e = t[6];
                var h = t[10];
                return .01 > Math.abs(r - a) && .01 > Math.abs(o - n) && .01 > Math.abs(l - e) ? .1 > Math.abs(r + a) && .1 > Math.abs(o + n) && .1 > Math.abs(l + e) && .1 > Math.abs(i + s + h - 3) ? (this.set(1, 0, 0, 0),
                this) : (t = Math.PI,
                i = (i + 1) / 2,
                s = (s + 1) / 2,
                h = (h + 1) / 2,
                r = (r + a) / 4,
                o = (o + n) / 4,
                l = (l + e) / 4,
                i > s && i > h ? .01 > i ? (e = 0,
                r = n = .707106781) : (e = Math.sqrt(i),
                n = r / e,
                r = o / e) : s > h ? .01 > s ? (e = .707106781,
                n = 0,
                r = .707106781) : (n = Math.sqrt(s),
                e = r / n,
                r = l / n) : .01 > h ? (n = e = .707106781,
                r = 0) : (r = Math.sqrt(h),
                e = o / r,
                n = l / r),
                this.set(e, n, r, t),
                this) : (t = Math.sqrt((e - l) * (e - l) + (o - n) * (o - n) + (a - r) * (a - r)),
                .001 > Math.abs(t) && (t = 1),
                this.x = (e - l) / t,
                this.y = (o - n) / t,
                this.z = (a - r) / t,
                this.w = Math.acos((i + s + h - 1) / 2),
                this)
            },
            min: function(t) {
                return this.x > t.x && (this.x = t.x),
                this.y > t.y && (this.y = t.y),
                this.z > t.z && (this.z = t.z),
                this.w > t.w && (this.w = t.w),
                this
            },
            max: function(t) {
                return this.x < t.x && (this.x = t.x),
                this.y < t.y && (this.y = t.y),
                this.z < t.z && (this.z = t.z),
                this.w < t.w && (this.w = t.w),
                this
            },
            clamp: function(t, e) {
                return this.x < t.x ? this.x = t.x : this.x > e.x && (this.x = e.x),
                this.y < t.y ? this.y = t.y : this.y > e.y && (this.y = e.y),
                this.z < t.z ? this.z = t.z : this.z > e.z && (this.z = e.z),
                this.w < t.w ? this.w = t.w : this.w > e.w && (this.w = e.w),
                this
            },
            clampScalar: function() {
                var t, e;
                return function(n, i) {
                    return void 0 === t && (t = new r.Vector4,
                    e = new r.Vector4),
                    t.set(n, n, n, n),
                    e.set(i, i, i, i),
                    this.clamp(t, e)
                }
            }(),
            floor: function() {
                return this.x = Math.floor(this.x),
                this.y = Math.floor(this.y),
                this.z = Math.floor(this.z),
                this.w = Math.floor(this.w),
                this
            },
            ceil: function() {
                return this.x = Math.ceil(this.x),
                this.y = Math.ceil(this.y),
                this.z = Math.ceil(this.z),
                this.w = Math.ceil(this.w),
                this
            },
            round: function() {
                return this.x = Math.round(this.x),
                this.y = Math.round(this.y),
                this.z = Math.round(this.z),
                this.w = Math.round(this.w),
                this
            },
            roundToZero: function() {
                return this.x = 0 > this.x ? Math.ceil(this.x) : Math.floor(this.x),
                this.y = 0 > this.y ? Math.ceil(this.y) : Math.floor(this.y),
                this.z = 0 > this.z ? Math.ceil(this.z) : Math.floor(this.z),
                this.w = 0 > this.w ? Math.ceil(this.w) : Math.floor(this.w),
                this
            },
            negate: function() {
                return this.x = -this.x,
                this.y = -this.y,
                this.z = -this.z,
                this.w = -this.w,
                this
            },
            dot: function(t) {
                return this.x * t.x + this.y * t.y + this.z * t.z + this.w * t.w
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
            },
            lengthManhattan: function() {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
            },
            normalize: function() {
                return this.divideScalar(this.length())
            },
            setLength: function(t) {
                var e = this.length();
                return 0 !== e && t !== e && this.multiplyScalar(t / e),
                this
            },
            lerp: function(t, e) {
                return this.x += (t.x - this.x) * e,
                this.y += (t.y - this.y) * e,
                this.z += (t.z - this.z) * e,
                this.w += (t.w - this.w) * e,
                this
            },
            lerpVectors: function(t, e, n) {
                return this.subVectors(e, t).multiplyScalar(n).add(t),
                this
            },
            equals: function(t) {
                return t.x === this.x && t.y === this.y && t.z === this.z && t.w === this.w
            },
            fromArray: function(t, e) {
                return void 0 === e && (e = 0),
                this.x = t[e],
                this.y = t[e + 1],
                this.z = t[e + 2],
                this.w = t[e + 3],
                this
            },
            toArray: function(t, e) {
                return void 0 === t && (t = []),
                void 0 === e && (e = 0),
                t[e] = this.x,
                t[e + 1] = this.y,
                t[e + 2] = this.z,
                t[e + 3] = this.w,
                t
            },
            fromAttribute: function(t, e, n) {
                return void 0 === n && (n = 0),
                e = e * t.itemSize + n,
                this.x = t.array[e],
                this.y = t.array[e + 1],
                this.z = t.array[e + 2],
                this.w = t.array[e + 3],
                this
            }
        },
        r.Euler = function(t, e, n, i) {
            this._x = t || 0,
            this._y = e || 0,
            this._z = n || 0,
            this._order = i || r.Euler.DefaultOrder
        }
        ,
        r.Euler.RotationOrders = "XYZ YZX ZXY XZY YXZ ZYX".split(" "),
        r.Euler.DefaultOrder = "XYZ",
        r.Euler.prototype = {
            constructor: r.Euler,
            get x() {
                return this._x
            },
            set x(t) {
                this._x = t,
                this.onChangeCallback()
            },
            get y() {
                return this._y
            },
            set y(t) {
                this._y = t,
                this.onChangeCallback()
            },
            get z() {
                return this._z
            },
            set z(t) {
                this._z = t,
                this.onChangeCallback()
            },
            get order() {
                return this._order
            },
            set order(t) {
                this._order = t,
                this.onChangeCallback()
            },
            set: function(t, e, n, r) {
                return this._x = t,
                this._y = e,
                this._z = n,
                this._order = r || this._order,
                this.onChangeCallback(),
                this
            },
            clone: function() {
                return new this.constructor(this._x,this._y,this._z,this._order)
            },
            copy: function(t) {
                return this._x = t._x,
                this._y = t._y,
                this._z = t._z,
                this._order = t._order,
                this.onChangeCallback(),
                this
            },
            setFromRotationMatrix: function(t, e, n) {
                var i = r.Math.clamp
                  , o = t.elements;
                t = o[0];
                var a = o[4]
                  , s = o[8]
                  , l = o[1]
                  , h = o[5]
                  , c = o[9]
                  , u = o[2]
                  , p = o[6]
                  , o = o[10];
                return e = e || this._order,
                "XYZ" === e ? (this._y = Math.asin(i(s, -1, 1)),
                .99999 > Math.abs(s) ? (this._x = Math.atan2(-c, o),
                this._z = Math.atan2(-a, t)) : (this._x = Math.atan2(p, h),
                this._z = 0)) : "YXZ" === e ? (this._x = Math.asin(-i(c, -1, 1)),
                .99999 > Math.abs(c) ? (this._y = Math.atan2(s, o),
                this._z = Math.atan2(l, h)) : (this._y = Math.atan2(-u, t),
                this._z = 0)) : "ZXY" === e ? (this._x = Math.asin(i(p, -1, 1)),
                .99999 > Math.abs(p) ? (this._y = Math.atan2(-u, o),
                this._z = Math.atan2(-a, h)) : (this._y = 0,
                this._z = Math.atan2(l, t))) : "ZYX" === e ? (this._y = Math.asin(-i(u, -1, 1)),
                .99999 > Math.abs(u) ? (this._x = Math.atan2(p, o),
                this._z = Math.atan2(l, t)) : (this._x = 0,
                this._z = Math.atan2(-a, h))) : "YZX" === e ? (this._z = Math.asin(i(l, -1, 1)),
                .99999 > Math.abs(l) ? (this._x = Math.atan2(-c, h),
                this._y = Math.atan2(-u, t)) : (this._x = 0,
                this._y = Math.atan2(s, o))) : "XZY" === e ? (this._z = Math.asin(-i(a, -1, 1)),
                .99999 > Math.abs(a) ? (this._x = Math.atan2(p, h),
                this._y = Math.atan2(s, t)) : (this._x = Math.atan2(-c, o),
                this._y = 0)) : console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + e),
                this._order = e,
                !1 !== n && this.onChangeCallback(),
                this
            },
            setFromQuaternion: function() {
                var t;
                return function(e, n, i) {
                    return void 0 === t && (t = new r.Matrix4),
                    t.makeRotationFromQuaternion(e),
                    this.setFromRotationMatrix(t, n, i),
                    this
                }
            }(),
            setFromVector3: function(t, e) {
                return this.set(t.x, t.y, t.z, e || this._order)
            },
            reorder: function() {
                var t = new r.Quaternion;
                return function(e) {
                    t.setFromEuler(this),
                    this.setFromQuaternion(t, e)
                }
            }(),
            equals: function(t) {
                return t._x === this._x && t._y === this._y && t._z === this._z && t._order === this._order
            },
            fromArray: function(t) {
                return this._x = t[0],
                this._y = t[1],
                this._z = t[2],
                void 0 !== t[3] && (this._order = t[3]),
                this.onChangeCallback(),
                this
            },
            toArray: function(t, e) {
                return void 0 === t && (t = []),
                void 0 === e && (e = 0),
                t[e] = this._x,
                t[e + 1] = this._y,
                t[e + 2] = this._z,
                t[e + 3] = this._order,
                t
            },
            toVector3: function(t) {
                return t ? t.set(this._x, this._y, this._z) : new r.Vector3(this._x,this._y,this._z)
            },
            onChange: function(t) {
                return this.onChangeCallback = t,
                this
            },
            onChangeCallback: function() {}
        },
        r.Line3 = function(t, e) {
            this.start = void 0 !== t ? t : new r.Vector3,
            this.end = void 0 !== e ? e : new r.Vector3
        }
        ,
        r.Line3.prototype = {
            constructor: r.Line3,
            set: function(t, e) {
                return this.start.copy(t),
                this.end.copy(e),
                this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                return this.start.copy(t.start),
                this.end.copy(t.end),
                this
            },
            center: function(t) {
                return (t || new r.Vector3).addVectors(this.start, this.end).multiplyScalar(.5)
            },
            delta: function(t) {
                return (t || new r.Vector3).subVectors(this.end, this.start)
            },
            distanceSq: function() {
                return this.start.distanceToSquared(this.end)
            },
            distance: function() {
                return this.start.distanceTo(this.end)
            },
            at: function(t, e) {
                var n = e || new r.Vector3;
                return this.delta(n).multiplyScalar(t).add(this.start)
            },
            closestPointToPointParameter: function() {
                var t = new r.Vector3
                  , e = new r.Vector3;
                return function(n, i) {
                    t.subVectors(n, this.start),
                    e.subVectors(this.end, this.start);
                    var o = e.dot(e)
                      , o = e.dot(t) / o;
                    return i && (o = r.Math.clamp(o, 0, 1)),
                    o
                }
            }(),
            closestPointToPoint: function(t, e, n) {
                return t = this.closestPointToPointParameter(t, e),
                n = n || new r.Vector3,
                this.delta(n).multiplyScalar(t).add(this.start)
            },
            applyMatrix4: function(t) {
                return this.start.applyMatrix4(t),
                this.end.applyMatrix4(t),
                this
            },
            equals: function(t) {
                return t.start.equals(this.start) && t.end.equals(this.end)
            }
        },
        r.Box2 = function(t, e) {
            this.min = void 0 !== t ? t : new r.Vector2(1 / 0,1 / 0),
            this.max = void 0 !== e ? e : new r.Vector2(-(1 / 0),-(1 / 0))
        }
        ,
        r.Box2.prototype = {
            constructor: r.Box2,
            set: function(t, e) {
                return this.min.copy(t),
                this.max.copy(e),
                this
            },
            setFromPoints: function(t) {
                this.makeEmpty();
                for (var e = 0, n = t.length; n > e; e++)
                    this.expandByPoint(t[e]);
                return this
            },
            setFromCenterAndSize: function() {
                var t = new r.Vector2;
                return function(e, n) {
                    var r = t.copy(n).multiplyScalar(.5);
                    return this.min.copy(e).sub(r),
                    this.max.copy(e).add(r),
                    this
                }
            }(),
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                return this.min.copy(t.min),
                this.max.copy(t.max),
                this
            },
            makeEmpty: function() {
                return this.min.x = this.min.y = 1 / 0,
                this.max.x = this.max.y = -(1 / 0),
                this
            },
            empty: function() {
                return this.max.x < this.min.x || this.max.y < this.min.y
            },
            center: function(t) {
                return (t || new r.Vector2).addVectors(this.min, this.max).multiplyScalar(.5)
            },
            size: function(t) {
                return (t || new r.Vector2).subVectors(this.max, this.min)
            },
            expandByPoint: function(t) {
                return this.min.min(t),
                this.max.max(t),
                this
            },
            expandByVector: function(t) {
                return this.min.sub(t),
                this.max.add(t),
                this
            },
            expandByScalar: function(t) {
                return this.min.addScalar(-t),
                this.max.addScalar(t),
                this
            },
            containsPoint: function(t) {
                return t.x < this.min.x || t.x > this.max.x || t.y < this.min.y || t.y > this.max.y ? !1 : !0
            },
            containsBox: function(t) {
                return this.min.x <= t.min.x && t.max.x <= this.max.x && this.min.y <= t.min.y && t.max.y <= this.max.y ? !0 : !1
            },
            getParameter: function(t, e) {
                return (e || new r.Vector2).set((t.x - this.min.x) / (this.max.x - this.min.x), (t.y - this.min.y) / (this.max.y - this.min.y))
            },
            isIntersectionBox: function(t) {
                return t.max.x < this.min.x || t.min.x > this.max.x || t.max.y < this.min.y || t.min.y > this.max.y ? !1 : !0
            },
            clampPoint: function(t, e) {
                return (e || new r.Vector2).copy(t).clamp(this.min, this.max)
            },
            distanceToPoint: function() {
                var t = new r.Vector2;
                return function(e) {
                    return t.copy(e).clamp(this.min, this.max).sub(e).length()
                }
            }(),
            intersect: function(t) {
                return this.min.max(t.min),
                this.max.min(t.max),
                this
            },
            union: function(t) {
                return this.min.min(t.min),
                this.max.max(t.max),
                this
            },
            translate: function(t) {
                return this.min.add(t),
                this.max.add(t),
                this
            },
            equals: function(t) {
                return t.min.equals(this.min) && t.max.equals(this.max)
            }
        },
        r.Box3 = function(t, e) {
            this.min = void 0 !== t ? t : new r.Vector3(1 / 0,1 / 0,1 / 0),
            this.max = void 0 !== e ? e : new r.Vector3(-(1 / 0),-(1 / 0),-(1 / 0))
        }
        ,
        r.Box3.prototype = {
            constructor: r.Box3,
            set: function(t, e) {
                return this.min.copy(t),
                this.max.copy(e),
                this
            },
            setFromPoints: function(t) {
                this.makeEmpty();
                for (var e = 0, n = t.length; n > e; e++)
                    this.expandByPoint(t[e]);
                return this
            },
            setFromCenterAndSize: function() {
                var t = new r.Vector3;
                return function(e, n) {
                    var r = t.copy(n).multiplyScalar(.5);
                    return this.min.copy(e).sub(r),
                    this.max.copy(e).add(r),
                    this
                }
            }(),
            setFromObject: function() {
                var t = new r.Vector3;
                return function(e) {
                    var n = this;
                    return e.updateMatrixWorld(!0),
                    this.makeEmpty(),
                    e.traverse(function(e) {
                        var i = e.geometry;
                        if (void 0 !== i)
                            if (i instanceof r.Geometry)
                                for (var o = i.vertices, i = 0, a = o.length; a > i; i++)
                                    t.copy(o[i]),
                                    t.applyMatrix4(e.matrixWorld),
                                    n.expandByPoint(t);
                            else if (i instanceof r.BufferGeometry && void 0 !== i.attributes.position)
                                for (o = i.attributes.position.array,
                                i = 0,
                                a = o.length; a > i; i += 3)
                                    t.set(o[i], o[i + 1], o[i + 2]),
                                    t.applyMatrix4(e.matrixWorld),
                                    n.expandByPoint(t)
                    }),
                    this
                }
            }(),
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                return this.min.copy(t.min),
                this.max.copy(t.max),
                this
            },
            makeEmpty: function() {
                return this.min.x = this.min.y = this.min.z = 1 / 0,
                this.max.x = this.max.y = this.max.z = -(1 / 0),
                this
            },
            empty: function() {
                return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
            },
            center: function(t) {
                return (t || new r.Vector3).addVectors(this.min, this.max).multiplyScalar(.5)
            },
            size: function(t) {
                return (t || new r.Vector3).subVectors(this.max, this.min)
            },
            expandByPoint: function(t) {
                return this.min.min(t),
                this.max.max(t),
                this
            },
            expandByVector: function(t) {
                return this.min.sub(t),
                this.max.add(t),
                this
            },
            expandByScalar: function(t) {
                return this.min.addScalar(-t),
                this.max.addScalar(t),
                this
            },
            containsPoint: function(t) {
                return t.x < this.min.x || t.x > this.max.x || t.y < this.min.y || t.y > this.max.y || t.z < this.min.z || t.z > this.max.z ? !1 : !0
            },
            containsBox: function(t) {
                return this.min.x <= t.min.x && t.max.x <= this.max.x && this.min.y <= t.min.y && t.max.y <= this.max.y && this.min.z <= t.min.z && t.max.z <= this.max.z ? !0 : !1
            },
            getParameter: function(t, e) {
                return (e || new r.Vector3).set((t.x - this.min.x) / (this.max.x - this.min.x), (t.y - this.min.y) / (this.max.y - this.min.y), (t.z - this.min.z) / (this.max.z - this.min.z))
            },
            isIntersectionBox: function(t) {
                return t.max.x < this.min.x || t.min.x > this.max.x || t.max.y < this.min.y || t.min.y > this.max.y || t.max.z < this.min.z || t.min.z > this.max.z ? !1 : !0
            },
            clampPoint: function(t, e) {
                return (e || new r.Vector3).copy(t).clamp(this.min, this.max)
            },
            distanceToPoint: function() {
                var t = new r.Vector3;
                return function(e) {
                    return t.copy(e).clamp(this.min, this.max).sub(e).length()
                }
            }(),
            getBoundingSphere: function() {
                var t = new r.Vector3;
                return function(e) {
                    return e = e || new r.Sphere,
                    e.center = this.center(),
                    e.radius = .5 * this.size(t).length(),
                    e
                }
            }(),
            intersect: function(t) {
                return this.min.max(t.min),
                this.max.min(t.max),
                this
            },
            union: function(t) {
                return this.min.min(t.min),
                this.max.max(t.max),
                this
            },
            applyMatrix4: function() {
                var t = [new r.Vector3, new r.Vector3, new r.Vector3, new r.Vector3, new r.Vector3, new r.Vector3, new r.Vector3, new r.Vector3];
                return function(e) {
                    return t[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e),
                    t[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e),
                    t[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e),
                    t[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e),
                    t[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e),
                    t[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e),
                    t[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e),
                    t[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e),
                    this.makeEmpty(),
                    this.setFromPoints(t),
                    this
                }
            }(),
            translate: function(t) {
                return this.min.add(t),
                this.max.add(t),
                this
            },
            equals: function(t) {
                return t.min.equals(this.min) && t.max.equals(this.max)
            }
        },
        r.Matrix3 = function() {
            this.elements = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]),
            0 < arguments.length && console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")
        }
        ,
        r.Matrix3.prototype = {
            constructor: r.Matrix3,
            set: function(t, e, n, r, i, o, a, s, l) {
                var h = this.elements;
                return h[0] = t,
                h[3] = e,
                h[6] = n,
                h[1] = r,
                h[4] = i,
                h[7] = o,
                h[2] = a,
                h[5] = s,
                h[8] = l,
                this
            },
            identity: function() {
                return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1),
                this
            },
            clone: function() {
                return (new this.constructor).fromArray(this.elements)
            },
            copy: function(t) {
                return t = t.elements,
                this.set(t[0], t[3], t[6], t[1], t[4], t[7], t[2], t[5], t[8]),
                this
            },
            multiplyVector3: function(t) {
                return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),
                t.applyMatrix3(this)
            },
            multiplyVector3Array: function(t) {
                return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),
                this.applyToVector3Array(t)
            },
            applyToVector3Array: function() {
                var t;
                return function(e, n, i) {
                    void 0 === t && (t = new r.Vector3),
                    void 0 === n && (n = 0),
                    void 0 === i && (i = e.length);
                    for (var o = 0; i > o; o += 3,
                    n += 3)
                        t.fromArray(e, n),
                        t.applyMatrix3(this),
                        t.toArray(e, n);
                    return e
                }
            }(),
            applyToBuffer: function() {
                var t;
                return function(e, n, i) {
                    void 0 === t && (t = new r.Vector3),
                    void 0 === n && (n = 0),
                    void 0 === i && (i = e.length / e.itemSize);
                    for (var o = 0; i > o; o++,
                    n++)
                        t.x = e.getX(n),
                        t.y = e.getY(n),
                        t.z = e.getZ(n),
                        t.applyMatrix3(this),
                        e.setXYZ(t.x, t.y, t.z);
                    return e
                }
            }(),
            multiplyScalar: function(t) {
                var e = this.elements;
                return e[0] *= t,
                e[3] *= t,
                e[6] *= t,
                e[1] *= t,
                e[4] *= t,
                e[7] *= t,
                e[2] *= t,
                e[5] *= t,
                e[8] *= t,
                this
            },
            determinant: function() {
                var t = this.elements
                  , e = t[0]
                  , n = t[1]
                  , r = t[2]
                  , i = t[3]
                  , o = t[4]
                  , a = t[5]
                  , s = t[6]
                  , l = t[7]
                  , t = t[8];
                return e * o * t - e * a * l - n * i * t + n * a * s + r * i * l - r * o * s
            },
            getInverse: function(t, e) {
                var n = t.elements
                  , r = this.elements;
                if (r[0] = n[10] * n[5] - n[6] * n[9],
                r[1] = -n[10] * n[1] + n[2] * n[9],
                r[2] = n[6] * n[1] - n[2] * n[5],
                r[3] = -n[10] * n[4] + n[6] * n[8],
                r[4] = n[10] * n[0] - n[2] * n[8],
                r[5] = -n[6] * n[0] + n[2] * n[4],
                r[6] = n[9] * n[4] - n[5] * n[8],
                r[7] = -n[9] * n[0] + n[1] * n[8],
                r[8] = n[5] * n[0] - n[1] * n[4],
                n = n[0] * r[0] + n[1] * r[3] + n[2] * r[6],
                0 === n) {
                    if (e)
                        throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");
                    return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),
                    this.identity(),
                    this
                }
                return this.multiplyScalar(1 / n),
                this
            },
            transpose: function() {
                var t, e = this.elements;
                return t = e[1],
                e[1] = e[3],
                e[3] = t,
                t = e[2],
                e[2] = e[6],
                e[6] = t,
                t = e[5],
                e[5] = e[7],
                e[7] = t,
                this
            },
            flattenToArrayOffset: function(t, e) {
                var n = this.elements;
                return t[e] = n[0],
                t[e + 1] = n[1],
                t[e + 2] = n[2],
                t[e + 3] = n[3],
                t[e + 4] = n[4],
                t[e + 5] = n[5],
                t[e + 6] = n[6],
                t[e + 7] = n[7],
                t[e + 8] = n[8],
                t
            },
            getNormalMatrix: function(t) {
                return this.getInverse(t).transpose(),
                this
            },
            transposeIntoArray: function(t) {
                var e = this.elements;
                return t[0] = e[0],
                t[1] = e[3],
                t[2] = e[6],
                t[3] = e[1],
                t[4] = e[4],
                t[5] = e[7],
                t[6] = e[2],
                t[7] = e[5],
                t[8] = e[8],
                this
            },
            fromArray: function(t) {
                return this.elements.set(t),
                this
            },
            toArray: function() {
                var t = this.elements;
                return [t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8]]
            }
        },
        r.Matrix4 = function() {
            this.elements = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),
            0 < arguments.length && console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")
        }
        ,
        r.Matrix4.prototype = {
            constructor: r.Matrix4,
            set: function(t, e, n, r, i, o, a, s, l, h, c, u, p, d, f, m) {
                var g = this.elements;
                return g[0] = t,
                g[4] = e,
                g[8] = n,
                g[12] = r,
                g[1] = i,
                g[5] = o,
                g[9] = a,
                g[13] = s,
                g[2] = l,
                g[6] = h,
                g[10] = c,
                g[14] = u,
                g[3] = p,
                g[7] = d,
                g[11] = f,
                g[15] = m,
                this
            },
            identity: function() {
                return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                this
            },
            clone: function() {
                return (new r.Matrix4).fromArray(this.elements)
            },
            copy: function(t) {
                return this.elements.set(t.elements),
                this
            },
            extractPosition: function(t) {
                return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),
                this.copyPosition(t)
            },
            copyPosition: function(t) {
                var e = this.elements;
                return t = t.elements,
                e[12] = t[12],
                e[13] = t[13],
                e[14] = t[14],
                this
            },
            extractBasis: function(t, e, n) {
                var r = this.elements;
                return t.set(r[0], r[1], r[2]),
                e.set(r[4], r[5], r[6]),
                n.set(r[8], r[9], r[10]),
                this
            },
            makeBasis: function(t, e, n) {
                return this.set(t.x, e.x, n.x, 0, t.y, e.y, n.y, 0, t.z, e.z, n.z, 0, 0, 0, 0, 1),
                this
            },
            extractRotation: function() {
                var t;
                return function(e) {
                    void 0 === t && (t = new r.Vector3);
                    var n = this.elements;
                    e = e.elements;
                    var i = 1 / t.set(e[0], e[1], e[2]).length()
                      , o = 1 / t.set(e[4], e[5], e[6]).length()
                      , a = 1 / t.set(e[8], e[9], e[10]).length();
                    return n[0] = e[0] * i,
                    n[1] = e[1] * i,
                    n[2] = e[2] * i,
                    n[4] = e[4] * o,
                    n[5] = e[5] * o,
                    n[6] = e[6] * o,
                    n[8] = e[8] * a,
                    n[9] = e[9] * a,
                    n[10] = e[10] * a,
                    this
                }
            }(),
            makeRotationFromEuler: function(t) {
                !1 == t instanceof r.Euler && console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
                var e = this.elements
                  , n = t.x
                  , i = t.y
                  , o = t.z
                  , a = Math.cos(n)
                  , n = Math.sin(n)
                  , s = Math.cos(i)
                  , i = Math.sin(i)
                  , l = Math.cos(o)
                  , o = Math.sin(o);
                if ("XYZ" === t.order) {
                    t = a * l;
                    var h = a * o
                      , c = n * l
                      , u = n * o;
                    e[0] = s * l,
                    e[4] = -s * o,
                    e[8] = i,
                    e[1] = h + c * i,
                    e[5] = t - u * i,
                    e[9] = -n * s,
                    e[2] = u - t * i,
                    e[6] = c + h * i,
                    e[10] = a * s
                } else
                    "YXZ" === t.order ? (t = s * l,
                    h = s * o,
                    c = i * l,
                    u = i * o,
                    e[0] = t + u * n,
                    e[4] = c * n - h,
                    e[8] = a * i,
                    e[1] = a * o,
                    e[5] = a * l,
                    e[9] = -n,
                    e[2] = h * n - c,
                    e[6] = u + t * n,
                    e[10] = a * s) : "ZXY" === t.order ? (t = s * l,
                    h = s * o,
                    c = i * l,
                    u = i * o,
                    e[0] = t - u * n,
                    e[4] = -a * o,
                    e[8] = c + h * n,
                    e[1] = h + c * n,
                    e[5] = a * l,
                    e[9] = u - t * n,
                    e[2] = -a * i,
                    e[6] = n,
                    e[10] = a * s) : "ZYX" === t.order ? (t = a * l,
                    h = a * o,
                    c = n * l,
                    u = n * o,
                    e[0] = s * l,
                    e[4] = c * i - h,
                    e[8] = t * i + u,
                    e[1] = s * o,
                    e[5] = u * i + t,
                    e[9] = h * i - c,
                    e[2] = -i,
                    e[6] = n * s,
                    e[10] = a * s) : "YZX" === t.order ? (t = a * s,
                    h = a * i,
                    c = n * s,
                    u = n * i,
                    e[0] = s * l,
                    e[4] = u - t * o,
                    e[8] = c * o + h,
                    e[1] = o,
                    e[5] = a * l,
                    e[9] = -n * l,
                    e[2] = -i * l,
                    e[6] = h * o + c,
                    e[10] = t - u * o) : "XZY" === t.order && (t = a * s,
                    h = a * i,
                    c = n * s,
                    u = n * i,
                    e[0] = s * l,
                    e[4] = -o,
                    e[8] = i * l,
                    e[1] = t * o + u,
                    e[5] = a * l,
                    e[9] = h * o - c,
                    e[2] = c * o - h,
                    e[6] = n * l,
                    e[10] = u * o + t);
                return e[3] = 0,
                e[7] = 0,
                e[11] = 0,
                e[12] = 0,
                e[13] = 0,
                e[14] = 0,
                e[15] = 1,
                this
            },
            setRotationFromQuaternion: function(t) {
                return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),
                this.makeRotationFromQuaternion(t)
            },
            makeRotationFromQuaternion: function(t) {
                var e = this.elements
                  , n = t.x
                  , r = t.y
                  , i = t.z
                  , o = t.w
                  , a = n + n
                  , s = r + r
                  , l = i + i;
                t = n * a;
                var h = n * s
                  , n = n * l
                  , c = r * s
                  , r = r * l
                  , i = i * l
                  , a = o * a
                  , s = o * s
                  , o = o * l;
                return e[0] = 1 - (c + i),
                e[4] = h - o,
                e[8] = n + s,
                e[1] = h + o,
                e[5] = 1 - (t + i),
                e[9] = r - a,
                e[2] = n - s,
                e[6] = r + a,
                e[10] = 1 - (t + c),
                e[3] = 0,
                e[7] = 0,
                e[11] = 0,
                e[12] = 0,
                e[13] = 0,
                e[14] = 0,
                e[15] = 1,
                this
            },
            lookAt: function() {
                var t, e, n;
                return function(i, o, a) {
                    void 0 === t && (t = new r.Vector3),
                    void 0 === e && (e = new r.Vector3),
                    void 0 === n && (n = new r.Vector3);
                    var s = this.elements;
                    return n.subVectors(i, o).normalize(),
                    0 === n.length() && (n.z = 1),
                    t.crossVectors(a, n).normalize(),
                    0 === t.length() && (n.x += 1e-4,
                    t.crossVectors(a, n).normalize()),
                    e.crossVectors(n, t),
                    s[0] = t.x,
                    s[4] = e.x,
                    s[8] = n.x,
                    s[1] = t.y,
                    s[5] = e.y,
                    s[9] = n.y,
                    s[2] = t.z,
                    s[6] = e.z,
                    s[10] = n.z,
                    this
                }
            }(),
            multiply: function(t, e) {
                return void 0 !== e ? (console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),
                this.multiplyMatrices(t, e)) : this.multiplyMatrices(this, t)
            },
            multiplyMatrices: function(t, e) {
                var n = t.elements
                  , r = e.elements
                  , i = this.elements
                  , o = n[0]
                  , a = n[4]
                  , s = n[8]
                  , l = n[12]
                  , h = n[1]
                  , c = n[5]
                  , u = n[9]
                  , p = n[13]
                  , d = n[2]
                  , f = n[6]
                  , m = n[10]
                  , g = n[14]
                  , v = n[3]
                  , y = n[7]
                  , _ = n[11]
                  , n = n[15]
                  , x = r[0]
                  , b = r[4]
                  , w = r[8]
                  , S = r[12]
                  , T = r[1]
                  , M = r[5]
                  , C = r[9]
                  , A = r[13]
                  , E = r[2]
                  , L = r[6]
                  , P = r[10]
                  , k = r[14]
                  , R = r[3]
                  , O = r[7]
                  , D = r[11]
                  , r = r[15];
                return i[0] = o * x + a * T + s * E + l * R,
                i[4] = o * b + a * M + s * L + l * O,
                i[8] = o * w + a * C + s * P + l * D,
                i[12] = o * S + a * A + s * k + l * r,
                i[1] = h * x + c * T + u * E + p * R,
                i[5] = h * b + c * M + u * L + p * O,
                i[9] = h * w + c * C + u * P + p * D,
                i[13] = h * S + c * A + u * k + p * r,
                i[2] = d * x + f * T + m * E + g * R,
                i[6] = d * b + f * M + m * L + g * O,
                i[10] = d * w + f * C + m * P + g * D,
                i[14] = d * S + f * A + m * k + g * r,
                i[3] = v * x + y * T + _ * E + n * R,
                i[7] = v * b + y * M + _ * L + n * O,
                i[11] = v * w + y * C + _ * P + n * D,
                i[15] = v * S + y * A + _ * k + n * r,
                this
            },
            multiplyToArray: function(t, e, n) {
                var r = this.elements;
                return this.multiplyMatrices(t, e),
                n[0] = r[0],
                n[1] = r[1],
                n[2] = r[2],
                n[3] = r[3],
                n[4] = r[4],
                n[5] = r[5],
                n[6] = r[6],
                n[7] = r[7],
                n[8] = r[8],
                n[9] = r[9],
                n[10] = r[10],
                n[11] = r[11],
                n[12] = r[12],
                n[13] = r[13],
                n[14] = r[14],
                n[15] = r[15],
                this
            },
            multiplyScalar: function(t) {
                var e = this.elements;
                return e[0] *= t,
                e[4] *= t,
                e[8] *= t,
                e[12] *= t,
                e[1] *= t,
                e[5] *= t,
                e[9] *= t,
                e[13] *= t,
                e[2] *= t,
                e[6] *= t,
                e[10] *= t,
                e[14] *= t,
                e[3] *= t,
                e[7] *= t,
                e[11] *= t,
                e[15] *= t,
                this
            },
            multiplyVector3: function(t) {
                return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),
                t.applyProjection(this)
            },
            multiplyVector4: function(t) {
                return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),
                t.applyMatrix4(this)
            },
            multiplyVector3Array: function(t) {
                return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),
                this.applyToVector3Array(t)
            },
            applyToVector3Array: function() {
                var t;
                return function(e, n, i) {
                    void 0 === t && (t = new r.Vector3),
                    void 0 === n && (n = 0),
                    void 0 === i && (i = e.length);
                    for (var o = 0; i > o; o += 3,
                    n += 3)
                        t.fromArray(e, n),
                        t.applyMatrix4(this),
                        t.toArray(e, n);
                    return e
                }
            }(),
            applyToBuffer: function() {
                var t;
                return function(e, n, i) {
                    void 0 === t && (t = new r.Vector3),
                    void 0 === n && (n = 0),
                    void 0 === i && (i = e.length / e.itemSize);
                    for (var o = 0; i > o; o++,
                    n++)
                        t.x = e.getX(n),
                        t.y = e.getY(n),
                        t.z = e.getZ(n),
                        t.applyMatrix4(this),
                        e.setXYZ(t.x, t.y, t.z);
                    return e
                }
            }(),
            rotateAxis: function(t) {
                console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),
                t.transformDirection(this)
            },
            crossVector: function(t) {
                return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),
                t.applyMatrix4(this)
            },
            determinant: function() {
                var t = this.elements
                  , e = t[0]
                  , n = t[4]
                  , r = t[8]
                  , i = t[12]
                  , o = t[1]
                  , a = t[5]
                  , s = t[9]
                  , l = t[13]
                  , h = t[2]
                  , c = t[6]
                  , u = t[10]
                  , p = t[14];
                return t[3] * (+i * s * c - r * l * c - i * a * u + n * l * u + r * a * p - n * s * p) + t[7] * (+e * s * p - e * l * u + i * o * u - r * o * p + r * l * h - i * s * h) + t[11] * (+e * l * c - e * a * p - i * o * c + n * o * p + i * a * h - n * l * h) + t[15] * (-r * a * h - e * s * c + e * a * u + r * o * c - n * o * u + n * s * h)
            },
            transpose: function() {
                var t, e = this.elements;
                return t = e[1],
                e[1] = e[4],
                e[4] = t,
                t = e[2],
                e[2] = e[8],
                e[8] = t,
                t = e[6],
                e[6] = e[9],
                e[9] = t,
                t = e[3],
                e[3] = e[12],
                e[12] = t,
                t = e[7],
                e[7] = e[13],
                e[13] = t,
                t = e[11],
                e[11] = e[14],
                e[14] = t,
                this
            },
            flattenToArrayOffset: function(t, e) {
                var n = this.elements;
                return t[e] = n[0],
                t[e + 1] = n[1],
                t[e + 2] = n[2],
                t[e + 3] = n[3],
                t[e + 4] = n[4],
                t[e + 5] = n[5],
                t[e + 6] = n[6],
                t[e + 7] = n[7],
                t[e + 8] = n[8],
                t[e + 9] = n[9],
                t[e + 10] = n[10],
                t[e + 11] = n[11],
                t[e + 12] = n[12],
                t[e + 13] = n[13],
                t[e + 14] = n[14],
                t[e + 15] = n[15],
                t
            },
            getPosition: function() {
                var t;
                return function() {
                    void 0 === t && (t = new r.Vector3),
                    console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
                    var e = this.elements;
                    return t.set(e[12], e[13], e[14])
                }
            }(),
            setPosition: function(t) {
                var e = this.elements;
                return e[12] = t.x,
                e[13] = t.y,
                e[14] = t.z,
                this
            },
            getInverse: function(t, e) {
                var n = this.elements
                  , r = t.elements
                  , i = r[0]
                  , o = r[4]
                  , a = r[8]
                  , s = r[12]
                  , l = r[1]
                  , h = r[5]
                  , c = r[9]
                  , u = r[13]
                  , p = r[2]
                  , d = r[6]
                  , f = r[10]
                  , m = r[14]
                  , g = r[3]
                  , v = r[7]
                  , y = r[11]
                  , r = r[15];
                if (n[0] = c * m * v - u * f * v + u * d * y - h * m * y - c * d * r + h * f * r,
                n[4] = s * f * v - a * m * v - s * d * y + o * m * y + a * d * r - o * f * r,
                n[8] = a * u * v - s * c * v + s * h * y - o * u * y - a * h * r + o * c * r,
                n[12] = s * c * d - a * u * d - s * h * f + o * u * f + a * h * m - o * c * m,
                n[1] = u * f * g - c * m * g - u * p * y + l * m * y + c * p * r - l * f * r,
                n[5] = a * m * g - s * f * g + s * p * y - i * m * y - a * p * r + i * f * r,
                n[9] = s * c * g - a * u * g - s * l * y + i * u * y + a * l * r - i * c * r,
                n[13] = a * u * p - s * c * p + s * l * f - i * u * f - a * l * m + i * c * m,
                n[2] = h * m * g - u * d * g + u * p * v - l * m * v - h * p * r + l * d * r,
                n[6] = s * d * g - o * m * g - s * p * v + i * m * v + o * p * r - i * d * r,
                n[10] = o * u * g - s * h * g + s * l * v - i * u * v - o * l * r + i * h * r,
                n[14] = s * h * p - o * u * p - s * l * d + i * u * d + o * l * m - i * h * m,
                n[3] = c * d * g - h * f * g - c * p * v + l * f * v + h * p * y - l * d * y,
                n[7] = o * f * g - a * d * g + a * p * v - i * f * v - o * p * y + i * d * y,
                n[11] = a * h * g - o * c * g - a * l * v + i * c * v + o * l * y - i * h * y,
                n[15] = o * c * p - a * h * p + a * l * d - i * c * d - o * l * f + i * h * f,
                n = i * n[0] + l * n[4] + p * n[8] + g * n[12],
                0 === n) {
                    if (e)
                        throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");
                    return console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0"),
                    this.identity(),
                    this
                }
                return this.multiplyScalar(1 / n),
                this
            },
            translate: function(t) {
                console.error("THREE.Matrix4: .translate() has been removed.")
            },
            rotateX: function(t) {
                console.error("THREE.Matrix4: .rotateX() has been removed.")
            },
            rotateY: function(t) {
                console.error("THREE.Matrix4: .rotateY() has been removed.")
            },
            rotateZ: function(t) {
                console.error("THREE.Matrix4: .rotateZ() has been removed.")
            },
            rotateByAxis: function(t, e) {
                console.error("THREE.Matrix4: .rotateByAxis() has been removed.")
            },
            scale: function(t) {
                var e = this.elements
                  , n = t.x
                  , r = t.y;
                return t = t.z,
                e[0] *= n,
                e[4] *= r,
                e[8] *= t,
                e[1] *= n,
                e[5] *= r,
                e[9] *= t,
                e[2] *= n,
                e[6] *= r,
                e[10] *= t,
                e[3] *= n,
                e[7] *= r,
                e[11] *= t,
                this
            },
            getMaxScaleOnAxis: function() {
                var t = this.elements;
                return Math.sqrt(Math.max(t[0] * t[0] + t[1] * t[1] + t[2] * t[2], Math.max(t[4] * t[4] + t[5] * t[5] + t[6] * t[6], t[8] * t[8] + t[9] * t[9] + t[10] * t[10])))
            },
            makeTranslation: function(t, e, n) {
                return this.set(1, 0, 0, t, 0, 1, 0, e, 0, 0, 1, n, 0, 0, 0, 1),
                this
            },
            makeRotationX: function(t) {
                var e = Math.cos(t);
                return t = Math.sin(t),
                this.set(1, 0, 0, 0, 0, e, -t, 0, 0, t, e, 0, 0, 0, 0, 1),
                this
            },
            makeRotationY: function(t) {
                var e = Math.cos(t);
                return t = Math.sin(t),
                this.set(e, 0, t, 0, 0, 1, 0, 0, -t, 0, e, 0, 0, 0, 0, 1),
                this
            },
            makeRotationZ: function(t) {
                var e = Math.cos(t);
                return t = Math.sin(t),
                this.set(e, -t, 0, 0, t, e, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                this
            },
            makeRotationAxis: function(t, e) {
                var n = Math.cos(e)
                  , r = Math.sin(e)
                  , i = 1 - n
                  , o = t.x
                  , a = t.y
                  , s = t.z
                  , l = i * o
                  , h = i * a;
                return this.set(l * o + n, l * a - r * s, l * s + r * a, 0, l * a + r * s, h * a + n, h * s - r * o, 0, l * s - r * a, h * s + r * o, i * s * s + n, 0, 0, 0, 0, 1),
                this
            },
            makeScale: function(t, e, n) {
                return this.set(t, 0, 0, 0, 0, e, 0, 0, 0, 0, n, 0, 0, 0, 0, 1),
                this
            },
            compose: function(t, e, n) {
                return this.makeRotationFromQuaternion(e),
                this.scale(n),
                this.setPosition(t),
                this
            },
            decompose: function() {
                var t, e;
                return function(n, i, o) {
                    void 0 === t && (t = new r.Vector3),
                    void 0 === e && (e = new r.Matrix4);
                    var a = this.elements
                      , s = t.set(a[0], a[1], a[2]).length()
                      , l = t.set(a[4], a[5], a[6]).length()
                      , h = t.set(a[8], a[9], a[10]).length();
                    0 > this.determinant() && (s = -s),
                    n.x = a[12],
                    n.y = a[13],
                    n.z = a[14],
                    e.elements.set(this.elements),
                    n = 1 / s;
                    var a = 1 / l
                      , c = 1 / h;
                    return e.elements[0] *= n,
                    e.elements[1] *= n,
                    e.elements[2] *= n,
                    e.elements[4] *= a,
                    e.elements[5] *= a,
                    e.elements[6] *= a,
                    e.elements[8] *= c,
                    e.elements[9] *= c,
                    e.elements[10] *= c,
                    i.setFromRotationMatrix(e),
                    o.x = s,
                    o.y = l,
                    o.z = h,
                    this
                }
            }(),
            makeFrustum: function(t, e, n, r, i, o) {
                var a = this.elements;
                return a[0] = 2 * i / (e - t),
                a[4] = 0,
                a[8] = (e + t) / (e - t),
                a[12] = 0,
                a[1] = 0,
                a[5] = 2 * i / (r - n),
                a[9] = (r + n) / (r - n),
                a[13] = 0,
                a[2] = 0,
                a[6] = 0,
                a[10] = -(o + i) / (o - i),
                a[14] = -2 * o * i / (o - i),
                a[3] = 0,
                a[7] = 0,
                a[11] = -1,
                a[15] = 0,
                this
            },
            makePerspective: function(t, e, n, i) {
                t = n * Math.tan(r.Math.degToRad(.5 * t));
                var o = -t;
                return this.makeFrustum(o * e, t * e, o, t, n, i)
            },
            makeOrthographic: function(t, e, n, r, i, o) {
                var a = this.elements
                  , s = e - t
                  , l = n - r
                  , h = o - i;
                return a[0] = 2 / s,
                a[4] = 0,
                a[8] = 0,
                a[12] = -((e + t) / s),
                a[1] = 0,
                a[5] = 2 / l,
                a[9] = 0,
                a[13] = -((n + r) / l),
                a[2] = 0,
                a[6] = 0,
                a[10] = -2 / h,
                a[14] = -((o + i) / h),
                a[3] = 0,
                a[7] = 0,
                a[11] = 0,
                a[15] = 1,
                this
            },
            equals: function(t) {
                var e = this.elements;
                t = t.elements;
                for (var n = 0; 16 > n; n++)
                    if (e[n] !== t[n])
                        return !1;
                return !0
            },
            fromArray: function(t) {
                return this.elements.set(t),
                this
            },
            toArray: function() {
                var t = this.elements;
                return [t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8], t[9], t[10], t[11], t[12], t[13], t[14], t[15]]
            }
        },
        r.Ray = function(t, e) {
            this.origin = void 0 !== t ? t : new r.Vector3,
            this.direction = void 0 !== e ? e : new r.Vector3
        }
        ,
        r.Ray.prototype = {
            constructor: r.Ray,
            set: function(t, e) {
                return this.origin.copy(t),
                this.direction.copy(e),
                this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                return this.origin.copy(t.origin),
                this.direction.copy(t.direction),
                this
            },
            at: function(t, e) {
                return (e || new r.Vector3).copy(this.direction).multiplyScalar(t).add(this.origin)
            },
            recast: function() {
                var t = new r.Vector3;
                return function(e) {
                    return this.origin.copy(this.at(e, t)),
                    this
                }
            }(),
            closestPointToPoint: function(t, e) {
                var n = e || new r.Vector3;
                n.subVectors(t, this.origin);
                var i = n.dot(this.direction);
                return 0 > i ? n.copy(this.origin) : n.copy(this.direction).multiplyScalar(i).add(this.origin)
            },
            distanceToPoint: function(t) {
                return Math.sqrt(this.distanceSqToPoint(t))
            },
            distanceSqToPoint: function() {
                var t = new r.Vector3;
                return function(e) {
                    var n = t.subVectors(e, this.origin).dot(this.direction);
                    return 0 > n ? this.origin.distanceToSquared(e) : (t.copy(this.direction).multiplyScalar(n).add(this.origin),
                    t.distanceToSquared(e))
                }
            }(),
            distanceSqToSegment: function() {
                var t = new r.Vector3
                  , e = new r.Vector3
                  , n = new r.Vector3;
                return function(r, i, o, a) {
                    t.copy(r).add(i).multiplyScalar(.5),
                    e.copy(i).sub(r).normalize(),
                    n.copy(this.origin).sub(t);
                    var s, l = .5 * r.distanceTo(i), h = -this.direction.dot(e), c = n.dot(this.direction), u = -n.dot(e), p = n.lengthSq(), d = Math.abs(1 - h * h);
                    return d > 0 ? (r = h * u - c,
                    i = h * c - u,
                    s = l * d,
                    r >= 0 ? i >= -s ? s >= i ? (l = 1 / d,
                    r *= l,
                    i *= l,
                    h = r * (r + h * i + 2 * c) + i * (h * r + i + 2 * u) + p) : (i = l,
                    r = Math.max(0, -(h * i + c)),
                    h = -r * r + i * (i + 2 * u) + p) : (i = -l,
                    r = Math.max(0, -(h * i + c)),
                    h = -r * r + i * (i + 2 * u) + p) : -s >= i ? (r = Math.max(0, -(-h * l + c)),
                    i = r > 0 ? -l : Math.min(Math.max(-l, -u), l),
                    h = -r * r + i * (i + 2 * u) + p) : s >= i ? (r = 0,
                    i = Math.min(Math.max(-l, -u), l),
                    h = i * (i + 2 * u) + p) : (r = Math.max(0, -(h * l + c)),
                    i = r > 0 ? l : Math.min(Math.max(-l, -u), l),
                    h = -r * r + i * (i + 2 * u) + p)) : (i = h > 0 ? -l : l,
                    r = Math.max(0, -(h * i + c)),
                    h = -r * r + i * (i + 2 * u) + p),
                    o && o.copy(this.direction).multiplyScalar(r).add(this.origin),
                    a && a.copy(e).multiplyScalar(i).add(t),
                    h
                }
            }(),
            isIntersectionSphere: function(t) {
                return this.distanceToPoint(t.center) <= t.radius
            },
            intersectSphere: function() {
                var t = new r.Vector3;
                return function(e, n) {
                    t.subVectors(e.center, this.origin);
                    var r = t.dot(this.direction)
                      , i = t.dot(t) - r * r
                      , o = e.radius * e.radius;
                    return i > o ? null : (o = Math.sqrt(o - i),
                    i = r - o,
                    r += o,
                    0 > i && 0 > r ? null : 0 > i ? this.at(r, n) : this.at(i, n))
                }
            }(),
            isIntersectionPlane: function(t) {
                var e = t.distanceToPoint(this.origin);
                return 0 === e || 0 > t.normal.dot(this.direction) * e ? !0 : !1
            },
            distanceToPlane: function(t) {
                var e = t.normal.dot(this.direction);
                return 0 === e ? 0 === t.distanceToPoint(this.origin) ? 0 : null : (t = -(this.origin.dot(t.normal) + t.constant) / e,
                t >= 0 ? t : null )
            },
            intersectPlane: function(t, e) {
                var n = this.distanceToPlane(t);
                return null === n ? null : this.at(n, e)
            },
            isIntersectionBox: function() {
                var t = new r.Vector3;
                return function(e) {
                    return null !== this.intersectBox(e, t)
                }
            }(),
            intersectBox: function(t, e) {
                var n, r, i, o, a;
                r = 1 / this.direction.x,
                o = 1 / this.direction.y,
                a = 1 / this.direction.z;
                var s = this.origin;
                return r >= 0 ? (n = (t.min.x - s.x) * r,
                r *= t.max.x - s.x) : (n = (t.max.x - s.x) * r,
                r *= t.min.x - s.x),
                o >= 0 ? (i = (t.min.y - s.y) * o,
                o *= t.max.y - s.y) : (i = (t.max.y - s.y) * o,
                o *= t.min.y - s.y),
                n > o || i > r ? null : ((i > n || n !== n) && (n = i),
                (r > o || r !== r) && (r = o),
                a >= 0 ? (i = (t.min.z - s.z) * a,
                a *= t.max.z - s.z) : (i = (t.max.z - s.z) * a,
                a *= t.min.z - s.z),
                n > a || i > r ? null : ((i > n || n !== n) && (n = i),
                (r > a || r !== r) && (r = a),
                0 > r ? null : this.at(n >= 0 ? n : r, e)))
            },
            intersectTriangle: function() {
                var t = new r.Vector3
                  , e = new r.Vector3
                  , n = new r.Vector3
                  , i = new r.Vector3;
                return function(r, o, a, s, l) {
                    if (e.subVectors(o, r),
                    n.subVectors(a, r),
                    i.crossVectors(e, n),
                    o = this.direction.dot(i),
                    o > 0) {
                        if (s)
                            return null ;
                        s = 1
                    } else {
                        if (!(0 > o))
                            return null ;
                        s = -1,
                        o = -o
                    }
                    return t.subVectors(this.origin, r),
                    r = s * this.direction.dot(n.crossVectors(t, n)),
                    0 > r ? null : (a = s * this.direction.dot(e.cross(t)),
                    0 > a || r + a > o ? null : (r = -s * t.dot(i),
                    0 > r ? null : this.at(r / o, l)))
                }
            }(),
            applyMatrix4: function(t) {
                return this.direction.add(this.origin).applyMatrix4(t),
                this.origin.applyMatrix4(t),
                this.direction.sub(this.origin),
                this.direction.normalize(),
                this
            },
            equals: function(t) {
                return t.origin.equals(this.origin) && t.direction.equals(this.direction)
            }
        },
        r.Sphere = function(t, e) {
            this.center = void 0 !== t ? t : new r.Vector3,
            this.radius = void 0 !== e ? e : 0
        }
        ,
        r.Sphere.prototype = {
            constructor: r.Sphere,
            set: function(t, e) {
                return this.center.copy(t),
                this.radius = e,
                this
            },
            setFromPoints: function() {
                var t = new r.Box3;
                return function(e, n) {
                    var r = this.center;
                    void 0 !== n ? r.copy(n) : t.setFromPoints(e).center(r);
                    for (var i = 0, o = 0, a = e.length; a > o; o++)
                        i = Math.max(i, r.distanceToSquared(e[o]));
                    return this.radius = Math.sqrt(i),
                    this
                }
            }(),
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                return this.center.copy(t.center),
                this.radius = t.radius,
                this
            },
            empty: function() {
                return 0 >= this.radius
            },
            containsPoint: function(t) {
                return t.distanceToSquared(this.center) <= this.radius * this.radius
            },
            distanceToPoint: function(t) {
                return t.distanceTo(this.center) - this.radius
            },
            intersectsSphere: function(t) {
                var e = this.radius + t.radius;
                return t.center.distanceToSquared(this.center) <= e * e
            },
            clampPoint: function(t, e) {
                var n = this.center.distanceToSquared(t)
                  , i = e || new r.Vector3;
                return i.copy(t),
                n > this.radius * this.radius && (i.sub(this.center).normalize(),
                i.multiplyScalar(this.radius).add(this.center)),
                i
            },
            getBoundingBox: function(t) {
                return t = t || new r.Box3,
                t.set(this.center, this.center),
                t.expandByScalar(this.radius),
                t
            },
            applyMatrix4: function(t) {
                return this.center.applyMatrix4(t),
                this.radius *= t.getMaxScaleOnAxis(),
                this
            },
            translate: function(t) {
                return this.center.add(t),
                this
            },
            equals: function(t) {
                return t.center.equals(this.center) && t.radius === this.radius
            }
        },
        r.Frustum = function(t, e, n, i, o, a) {
            this.planes = [void 0 !== t ? t : new r.Plane, void 0 !== e ? e : new r.Plane, void 0 !== n ? n : new r.Plane, void 0 !== i ? i : new r.Plane, void 0 !== o ? o : new r.Plane, void 0 !== a ? a : new r.Plane]
        }
        ,
        r.Frustum.prototype = {
            constructor: r.Frustum,
            set: function(t, e, n, r, i, o) {
                var a = this.planes;
                return a[0].copy(t),
                a[1].copy(e),
                a[2].copy(n),
                a[3].copy(r),
                a[4].copy(i),
                a[5].copy(o),
                this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                for (var e = this.planes, n = 0; 6 > n; n++)
                    e[n].copy(t.planes[n]);
                return this
            },
            setFromMatrix: function(t) {
                var e = this.planes
                  , n = t.elements;
                t = n[0];
                var r = n[1]
                  , i = n[2]
                  , o = n[3]
                  , a = n[4]
                  , s = n[5]
                  , l = n[6]
                  , h = n[7]
                  , c = n[8]
                  , u = n[9]
                  , p = n[10]
                  , d = n[11]
                  , f = n[12]
                  , m = n[13]
                  , g = n[14]
                  , n = n[15];
                return e[0].setComponents(o - t, h - a, d - c, n - f).normalize(),
                e[1].setComponents(o + t, h + a, d + c, n + f).normalize(),
                e[2].setComponents(o + r, h + s, d + u, n + m).normalize(),
                e[3].setComponents(o - r, h - s, d - u, n - m).normalize(),
                e[4].setComponents(o - i, h - l, d - p, n - g).normalize(),
                e[5].setComponents(o + i, h + l, d + p, n + g).normalize(),
                this
            },
            intersectsObject: function() {
                var t = new r.Sphere;
                return function(e) {
                    var n = e.geometry;
                    return null === n.boundingSphere && n.computeBoundingSphere(),
                    t.copy(n.boundingSphere),
                    t.applyMatrix4(e.matrixWorld),
                    this.intersectsSphere(t)
                }
            }(),
            intersectsSphere: function(t) {
                var e = this.planes
                  , n = t.center;
                t = -t.radius;
                for (var r = 0; 6 > r; r++)
                    if (e[r].distanceToPoint(n) < t)
                        return !1;
                return !0
            },
            intersectsBox: function() {
                var t = new r.Vector3
                  , e = new r.Vector3;
                return function(n) {
                    for (var r = this.planes, i = 0; 6 > i; i++) {
                        var o = r[i];
                        t.x = 0 < o.normal.x ? n.min.x : n.max.x,
                        e.x = 0 < o.normal.x ? n.max.x : n.min.x,
                        t.y = 0 < o.normal.y ? n.min.y : n.max.y,
                        e.y = 0 < o.normal.y ? n.max.y : n.min.y,
                        t.z = 0 < o.normal.z ? n.min.z : n.max.z,
                        e.z = 0 < o.normal.z ? n.max.z : n.min.z;
                        var a = o.distanceToPoint(t)
                          , o = o.distanceToPoint(e);
                        if (0 > a && 0 > o)
                            return !1
                    }
                    return !0
                }
            }(),
            containsPoint: function(t) {
                for (var e = this.planes, n = 0; 6 > n; n++)
                    if (0 > e[n].distanceToPoint(t))
                        return !1;
                return !0
            }
        },
        r.Plane = function(t, e) {
            this.normal = void 0 !== t ? t : new r.Vector3(1,0,0),
            this.constant = void 0 !== e ? e : 0
        }
        ,
        r.Plane.prototype = {
            constructor: r.Plane,
            set: function(t, e) {
                return this.normal.copy(t),
                this.constant = e,
                this
            },
            setComponents: function(t, e, n, r) {
                return this.normal.set(t, e, n),
                this.constant = r,
                this
            },
            setFromNormalAndCoplanarPoint: function(t, e) {
                return this.normal.copy(t),
                this.constant = -e.dot(this.normal),
                this
            },
            setFromCoplanarPoints: function() {
                var t = new r.Vector3
                  , e = new r.Vector3;
                return function(n, r, i) {
                    return r = t.subVectors(i, r).cross(e.subVectors(n, r)).normalize(),
                    this.setFromNormalAndCoplanarPoint(r, n),
                    this
                }
            }(),
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                return this.normal.copy(t.normal),
                this.constant = t.constant,
                this
            },
            normalize: function() {
                var t = 1 / this.normal.length();
                return this.normal.multiplyScalar(t),
                this.constant *= t,
                this
            },
            negate: function() {
                return this.constant *= -1,
                this.normal.negate(),
                this
            },
            distanceToPoint: function(t) {
                return this.normal.dot(t) + this.constant
            },
            distanceToSphere: function(t) {
                return this.distanceToPoint(t.center) - t.radius
            },
            projectPoint: function(t, e) {
                return this.orthoPoint(t, e).sub(t).negate()
            },
            orthoPoint: function(t, e) {
                var n = this.distanceToPoint(t);
                return (e || new r.Vector3).copy(this.normal).multiplyScalar(n)
            },
            isIntersectionLine: function(t) {
                var e = this.distanceToPoint(t.start);
                return t = this.distanceToPoint(t.end),
                0 > e && t > 0 || 0 > t && e > 0
            },
            intersectLine: function() {
                var t = new r.Vector3;
                return function(e, n) {
                    var i = n || new r.Vector3
                      , o = e.delta(t)
                      , a = this.normal.dot(o);
                    return 0 !== a ? (a = -(e.start.dot(this.normal) + this.constant) / a,
                    0 > a || a > 1 ? void 0 : i.copy(o).multiplyScalar(a).add(e.start)) : 0 === this.distanceToPoint(e.start) ? i.copy(e.start) : void 0
                }
            }(),
            coplanarPoint: function(t) {
                return (t || new r.Vector3).copy(this.normal).multiplyScalar(-this.constant)
            },
            applyMatrix4: function() {
                var t = new r.Vector3
                  , e = new r.Vector3
                  , n = new r.Matrix3;
                return function(r, i) {
                    var o = i || n.getNormalMatrix(r)
                      , o = t.copy(this.normal).applyMatrix3(o)
                      , a = this.coplanarPoint(e);
                    return a.applyMatrix4(r),
                    this.setFromNormalAndCoplanarPoint(o, a),
                    this
                }
            }(),
            translate: function(t) {
                return this.constant -= t.dot(this.normal),
                this
            },
            equals: function(t) {
                return t.normal.equals(this.normal) && t.constant === this.constant
            }
        },
        r.Math = {
            generateUUID: function() {
                var t, e = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), n = Array(36), r = 0;
                return function() {
                    for (var i = 0; 36 > i; i++)
                        8 === i || 13 === i || 18 === i || 23 === i ? n[i] = "-" : 14 === i ? n[i] = "4" : (2 >= r && (r = 33554432 + 16777216 * Math.random() | 0),
                        t = 15 & r,
                        r >>= 4,
                        n[i] = e[19 === i ? 3 & t | 8 : t]);
                    return n.join("")
                }
            }(),
            clamp: function(t, e, n) {
                return e > t ? e : t > n ? n : t
            },
            clampBottom: function(t, e) {
                return e > t ? e : t
            },
            euclideanModulo: function(t, e) {
                return (t % e + e) % e
            },
            mapLinear: function(t, e, n, r, i) {
                return r + (t - e) * (i - r) / (n - e)
            },
            smoothstep: function(t, e, n) {
                return e >= t ? 0 : t >= n ? 1 : (t = (t - e) / (n - e),
                t * t * (3 - 2 * t))
            },
            smootherstep: function(t, e, n) {
                return e >= t ? 0 : t >= n ? 1 : (t = (t - e) / (n - e),
                t * t * t * (t * (6 * t - 15) + 10))
            },
            random16: function() {
                return (65280 * Math.random() + 255 * Math.random()) / 65535
            },
            randInt: function(t, e) {
                return t + Math.floor(Math.random() * (e - t + 1))
            },
            randFloat: function(t, e) {
                return t + Math.random() * (e - t)
            },
            randFloatSpread: function(t) {
                return t * (.5 - Math.random())
            },
            degToRad: function() {
                var t = Math.PI / 180;
                return function(e) {
                    return e * t
                }
            }(),
            radToDeg: function() {
                var t = 180 / Math.PI;
                return function(e) {
                    return e * t
                }
            }(),
            isPowerOfTwo: function(t) {
                return 0 === (t & t - 1) && 0 !== t
            },
            nextPowerOfTwo: function(t) {
                return t--,
                t |= t >> 1,
                t |= t >> 2,
                t |= t >> 4,
                t |= t >> 8,
                t |= t >> 16,
                t++,
                t
            }
        },
        r.Spline = function(t) {
            function e(t, e, n, r, i, o, a) {
                return t = .5 * (n - t),
                r = .5 * (r - e),
                (2 * (e - n) + t + r) * a + (-3 * (e - n) - 2 * t - r) * o + t * i + e
            }
            this.points = t;
            var n, i, o, a, s, l, h, c, u, p = [], d = {
                x: 0,
                y: 0,
                z: 0
            };
            this.initFromArray = function(t) {
                this.points = [];
                for (var e = 0; e < t.length; e++)
                    this.points[e] = {
                        x: t[e][0],
                        y: t[e][1],
                        z: t[e][2]
                    }
            }
            ,
            this.getPoint = function(t) {
                return n = (this.points.length - 1) * t,
                i = Math.floor(n),
                o = n - i,
                p[0] = 0 === i ? i : i - 1,
                p[1] = i,
                p[2] = i > this.points.length - 2 ? this.points.length - 1 : i + 1,
                p[3] = i > this.points.length - 3 ? this.points.length - 1 : i + 2,
                l = this.points[p[0]],
                h = this.points[p[1]],
                c = this.points[p[2]],
                u = this.points[p[3]],
                a = o * o,
                s = o * a,
                d.x = e(l.x, h.x, c.x, u.x, o, a, s),
                d.y = e(l.y, h.y, c.y, u.y, o, a, s),
                d.z = e(l.z, h.z, c.z, u.z, o, a, s),
                d
            }
            ,
            this.getControlPointsArray = function() {
                var t, e, n = this.points.length, r = [];
                for (t = 0; n > t; t++)
                    e = this.points[t],
                    r[t] = [e.x, e.y, e.z];
                return r
            }
            ,
            this.getLength = function(t) {
                var e, n, i, o = e = e = 0, a = new r.Vector3, s = new r.Vector3, l = [], h = 0;
                for (l[0] = 0,
                t || (t = 100),
                n = this.points.length * t,
                a.copy(this.points[0]),
                t = 1; n > t; t++)
                    e = t / n,
                    i = this.getPoint(e),
                    s.copy(i),
                    h += s.distanceTo(a),
                    a.copy(i),
                    e *= this.points.length - 1,
                    e = Math.floor(e),
                    e !== o && (l[e] = h,
                    o = e);
                return l[l.length] = h,
                {
                    chunks: l,
                    total: h
                }
            }
            ,
            this.reparametrizeByArcLength = function(t) {
                var e, n, i, o, a, s, l = [], h = new r.Vector3, c = this.getLength();
                for (l.push(h.copy(this.points[0]).clone()),
                e = 1; e < this.points.length; e++) {
                    for (n = c.chunks[e] - c.chunks[e - 1],
                    s = Math.ceil(t * n / c.total),
                    o = (e - 1) / (this.points.length - 1),
                    a = e / (this.points.length - 1),
                    n = 1; s - 1 > n; n++)
                        i = o + 1 / s * n * (a - o),
                        i = this.getPoint(i),
                        l.push(h.copy(i).clone());
                    l.push(h.copy(this.points[e]).clone())
                }
                this.points = l
            }
        }
        ,
        r.Triangle = function(t, e, n) {
            this.a = void 0 !== t ? t : new r.Vector3,
            this.b = void 0 !== e ? e : new r.Vector3,
            this.c = void 0 !== n ? n : new r.Vector3
        }
        ,
        r.Triangle.normal = function() {
            var t = new r.Vector3;
            return function(e, n, i, o) {
                return o = o || new r.Vector3,
                o.subVectors(i, n),
                t.subVectors(e, n),
                o.cross(t),
                e = o.lengthSq(),
                e > 0 ? o.multiplyScalar(1 / Math.sqrt(e)) : o.set(0, 0, 0)
            }
        }(),
        r.Triangle.barycoordFromPoint = function() {
            var t = new r.Vector3
              , e = new r.Vector3
              , n = new r.Vector3;
            return function(i, o, a, s, l) {
                t.subVectors(s, o),
                e.subVectors(a, o),
                n.subVectors(i, o),
                i = t.dot(t),
                o = t.dot(e),
                a = t.dot(n);
                var h = e.dot(e);
                s = e.dot(n);
                var c = i * h - o * o;
                return l = l || new r.Vector3,
                0 === c ? l.set(-2, -1, -1) : (c = 1 / c,
                h = (h * a - o * s) * c,
                i = (i * s - o * a) * c,
                l.set(1 - h - i, i, h))
            }
        }(),
        r.Triangle.containsPoint = function() {
            var t = new r.Vector3;
            return function(e, n, i, o) {
                return e = r.Triangle.barycoordFromPoint(e, n, i, o, t),
                0 <= e.x && 0 <= e.y && 1 >= e.x + e.y
            }
        }(),
        r.Triangle.prototype = {
            constructor: r.Triangle,
            set: function(t, e, n) {
                return this.a.copy(t),
                this.b.copy(e),
                this.c.copy(n),
                this
            },
            setFromPointsAndIndices: function(t, e, n, r) {
                return this.a.copy(t[e]),
                this.b.copy(t[n]),
                this.c.copy(t[r]),
                this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                return this.a.copy(t.a),
                this.b.copy(t.b),
                this.c.copy(t.c),
                this
            },
            area: function() {
                var t = new r.Vector3
                  , e = new r.Vector3;
                return function() {
                    return t.subVectors(this.c, this.b),
                    e.subVectors(this.a, this.b),
                    .5 * t.cross(e).length()
                }
            }(),
            midpoint: function(t) {
                return (t || new r.Vector3).addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3)
            },
            normal: function(t) {
                return r.Triangle.normal(this.a, this.b, this.c, t)
            },
            plane: function(t) {
                return (t || new r.Plane).setFromCoplanarPoints(this.a, this.b, this.c)
            },
            barycoordFromPoint: function(t, e) {
                return r.Triangle.barycoordFromPoint(t, this.a, this.b, this.c, e)
            },
            containsPoint: function(t) {
                return r.Triangle.containsPoint(t, this.a, this.b, this.c)
            },
            equals: function(t) {
                return t.a.equals(this.a) && t.b.equals(this.b) && t.c.equals(this.c)
            }
        },
        r.Clock = function(t) {
            this.autoStart = void 0 !== t ? t : !0,
            this.elapsedTime = this.oldTime = this.startTime = 0,
            this.running = !1
        }
        ,
        r.Clock.prototype = {
            constructor: r.Clock,
            start: function() {
                this.oldTime = this.startTime = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now(),
                this.running = !0
            },
            stop: function() {
                this.getElapsedTime(),
                this.running = !1
            },
            getElapsedTime: function() {
                return this.getDelta(),
                this.elapsedTime
            },
            getDelta: function() {
                var t = 0;
                if (this.autoStart && !this.running && this.start(),
                this.running) {
                    var e = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now()
                      , t = .001 * (e - this.oldTime);
                    this.oldTime = e,
                    this.elapsedTime += t
                }
                return t
            }
        },
        r.EventDispatcher = function() {}
        ,
        r.EventDispatcher.prototype = {
            constructor: r.EventDispatcher,
            apply: function(t) {
                t.addEventListener = r.EventDispatcher.prototype.addEventListener,
                t.hasEventListener = r.EventDispatcher.prototype.hasEventListener,
                t.removeEventListener = r.EventDispatcher.prototype.removeEventListener,
                t.dispatchEvent = r.EventDispatcher.prototype.dispatchEvent
            },
            addEventListener: function(t, e) {
                void 0 === this._listeners && (this._listeners = {});
                var n = this._listeners;
                void 0 === n[t] && (n[t] = []),
                -1 === n[t].indexOf(e) && n[t].push(e)
            },
            hasEventListener: function(t, e) {
                if (void 0 === this._listeners)
                    return !1;
                var n = this._listeners;
                return void 0 !== n[t] && -1 !== n[t].indexOf(e) ? !0 : !1
            },
            removeEventListener: function(t, e) {
                if (void 0 !== this._listeners) {
                    var n = this._listeners[t];
                    if (void 0 !== n) {
                        var r = n.indexOf(e);
                        -1 !== r && n.splice(r, 1)
                    }
                }
            },
            dispatchEvent: function(t) {
                if (void 0 !== this._listeners) {
                    var e = this._listeners[t.type];
                    if (void 0 !== e) {
                        t.target = this;
                        for (var n = [], r = e.length, i = 0; r > i; i++)
                            n[i] = e[i];
                        for (i = 0; r > i; i++)
                            n[i].call(this, t)
                    }
                }
            }
        },
        function(t) {
            function e(t, e) {
                return t.distance - e.distance
            }
            t.Raycaster = function(e, n, r, i) {
                this.ray = new t.Ray(e,n),
                this.near = r || 0,
                this.far = i || 1 / 0,
                this.params = {
                    Mesh: {},
                    Line: {},
                    LOD: {},
                    Points: {
                        threshold: 1
                    },
                    Sprite: {}
                },
                Object.defineProperties(this.params, {
                    PointCloud: {
                        get: function() {
                            return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),
                            this.Points
                        }
                    }
                })
            }
            ;
            var n = function(t, e, r, i) {
                if (!1 !== t.visible && (t.raycast(e, r),
                !0 === i)) {
                    t = t.children,
                    i = 0;
                    for (var o = t.length; o > i; i++)
                        n(t[i], e, r, !0)
                }
            };
            t.Raycaster.prototype = {
                constructor: t.Raycaster,
                linePrecision: 1,
                set: function(t, e) {
                    this.ray.set(t, e)
                },
                setFromCamera: function(e, n) {
                    n instanceof t.PerspectiveCamera ? (this.ray.origin.setFromMatrixPosition(n.matrixWorld),
                    this.ray.direction.set(e.x, e.y, .5).unproject(n).sub(this.ray.origin).normalize()) : n instanceof t.OrthographicCamera ? (this.ray.origin.set(e.x, e.y, -1).unproject(n),
                    this.ray.direction.set(0, 0, -1).transformDirection(n.matrixWorld)) : console.error("THREE.Raycaster: Unsupported camera type.")
                },
                intersectObject: function(t, r) {
                    var i = [];
                    return n(t, this, i, r),
                    i.sort(e),
                    i
                },
                intersectObjects: function(t, r) {
                    var i = [];
                    if (!1 === Array.isArray(t))
                        return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),
                        i;
                    for (var o = 0, a = t.length; a > o; o++)
                        n(t[o], this, i, r);
                    return i.sort(e),
                    i
                }
            }
        }(r),
        r.Object3D = function() {
            Object.defineProperty(this, "id", {
                value: r.Object3DIdCount++
            }),
            this.uuid = r.Math.generateUUID(),
            this.name = "",
            this.type = "Object3D",
            this.parent = null ,
            this.children = [],
            this.up = r.Object3D.DefaultUp.clone();
            var t = new r.Vector3
              , e = new r.Euler
              , n = new r.Quaternion
              , i = new r.Vector3(1,1,1);
            e.onChange(function() {
                n.setFromEuler(e, !1)
            }),
            n.onChange(function() {
                e.setFromQuaternion(n, void 0, !1)
            }),
            Object.defineProperties(this, {
                position: {
                    enumerable: !0,
                    value: t
                },
                rotation: {
                    enumerable: !0,
                    value: e
                },
                quaternion: {
                    enumerable: !0,
                    value: n
                },
                scale: {
                    enumerable: !0,
                    value: i
                },
                modelViewMatrix: {
                    value: new r.Matrix4
                },
                normalMatrix: {
                    value: new r.Matrix3
                }
            }),
            this.rotationAutoUpdate = !0,
            this.matrix = new r.Matrix4,
            this.matrixWorld = new r.Matrix4,
            this.matrixAutoUpdate = r.Object3D.DefaultMatrixAutoUpdate,
            this.matrixWorldNeedsUpdate = !1,
            this.visible = !0,
            this.receiveShadow = this.castShadow = !1,
            this.frustumCulled = !0,
            this.renderOrder = 0,
            this.userData = {}
        }
        ,
        r.Object3D.DefaultUp = new r.Vector3(0,1,0),
        r.Object3D.DefaultMatrixAutoUpdate = !0,
        r.Object3D.prototype = {
            constructor: r.Object3D,
            get eulerOrder() {
                return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),
                this.rotation.order
            },
            set eulerOrder(t) {
                console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),
                this.rotation.order = t
            },
            get useQuaternion() {
                console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
            },
            set useQuaternion(t) {
                console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
            },
            set renderDepth(t) {
                console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")
            },
            applyMatrix: function(t) {
                this.matrix.multiplyMatrices(t, this.matrix),
                this.matrix.decompose(this.position, this.quaternion, this.scale)
            },
            setRotationFromAxisAngle: function(t, e) {
                this.quaternion.setFromAxisAngle(t, e)
            },
            setRotationFromEuler: function(t) {
                this.quaternion.setFromEuler(t, !0)
            },
            setRotationFromMatrix: function(t) {
                this.quaternion.setFromRotationMatrix(t)
            },
            setRotationFromQuaternion: function(t) {
                this.quaternion.copy(t)
            },
            rotateOnAxis: function() {
                var t = new r.Quaternion;
                return function(e, n) {
                    return t.setFromAxisAngle(e, n),
                    this.quaternion.multiply(t),
                    this
                }
            }(),
            rotateX: function() {
                var t = new r.Vector3(1,0,0);
                return function(e) {
                    return this.rotateOnAxis(t, e)
                }
            }(),
            rotateY: function() {
                var t = new r.Vector3(0,1,0);
                return function(e) {
                    return this.rotateOnAxis(t, e)
                }
            }(),
            rotateZ: function() {
                var t = new r.Vector3(0,0,1);
                return function(e) {
                    return this.rotateOnAxis(t, e)
                }
            }(),
            translateOnAxis: function() {
                var t = new r.Vector3;
                return function(e, n) {
                    return t.copy(e).applyQuaternion(this.quaternion),
                    this.position.add(t.multiplyScalar(n)),
                    this
                }
            }(),
            translate: function(t, e) {
                return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),
                this.translateOnAxis(e, t)
            },
            translateX: function() {
                var t = new r.Vector3(1,0,0);
                return function(e) {
                    return this.translateOnAxis(t, e)
                }
            }(),
            translateY: function() {
                var t = new r.Vector3(0,1,0);
                return function(e) {
                    return this.translateOnAxis(t, e)
                }
            }(),
            translateZ: function() {
                var t = new r.Vector3(0,0,1);
                return function(e) {
                    return this.translateOnAxis(t, e)
                }
            }(),
            localToWorld: function(t) {
                return t.applyMatrix4(this.matrixWorld)
            },
            worldToLocal: function() {
                var t = new r.Matrix4;
                return function(e) {
                    return e.applyMatrix4(t.getInverse(this.matrixWorld))
                }
            }(),
            lookAt: function() {
                var t = new r.Matrix4;
                return function(e) {
                    t.lookAt(e, this.position, this.up),
                    this.quaternion.setFromRotationMatrix(t)
                }
            }(),
            add: function(t) {
                if (1 < arguments.length) {
                    for (var e = 0; e < arguments.length; e++)
                        this.add(arguments[e]);
                    return this
                }
                return t === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", t),
                this) : (t instanceof r.Object3D ? (null !== t.parent && t.parent.remove(t),
                t.parent = this,
                t.dispatchEvent({
                    type: "added"
                }),
                this.children.push(t)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", t),
                this)
            },
            remove: function(t) {
                if (1 < arguments.length)
                    for (var e = 0; e < arguments.length; e++)
                        this.remove(arguments[e]);
                e = this.children.indexOf(t),
                -1 !== e && (t.parent = null ,
                t.dispatchEvent({
                    type: "removed"
                }),
                this.children.splice(e, 1))
            },
            getChildByName: function(t) {
                return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),
                this.getObjectByName(t)
            },
            getObjectById: function(t) {
                return this.getObjectByProperty("id", t)
            },
            getObjectByName: function(t) {
                return this.getObjectByProperty("name", t)
            },
            getObjectByProperty: function(t, e) {
                if (this[t] === e)
                    return this;
                for (var n = 0, r = this.children.length; r > n; n++) {
                    var i = this.children[n].getObjectByProperty(t, e);
                    if (void 0 !== i)
                        return i
                }
            },
            getWorldPosition: function(t) {
                return t = t || new r.Vector3,
                this.updateMatrixWorld(!0),
                t.setFromMatrixPosition(this.matrixWorld)
            },
            getWorldQuaternion: function() {
                var t = new r.Vector3
                  , e = new r.Vector3;
                return function(n) {
                    return n = n || new r.Quaternion,
                    this.updateMatrixWorld(!0),
                    this.matrixWorld.decompose(t, n, e),
                    n
                }
            }(),
            getWorldRotation: function() {
                var t = new r.Quaternion;
                return function(e) {
                    return e = e || new r.Euler,
                    this.getWorldQuaternion(t),
                    e.setFromQuaternion(t, this.rotation.order, !1)
                }
            }(),
            getWorldScale: function() {
                var t = new r.Vector3
                  , e = new r.Quaternion;
                return function(n) {
                    return n = n || new r.Vector3,
                    this.updateMatrixWorld(!0),
                    this.matrixWorld.decompose(t, e, n),
                    n
                }
            }(),
            getWorldDirection: function() {
                var t = new r.Quaternion;
                return function(e) {
                    return e = e || new r.Vector3,
                    this.getWorldQuaternion(t),
                    e.set(0, 0, 1).applyQuaternion(t)
                }
            }(),
            raycast: function() {},
            traverse: function(t) {
                t(this);
                for (var e = this.children, n = 0, r = e.length; r > n; n++)
                    e[n].traverse(t)
            },
            traverseVisible: function(t) {
                if (!1 !== this.visible) {
                    t(this);
                    for (var e = this.children, n = 0, r = e.length; r > n; n++)
                        e[n].traverseVisible(t)
                }
            },
            traverseAncestors: function(t) {
                var e = this.parent;
                null !== e && (t(e),
                e.traverseAncestors(t))
            },
            updateMatrix: function() {
                this.matrix.compose(this.position, this.quaternion, this.scale),
                this.matrixWorldNeedsUpdate = !0
            },
            updateMatrixWorld: function(t) {
                !0 === this.matrixAutoUpdate && this.updateMatrix(),
                (!0 === this.matrixWorldNeedsUpdate || !0 === t) && (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix),
                this.matrixWorldNeedsUpdate = !1,
                t = !0);
                for (var e = 0, n = this.children.length; n > e; e++)
                    this.children[e].updateMatrixWorld(t)
            },
            toJSON: function(t) {
                function e(t) {
                    var e, n = [];
                    for (e in t) {
                        var r = t[e];
                        delete r.metadata,
                        n.push(r)
                    }
                    return n
                }
                var n = void 0 === t
                  , r = {}
                  , i = {
                    object: r
                };
                if (n && (t = {
                    geometries: {},
                    materials: {},
                    textures: {},
                    images: {}
                },
                i.metadata = {
                    version: 4.4,
                    type: "Object",
                    generator: "Object3D.toJSON"
                }),
                r.uuid = this.uuid,
                r.type = this.type,
                "" !== this.name && (r.name = this.name),
                "{}" !== JSON.stringify(this.userData) && (r.userData = this.userData),
                !0 !== this.visible && (r.visible = this.visible),
                r.matrix = this.matrix.toArray(),
                0 < this.children.length) {
                    r.children = [];
                    for (var o = 0; o < this.children.length; o++)
                        r.children.push(this.children[o].toJSON(t).object)
                }
                return n && (n = e(t.geometries),
                r = e(t.materials),
                o = e(t.textures),
                t = e(t.images),
                0 < n.length && (i.geometries = n),
                0 < r.length && (i.materials = r),
                0 < o.length && (i.textures = o),
                0 < t.length && (i.images = t)),
                i
            },
            clone: function(t) {
                return (new this.constructor).copy(this, t)
            },
            copy: function(t, e) {
                if (void 0 === e && (e = !0),
                this.name = t.name,
                this.up.copy(t.up),
                this.position.copy(t.position),
                this.quaternion.copy(t.quaternion),
                this.scale.copy(t.scale),
                this.rotationAutoUpdate = t.rotationAutoUpdate,
                this.matrix.copy(t.matrix),
                this.matrixWorld.copy(t.matrixWorld),
                this.matrixAutoUpdate = t.matrixAutoUpdate,
                this.matrixWorldNeedsUpdate = t.matrixWorldNeedsUpdate,
                this.visible = t.visible,
                this.castShadow = t.castShadow,
                this.receiveShadow = t.receiveShadow,
                this.frustumCulled = t.frustumCulled,
                this.renderOrder = t.renderOrder,
                this.userData = JSON.parse(JSON.stringify(t.userData)),
                !0 === e)
                    for (var n = 0; n < t.children.length; n++)
                        this.add(t.children[n].clone());
                return this
            }
        },
        r.EventDispatcher.prototype.apply(r.Object3D.prototype),
        r.Object3DIdCount = 0,
        r.Face3 = function(t, e, n, i, o, a) {
            this.a = t,
            this.b = e,
            this.c = n,
            this.normal = i instanceof r.Vector3 ? i : new r.Vector3,
            this.vertexNormals = Array.isArray(i) ? i : [],
            this.color = o instanceof r.Color ? o : new r.Color,
            this.vertexColors = Array.isArray(o) ? o : [],
            this.materialIndex = void 0 !== a ? a : 0
        }
        ,
        r.Face3.prototype = {
            constructor: r.Face3,
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                this.a = t.a,
                this.b = t.b,
                this.c = t.c,
                this.normal.copy(t.normal),
                this.color.copy(t.color),
                this.materialIndex = t.materialIndex;
                for (var e = 0, n = t.vertexNormals.length; n > e; e++)
                    this.vertexNormals[e] = t.vertexNormals[e].clone();
                for (e = 0,
                n = t.vertexColors.length; n > e; e++)
                    this.vertexColors[e] = t.vertexColors[e].clone();
                return this
            }
        },
        r.Face4 = function(t, e, n, i, o, a, s) {
            return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),
            new r.Face3(t,e,n,o,a,s)
        }
        ,
        r.BufferAttribute = function(t, e) {
            this.uuid = r.Math.generateUUID(),
            this.array = t,
            this.itemSize = e,
            this.dynamic = !1,
            this.updateRange = {
                offset: 0,
                count: -1
            },
            this.version = 0
        }
        ,
        r.BufferAttribute.prototype = {
            constructor: r.BufferAttribute,
            get length() {
                return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),
                this.array.length
            },
            get count() {
                return this.array.length / this.itemSize
            },
            set needsUpdate(t) {
                !0 === t && this.version++
            },
            setDynamic: function(t) {
                return this.dynamic = t,
                this
            },
            copy: function(t) {
                return this.array = new t.array.constructor(t.array),
                this.itemSize = t.itemSize,
                this.dynamic = t.dynamic,
                this
            },
            copyAt: function(t, e, n) {
                t *= this.itemSize,
                n *= e.itemSize;
                for (var r = 0, i = this.itemSize; i > r; r++)
                    this.array[t + r] = e.array[n + r];
                return this
            },
            copyArray: function(t) {
                return this.array.set(t),
                this
            },
            copyColorsArray: function(t) {
                for (var e = this.array, n = 0, i = 0, o = t.length; o > i; i++) {
                    var a = t[i];
                    void 0 === a && (console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined", i),
                    a = new r.Color),
                    e[n++] = a.r,
                    e[n++] = a.g,
                    e[n++] = a.b
                }
                return this
            },
            copyIndicesArray: function(t) {
                for (var e = this.array, n = 0, r = 0, i = t.length; i > r; r++) {
                    var o = t[r];
                    e[n++] = o.a,
                    e[n++] = o.b,
                    e[n++] = o.c
                }
                return this
            },
            copyVector2sArray: function(t) {
                for (var e = this.array, n = 0, i = 0, o = t.length; o > i; i++) {
                    var a = t[i];
                    void 0 === a && (console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined", i),
                    a = new r.Vector2),
                    e[n++] = a.x,
                    e[n++] = a.y
                }
                return this
            },
            copyVector3sArray: function(t) {
                for (var e = this.array, n = 0, i = 0, o = t.length; o > i; i++) {
                    var a = t[i];
                    void 0 === a && (console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined", i),
                    a = new r.Vector3),
                    e[n++] = a.x,
                    e[n++] = a.y,
                    e[n++] = a.z
                }
                return this
            },
            copyVector4sArray: function(t) {
                for (var e = this.array, n = 0, i = 0, o = t.length; o > i; i++) {
                    var a = t[i];
                    void 0 === a && (console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined", i),
                    a = new r.Vector4),
                    e[n++] = a.x,
                    e[n++] = a.y,
                    e[n++] = a.z,
                    e[n++] = a.w
                }
                return this
            },
            set: function(t, e) {
                return void 0 === e && (e = 0),
                this.array.set(t, e),
                this
            },
            getX: function(t) {
                return this.array[t * this.itemSize]
            },
            setX: function(t, e) {
                return this.array[t * this.itemSize] = e,
                this
            },
            getY: function(t) {
                return this.array[t * this.itemSize + 1]
            },
            setY: function(t, e) {
                return this.array[t * this.itemSize + 1] = e,
                this
            },
            getZ: function(t) {
                return this.array[t * this.itemSize + 2]
            },
            setZ: function(t, e) {
                return this.array[t * this.itemSize + 2] = e,
                this
            },
            getW: function(t) {
                return this.array[t * this.itemSize + 3]
            },
            setW: function(t, e) {
                return this.array[t * this.itemSize + 3] = e,
                this
            },
            setXY: function(t, e, n) {
                return t *= this.itemSize,
                this.array[t + 0] = e,
                this.array[t + 1] = n,
                this
            },
            setXYZ: function(t, e, n, r) {
                return t *= this.itemSize,
                this.array[t + 0] = e,
                this.array[t + 1] = n,
                this.array[t + 2] = r,
                this
            },
            setXYZW: function(t, e, n, r, i) {
                return t *= this.itemSize,
                this.array[t + 0] = e,
                this.array[t + 1] = n,
                this.array[t + 2] = r,
                this.array[t + 3] = i,
                this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            }
        },
        r.Int8Attribute = function(t, e) {
            return new r.BufferAttribute(new Int8Array(t),e)
        }
        ,
        r.Uint8Attribute = function(t, e) {
            return new r.BufferAttribute(new Uint8Array(t),e)
        }
        ,
        r.Uint8ClampedAttribute = function(t, e) {
            return new r.BufferAttribute(new Uint8ClampedArray(t),e)
        }
        ,
        r.Int16Attribute = function(t, e) {
            return new r.BufferAttribute(new Int16Array(t),e)
        }
        ,
        r.Uint16Attribute = function(t, e) {
            return new r.BufferAttribute(new Uint16Array(t),e)
        }
        ,
        r.Int32Attribute = function(t, e) {
            return new r.BufferAttribute(new Int32Array(t),e)
        }
        ,
        r.Uint32Attribute = function(t, e) {
            return new r.BufferAttribute(new Uint32Array(t),e)
        }
        ,
        r.Float32Attribute = function(t, e) {
            return new r.BufferAttribute(new Float32Array(t),e)
        }
        ,
        r.Float64Attribute = function(t, e) {
            return new r.BufferAttribute(new Float64Array(t),e)
        }
        ,
        r.DynamicBufferAttribute = function(t, e) {
            return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),
            new r.BufferAttribute(t,e).setDynamic(!0)
        }
        ,
        r.InstancedBufferAttribute = function(t, e, n) {
            r.BufferAttribute.call(this, t, e),
            this.meshPerAttribute = n || 1
        }
        ,
        r.InstancedBufferAttribute.prototype = Object.create(r.BufferAttribute.prototype),
        r.InstancedBufferAttribute.prototype.constructor = r.InstancedBufferAttribute,
        r.InstancedBufferAttribute.prototype.copy = function(t) {
            return r.BufferAttribute.prototype.copy.call(this, t),
            this.meshPerAttribute = t.meshPerAttribute,
            this
        }
        ,
        r.InterleavedBuffer = function(t, e) {
            this.uuid = r.Math.generateUUID(),
            this.array = t,
            this.stride = e,
            this.dynamic = !1,
            this.updateRange = {
                offset: 0,
                count: -1
            },
            this.version = 0
        }
        ,
        r.InterleavedBuffer.prototype = {
            constructor: r.InterleavedBuffer,
            get length() {
                return this.array.length
            },
            get count() {
                return this.array.length / this.stride
            },
            set needsUpdate(t) {
                !0 === t && this.version++
            },
            setDynamic: function(t) {
                return this.dynamic = t,
                this
            },
            copy: function(t) {
                this.array = new t.array.constructor(t.array),
                this.stride = t.stride,
                this.dynamic = t.dynamic
            },
            copyAt: function(t, e, n) {
                t *= this.stride,
                n *= e.stride;
                for (var r = 0, i = this.stride; i > r; r++)
                    this.array[t + r] = e.array[n + r];
                return this
            },
            set: function(t, e) {
                return void 0 === e && (e = 0),
                this.array.set(t, e),
                this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            }
        },
        r.InstancedInterleavedBuffer = function(t, e, n) {
            r.InterleavedBuffer.call(this, t, e),
            this.meshPerAttribute = n || 1
        }
        ,
        r.InstancedInterleavedBuffer.prototype = Object.create(r.InterleavedBuffer.prototype),
        r.InstancedInterleavedBuffer.prototype.constructor = r.InstancedInterleavedBuffer,
        r.InstancedInterleavedBuffer.prototype.copy = function(t) {
            return r.InterleavedBuffer.prototype.copy.call(this, t),
            this.meshPerAttribute = t.meshPerAttribute,
            this
        }
        ,
        r.InterleavedBufferAttribute = function(t, e, n) {
            this.uuid = r.Math.generateUUID(),
            this.data = t,
            this.itemSize = e,
            this.offset = n
        }
        ,
        r.InterleavedBufferAttribute.prototype = {
            constructor: r.InterleavedBufferAttribute,
            get length() {
                return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),
                this.array.length
            },
            get count() {
                return this.data.array.length / this.data.stride
            },
            setX: function(t, e) {
                return this.data.array[t * this.data.stride + this.offset] = e,
                this
            },
            setY: function(t, e) {
                return this.data.array[t * this.data.stride + this.offset + 1] = e,
                this
            },
            setZ: function(t, e) {
                return this.data.array[t * this.data.stride + this.offset + 2] = e,
                this
            },
            setW: function(t, e) {
                return this.data.array[t * this.data.stride + this.offset + 3] = e,
                this
            },
            getX: function(t) {
                return this.data.array[t * this.data.stride + this.offset]
            },
            getY: function(t) {
                return this.data.array[t * this.data.stride + this.offset + 1]
            },
            getZ: function(t) {
                return this.data.array[t * this.data.stride + this.offset + 2]
            },
            getW: function(t) {
                return this.data.array[t * this.data.stride + this.offset + 3]
            },
            setXY: function(t, e, n) {
                return t = t * this.data.stride + this.offset,
                this.data.array[t + 0] = e,
                this.data.array[t + 1] = n,
                this
            },
            setXYZ: function(t, e, n, r) {
                return t = t * this.data.stride + this.offset,
                this.data.array[t + 0] = e,
                this.data.array[t + 1] = n,
                this.data.array[t + 2] = r,
                this
            },
            setXYZW: function(t, e, n, r, i) {
                return t = t * this.data.stride + this.offset,
                this.data.array[t + 0] = e,
                this.data.array[t + 1] = n,
                this.data.array[t + 2] = r,
                this.data.array[t + 3] = i,
                this
            }
        },
        r.Geometry = function() {
            Object.defineProperty(this, "id", {
                value: r.GeometryIdCount++
            }),
            this.uuid = r.Math.generateUUID(),
            this.name = "",
            this.type = "Geometry",
            this.vertices = [],
            this.colors = [],
            this.faces = [],
            this.faceVertexUvs = [[]],
            this.morphTargets = [],
            this.morphColors = [],
            this.morphNormals = [],
            this.skinWeights = [],
            this.skinIndices = [],
            this.lineDistances = [],
            this.boundingSphere = this.boundingBox = null ,
            this.groupsNeedUpdate = this.lineDistancesNeedUpdate = this.colorsNeedUpdate = this.normalsNeedUpdate = this.uvsNeedUpdate = this.elementsNeedUpdate = this.verticesNeedUpdate = !1
        }
        ,
        r.Geometry.prototype = {
            constructor: r.Geometry,
            applyMatrix: function(t) {
                for (var e = (new r.Matrix3).getNormalMatrix(t), n = 0, i = this.vertices.length; i > n; n++)
                    this.vertices[n].applyMatrix4(t);
                for (n = 0,
                i = this.faces.length; i > n; n++) {
                    t = this.faces[n],
                    t.normal.applyMatrix3(e).normalize();
                    for (var o = 0, a = t.vertexNormals.length; a > o; o++)
                        t.vertexNormals[o].applyMatrix3(e).normalize()
                }
                null !== this.boundingBox && this.computeBoundingBox(),
                null !== this.boundingSphere && this.computeBoundingSphere(),
                this.normalsNeedUpdate = this.verticesNeedUpdate = !0
            },
            rotateX: function() {
                var t;
                return function(e) {
                    return void 0 === t && (t = new r.Matrix4),
                    t.makeRotationX(e),
                    this.applyMatrix(t),
                    this
                }
            }(),
            rotateY: function() {
                var t;
                return function(e) {
                    return void 0 === t && (t = new r.Matrix4),
                    t.makeRotationY(e),
                    this.applyMatrix(t),
                    this
                }
            }(),
            rotateZ: function() {
                var t;
                return function(e) {
                    return void 0 === t && (t = new r.Matrix4),
                    t.makeRotationZ(e),
                    this.applyMatrix(t),
                    this
                }
            }(),
            translate: function() {
                var t;
                return function(e, n, i) {
                    return void 0 === t && (t = new r.Matrix4),
                    t.makeTranslation(e, n, i),
                    this.applyMatrix(t),
                    this
                }
            }(),
            scale: function() {
                var t;
                return function(e, n, i) {
                    return void 0 === t && (t = new r.Matrix4),
                    t.makeScale(e, n, i),
                    this.applyMatrix(t),
                    this
                }
            }(),
            lookAt: function() {
                var t;
                return function(e) {
                    void 0 === t && (t = new r.Object3D),
                    t.lookAt(e),
                    t.updateMatrix(),
                    this.applyMatrix(t.matrix)
                }
            }(),
            fromBufferGeometry: function(t) {
                var e = this
                  , n = null !== t.index ? t.index.array : void 0
                  , i = t.attributes
                  , o = i.position.array
                  , a = void 0 !== i.normal ? i.normal.array : void 0
                  , s = void 0 !== i.color ? i.color.array : void 0
                  , l = void 0 !== i.uv ? i.uv.array : void 0
                  , h = void 0 !== i.uv2 ? i.uv2.array : void 0;
                void 0 !== h && (this.faceVertexUvs[1] = []);
                for (var c = [], u = [], p = [], d = i = 0; i < o.length; i += 3,
                d += 2)
                    e.vertices.push(new r.Vector3(o[i],o[i + 1],o[i + 2])),
                    void 0 !== a && c.push(new r.Vector3(a[i],a[i + 1],a[i + 2])),
                    void 0 !== s && e.colors.push(new r.Color(s[i],s[i + 1],s[i + 2])),
                    void 0 !== l && u.push(new r.Vector2(l[d],l[d + 1])),
                    void 0 !== h && p.push(new r.Vector2(h[d],h[d + 1]));
                var f = function(t, n, i) {
                    var o = void 0 !== a ? [c[t].clone(), c[n].clone(), c[i].clone()] : []
                      , d = void 0 !== s ? [e.colors[t].clone(), e.colors[n].clone(), e.colors[i].clone()] : []
                      , o = new r.Face3(t,n,i,o,d);
                    e.faces.push(o),
                    void 0 !== l && e.faceVertexUvs[0].push([u[t].clone(), u[n].clone(), u[i].clone()]),
                    void 0 !== h && e.faceVertexUvs[1].push([p[t].clone(), p[n].clone(), p[i].clone()])
                };
                if (void 0 !== n)
                    if (o = t.groups,
                    0 < o.length)
                        for (i = 0; i < o.length; i++)
                            for (var d = o[i], m = d.start, g = d.count, d = m, m = m + g; m > d; d += 3)
                                f(n[d], n[d + 1], n[d + 2]);
                    else
                        for (i = 0; i < n.length; i += 3)
                            f(n[i], n[i + 1], n[i + 2]);
                else
                    for (i = 0; i < o.length / 3; i += 3)
                        f(i, i + 1, i + 2);
                return this.computeFaceNormals(),
                null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()),
                null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()),
                this
            },
            center: function() {
                this.computeBoundingBox();
                var t = this.boundingBox.center().negate();
                return this.translate(t.x, t.y, t.z),
                t
            },
            normalize: function() {
                this.computeBoundingSphere();
                var t = this.boundingSphere.center
                  , e = this.boundingSphere.radius
                  , e = 0 === e ? 1 : 1 / e
                  , n = new r.Matrix4;
                return n.set(e, 0, 0, -e * t.x, 0, e, 0, -e * t.y, 0, 0, e, -e * t.z, 0, 0, 0, 1),
                this.applyMatrix(n),
                this
            },
            computeFaceNormals: function() {
                for (var t = new r.Vector3, e = new r.Vector3, n = 0, i = this.faces.length; i > n; n++) {
                    var o = this.faces[n]
                      , a = this.vertices[o.a]
                      , s = this.vertices[o.b];
                    t.subVectors(this.vertices[o.c], s),
                    e.subVectors(a, s),
                    t.cross(e),
                    t.normalize(),
                    o.normal.copy(t)
                }
            },
            computeVertexNormals: function(t) {
                var e, n, i;
                for (i = Array(this.vertices.length),
                e = 0,
                n = this.vertices.length; n > e; e++)
                    i[e] = new r.Vector3;
                if (t) {
                    var o, a, s, l = new r.Vector3, h = new r.Vector3;
                    for (t = 0,
                    e = this.faces.length; e > t; t++)
                        n = this.faces[t],
                        o = this.vertices[n.a],
                        a = this.vertices[n.b],
                        s = this.vertices[n.c],
                        l.subVectors(s, a),
                        h.subVectors(o, a),
                        l.cross(h),
                        i[n.a].add(l),
                        i[n.b].add(l),
                        i[n.c].add(l)
                } else
                    for (t = 0,
                    e = this.faces.length; e > t; t++)
                        n = this.faces[t],
                        i[n.a].add(n.normal),
                        i[n.b].add(n.normal),
                        i[n.c].add(n.normal);
                for (e = 0,
                n = this.vertices.length; n > e; e++)
                    i[e].normalize();
                for (t = 0,
                e = this.faces.length; e > t; t++)
                    n = this.faces[t],
                    o = n.vertexNormals,
                    3 === o.length ? (o[0].copy(i[n.a]),
                    o[1].copy(i[n.b]),
                    o[2].copy(i[n.c])) : (o[0] = i[n.a].clone(),
                    o[1] = i[n.b].clone(),
                    o[2] = i[n.c].clone())
            },
            computeMorphNormals: function() {
                var t, e, n, i, o;
                for (n = 0,
                i = this.faces.length; i > n; n++)
                    for (o = this.faces[n],
                    o.__originalFaceNormal ? o.__originalFaceNormal.copy(o.normal) : o.__originalFaceNormal = o.normal.clone(),
                    o.__originalVertexNormals || (o.__originalVertexNormals = []),
                    t = 0,
                    e = o.vertexNormals.length; e > t; t++)
                        o.__originalVertexNormals[t] ? o.__originalVertexNormals[t].copy(o.vertexNormals[t]) : o.__originalVertexNormals[t] = o.vertexNormals[t].clone();
                var a = new r.Geometry;
                for (a.faces = this.faces,
                t = 0,
                e = this.morphTargets.length; e > t; t++) {
                    if (!this.morphNormals[t]) {
                        this.morphNormals[t] = {},
                        this.morphNormals[t].faceNormals = [],
                        this.morphNormals[t].vertexNormals = [],
                        o = this.morphNormals[t].faceNormals;
                        var s, l, h = this.morphNormals[t].vertexNormals;
                        for (n = 0,
                        i = this.faces.length; i > n; n++)
                            s = new r.Vector3,
                            l = {
                                a: new r.Vector3,
                                b: new r.Vector3,
                                c: new r.Vector3
                            },
                            o.push(s),
                            h.push(l)
                    }
                    for (h = this.morphNormals[t],
                    a.vertices = this.morphTargets[t].vertices,
                    a.computeFaceNormals(),
                    a.computeVertexNormals(),
                    n = 0,
                    i = this.faces.length; i > n; n++)
                        o = this.faces[n],
                        s = h.faceNormals[n],
                        l = h.vertexNormals[n],
                        s.copy(o.normal),
                        l.a.copy(o.vertexNormals[0]),
                        l.b.copy(o.vertexNormals[1]),
                        l.c.copy(o.vertexNormals[2])
                }
                for (n = 0,
                i = this.faces.length; i > n; n++)
                    o = this.faces[n],
                    o.normal = o.__originalFaceNormal,
                    o.vertexNormals = o.__originalVertexNormals
            },
            computeTangents: function() {
                console.warn("THREE.Geometry: .computeTangents() has been removed.")
            },
            computeLineDistances: function() {
                for (var t = 0, e = this.vertices, n = 0, r = e.length; r > n; n++)
                    n > 0 && (t += e[n].distanceTo(e[n - 1])),
                    this.lineDistances[n] = t
            },
            computeBoundingBox: function() {
                null === this.boundingBox && (this.boundingBox = new r.Box3),
                this.boundingBox.setFromPoints(this.vertices)
            },
            computeBoundingSphere: function() {
                null === this.boundingSphere && (this.boundingSphere = new r.Sphere),
                this.boundingSphere.setFromPoints(this.vertices)
            },
            merge: function(t, e, n) {
                if (!1 == t instanceof r.Geometry)
                    console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", t);
                else {
                    var i, o = this.vertices.length, a = this.vertices, s = t.vertices, l = this.faces, h = t.faces, c = this.faceVertexUvs[0];
                    t = t.faceVertexUvs[0],
                    void 0 === n && (n = 0),
                    void 0 !== e && (i = (new r.Matrix3).getNormalMatrix(e));
                    for (var u = 0, p = s.length; p > u; u++) {
                        var d = s[u].clone();
                        void 0 !== e && d.applyMatrix4(e),
                        a.push(d)
                    }
                    for (u = 0,
                    p = h.length; p > u; u++) {
                        var f, s = h[u], m = s.vertexNormals, g = s.vertexColors, d = new r.Face3(s.a + o,s.b + o,s.c + o);
                        for (d.normal.copy(s.normal),
                        void 0 !== i && d.normal.applyMatrix3(i).normalize(),
                        e = 0,
                        a = m.length; a > e; e++)
                            f = m[e].clone(),
                            void 0 !== i && f.applyMatrix3(i).normalize(),
                            d.vertexNormals.push(f);
                        for (d.color.copy(s.color),
                        e = 0,
                        a = g.length; a > e; e++)
                            f = g[e],
                            d.vertexColors.push(f.clone());
                        d.materialIndex = s.materialIndex + n,
                        l.push(d)
                    }
                    for (u = 0,
                    p = t.length; p > u; u++)
                        if (n = t[u],
                        i = [],
                        void 0 !== n) {
                            for (e = 0,
                            a = n.length; a > e; e++)
                                i.push(n[e].clone());
                            c.push(i)
                        }
                }
            },
            mergeMesh: function(t) {
                !1 == t instanceof r.Mesh ? console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", t) : (t.matrixAutoUpdate && t.updateMatrix(),
                this.merge(t.geometry, t.matrix))
            },
            mergeVertices: function() {
                var t, e, n, r = {}, i = [], o = [], a = Math.pow(10, 4);
                for (e = 0,
                n = this.vertices.length; n > e; e++)
                    t = this.vertices[e],
                    t = Math.round(t.x * a) + "_" + Math.round(t.y * a) + "_" + Math.round(t.z * a),
                    void 0 === r[t] ? (r[t] = e,
                    i.push(this.vertices[e]),
                    o[e] = i.length - 1) : o[e] = o[r[t]];
                for (r = [],
                e = 0,
                n = this.faces.length; n > e; e++)
                    for (a = this.faces[e],
                    a.a = o[a.a],
                    a.b = o[a.b],
                    a.c = o[a.c],
                    a = [a.a, a.b, a.c],
                    t = 0; 3 > t; t++)
                        if (a[t] === a[(t + 1) % 3]) {
                            r.push(e);
                            break
                        }
                for (e = r.length - 1; e >= 0; e--)
                    for (a = r[e],
                    this.faces.splice(a, 1),
                    o = 0,
                    n = this.faceVertexUvs.length; n > o; o++)
                        this.faceVertexUvs[o].splice(a, 1);
                return e = this.vertices.length - i.length,
                this.vertices = i,
                e
            },
            toJSON: function() {
                function t(t, e, n) {
                    return n ? t | 1 << e : t & ~(1 << e)
                }
                function e(t) {
                    var e = t.x.toString() + t.y.toString() + t.z.toString();
                    return void 0 !== h[e] ? h[e] : (h[e] = l.length / 3,
                    l.push(t.x, t.y, t.z),
                    h[e])
                }
                function n(t) {
                    var e = t.r.toString() + t.g.toString() + t.b.toString();
                    return void 0 !== u[e] ? u[e] : (u[e] = c.length,
                    c.push(t.getHex()),
                    u[e])
                }
                function r(t) {
                    var e = t.x.toString() + t.y.toString();
                    return void 0 !== d[e] ? d[e] : (d[e] = p.length / 2,
                    p.push(t.x, t.y),
                    d[e])
                }
                var i = {
                    metadata: {
                        version: 4.4,
                        type: "Geometry",
                        generator: "Geometry.toJSON"
                    }
                };
                if (i.uuid = this.uuid,
                i.type = this.type,
                "" !== this.name && (i.name = this.name),
                void 0 !== this.parameters) {
                    var o, a = this.parameters;
                    for (o in a)
                        void 0 !== a[o] && (i[o] = a[o]);
                    return i
                }
                for (a = [],
                o = 0; o < this.vertices.length; o++) {
                    var s = this.vertices[o];
                    a.push(s.x, s.y, s.z)
                }
                var s = []
                  , l = []
                  , h = {}
                  , c = []
                  , u = {}
                  , p = []
                  , d = {};
                for (o = 0; o < this.faces.length; o++) {
                    var f = this.faces[o]
                      , m = void 0 !== this.faceVertexUvs[0][o]
                      , g = 0 < f.normal.length()
                      , v = 0 < f.vertexNormals.length
                      , y = 1 !== f.color.r || 1 !== f.color.g || 1 !== f.color.b
                      , _ = 0 < f.vertexColors.length
                      , x = 0
                      , x = t(x, 0, 0)
                      , x = t(x, 1, !1)
                      , x = t(x, 2, !1)
                      , x = t(x, 3, m)
                      , x = t(x, 4, g)
                      , x = t(x, 5, v)
                      , x = t(x, 6, y)
                      , x = t(x, 7, _);
                    s.push(x),
                    s.push(f.a, f.b, f.c),
                    m && (m = this.faceVertexUvs[0][o],
                    s.push(r(m[0]), r(m[1]), r(m[2]))),
                    g && s.push(e(f.normal)),
                    v && (g = f.vertexNormals,
                    s.push(e(g[0]), e(g[1]), e(g[2]))),
                    y && s.push(n(f.color)),
                    _ && (f = f.vertexColors,
                    s.push(n(f[0]), n(f[1]), n(f[2])))
                }
                return i.data = {},
                i.data.vertices = a,
                i.data.normals = l,
                0 < c.length && (i.data.colors = c),
                0 < p.length && (i.data.uvs = [p]),
                i.data.faces = s,
                i
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                this.vertices = [],
                this.faces = [],
                this.faceVertexUvs = [[]];
                for (var e = t.vertices, n = 0, r = e.length; r > n; n++)
                    this.vertices.push(e[n].clone());
                for (e = t.faces,
                n = 0,
                r = e.length; r > n; n++)
                    this.faces.push(e[n].clone());
                for (n = 0,
                r = t.faceVertexUvs.length; r > n; n++) {
                    e = t.faceVertexUvs[n],
                    void 0 === this.faceVertexUvs[n] && (this.faceVertexUvs[n] = []);
                    for (var i = 0, o = e.length; o > i; i++) {
                        for (var a = e[i], s = [], l = 0, h = a.length; h > l; l++)
                            s.push(a[l].clone());
                        this.faceVertexUvs[n].push(s)
                    }
                }
                return this
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            }
        },
        r.EventDispatcher.prototype.apply(r.Geometry.prototype),
        r.GeometryIdCount = 0,
        r.DirectGeometry = function() {
            Object.defineProperty(this, "id", {
                value: r.GeometryIdCount++
            }),
            this.uuid = r.Math.generateUUID(),
            this.name = "",
            this.type = "DirectGeometry",
            this.indices = [],
            this.vertices = [],
            this.normals = [],
            this.colors = [],
            this.uvs = [],
            this.uvs2 = [],
            this.groups = [],
            this.morphTargets = {},
            this.skinWeights = [],
            this.skinIndices = [],
            this.boundingSphere = this.boundingBox = null ,
            this.groupsNeedUpdate = this.uvsNeedUpdate = this.colorsNeedUpdate = this.normalsNeedUpdate = this.verticesNeedUpdate = !1
        }
        ,
        r.DirectGeometry.prototype = {
            constructor: r.DirectGeometry,
            computeBoundingBox: r.Geometry.prototype.computeBoundingBox,
            computeBoundingSphere: r.Geometry.prototype.computeBoundingSphere,
            computeFaceNormals: function() {
                console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")
            },
            computeVertexNormals: function() {
                console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")
            },
            computeGroups: function(t) {
                var e, n, r = [];
                t = t.faces;
                for (var i = 0; i < t.length; i++) {
                    var o = t[i];
                    o.materialIndex !== n && (n = o.materialIndex,
                    void 0 !== e && (e.count = 3 * i - e.start,
                    r.push(e)),
                    e = {
                        start: 3 * i,
                        materialIndex: n
                    })
                }
                void 0 !== e && (e.count = 3 * i - e.start,
                r.push(e)),
                this.groups = r
            },
            fromGeometry: function(t) {
                var e = t.faces
                  , n = t.vertices
                  , i = t.faceVertexUvs
                  , o = i[0] && 0 < i[0].length
                  , a = i[1] && 0 < i[1].length
                  , s = t.morphTargets
                  , l = s.length;
                if (l > 0) {
                    for (var h = [], c = 0; l > c; c++)
                        h[c] = [];
                    this.morphTargets.position = h
                }
                var u = t.morphNormals
                  , p = u.length;
                if (p > 0) {
                    for (var d = [], c = 0; p > c; c++)
                        d[c] = [];
                    this.morphTargets.normal = d
                }
                for (var f = t.skinIndices, m = t.skinWeights, g = f.length === n.length, v = m.length === n.length, c = 0; c < e.length; c++) {
                    var y = e[c];
                    this.vertices.push(n[y.a], n[y.b], n[y.c]);
                    var _ = y.vertexNormals;
                    for (3 === _.length ? this.normals.push(_[0], _[1], _[2]) : (_ = y.normal,
                    this.normals.push(_, _, _)),
                    _ = y.vertexColors,
                    3 === _.length ? this.colors.push(_[0], _[1], _[2]) : (_ = y.color,
                    this.colors.push(_, _, _)),
                    !0 === o && (_ = i[0][c],
                    void 0 !== _ ? this.uvs.push(_[0], _[1], _[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ", c),
                    this.uvs.push(new r.Vector2, new r.Vector2, new r.Vector2))),
                    !0 === a && (_ = i[1][c],
                    void 0 !== _ ? this.uvs2.push(_[0], _[1], _[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ", c),
                    this.uvs2.push(new r.Vector2, new r.Vector2, new r.Vector2))),
                    _ = 0; l > _; _++) {
                        var x = s[_].vertices;
                        h[_].push(x[y.a], x[y.b], x[y.c])
                    }
                    for (_ = 0; p > _; _++)
                        x = u[_].vertexNormals[c],
                        d[_].push(x.a, x.b, x.c);
                    g && this.skinIndices.push(f[y.a], f[y.b], f[y.c]),
                    v && this.skinWeights.push(m[y.a], m[y.b], m[y.c])
                }
                return this.computeGroups(t),
                this.verticesNeedUpdate = t.verticesNeedUpdate,
                this.normalsNeedUpdate = t.normalsNeedUpdate,
                this.colorsNeedUpdate = t.colorsNeedUpdate,
                this.uvsNeedUpdate = t.uvsNeedUpdate,
                this.groupsNeedUpdate = t.groupsNeedUpdate,
                this
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            }
        },
        r.EventDispatcher.prototype.apply(r.DirectGeometry.prototype),
        r.BufferGeometry = function() {
            Object.defineProperty(this, "id", {
                value: r.GeometryIdCount++
            }),
            this.uuid = r.Math.generateUUID(),
            this.name = "",
            this.type = "BufferGeometry",
            this.index = null ,
            this.attributes = {},
            this.morphAttributes = {},
            this.groups = [],
            this.boundingSphere = this.boundingBox = null ,
            this.drawRange = {
                start: 0,
                count: 1 / 0
            }
        }
        ,
        r.BufferGeometry.prototype = {
            constructor: r.BufferGeometry,
            addIndex: function(t) {
                console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),
                this.setIndex(t)
            },
            getIndex: function() {
                return this.index
            },
            setIndex: function(t) {
                this.index = t
            },
            addAttribute: function(t, e, n) {
                !1 == e instanceof r.BufferAttribute && !1 == e instanceof r.InterleavedBufferAttribute ? (console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),
                this.addAttribute(t, new r.BufferAttribute(e,n))) : "index" === t ? (console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),
                this.setIndex(e)) : this.attributes[t] = e
            },
            getAttribute: function(t) {
                return this.attributes[t]
            },
            removeAttribute: function(t) {
                delete this.attributes[t]
            },
            get drawcalls() {
                return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),
                this.groups
            },
            get offsets() {
                return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),
                this.groups
            },
            addDrawCall: function(t, e, n) {
                void 0 !== n && console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),
                console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),
                this.addGroup(t, e)
            },
            clearDrawCalls: function() {
                console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),
                this.clearGroups()
            },
            addGroup: function(t, e, n) {
                this.groups.push({
                    start: t,
                    count: e,
                    materialIndex: void 0 !== n ? n : 0
                })
            },
            clearGroups: function() {
                this.groups = []
            },
            setDrawRange: function(t, e) {
                this.drawRange.start = t,
                this.drawRange.count = e
            },
            applyMatrix: function(t) {
                var e = this.attributes.position;
                void 0 !== e && (t.applyToVector3Array(e.array),
                e.needsUpdate = !0),
                e = this.attributes.normal,
                void 0 !== e && ((new r.Matrix3).getNormalMatrix(t).applyToVector3Array(e.array),
                e.needsUpdate = !0),
                null !== this.boundingBox && this.computeBoundingBox(),
                null !== this.boundingSphere && this.computeBoundingSphere()
            },
            rotateX: function() {
                var t;
                return function(e) {
                    return void 0 === t && (t = new r.Matrix4),
                    t.makeRotationX(e),
                    this.applyMatrix(t),
                    this
                }
            }(),
            rotateY: function() {
                var t;
                return function(e) {
                    return void 0 === t && (t = new r.Matrix4),
                    t.makeRotationY(e),
                    this.applyMatrix(t),
                    this
                }
            }(),
            rotateZ: function() {
                var t;
                return function(e) {
                    return void 0 === t && (t = new r.Matrix4),
                    t.makeRotationZ(e),
                    this.applyMatrix(t),
                    this
                }
            }(),
            translate: function() {
                var t;
                return function(e, n, i) {
                    return void 0 === t && (t = new r.Matrix4),
                    t.makeTranslation(e, n, i),
                    this.applyMatrix(t),
                    this
                }
            }(),
            scale: function() {
                var t;
                return function(e, n, i) {
                    return void 0 === t && (t = new r.Matrix4),
                    t.makeScale(e, n, i),
                    this.applyMatrix(t),
                    this
                }
            }(),
            lookAt: function() {
                var t;
                return function(e) {
                    void 0 === t && (t = new r.Object3D),
                    t.lookAt(e),
                    t.updateMatrix(),
                    this.applyMatrix(t.matrix)
                }
            }(),
            center: function() {
                this.computeBoundingBox();
                var t = this.boundingBox.center().negate();
                return this.translate(t.x, t.y, t.z),
                t
            },
            setFromObject: function(t) {
                var e = t.geometry;
                if (t instanceof r.Points || t instanceof r.Line) {
                    t = new r.Float32Attribute(3 * e.vertices.length,3);
                    var n = new r.Float32Attribute(3 * e.colors.length,3);
                    this.addAttribute("position", t.copyVector3sArray(e.vertices)),
                    this.addAttribute("color", n.copyColorsArray(e.colors)),
                    e.lineDistances && e.lineDistances.length === e.vertices.length && (t = new r.Float32Attribute(e.lineDistances.length,1),
                    this.addAttribute("lineDistance", t.copyArray(e.lineDistances))),
                    null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()),
                    null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone())
                } else
                    t instanceof r.Mesh && e instanceof r.Geometry && this.fromGeometry(e);
                return this
            },
            updateFromObject: function(t) {
                var e = t.geometry;
                if (t instanceof r.Mesh) {
                    var n = e.__directGeometry;
                    if (void 0 === n)
                        return this.fromGeometry(e);
                    n.verticesNeedUpdate = e.verticesNeedUpdate,
                    n.normalsNeedUpdate = e.normalsNeedUpdate,
                    n.colorsNeedUpdate = e.colorsNeedUpdate,
                    n.uvsNeedUpdate = e.uvsNeedUpdate,
                    n.groupsNeedUpdate = e.groupsNeedUpdate,
                    e.verticesNeedUpdate = !1,
                    e.normalsNeedUpdate = !1,
                    e.colorsNeedUpdate = !1,
                    e.uvsNeedUpdate = !1,
                    e.groupsNeedUpdate = !1,
                    e = n
                }
                return !0 === e.verticesNeedUpdate && (n = this.attributes.position,
                void 0 !== n && (n.copyVector3sArray(e.vertices),
                n.needsUpdate = !0),
                e.verticesNeedUpdate = !1),
                !0 === e.normalsNeedUpdate && (n = this.attributes.normal,
                void 0 !== n && (n.copyVector3sArray(e.normals),
                n.needsUpdate = !0),
                e.normalsNeedUpdate = !1),
                !0 === e.colorsNeedUpdate && (n = this.attributes.color,
                void 0 !== n && (n.copyColorsArray(e.colors),
                n.needsUpdate = !0),
                e.colorsNeedUpdate = !1),
                e.lineDistancesNeedUpdate && (n = this.attributes.lineDistance,
                void 0 !== n && (n.copyArray(e.lineDistances),
                n.needsUpdate = !0),
                e.lineDistancesNeedUpdate = !1),
                e.groupsNeedUpdate && (e.computeGroups(t.geometry),
                this.groups = e.groups,
                e.groupsNeedUpdate = !1),
                this
            },
            fromGeometry: function(t) {
                return t.__directGeometry = (new r.DirectGeometry).fromGeometry(t),
                this.fromDirectGeometry(t.__directGeometry)
            },
            fromDirectGeometry: function(t) {
                var e = new Float32Array(3 * t.vertices.length);
                this.addAttribute("position", new r.BufferAttribute(e,3).copyVector3sArray(t.vertices)),
                0 < t.normals.length && (e = new Float32Array(3 * t.normals.length),
                this.addAttribute("normal", new r.BufferAttribute(e,3).copyVector3sArray(t.normals))),
                0 < t.colors.length && (e = new Float32Array(3 * t.colors.length),
                this.addAttribute("color", new r.BufferAttribute(e,3).copyColorsArray(t.colors))),
                0 < t.uvs.length && (e = new Float32Array(2 * t.uvs.length),
                this.addAttribute("uv", new r.BufferAttribute(e,2).copyVector2sArray(t.uvs))),
                0 < t.uvs2.length && (e = new Float32Array(2 * t.uvs2.length),
                this.addAttribute("uv2", new r.BufferAttribute(e,2).copyVector2sArray(t.uvs2))),
                0 < t.indices.length && (e = new (65535 < t.vertices.length ? Uint32Array : Uint16Array)(3 * t.indices.length),
                this.setIndex(new r.BufferAttribute(e,1).copyIndicesArray(t.indices))),
                this.groups = t.groups;
                for (var n in t.morphTargets) {
                    for (var e = [], i = t.morphTargets[n], o = 0, a = i.length; a > o; o++) {
                        var s = i[o]
                          , l = new r.Float32Attribute(3 * s.length,3);
                        e.push(l.copyVector3sArray(s))
                    }
                    this.morphAttributes[n] = e
                }
                return 0 < t.skinIndices.length && (n = new r.Float32Attribute(4 * t.skinIndices.length,4),
                this.addAttribute("skinIndex", n.copyVector4sArray(t.skinIndices))),
                0 < t.skinWeights.length && (n = new r.Float32Attribute(4 * t.skinWeights.length,4),
                this.addAttribute("skinWeight", n.copyVector4sArray(t.skinWeights))),
                null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()),
                null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()),
                this
            },
            computeBoundingBox: function() {
                var t = new r.Vector3;
                return function() {
                    null === this.boundingBox && (this.boundingBox = new r.Box3);
                    var e = this.attributes.position.array;
                    if (e) {
                        var n = this.boundingBox;
                        n.makeEmpty();
                        for (var i = 0, o = e.length; o > i; i += 3)
                            t.fromArray(e, i),
                            n.expandByPoint(t)
                    }
                    (void 0 === e || 0 === e.length) && (this.boundingBox.min.set(0, 0, 0),
                    this.boundingBox.max.set(0, 0, 0)),
                    (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this)
                }
            }(),
            computeBoundingSphere: function() {
                var t = new r.Box3
                  , e = new r.Vector3;
                return function() {
                    null === this.boundingSphere && (this.boundingSphere = new r.Sphere);
                    var n = this.attributes.position.array;
                    if (n) {
                        t.makeEmpty();
                        for (var i = this.boundingSphere.center, o = 0, a = n.length; a > o; o += 3)
                            e.fromArray(n, o),
                            t.expandByPoint(e);
                        t.center(i);
                        for (var s = 0, o = 0, a = n.length; a > o; o += 3)
                            e.fromArray(n, o),
                            s = Math.max(s, i.distanceToSquared(e));
                        this.boundingSphere.radius = Math.sqrt(s),
                        isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this)
                    }
                }
            }(),
            computeFaceNormals: function() {},
            computeVertexNormals: function() {
                var t = this.index
                  , e = this.attributes
                  , n = this.groups;
                if (e.position) {
                    var i = e.position.array;
                    if (void 0 === e.normal)
                        this.addAttribute("normal", new r.BufferAttribute(new Float32Array(i.length),3));
                    else
                        for (var o = e.normal.array, a = 0, s = o.length; s > a; a++)
                            o[a] = 0;
                    var l, h, c, o = e.normal.array, u = new r.Vector3, p = new r.Vector3, d = new r.Vector3, f = new r.Vector3, m = new r.Vector3;
                    if (t) {
                        t = t.array,
                        0 === n.length && this.addGroup(0, t.length);
                        for (var g = 0, v = n.length; v > g; ++g)
                            for (a = n[g],
                            s = a.start,
                            l = a.count,
                            a = s,
                            s += l; s > a; a += 3)
                                l = 3 * t[a + 0],
                                h = 3 * t[a + 1],
                                c = 3 * t[a + 2],
                                u.fromArray(i, l),
                                p.fromArray(i, h),
                                d.fromArray(i, c),
                                f.subVectors(d, p),
                                m.subVectors(u, p),
                                f.cross(m),
                                o[l] += f.x,
                                o[l + 1] += f.y,
                                o[l + 2] += f.z,
                                o[h] += f.x,
                                o[h + 1] += f.y,
                                o[h + 2] += f.z,
                                o[c] += f.x,
                                o[c + 1] += f.y,
                                o[c + 2] += f.z
                    } else
                        for (a = 0,
                        s = i.length; s > a; a += 9)
                            u.fromArray(i, a),
                            p.fromArray(i, a + 3),
                            d.fromArray(i, a + 6),
                            f.subVectors(d, p),
                            m.subVectors(u, p),
                            f.cross(m),
                            o[a] = f.x,
                            o[a + 1] = f.y,
                            o[a + 2] = f.z,
                            o[a + 3] = f.x,
                            o[a + 4] = f.y,
                            o[a + 5] = f.z,
                            o[a + 6] = f.x,
                            o[a + 7] = f.y,
                            o[a + 8] = f.z;
                    this.normalizeNormals(),
                    e.normal.needsUpdate = !0
                }
            },
            computeTangents: function() {
                console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")
            },
            computeOffsets: function(t) {
                console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")
            },
            merge: function(t, e) {
                if (!1 != t instanceof r.BufferGeometry) {
                    void 0 === e && (e = 0);
                    var n, i = this.attributes;
                    for (n in i)
                        if (void 0 !== t.attributes[n])
                            for (var o = i[n].array, a = t.attributes[n], s = a.array, l = 0, a = a.itemSize * e; l < s.length; l++,
                            a++)
                                o[a] = s[l];
                    return this
                }
                console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", t)
            },
            normalizeNormals: function() {
                for (var t, e, n, r = this.attributes.normal.array, i = 0, o = r.length; o > i; i += 3)
                    t = r[i],
                    e = r[i + 1],
                    n = r[i + 2],
                    t = 1 / Math.sqrt(t * t + e * e + n * n),
                    r[i] *= t,
                    r[i + 1] *= t,
                    r[i + 2] *= t
            },
            toJSON: function() {
                var t = {
                    metadata: {
                        version: 4.4,
                        type: "BufferGeometry",
                        generator: "BufferGeometry.toJSON"
                    }
                };
                if (t.uuid = this.uuid,
                t.type = this.type,
                "" !== this.name && (t.name = this.name),
                void 0 !== this.parameters) {
                    var e, n = this.parameters;
                    for (e in n)
                        void 0 !== n[e] && (t[e] = n[e]);
                    return t
                }
                t.data = {
                    attributes: {}
                };
                var r = this.index;
                null !== r && (n = Array.prototype.slice.call(r.array),
                t.data.index = {
                    type: r.array.constructor.name,
                    array: n
                }),
                r = this.attributes;
                for (e in r) {
                    var i = r[e]
                      , n = Array.prototype.slice.call(i.array);
                    t.data.attributes[e] = {
                        itemSize: i.itemSize,
                        type: i.array.constructor.name,
                        array: n
                    }
                }
                return e = this.groups,
                0 < e.length && (t.data.groups = JSON.parse(JSON.stringify(e))),
                e = this.boundingSphere,
                null !== e && (t.data.boundingSphere = {
                    center: e.center.toArray(),
                    radius: e.radius
                }),
                t
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                var e = t.index;
                null !== e && this.setIndex(e.clone());
                var n, e = t.attributes;
                for (n in e)
                    this.addAttribute(n, e[n].clone());
                for (t = t.groups,
                n = 0,
                e = t.length; e > n; n++) {
                    var r = t[n];
                    this.addGroup(r.start, r.count)
                }
                return this
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            }
        },
        r.EventDispatcher.prototype.apply(r.BufferGeometry.prototype),
        r.BufferGeometry.MaxIndex = 65535,
        r.InstancedBufferGeometry = function() {
            r.BufferGeometry.call(this),
            this.type = "InstancedBufferGeometry",
            this.maxInstancedCount = void 0
        }
        ,
        r.InstancedBufferGeometry.prototype = Object.create(r.BufferGeometry.prototype),
        r.InstancedBufferGeometry.prototype.constructor = r.InstancedBufferGeometry,
        r.InstancedBufferGeometry.prototype.addGroup = function(t, e, n) {
            this.groups.push({
                start: t,
                count: e,
                instances: n
            })
        }
        ,
        r.InstancedBufferGeometry.prototype.copy = function(t) {
            var e = t.index;
            null !== e && this.setIndex(e.clone());
            var n, e = t.attributes;
            for (n in e)
                this.addAttribute(n, e[n].clone());
            for (t = t.groups,
            n = 0,
            e = t.length; e > n; n++) {
                var r = t[n];
                this.addGroup(r.start, r.count, r.instances)
            }
            return this
        }
        ,
        r.EventDispatcher.prototype.apply(r.InstancedBufferGeometry.prototype),
        r.Camera = function() {
            r.Object3D.call(this),
            this.type = "Camera",
            this.matrixWorldInverse = new r.Matrix4,
            this.projectionMatrix = new r.Matrix4
        }
        ,
        r.Camera.prototype = Object.create(r.Object3D.prototype),
        r.Camera.prototype.constructor = r.Camera,
        r.Camera.prototype.getWorldDirection = function() {
            var t = new r.Quaternion;
            return function(e) {
                return e = e || new r.Vector3,
                this.getWorldQuaternion(t),
                e.set(0, 0, -1).applyQuaternion(t)
            }
        }(),
        r.Camera.prototype.lookAt = function() {
            var t = new r.Matrix4;
            return function(e) {
                t.lookAt(this.position, e, this.up),
                this.quaternion.setFromRotationMatrix(t)
            }
        }(),
        r.Camera.prototype.clone = function() {
            return (new this.constructor).copy(this)
        }
        ,
        r.Camera.prototype.copy = function(t) {
            return r.Object3D.prototype.copy.call(this, t),
            this.matrixWorldInverse.copy(t.matrixWorldInverse),
            this.projectionMatrix.copy(t.projectionMatrix),
            this
        }
        ,
        r.CubeCamera = function(t, e, n) {
            r.Object3D.call(this),
            this.type = "CubeCamera";
            var i = new r.PerspectiveCamera(90,1,t,e);
            i.up.set(0, -1, 0),
            i.lookAt(new r.Vector3(1,0,0)),
            this.add(i);
            var o = new r.PerspectiveCamera(90,1,t,e);
            o.up.set(0, -1, 0),
            o.lookAt(new r.Vector3(-1,0,0)),
            this.add(o);
            var a = new r.PerspectiveCamera(90,1,t,e);
            a.up.set(0, 0, 1),
            a.lookAt(new r.Vector3(0,1,0)),
            this.add(a);
            var s = new r.PerspectiveCamera(90,1,t,e);
            s.up.set(0, 0, -1),
            s.lookAt(new r.Vector3(0,-1,0)),
            this.add(s);
            var l = new r.PerspectiveCamera(90,1,t,e);
            l.up.set(0, -1, 0),
            l.lookAt(new r.Vector3(0,0,1)),
            this.add(l);
            var h = new r.PerspectiveCamera(90,1,t,e);
            h.up.set(0, -1, 0),
            h.lookAt(new r.Vector3(0,0,-1)),
            this.add(h),
            this.renderTarget = new r.WebGLRenderTargetCube(n,n,{
                format: r.RGBFormat,
                magFilter: r.LinearFilter,
                minFilter: r.LinearFilter
            }),
            this.updateCubeMap = function(t, e) {
                null === this.parent && this.updateMatrixWorld();
                var n = this.renderTarget
                  , r = n.generateMipmaps;
                n.generateMipmaps = !1,
                n.activeCubeFace = 0,
                t.render(e, i, n),
                n.activeCubeFace = 1,
                t.render(e, o, n),
                n.activeCubeFace = 2,
                t.render(e, a, n),
                n.activeCubeFace = 3,
                t.render(e, s, n),
                n.activeCubeFace = 4,
                t.render(e, l, n),
                n.generateMipmaps = r,
                n.activeCubeFace = 5,
                t.render(e, h, n),
                t.setRenderTarget(null )
            }
        }
        ,
        r.CubeCamera.prototype = Object.create(r.Object3D.prototype),
        r.CubeCamera.prototype.constructor = r.CubeCamera,
        r.OrthographicCamera = function(t, e, n, i, o, a) {
            r.Camera.call(this),
            this.type = "OrthographicCamera",
            this.zoom = 1,
            this.left = t,
            this.right = e,
            this.top = n,
            this.bottom = i,
            this.near = void 0 !== o ? o : .1,
            this.far = void 0 !== a ? a : 2e3,
            this.updateProjectionMatrix()
        }
        ,
        r.OrthographicCamera.prototype = Object.create(r.Camera.prototype),
        r.OrthographicCamera.prototype.constructor = r.OrthographicCamera,
        r.OrthographicCamera.prototype.updateProjectionMatrix = function() {
            var t = (this.right - this.left) / (2 * this.zoom)
              , e = (this.top - this.bottom) / (2 * this.zoom)
              , n = (this.right + this.left) / 2
              , r = (this.top + this.bottom) / 2;
            this.projectionMatrix.makeOrthographic(n - t, n + t, r + e, r - e, this.near, this.far)
        }
        ,
        r.OrthographicCamera.prototype.copy = function(t) {
            return r.Camera.prototype.copy.call(this, t),
            this.left = t.left,
            this.right = t.right,
            this.top = t.top,
            this.bottom = t.bottom,
            this.near = t.near,
            this.far = t.far,
            this.zoom = t.zoom,
            this
        }
        ,
        r.OrthographicCamera.prototype.toJSON = function(t) {
            return t = r.Object3D.prototype.toJSON.call(this, t),
            t.object.zoom = this.zoom,
            t.object.left = this.left,
            t.object.right = this.right,
            t.object.top = this.top,
            t.object.bottom = this.bottom,
            t.object.near = this.near,
            t.object.far = this.far,
            t
        }
        ,
        r.PerspectiveCamera = function(t, e, n, i) {
            r.Camera.call(this),
            this.type = "PerspectiveCamera",
            this.zoom = 1,
            this.fov = void 0 !== t ? t : 50,
            this.aspect = void 0 !== e ? e : 1,
            this.near = void 0 !== n ? n : .1,
            this.far = void 0 !== i ? i : 2e3,
            this.updateProjectionMatrix()
        }
        ,
        r.PerspectiveCamera.prototype = Object.create(r.Camera.prototype),
        r.PerspectiveCamera.prototype.constructor = r.PerspectiveCamera,
        r.PerspectiveCamera.prototype.setLens = function(t, e) {
            void 0 === e && (e = 24),
            this.fov = 2 * r.Math.radToDeg(Math.atan(e / (2 * t))),
            this.updateProjectionMatrix()
        }
        ,
        r.PerspectiveCamera.prototype.setViewOffset = function(t, e, n, r, i, o) {
            this.fullWidth = t,
            this.fullHeight = e,
            this.x = n,
            this.y = r,
            this.width = i,
            this.height = o,
            this.updateProjectionMatrix()
        }
        ,
        r.PerspectiveCamera.prototype.updateProjectionMatrix = function() {
            var t = r.Math.radToDeg(2 * Math.atan(Math.tan(.5 * r.Math.degToRad(this.fov)) / this.zoom));
            if (this.fullWidth) {
                var e = this.fullWidth / this.fullHeight
                  , t = Math.tan(r.Math.degToRad(.5 * t)) * this.near
                  , n = -t
                  , i = e * n
                  , e = Math.abs(e * t - i)
                  , n = Math.abs(t - n);
                this.projectionMatrix.makeFrustum(i + this.x * e / this.fullWidth, i + (this.x + this.width) * e / this.fullWidth, t - (this.y + this.height) * n / this.fullHeight, t - this.y * n / this.fullHeight, this.near, this.far)
            } else
                this.projectionMatrix.makePerspective(t, this.aspect, this.near, this.far)
        }
        ,
        r.PerspectiveCamera.prototype.copy = function(t) {
            return r.Camera.prototype.copy.call(this, t),
            this.fov = t.fov,
            this.aspect = t.aspect,
            this.near = t.near,
            this.far = t.far,
            this.zoom = t.zoom,
            this
        }
        ,
        r.PerspectiveCamera.prototype.toJSON = function(t) {
            return t = r.Object3D.prototype.toJSON.call(this, t),
            t.object.zoom = this.zoom,
            t.object.fov = this.fov,
            t.object.aspect = this.aspect,
            t.object.near = this.near,
            t.object.far = this.far,
            t
        }
        ,
        r.Light = function(t) {
            r.Object3D.call(this),
            this.type = "Light",
            this.color = new r.Color(t)
        }
        ,
        r.Light.prototype = Object.create(r.Object3D.prototype),
        r.Light.prototype.constructor = r.Light,
        r.Light.prototype.copy = function(t) {
            return r.Object3D.prototype.copy.call(this, t),
            this.color.copy(t.color),
            this
        }
        ,
        r.AmbientLight = function(t) {
            r.Light.call(this, t),
            this.type = "AmbientLight"
        }
        ,
        r.AmbientLight.prototype = Object.create(r.Light.prototype),
        r.AmbientLight.prototype.constructor = r.AmbientLight,
        r.AmbientLight.prototype.toJSON = function(t) {
            return t = r.Object3D.prototype.toJSON.call(this, t),
            t.object.color = this.color.getHex(),
            t
        }
        ,
        r.DirectionalLight = function(t, e) {
            r.Light.call(this, t),
            this.type = "DirectionalLight",
            this.position.set(0, 1, 0),
            this.updateMatrix(),
            this.target = new r.Object3D,
            this.intensity = void 0 !== e ? e : 1,
            this.onlyShadow = this.castShadow = !1,
            this.shadowCameraNear = 50,
            this.shadowCameraFar = 5e3,
            this.shadowCameraLeft = -500,
            this.shadowCameraTop = this.shadowCameraRight = 500,
            this.shadowCameraBottom = -500,
            this.shadowCameraVisible = !1,
            this.shadowBias = 0,
            this.shadowDarkness = .5,
            this.shadowMapHeight = this.shadowMapWidth = 512,
            this.shadowMatrix = this.shadowCamera = this.shadowMapSize = this.shadowMap = null
        }
        ,
        r.DirectionalLight.prototype = Object.create(r.Light.prototype),
        r.DirectionalLight.prototype.constructor = r.DirectionalLight,
        r.DirectionalLight.prototype.copy = function(t) {
            return r.Light.prototype.copy.call(this, t),
            this.intensity = t.intensity,
            this.target = t.target.clone(),
            this.castShadow = t.castShadow,
            this.onlyShadow = t.onlyShadow,
            this.shadowCameraNear = t.shadowCameraNear,
            this.shadowCameraFar = t.shadowCameraFar,
            this.shadowCameraLeft = t.shadowCameraLeft,
            this.shadowCameraRight = t.shadowCameraRight,
            this.shadowCameraTop = t.shadowCameraTop,
            this.shadowCameraBottom = t.shadowCameraBottom,
            this.shadowCameraVisible = t.shadowCameraVisible,
            this.shadowBias = t.shadowBias,
            this.shadowDarkness = t.shadowDarkness,
            this.shadowMapWidth = t.shadowMapWidth,
            this.shadowMapHeight = t.shadowMapHeight,
            this
        }
        ,
        r.DirectionalLight.prototype.toJSON = function(t) {
            return t = r.Object3D.prototype.toJSON.call(this, t),
            t.object.color = this.color.getHex(),
            t.object.intensity = this.intensity,
            t
        }
        ,
        r.HemisphereLight = function(t, e, n) {
            r.Light.call(this, t),
            this.type = "HemisphereLight",
            this.position.set(0, 1, 0),
            this.updateMatrix(),
            this.groundColor = new r.Color(e),
            this.intensity = void 0 !== n ? n : 1
        }
        ,
        r.HemisphereLight.prototype = Object.create(r.Light.prototype),
        r.HemisphereLight.prototype.constructor = r.HemisphereLight,
        r.HemisphereLight.prototype.copy = function(t) {
            return r.Light.prototype.copy.call(this, t),
            this.groundColor.copy(t.groundColor),
            this.intensity = t.intensity,
            this
        }
        ,
        r.HemisphereLight.prototype.toJSON = function(t) {
            return t = r.Object3D.prototype.toJSON.call(this, t),
            t.object.color = this.color.getHex(),
            t.object.groundColor = this.groundColor.getHex(),
            t.object.intensity = this.intensity,
            t
        }
        ,
        r.PointLight = function(t, e, n, i) {
            r.Light.call(this, t),
            this.type = "PointLight",
            this.intensity = void 0 !== e ? e : 1,
            this.distance = void 0 !== n ? n : 0,
            this.decay = void 0 !== i ? i : 1
        }
        ,
        r.PointLight.prototype = Object.create(r.Light.prototype),
        r.PointLight.prototype.constructor = r.PointLight,
        r.PointLight.prototype.copy = function(t) {
            return r.Light.prototype.copy.call(this, t),
            this.intensity = t.intensity,
            this.distance = t.distance,
            this.decay = t.decay,
            this
        }
        ,
        r.PointLight.prototype.toJSON = function(t) {
            return t = r.Object3D.prototype.toJSON.call(this, t),
            t.object.color = this.color.getHex(),
            t.object.intensity = this.intensity,
            t.object.distance = this.distance,
            t.object.decay = this.decay,
            t
        }
        ,
        r.SpotLight = function(t, e, n, i, o, a) {
            r.Light.call(this, t),
            this.type = "SpotLight",
            this.position.set(0, 1, 0),
            this.updateMatrix(),
            this.target = new r.Object3D,
            this.intensity = void 0 !== e ? e : 1,
            this.distance = void 0 !== n ? n : 0,
            this.angle = void 0 !== i ? i : Math.PI / 3,
            this.exponent = void 0 !== o ? o : 10,
            this.decay = void 0 !== a ? a : 1,
            this.onlyShadow = this.castShadow = !1,
            this.shadowCameraNear = 50,
            this.shadowCameraFar = 5e3,
            this.shadowCameraFov = 50,
            this.shadowCameraVisible = !1,
            this.shadowBias = 0,
            this.shadowDarkness = .5,
            this.shadowMapHeight = this.shadowMapWidth = 512,
            this.shadowMatrix = this.shadowCamera = this.shadowMapSize = this.shadowMap = null
        }
        ,
        r.SpotLight.prototype = Object.create(r.Light.prototype),
        r.SpotLight.prototype.constructor = r.SpotLight,
        r.SpotLight.prototype.copy = function(t) {
            return r.Light.prototype.copy.call(this, t),
            this.intensity = t.intensity,
            this.distance = t.distance,
            this.angle = t.angle,
            this.exponent = t.exponent,
            this.decay = t.decay,
            this.target = t.target.clone(),
            this.castShadow = t.castShadow,
            this.onlyShadow = t.onlyShadow,
            this.shadowCameraNear = t.shadowCameraNear,
            this.shadowCameraFar = t.shadowCameraFar,
            this.shadowCameraFov = t.shadowCameraFov,
            this.shadowCameraVisible = t.shadowCameraVisible,
            this.shadowBias = t.shadowBias,
            this.shadowDarkness = t.shadowDarkness,
            this.shadowMapWidth = t.shadowMapWidth,
            this.shadowMapHeight = t.shadowMapHeight,
            this
        }
        ,
        r.SpotLight.prototype.toJSON = function(t) {
            return t = r.Object3D.prototype.toJSON.call(this, t),
            t.object.color = this.color.getHex(),
            t.object.intensity = this.intensity,
            t.object.distance = this.distance,
            t.object.angle = this.angle,
            t.object.exponent = this.exponent,
            t.object.decay = this.decay,
            t
        }
        ,
        r.Cache = {
            enabled: !1,
            files: {},
            add: function(t, e) {
                !1 !== this.enabled && (this.files[t] = e)
            },
            get: function(t) {
                return !1 !== this.enabled ? this.files[t] : void 0
            },
            remove: function(t) {
                delete this.files[t]
            },
            clear: function() {
                this.files = {}
            }
        },
        r.Loader = function() {
            this.onLoadStart = function() {}
            ,
            this.onLoadProgress = function() {}
            ,
            this.onLoadComplete = function() {}
        }
        ,
        r.Loader.prototype = {
            constructor: r.Loader,
            crossOrigin: void 0,
            extractUrlBase: function(t) {
                return t = t.split("/"),
                1 === t.length ? "./" : (t.pop(),
                t.join("/") + "/")
            },
            initMaterials: function(t, e, n) {
                for (var r = [], i = 0; i < t.length; ++i)
                    r[i] = this.createMaterial(t[i], e, n);
                return r
            },
            createMaterial: function() {
                var t;
                return function(e, n, i) {
                    function o(t) {
                        return t = Math.log(t) / Math.LN2,
                        Math.pow(2, Math.round(t))
                    }
                    function a(e, a, s, l, h, c, u) {
                        var p, d = n + s, f = r.Loader.Handlers.get(d);
                        null !== f ? p = f.load(d) : (p = new r.Texture,
                        f = t,
                        f.setCrossOrigin(i),
                        f.load(d, function(t) {
                            if (!1 === r.Math.isPowerOfTwo(t.width) || !1 === r.Math.isPowerOfTwo(t.height)) {
                                var e = o(t.width)
                                  , n = o(t.height)
                                  , i = document.createElement("canvas");
                                i.width = e,
                                i.height = n,
                                i.getContext("2d").drawImage(t, 0, 0, e, n),
                                p.image = i
                            } else
                                p.image = t;
                            p.needsUpdate = !0
                        })),
                        p.sourceFile = s,
                        l && (p.repeat.set(l[0], l[1]),
                        1 !== l[0] && (p.wrapS = r.RepeatWrapping),
                        1 !== l[1] && (p.wrapT = r.RepeatWrapping)),
                        h && p.offset.set(h[0], h[1]),
                        c && (s = {
                            repeat: r.RepeatWrapping,
                            mirror: r.MirroredRepeatWrapping
                        },
                        void 0 !== s[c[0]] && (p.wrapS = s[c[0]]),
                        void 0 !== s[c[1]] && (p.wrapT = s[c[1]])),
                        u && (p.anisotropy = u),
                        e[a] = p
                    }
                    function s(t) {
                        return (255 * t[0] << 16) + (255 * t[1] << 8) + 255 * t[2]
                    }
                    void 0 === i && void 0 !== this.crossOrigin && (i = this.crossOrigin),
                    void 0 === t && (t = new r.ImageLoader);
                    var l = "MeshLambertMaterial"
                      , h = {};
                    if (e.shading) {
                        var c = e.shading.toLowerCase();
                        "phong" === c ? l = "MeshPhongMaterial" : "basic" === c && (l = "MeshBasicMaterial")
                    }
                    return void 0 !== e.blending && void 0 !== r[e.blending] && (h.blending = r[e.blending]),
                    void 0 !== e.transparent && (h.transparent = e.transparent),
                    void 0 !== e.opacity && 1 > e.opacity && (h.transparent = !0),
                    void 0 !== e.depthTest && (h.depthTest = e.depthTest),
                    void 0 !== e.depthWrite && (h.depthWrite = e.depthWrite),
                    void 0 !== e.visible && (h.visible = e.visible),
                    void 0 !== e.flipSided && (h.side = r.BackSide),
                    void 0 !== e.doubleSided && (h.side = r.DoubleSide),
                    void 0 !== e.wireframe && (h.wireframe = e.wireframe),
                    void 0 !== e.vertexColors && ("face" === e.vertexColors ? h.vertexColors = r.FaceColors : e.vertexColors && (h.vertexColors = r.VertexColors)),
                    e.colorDiffuse ? h.color = s(e.colorDiffuse) : e.DbgColor && (h.color = e.DbgColor),
                    e.colorEmissive && (h.emissive = s(e.colorEmissive)),
                    "MeshPhongMaterial" === l && (e.colorSpecular && (h.specular = s(e.colorSpecular)),
                    e.specularCoef && (h.shininess = e.specularCoef)),
                    void 0 !== e.transparency && (console.warn("THREE.Loader: transparency has been renamed to opacity"),
                    e.opacity = e.transparency),
                    void 0 !== e.opacity && (h.opacity = e.opacity),
                    n && (e.mapDiffuse && a(h, "map", e.mapDiffuse, e.mapDiffuseRepeat, e.mapDiffuseOffset, e.mapDiffuseWrap, e.mapDiffuseAnisotropy),
                    e.mapLight && a(h, "lightMap", e.mapLight, e.mapLightRepeat, e.mapLightOffset, e.mapLightWrap, e.mapLightAnisotropy),
                    e.mapAO && a(h, "aoMap", e.mapAO, e.mapAORepeat, e.mapAOOffset, e.mapAOWrap, e.mapAOAnisotropy),
                    e.mapBump && a(h, "bumpMap", e.mapBump, e.mapBumpRepeat, e.mapBumpOffset, e.mapBumpWrap, e.mapBumpAnisotropy),
                    e.mapNormal && a(h, "normalMap", e.mapNormal, e.mapNormalRepeat, e.mapNormalOffset, e.mapNormalWrap, e.mapNormalAnisotropy),
                    e.mapSpecular && a(h, "specularMap", e.mapSpecular, e.mapSpecularRepeat, e.mapSpecularOffset, e.mapSpecularWrap, e.mapSpecularAnisotropy),
                    e.mapAlpha && a(h, "alphaMap", e.mapAlpha, e.mapAlphaRepeat, e.mapAlphaOffset, e.mapAlphaWrap, e.mapAlphaAnisotropy)),
                    e.mapBumpScale && (h.bumpScale = e.mapBumpScale),
                    e.mapNormalFactor && (h.normalScale = new r.Vector2(e.mapNormalFactor,e.mapNormalFactor)),
                    l = new r[l](h),
                    void 0 !== e.DbgName && (l.name = e.DbgName),
                    l
                }
            }()
        },
        r.Loader.Handlers = {
            handlers: [],
            add: function(t, e) {
                this.handlers.push(t, e)
            },
            get: function(t) {
                for (var e = 0, n = this.handlers.length; n > e; e += 2) {
                    var r = this.handlers[e + 1];
                    if (this.handlers[e].test(t))
                        return r
                }
                return null
            }
        },
        r.XHRLoader = function(t) {
            this.manager = void 0 !== t ? t : r.DefaultLoadingManager
        }
        ,
        r.XHRLoader.prototype = {
            constructor: r.XHRLoader,
            load: function(t, e, n, i) {
                var o = this
                  , a = r.Cache.get(t);
                if (void 0 !== a)
                    return e && setTimeout(function() {
                        e(a)
                    }, 0),
                    a;
                var s = new XMLHttpRequest;
                return s.open("GET", t, !0),
                s.addEventListener("load", function(n) {
                    r.Cache.add(t, this.response),
                    e && e(this.response),
                    o.manager.itemEnd(t)
                }, !1),
                void 0 !== n && s.addEventListener("progress", function(t) {
                    n(t)
                }, !1),
                s.addEventListener("error", function(e) {
                    i && i(e),
                    o.manager.itemError(t)
                }, !1),
                void 0 !== this.crossOrigin && (s.crossOrigin = this.crossOrigin),
                void 0 !== this.responseType && (s.responseType = this.responseType),
                void 0 !== this.withCredentials && (s.withCredentials = this.withCredentials),
                s.send(null ),
                o.manager.itemStart(t),
                s
            },
            setResponseType: function(t) {
                this.responseType = t
            },
            setCrossOrigin: function(t) {
                this.crossOrigin = t
            },
            setWithCredentials: function(t) {
                this.withCredentials = t
            }
        },
        r.ImageLoader = function(t) {
            this.manager = void 0 !== t ? t : r.DefaultLoadingManager
        }
        ,
        r.ImageLoader.prototype = {
            constructor: r.ImageLoader,
            load: function(t, e, n, i) {
                var o = this
                  , a = r.Cache.get(t);
                if (void 0 !== a)
                    return e && setTimeout(function() {
                        e(a)
                    }, 0),
                    a;
                var s = document.createElement("img");
                return s.addEventListener("load", function(n) {
                    r.Cache.add(t, this),
                    e && e(this),
                    o.manager.itemEnd(t)
                }, !1),
                void 0 !== n && s.addEventListener("progress", function(t) {
                    n(t)
                }, !1),
                s.addEventListener("error", function(e) {
                    i && i(e),
                    o.manager.itemError(t)
                }, !1),
                void 0 !== this.crossOrigin && (s.crossOrigin = this.crossOrigin),
                o.manager.itemStart(t),
                s.src = t,
                s
            },
            setCrossOrigin: function(t) {
                this.crossOrigin = t
            }
        },
        r.JSONLoader = function(t) {
            "boolean" == typeof t && (console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),
            t = void 0),
            this.manager = void 0 !== t ? t : r.DefaultLoadingManager,
            this.withCredentials = !1
        }
        ,
        r.JSONLoader.prototype = {
            constructor: r.JSONLoader,
            get statusDomElement() {
                return void 0 === this._statusDomElement && (this._statusDomElement = document.createElement("div")),
                console.warn("THREE.JSONLoader: .statusDomElement has been removed."),
                this._statusDomElement
            },
            load: function(t, e, n, i) {
                var o = this
                  , a = this.texturePath && "string" == typeof this.texturePath ? this.texturePath : r.Loader.prototype.extractUrlBase(t);
                n = new r.XHRLoader(this.manager),
                n.setCrossOrigin(this.crossOrigin),
                n.setWithCredentials(this.withCredentials),
                n.load(t, function(n) {
                    n = JSON.parse(n);
                    var r = n.metadata;
                    if (void 0 !== r) {
                        if ("object" === r.type)
                            return void console.error("THREE.JSONLoader: " + t + " should be loaded with THREE.ObjectLoader instead.");
                        if ("scene" === r.type)
                            return void console.error("THREE.JSONLoader: " + t + " should be loaded with THREE.SceneLoader instead.")
                    }
                    n = o.parse(n, a),
                    e(n.geometry, n.materials)
                })
            },
            setCrossOrigin: function(t) {
                this.crossOrigin = t
            },
            setTexturePath: function(t) {
                this.texturePath = t
            },
            parse: function(t, e) {
                var n = new r.Geometry
                  , i = void 0 !== t.scale ? 1 / t.scale : 1;
                return function(e) {
                    var i, o, a, s, l, h, c, u, p, d, f, m, g, v = t.faces;
                    h = t.vertices;
                    var y = t.normals
                      , _ = t.colors
                      , x = 0;
                    if (void 0 !== t.uvs) {
                        for (i = 0; i < t.uvs.length; i++)
                            t.uvs[i].length && x++;
                        for (i = 0; x > i; i++)
                            n.faceVertexUvs[i] = []
                    }
                    for (s = 0,
                    l = h.length; l > s; )
                        i = new r.Vector3,
                        i.x = h[s++] * e,
                        i.y = h[s++] * e,
                        i.z = h[s++] * e,
                        n.vertices.push(i);
                    for (s = 0,
                    l = v.length; l > s; )
                        if (e = v[s++],
                        p = 1 & e,
                        a = 2 & e,
                        i = 8 & e,
                        c = 16 & e,
                        d = 32 & e,
                        h = 64 & e,
                        e &= 128,
                        p) {
                            if (p = new r.Face3,
                            p.a = v[s],
                            p.b = v[s + 1],
                            p.c = v[s + 3],
                            f = new r.Face3,
                            f.a = v[s + 1],
                            f.b = v[s + 2],
                            f.c = v[s + 3],
                            s += 4,
                            a && (a = v[s++],
                            p.materialIndex = a,
                            f.materialIndex = a),
                            a = n.faces.length,
                            i)
                                for (i = 0; x > i; i++)
                                    for (m = t.uvs[i],
                                    n.faceVertexUvs[i][a] = [],
                                    n.faceVertexUvs[i][a + 1] = [],
                                    o = 0; 4 > o; o++)
                                        u = v[s++],
                                        g = m[2 * u],
                                        u = m[2 * u + 1],
                                        g = new r.Vector2(g,u),
                                        2 !== o && n.faceVertexUvs[i][a].push(g),
                                        0 !== o && n.faceVertexUvs[i][a + 1].push(g);
                            if (c && (c = 3 * v[s++],
                            p.normal.set(y[c++], y[c++], y[c]),
                            f.normal.copy(p.normal)),
                            d)
                                for (i = 0; 4 > i; i++)
                                    c = 3 * v[s++],
                                    d = new r.Vector3(y[c++],y[c++],y[c]),
                                    2 !== i && p.vertexNormals.push(d),
                                    0 !== i && f.vertexNormals.push(d);
                            if (h && (h = v[s++],
                            h = _[h],
                            p.color.setHex(h),
                            f.color.setHex(h)),
                            e)
                                for (i = 0; 4 > i; i++)
                                    h = v[s++],
                                    h = _[h],
                                    2 !== i && p.vertexColors.push(new r.Color(h)),
                                    0 !== i && f.vertexColors.push(new r.Color(h));
                            n.faces.push(p),
                            n.faces.push(f)
                        } else {
                            if (p = new r.Face3,
                            p.a = v[s++],
                            p.b = v[s++],
                            p.c = v[s++],
                            a && (a = v[s++],
                            p.materialIndex = a),
                            a = n.faces.length,
                            i)
                                for (i = 0; x > i; i++)
                                    for (m = t.uvs[i],
                                    n.faceVertexUvs[i][a] = [],
                                    o = 0; 3 > o; o++)
                                        u = v[s++],
                                        g = m[2 * u],
                                        u = m[2 * u + 1],
                                        g = new r.Vector2(g,u),
                                        n.faceVertexUvs[i][a].push(g);
                            if (c && (c = 3 * v[s++],
                            p.normal.set(y[c++], y[c++], y[c])),
                            d)
                                for (i = 0; 3 > i; i++)
                                    c = 3 * v[s++],
                                    d = new r.Vector3(y[c++],y[c++],y[c]),
                                    p.vertexNormals.push(d);
                            if (h && (h = v[s++],
                            p.color.setHex(_[h])),
                            e)
                                for (i = 0; 3 > i; i++)
                                    h = v[s++],
                                    p.vertexColors.push(new r.Color(_[h]));
                            n.faces.push(p)
                        }
                }(i),
                function() {
                    var e = void 0 !== t.influencesPerVertex ? t.influencesPerVertex : 2;
                    if (t.skinWeights)
                        for (var i = 0, o = t.skinWeights.length; o > i; i += e)
                            n.skinWeights.push(new r.Vector4(t.skinWeights[i],e > 1 ? t.skinWeights[i + 1] : 0,e > 2 ? t.skinWeights[i + 2] : 0,e > 3 ? t.skinWeights[i + 3] : 0));
                    if (t.skinIndices)
                        for (i = 0,
                        o = t.skinIndices.length; o > i; i += e)
                            n.skinIndices.push(new r.Vector4(t.skinIndices[i],e > 1 ? t.skinIndices[i + 1] : 0,e > 2 ? t.skinIndices[i + 2] : 0,e > 3 ? t.skinIndices[i + 3] : 0));
                    n.bones = t.bones,
                    n.bones && 0 < n.bones.length && (n.skinWeights.length !== n.skinIndices.length || n.skinIndices.length !== n.vertices.length) && console.warn("When skinning, number of vertices (" + n.vertices.length + "), skinIndices (" + n.skinIndices.length + "), and skinWeights (" + n.skinWeights.length + ") should match."),
                    n.animation = t.animation,
                    n.animations = t.animations
                }(),
                function(e) {
                    if (void 0 !== t.morphTargets) {
                        var i, o, a, s, l, h;
                        for (i = 0,
                        o = t.morphTargets.length; o > i; i++)
                            for (n.morphTargets[i] = {},
                            n.morphTargets[i].name = t.morphTargets[i].name,
                            n.morphTargets[i].vertices = [],
                            l = n.morphTargets[i].vertices,
                            h = t.morphTargets[i].vertices,
                            a = 0,
                            s = h.length; s > a; a += 3) {
                                var c = new r.Vector3;
                                c.x = h[a] * e,
                                c.y = h[a + 1] * e,
                                c.z = h[a + 2] * e,
                                l.push(c)
                            }
                    }
                    if (void 0 !== t.morphColors)
                        for (i = 0,
                        o = t.morphColors.length; o > i; i++)
                            for (n.morphColors[i] = {},
                            n.morphColors[i].name = t.morphColors[i].name,
                            n.morphColors[i].colors = [],
                            s = n.morphColors[i].colors,
                            l = t.morphColors[i].colors,
                            e = 0,
                            a = l.length; a > e; e += 3)
                                h = new r.Color(16755200),
                                h.setRGB(l[e], l[e + 1], l[e + 2]),
                                s.push(h)
                }(i),
                n.computeFaceNormals(),
                n.computeBoundingSphere(),
                void 0 === t.materials || 0 === t.materials.length ? {
                    geometry: n
                } : (i = r.Loader.prototype.initMaterials(t.materials, e, this.crossOrigin),
                {
                    geometry: n,
                    materials: i
                })
            }
        },
        r.LoadingManager = function(t, e, n) {
            var r = this
              , i = !1
              , o = 0
              , a = 0;
            this.onStart = void 0,
            this.onLoad = t,
            this.onProgress = e,
            this.onError = n,
            this.itemStart = function(t) {
                a++,
                !1 === i && void 0 !== r.onStart && r.onStart(t, o, a),
                i = !0
            }
            ,
            this.itemEnd = function(t) {
                o++,
                void 0 !== r.onProgress && r.onProgress(t, o, a),
                o === a && (i = !1,
                void 0 !== r.onLoad) && r.onLoad()
            }
            ,
            this.itemError = function(t) {
                void 0 !== r.onError && r.onError(t)
            }
        }
        ,
        r.DefaultLoadingManager = new r.LoadingManager,
        r.BufferGeometryLoader = function(t) {
            this.manager = void 0 !== t ? t : r.DefaultLoadingManager
        }
        ,
        r.BufferGeometryLoader.prototype = {
            constructor: r.BufferGeometryLoader,
            load: function(t, e, n, i) {
                var o = this
                  , a = new r.XHRLoader(o.manager);
                a.setCrossOrigin(this.crossOrigin),
                a.load(t, function(t) {
                    e(o.parse(JSON.parse(t)))
                }, n, i)
            },
            setCrossOrigin: function(t) {
                this.crossOrigin = t
            },
            parse: function(t) {
                var e = new r.BufferGeometry
                  , n = t.data.index;
                void 0 !== n && (n = new self[n.type](n.array),
                e.setIndex(new r.BufferAttribute(n,1)));
                var i, o = t.data.attributes;
                for (i in o) {
                    var a = o[i]
                      , n = new self[a.type](a.array);
                    e.addAttribute(i, new r.BufferAttribute(n,a.itemSize))
                }
                if (i = t.data.groups || t.data.drawcalls || t.data.offsets,
                void 0 !== i)
                    for (n = 0,
                    o = i.length; n !== o; ++n)
                        a = i[n],
                        e.addGroup(a.start, a.count);
                return t = t.data.boundingSphere,
                void 0 !== t && (i = new r.Vector3,
                void 0 !== t.center && i.fromArray(t.center),
                e.boundingSphere = new r.Sphere(i,t.radius)),
                e
            }
        },
        r.MaterialLoader = function(t) {
            this.manager = void 0 !== t ? t : r.DefaultLoadingManager,
            this.textures = {}
        }
        ,
        r.MaterialLoader.prototype = {
            constructor: r.MaterialLoader,
            load: function(t, e, n, i) {
                var o = this
                  , a = new r.XHRLoader(o.manager);
                a.setCrossOrigin(this.crossOrigin),
                a.load(t, function(t) {
                    e(o.parse(JSON.parse(t)))
                }, n, i)
            },
            setCrossOrigin: function(t) {
                this.crossOrigin = t
            },
            setTextures: function(t) {
                this.textures = t
            },
            getTexture: function(t) {
                var e = this.textures;
                return void 0 === e[t] && console.warn("THREE.MaterialLoader: Undefined texture", t),
                e[t]
            },
            parse: function(t) {
                var e = new r[t.type];
                if (e.uuid = t.uuid,
                void 0 !== t.name && (e.name = t.name),
                void 0 !== t.color && e.color.setHex(t.color),
                void 0 !== t.emissive && e.emissive.setHex(t.emissive),
                void 0 !== t.specular && e.specular.setHex(t.specular),
                void 0 !== t.shininess && (e.shininess = t.shininess),
                void 0 !== t.uniforms && (e.uniforms = t.uniforms),
                void 0 !== t.vertexShader && (e.vertexShader = t.vertexShader),
                void 0 !== t.fragmentShader && (e.fragmentShader = t.fragmentShader),
                void 0 !== t.vertexColors && (e.vertexColors = t.vertexColors),
                void 0 !== t.shading && (e.shading = t.shading),
                void 0 !== t.blending && (e.blending = t.blending),
                void 0 !== t.side && (e.side = t.side),
                void 0 !== t.opacity && (e.opacity = t.opacity),
                void 0 !== t.transparent && (e.transparent = t.transparent),
                void 0 !== t.alphaTest && (e.alphaTest = t.alphaTest),
                void 0 !== t.depthTest && (e.depthTest = t.depthTest),
                void 0 !== t.depthWrite && (e.depthWrite = t.depthWrite),
                void 0 !== t.wireframe && (e.wireframe = t.wireframe),
                void 0 !== t.wireframeLinewidth && (e.wireframeLinewidth = t.wireframeLinewidth),
                void 0 !== t.size && (e.size = t.size),
                void 0 !== t.sizeAttenuation && (e.sizeAttenuation = t.sizeAttenuation),
                void 0 !== t.map && (e.map = this.getTexture(t.map)),
                void 0 !== t.alphaMap && (e.alphaMap = this.getTexture(t.alphaMap),
                e.transparent = !0),
                void 0 !== t.bumpMap && (e.bumpMap = this.getTexture(t.bumpMap)),
                void 0 !== t.bumpScale && (e.bumpScale = t.bumpScale),
                void 0 !== t.normalMap && (e.normalMap = this.getTexture(t.normalMap)),
                t.normalScale && (e.normalScale = new r.Vector2(t.normalScale,t.normalScale)),
                void 0 !== t.displacementMap && (e.displacementMap = this.getTexture(t.displacementMap)),
                void 0 !== t.displacementScale && (e.displacementScale = t.displacementScale),
                void 0 !== t.displacementBias && (e.displacementBias = t.displacementBias),
                void 0 !== t.specularMap && (e.specularMap = this.getTexture(t.specularMap)),
                void 0 !== t.envMap && (e.envMap = this.getTexture(t.envMap),
                e.combine = r.MultiplyOperation),
                t.reflectivity && (e.reflectivity = t.reflectivity),
                void 0 !== t.lightMap && (e.lightMap = this.getTexture(t.lightMap)),
                void 0 !== t.lightMapIntensity && (e.lightMapIntensity = t.lightMapIntensity),
                void 0 !== t.aoMap && (e.aoMap = this.getTexture(t.aoMap)),
                void 0 !== t.aoMapIntensity && (e.aoMapIntensity = t.aoMapIntensity),
                void 0 !== t.materials)
                    for (var n = 0, i = t.materials.length; i > n; n++)
                        e.materials.push(this.parse(t.materials[n]));
                return e
            }
        },
        r.ObjectLoader = function(t) {
            this.manager = void 0 !== t ? t : r.DefaultLoadingManager,
            this.texturePath = ""
        }
        ,
        r.ObjectLoader.prototype = {
            constructor: r.ObjectLoader,
            load: function(t, e, n, i) {
                "" === this.texturePath && (this.texturePath = t.substring(0, t.lastIndexOf("/") + 1));
                var o = this
                  , a = new r.XHRLoader(o.manager);
                a.setCrossOrigin(this.crossOrigin),
                a.load(t, function(t) {
                    o.parse(JSON.parse(t), e)
                }, n, i)
            },
            setTexturePath: function(t) {
                this.texturePath = t
            },
            setCrossOrigin: function(t) {
                this.crossOrigin = t
            },
            parse: function(t, e) {
                var n = this.parseGeometries(t.geometries)
                  , r = this.parseImages(t.images, function() {
                    void 0 !== e && e(i)
                })
                  , r = this.parseTextures(t.textures, r)
                  , r = this.parseMaterials(t.materials, r)
                  , i = this.parseObject(t.object, n, r);
                return void 0 !== t.images && 0 !== t.images.length || void 0 === e || e(i),
                i
            },
            parseGeometries: function(t) {
                var e = {};
                if (void 0 !== t)
                    for (var n = new r.JSONLoader, i = new r.BufferGeometryLoader, o = 0, a = t.length; a > o; o++) {
                        var s, l = t[o];
                        switch (l.type) {
                        case "PlaneGeometry":
                        case "PlaneBufferGeometry":
                            s = new r[l.type](l.width,l.height,l.widthSegments,l.heightSegments);
                            break;
                        case "BoxGeometry":
                        case "CubeGeometry":
                            s = new r.BoxGeometry(l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);
                            break;
                        case "CircleBufferGeometry":
                            s = new r.CircleBufferGeometry(l.radius,l.segments,l.thetaStart,l.thetaLength);
                            break;
                        case "CircleGeometry":
                            s = new r.CircleGeometry(l.radius,l.segments,l.thetaStart,l.thetaLength);
                            break;
                        case "CylinderGeometry":
                            s = new r.CylinderGeometry(l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);
                            break;
                        case "SphereGeometry":
                            s = new r.SphereGeometry(l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);
                            break;
                        case "SphereBufferGeometry":
                            s = new r.SphereBufferGeometry(l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);
                            break;
                        case "DodecahedronGeometry":
                            s = new r.DodecahedronGeometry(l.radius,l.detail);
                            break;
                        case "IcosahedronGeometry":
                            s = new r.IcosahedronGeometry(l.radius,l.detail);
                            break;
                        case "OctahedronGeometry":
                            s = new r.OctahedronGeometry(l.radius,l.detail);
                            break;
                        case "TetrahedronGeometry":
                            s = new r.TetrahedronGeometry(l.radius,l.detail);
                            break;
                        case "RingGeometry":
                            s = new r.RingGeometry(l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);
                            break;
                        case "TorusGeometry":
                            s = new r.TorusGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);
                            break;
                        case "TorusKnotGeometry":
                            s = new r.TorusKnotGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.p,l.q,l.heightScale);
                            break;
                        case "TextGeometry":
                            s = new r.TextGeometry(l.text,l.data);
                            break;
                        case "BufferGeometry":
                            s = i.parse(l);
                            break;
                        case "Geometry":
                            s = n.parse(l.data, this.texturePath).geometry;
                            break;
                        default:
                            console.warn('THREE.ObjectLoader: Unsupported geometry type "' + l.type + '"');
                            continue
                        }
                        s.uuid = l.uuid,
                        void 0 !== l.name && (s.name = l.name),
                        e[l.uuid] = s
                    }
                return e
            },
            parseMaterials: function(t, e) {
                var n = {};
                if (void 0 !== t) {
                    var i = new r.MaterialLoader;
                    i.setTextures(e);
                    for (var o = 0, a = t.length; a > o; o++) {
                        var s = i.parse(t[o]);
                        n[s.uuid] = s
                    }
                }
                return n
            },
            parseImages: function(t, e) {
                function n(t) {
                    return i.manager.itemStart(t),
                    s.load(t, function() {
                        i.manager.itemEnd(t)
                    })
                }
                var i = this
                  , o = {};
                if (void 0 !== t && 0 < t.length) {
                    var a = new r.LoadingManager(e)
                      , s = new r.ImageLoader(a);
                    s.setCrossOrigin(this.crossOrigin);
                    for (var a = 0, l = t.length; l > a; a++) {
                        var h = t[a]
                          , c = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url) ? h.url : i.texturePath + h.url;
                        o[h.uuid] = n(c)
                    }
                }
                return o
            },
            parseTextures: function(t, e) {
                function n(t) {
                    return "number" == typeof t ? t : (console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.", t),
                    r[t])
                }
                var i = {};
                if (void 0 !== t)
                    for (var o = 0, a = t.length; a > o; o++) {
                        var s = t[o];
                        void 0 === s.image && console.warn('THREE.ObjectLoader: No "image" specified for', s.uuid),
                        void 0 === e[s.image] && console.warn("THREE.ObjectLoader: Undefined image", s.image);
                        var l = new r.Texture(e[s.image]);
                        l.needsUpdate = !0,
                        l.uuid = s.uuid,
                        void 0 !== s.name && (l.name = s.name),
                        void 0 !== s.mapping && (l.mapping = n(s.mapping)),
                        void 0 !== s.offset && (l.offset = new r.Vector2(s.offset[0],s.offset[1])),
                        void 0 !== s.repeat && (l.repeat = new r.Vector2(s.repeat[0],s.repeat[1])),
                        void 0 !== s.minFilter && (l.minFilter = n(s.minFilter)),
                        void 0 !== s.magFilter && (l.magFilter = n(s.magFilter)),
                        void 0 !== s.anisotropy && (l.anisotropy = s.anisotropy),
                        Array.isArray(s.wrap) && (l.wrapS = n(s.wrap[0]),
                        l.wrapT = n(s.wrap[1])),
                        i[s.uuid] = l
                    }
                return i
            },
            parseObject: function() {
                var t = new r.Matrix4;
                return function(e, n, i) {
                    var o;
                    o = function(t) {
                        return void 0 === n[t] && console.warn("THREE.ObjectLoader: Undefined geometry", t),
                        n[t]
                    }
                    ;
                    var a = function(t) {
                        return void 0 === i[t] && console.warn("THREE.ObjectLoader: Undefined material", t),
                        i[t]
                    };
                    switch (e.type) {
                    case "Scene":
                        o = new r.Scene;
                        break;
                    case "PerspectiveCamera":
                        o = new r.PerspectiveCamera(e.fov,e.aspect,e.near,e.far);
                        break;
                    case "OrthographicCamera":
                        o = new r.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);
                        break;
                    case "AmbientLight":
                        o = new r.AmbientLight(e.color);
                        break;
                    case "DirectionalLight":
                        o = new r.DirectionalLight(e.color,e.intensity);
                        break;
                    case "PointLight":
                        o = new r.PointLight(e.color,e.intensity,e.distance,e.decay);
                        break;
                    case "SpotLight":
                        o = new r.SpotLight(e.color,e.intensity,e.distance,e.angle,e.exponent,e.decay);
                        break;
                    case "HemisphereLight":
                        o = new r.HemisphereLight(e.color,e.groundColor,e.intensity);
                        break;
                    case "Mesh":
                        o = new r.Mesh(o(e.geometry),a(e.material));
                        break;
                    case "LOD":
                        o = new r.LOD;
                        break;
                    case "Line":
                        o = new r.Line(o(e.geometry),a(e.material),e.mode);
                        break;
                    case "PointCloud":
                    case "Points":
                        o = new r.Points(o(e.geometry),a(e.material));
                        break;
                    case "Sprite":
                        o = new r.Sprite(a(e.material));
                        break;
                    case "Group":
                        o = new r.Group;
                        break;
                    default:
                        o = new r.Object3D
                    }
                    if (o.uuid = e.uuid,
                    void 0 !== e.name && (o.name = e.name),
                    void 0 !== e.matrix ? (t.fromArray(e.matrix),
                    t.decompose(o.position, o.quaternion, o.scale)) : (void 0 !== e.position && o.position.fromArray(e.position),
                    void 0 !== e.rotation && o.rotation.fromArray(e.rotation),
                    void 0 !== e.scale && o.scale.fromArray(e.scale)),
                    void 0 !== e.castShadow && (o.castShadow = e.castShadow),
                    void 0 !== e.receiveShadow && (o.receiveShadow = e.receiveShadow),
                    void 0 !== e.visible && (o.visible = e.visible),
                    void 0 !== e.userData && (o.userData = e.userData),
                    void 0 !== e.children)
                        for (var s in e.children)
                            o.add(this.parseObject(e.children[s], n, i));
                    if ("LOD" === e.type)
                        for (e = e.levels,
                        a = 0; a < e.length; a++) {
                            var l = e[a];
                            s = o.getObjectByProperty("uuid", l.object),
                            void 0 !== s && o.addLevel(s, l.distance)
                        }
                    return o
                }
            }()
        },
        r.TextureLoader = function(t) {
            this.manager = void 0 !== t ? t : r.DefaultLoadingManager
        }
        ,
        r.TextureLoader.prototype = {
            constructor: r.TextureLoader,
            load: function(t, e, n, i) {
                var o = new r.ImageLoader(this.manager);
                o.setCrossOrigin(this.crossOrigin),
                o.load(t, function(t) {
                    t = new r.Texture(t),
                    t.needsUpdate = !0,
                    void 0 !== e && e(t)
                }, n, i)
            },
            setCrossOrigin: function(t) {
                this.crossOrigin = t
            }
        },
        r.DataTextureLoader = r.BinaryTextureLoader = function(t) {
            this.manager = void 0 !== t ? t : r.DefaultLoadingManager,
            this._parser = null
        }
        ,
        r.BinaryTextureLoader.prototype = {
            constructor: r.BinaryTextureLoader,
            load: function(t, e, n, i) {
                var o = this
                  , a = new r.DataTexture
                  , s = new r.XHRLoader(this.manager);
                return s.setCrossOrigin(this.crossOrigin),
                s.setResponseType("arraybuffer"),
                s.load(t, function(t) {
                    (t = o._parser(t)) && (void 0 !== t.image ? a.image = t.image : void 0 !== t.data && (a.image.width = t.width,
                    a.image.height = t.height,
                    a.image.data = t.data),
                    a.wrapS = void 0 !== t.wrapS ? t.wrapS : r.ClampToEdgeWrapping,
                    a.wrapT = void 0 !== t.wrapT ? t.wrapT : r.ClampToEdgeWrapping,
                    a.magFilter = void 0 !== t.magFilter ? t.magFilter : r.LinearFilter,
                    a.minFilter = void 0 !== t.minFilter ? t.minFilter : r.LinearMipMapLinearFilter,
                    a.anisotropy = void 0 !== t.anisotropy ? t.anisotropy : 1,
                    void 0 !== t.format && (a.format = t.format),
                    void 0 !== t.type && (a.type = t.type),
                    void 0 !== t.mipmaps && (a.mipmaps = t.mipmaps),
                    1 === t.mipmapCount && (a.minFilter = r.LinearFilter),
                    a.needsUpdate = !0,
                    e && e(a, t))
                }, n, i),
                a
            },
            setCrossOrigin: function(t) {
                this.crossOrigin = t
            }
        },
        r.CompressedTextureLoader = function(t) {
            this.manager = void 0 !== t ? t : r.DefaultLoadingManager,
            this._parser = null
        }
        ,
        r.CompressedTextureLoader.prototype = {
            constructor: r.CompressedTextureLoader,
            load: function(t, e, n, i) {
                var o = this
                  , a = []
                  , s = new r.CompressedTexture;
                s.image = a;
                var l = new r.XHRLoader(this.manager);
                if (l.setCrossOrigin(this.crossOrigin),
                l.setResponseType("arraybuffer"),
                Array.isArray(t))
                    for (var h = 0, c = function(c) {
                        l.load(t[c], function(t) {
                            t = o._parser(t, !0),
                            a[c] = {
                                width: t.width,
                                height: t.height,
                                format: t.format,
                                mipmaps: t.mipmaps
                            },
                            h += 1,
                            6 === h && (1 === t.mipmapCount && (s.minFilter = r.LinearFilter),
                            s.format = t.format,
                            s.needsUpdate = !0,
                            e && e(s))
                        }, n, i)
                    }, u = 0, p = t.length; p > u; ++u)
                        c(u);
                else
                    l.load(t, function(t) {
                        if (t = o._parser(t, !0),
                        t.isCubemap)
                            for (var n = t.mipmaps.length / t.mipmapCount, i = 0; n > i; i++) {
                                a[i] = {
                                    mipmaps: []
                                };
                                for (var l = 0; l < t.mipmapCount; l++)
                                    a[i].mipmaps.push(t.mipmaps[i * t.mipmapCount + l]),
                                    a[i].format = t.format,
                                    a[i].width = t.width,
                                    a[i].height = t.height
                            }
                        else
                            s.image.width = t.width,
                            s.image.height = t.height,
                            s.mipmaps = t.mipmaps;
                        1 === t.mipmapCount && (s.minFilter = r.LinearFilter),
                        s.format = t.format,
                        s.needsUpdate = !0,
                        e && e(s)
                    }, n, i);
                return s
            },
            setCrossOrigin: function(t) {
                this.crossOrigin = t
            }
        },
        r.Material = function() {
            Object.defineProperty(this, "id", {
                value: r.MaterialIdCount++
            }),
            this.uuid = r.Math.generateUUID(),
            this.name = "",
            this.type = "Material",
            this.side = r.FrontSide,
            this.opacity = 1,
            this.transparent = !1,
            this.blending = r.NormalBlending,
            this.blendSrc = r.SrcAlphaFactor,
            this.blendDst = r.OneMinusSrcAlphaFactor,
            this.blendEquation = r.AddEquation,
            this.blendEquationAlpha = this.blendDstAlpha = this.blendSrcAlpha = null ,
            this.depthFunc = r.LessEqualDepth,
            this.colorWrite = this.depthWrite = this.depthTest = !0,
            this.precision = null ,
            this.polygonOffset = !1,
            this.overdraw = this.alphaTest = this.polygonOffsetUnits = this.polygonOffsetFactor = 0,
            this._needsUpdate = this.visible = !0
        }
        ,
        r.Material.prototype = {
            constructor: r.Material,
            get needsUpdate() {
                return this._needsUpdate
            },
            set needsUpdate(t) {
                !0 === t && this.update(),
                this._needsUpdate = t
            },
            setValues: function(t) {
                if (void 0 !== t)
                    for (var e in t) {
                        var n = t[e];
                        if (void 0 === n)
                            console.warn("THREE.Material: '" + e + "' parameter is undefined.");
                        else {
                            var i = this[e];
                            void 0 === i ? console.warn("THREE." + this.type + ": '" + e + "' is not a property of this material.") : i instanceof r.Color ? i.set(n) : i instanceof r.Vector3 && n instanceof r.Vector3 ? i.copy(n) : this[e] = "overdraw" === e ? Number(n) : n
                        }
                    }
            },
            toJSON: function(t) {
                var e = {
                    metadata: {
                        version: 4.4,
                        type: "Material",
                        generator: "Material.toJSON"
                    }
                };
                return e.uuid = this.uuid,
                e.type = this.type,
                "" !== this.name && (e.name = this.name),
                this.color instanceof r.Color && (e.color = this.color.getHex()),
                this.emissive instanceof r.Color && (e.emissive = this.emissive.getHex()),
                this.specular instanceof r.Color && (e.specular = this.specular.getHex()),
                void 0 !== this.shininess && (e.shininess = this.shininess),
                this.map instanceof r.Texture && (e.map = this.map.toJSON(t).uuid),
                this.alphaMap instanceof r.Texture && (e.alphaMap = this.alphaMap.toJSON(t).uuid),
                this.lightMap instanceof r.Texture && (e.lightMap = this.lightMap.toJSON(t).uuid),
                this.bumpMap instanceof r.Texture && (e.bumpMap = this.bumpMap.toJSON(t).uuid,
                e.bumpScale = this.bumpScale),
                this.normalMap instanceof r.Texture && (e.normalMap = this.normalMap.toJSON(t).uuid,
                e.normalScale = this.normalScale),
                this.displacementMap instanceof r.Texture && (e.displacementMap = this.displacementMap.toJSON(t).uuid,
                e.displacementScale = this.displacementScale,
                e.displacementBias = this.displacementBias),
                this.specularMap instanceof r.Texture && (e.specularMap = this.specularMap.toJSON(t).uuid),
                this.envMap instanceof r.Texture && (e.envMap = this.envMap.toJSON(t).uuid,
                e.reflectivity = this.reflectivity),
                void 0 !== this.size && (e.size = this.size),
                void 0 !== this.sizeAttenuation && (e.sizeAttenuation = this.sizeAttenuation),
                void 0 !== this.vertexColors && this.vertexColors !== r.NoColors && (e.vertexColors = this.vertexColors),
                void 0 !== this.shading && this.shading !== r.SmoothShading && (e.shading = this.shading),
                void 0 !== this.blending && this.blending !== r.NormalBlending && (e.blending = this.blending),
                void 0 !== this.side && this.side !== r.FrontSide && (e.side = this.side),
                1 > this.opacity && (e.opacity = this.opacity),
                !0 === this.transparent && (e.transparent = this.transparent),
                0 < this.alphaTest && (e.alphaTest = this.alphaTest),
                !0 === this.wireframe && (e.wireframe = this.wireframe),
                1 < this.wireframeLinewidth && (e.wireframeLinewidth = this.wireframeLinewidth),
                e
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                return this.name = t.name,
                this.side = t.side,
                this.opacity = t.opacity,
                this.transparent = t.transparent,
                this.blending = t.blending,
                this.blendSrc = t.blendSrc,
                this.blendDst = t.blendDst,
                this.blendEquation = t.blendEquation,
                this.blendSrcAlpha = t.blendSrcAlpha,
                this.blendDstAlpha = t.blendDstAlpha,
                this.blendEquationAlpha = t.blendEquationAlpha,
                this.depthFunc = t.depthFunc,
                this.depthTest = t.depthTest,
                this.depthWrite = t.depthWrite,
                this.precision = t.precision,
                this.polygonOffset = t.polygonOffset,
                this.polygonOffsetFactor = t.polygonOffsetFactor,
                this.polygonOffsetUnits = t.polygonOffsetUnits,
                this.alphaTest = t.alphaTest,
                this.overdraw = t.overdraw,
                this.visible = t.visible,
                this
            },
            update: function() {
                this.dispatchEvent({
                    type: "update"
                })
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            },
            get wrapAround() {
                console.warn("THREE." + this.type + ": .wrapAround has been removed.")
            },
            set wrapAround(t) {
                console.warn("THREE." + this.type + ": .wrapAround has been removed.")
            },
            get wrapRGB() {
                return console.warn("THREE." + this.type + ": .wrapRGB has been removed."),
                new r.Color
            }
        },
        r.EventDispatcher.prototype.apply(r.Material.prototype),
        r.MaterialIdCount = 0,
        r.LineBasicMaterial = function(t) {
            r.Material.call(this),
            this.type = "LineBasicMaterial",
            this.color = new r.Color(16777215),
            this.linewidth = 1,
            this.linejoin = this.linecap = "round",
            this.vertexColors = r.NoColors,
            this.fog = !0,
            this.setValues(t)
        }
        ,
        r.LineBasicMaterial.prototype = Object.create(r.Material.prototype),
        r.LineBasicMaterial.prototype.constructor = r.LineBasicMaterial,
        r.LineBasicMaterial.prototype.copy = function(t) {
            return r.Material.prototype.copy.call(this, t),
            this.color.copy(t.color),
            this.linewidth = t.linewidth,
            this.linecap = t.linecap,
            this.linejoin = t.linejoin,
            this.vertexColors = t.vertexColors,
            this.fog = t.fog,
            this
        }
        ,
        r.LineDashedMaterial = function(t) {
            r.Material.call(this),
            this.type = "LineDashedMaterial",
            this.color = new r.Color(16777215),
            this.scale = this.linewidth = 1,
            this.dashSize = 3,
            this.gapSize = 1,
            this.vertexColors = !1,
            this.fog = !0,
            this.setValues(t)
        }
        ,
        r.LineDashedMaterial.prototype = Object.create(r.Material.prototype),
        r.LineDashedMaterial.prototype.constructor = r.LineDashedMaterial,
        r.LineDashedMaterial.prototype.copy = function(t) {
            return r.Material.prototype.copy.call(this, t),
            this.color.copy(t.color),
            this.linewidth = t.linewidth,
            this.scale = t.scale,
            this.dashSize = t.dashSize,
            this.gapSize = t.gapSize,
            this.vertexColors = t.vertexColors,
            this.fog = t.fog,
            this
        }
        ,
        r.MeshBasicMaterial = function(t) {
            r.Material.call(this),
            this.type = "MeshBasicMaterial",
            this.color = new r.Color(16777215),
            this.aoMap = this.map = null ,
            this.aoMapIntensity = 1,
            this.envMap = this.alphaMap = this.specularMap = null ,
            this.combine = r.MultiplyOperation,
            this.reflectivity = 1,
            this.refractionRatio = .98,
            this.fog = !0,
            this.shading = r.SmoothShading,
            this.wireframe = !1,
            this.wireframeLinewidth = 1,
            this.wireframeLinejoin = this.wireframeLinecap = "round",
            this.vertexColors = r.NoColors,
            this.morphTargets = this.skinning = !1,
            this.setValues(t)
        }
        ,
        r.MeshBasicMaterial.prototype = Object.create(r.Material.prototype),
        r.MeshBasicMaterial.prototype.constructor = r.MeshBasicMaterial,
        r.MeshBasicMaterial.prototype.copy = function(t) {
            return r.Material.prototype.copy.call(this, t),
            this.color.copy(t.color),
            this.map = t.map,
            this.aoMap = t.aoMap,
            this.aoMapIntensity = t.aoMapIntensity,
            this.specularMap = t.specularMap,
            this.alphaMap = t.alphaMap,
            this.envMap = t.envMap,
            this.combine = t.combine,
            this.reflectivity = t.reflectivity,
            this.refractionRatio = t.refractionRatio,
            this.fog = t.fog,
            this.shading = t.shading,
            this.wireframe = t.wireframe,
            this.wireframeLinewidth = t.wireframeLinewidth,
            this.wireframeLinecap = t.wireframeLinecap,
            this.wireframeLinejoin = t.wireframeLinejoin,
            this.vertexColors = t.vertexColors,
            this.skinning = t.skinning,
            this.morphTargets = t.morphTargets,
            this
        }
        ,
        r.MeshLambertMaterial = function(t) {
            r.Material.call(this),
            this.type = "MeshLambertMaterial",
            this.color = new r.Color(16777215),
            this.emissive = new r.Color(0),
            this.envMap = this.alphaMap = this.specularMap = this.map = null ,
            this.combine = r.MultiplyOperation,
            this.reflectivity = 1,
            this.refractionRatio = .98,
            this.fog = !0,
            this.wireframe = !1,
            this.wireframeLinewidth = 1,
            this.wireframeLinejoin = this.wireframeLinecap = "round",
            this.vertexColors = r.NoColors,
            this.morphNormals = this.morphTargets = this.skinning = !1,
            this.setValues(t)
        }
        ,
        r.MeshLambertMaterial.prototype = Object.create(r.Material.prototype),
        r.MeshLambertMaterial.prototype.constructor = r.MeshLambertMaterial,
        r.MeshLambertMaterial.prototype.copy = function(t) {
            return r.Material.prototype.copy.call(this, t),
            this.color.copy(t.color),
            this.emissive.copy(t.emissive),
            this.map = t.map,
            this.specularMap = t.specularMap,
            this.alphaMap = t.alphaMap,
            this.envMap = t.envMap,
            this.combine = t.combine,
            this.reflectivity = t.reflectivity,
            this.refractionRatio = t.refractionRatio,
            this.fog = t.fog,
            this.wireframe = t.wireframe,
            this.wireframeLinewidth = t.wireframeLinewidth,
            this.wireframeLinecap = t.wireframeLinecap,
            this.wireframeLinejoin = t.wireframeLinejoin,
            this.vertexColors = t.vertexColors,
            this.skinning = t.skinning,
            this.morphTargets = t.morphTargets,
            this.morphNormals = t.morphNormals,
            this
        }
        ,
        r.MeshPhongMaterial = function(t) {
            r.Material.call(this),
            this.type = "MeshPhongMaterial",
            this.color = new r.Color(16777215),
            this.emissive = new r.Color(0),
            this.specular = new r.Color(1118481),
            this.shininess = 30,
            this.metal = !1,
            this.lightMap = this.map = null ,
            this.lightMapIntensity = 1,
            this.aoMap = null ,
            this.aoMapIntensity = 1,
            this.bumpMap = this.emissiveMap = null ,
            this.bumpScale = 1,
            this.normalMap = null ,
            this.normalScale = new r.Vector2(1,1),
            this.displacementMap = null ,
            this.displacementScale = 1,
            this.displacementBias = 0,
            this.envMap = this.alphaMap = this.specularMap = null ,
            this.combine = r.MultiplyOperation,
            this.reflectivity = 1,
            this.refractionRatio = .98,
            this.fog = !0,
            this.shading = r.SmoothShading,
            this.wireframe = !1,
            this.wireframeLinewidth = 1,
            this.wireframeLinejoin = this.wireframeLinecap = "round",
            this.vertexColors = r.NoColors,
            this.morphNormals = this.morphTargets = this.skinning = !1,
            this.setValues(t)
        }
        ,
        r.MeshPhongMaterial.prototype = Object.create(r.Material.prototype),
        r.MeshPhongMaterial.prototype.constructor = r.MeshPhongMaterial,
        r.MeshPhongMaterial.prototype.copy = function(t) {
            return r.Material.prototype.copy.call(this, t),
            this.color.copy(t.color),
            this.emissive.copy(t.emissive),
            this.specular.copy(t.specular),
            this.shininess = t.shininess,
            this.metal = t.metal,
            this.map = t.map,
            this.lightMap = t.lightMap,
            this.lightMapIntensity = t.lightMapIntensity,
            this.aoMap = t.aoMap,
            this.aoMapIntensity = t.aoMapIntensity,
            this.emissiveMap = t.emissiveMap,
            this.bumpMap = t.bumpMap,
            this.bumpScale = t.bumpScale,
            this.normalMap = t.normalMap,
            this.normalScale.copy(t.normalScale),
            this.displacementMap = t.displacementMap,
            this.displacementScale = t.displacementScale,
            this.displacementBias = t.displacementBias,
            this.specularMap = t.specularMap,
            this.alphaMap = t.alphaMap,
            this.envMap = t.envMap,
            this.combine = t.combine,
            this.reflectivity = t.reflectivity,
            this.refractionRatio = t.refractionRatio,
            this.fog = t.fog,
            this.shading = t.shading,
            this.wireframe = t.wireframe,
            this.wireframeLinewidth = t.wireframeLinewidth,
            this.wireframeLinecap = t.wireframeLinecap,
            this.wireframeLinejoin = t.wireframeLinejoin,
            this.vertexColors = t.vertexColors,
            this.skinning = t.skinning,
            this.morphTargets = t.morphTargets,
            this.morphNormals = t.morphNormals,
            this
        }
        ,
        r.MeshDepthMaterial = function(t) {
            r.Material.call(this),
            this.type = "MeshDepthMaterial",
            this.wireframe = this.morphTargets = !1,
            this.wireframeLinewidth = 1,
            this.setValues(t)
        }
        ,
        r.MeshDepthMaterial.prototype = Object.create(r.Material.prototype),
        r.MeshDepthMaterial.prototype.constructor = r.MeshDepthMaterial,
        r.MeshDepthMaterial.prototype.copy = function(t) {
            return r.Material.prototype.copy.call(this, t),
            this.wireframe = t.wireframe,
            this.wireframeLinewidth = t.wireframeLinewidth,
            this
        }
        ,
        r.MeshNormalMaterial = function(t) {
            r.Material.call(this, t),
            this.type = "MeshNormalMaterial",
            this.wireframe = !1,
            this.wireframeLinewidth = 1,
            this.morphTargets = !1,
            this.setValues(t)
        }
        ,
        r.MeshNormalMaterial.prototype = Object.create(r.Material.prototype),
        r.MeshNormalMaterial.prototype.constructor = r.MeshNormalMaterial,
        r.MeshNormalMaterial.prototype.copy = function(t) {
            return r.Material.prototype.copy.call(this, t),
            this.wireframe = t.wireframe,
            this.wireframeLinewidth = t.wireframeLinewidth,
            this
        }
        ,
        r.MultiMaterial = function(t) {
            this.uuid = r.Math.generateUUID(),
            this.type = "MultiMaterial",
            this.materials = t instanceof Array ? t : [],
            this.visible = !0
        }
        ,
        r.MultiMaterial.prototype = {
            constructor: r.MultiMaterial,
            toJSON: function() {
                for (var t = {
                    metadata: {
                        version: 4.2,
                        type: "material",
                        generator: "MaterialExporter"
                    },
                    uuid: this.uuid,
                    type: this.type,
                    materials: []
                }, e = 0, n = this.materials.length; n > e; e++)
                    t.materials.push(this.materials[e].toJSON());
                return t.visible = this.visible,
                t
            },
            clone: function() {
                for (var t = new this.constructor, e = 0; e < this.materials.length; e++)
                    t.materials.push(this.materials[e].clone());
                return t.visible = this.visible,
                t
            }
        },
        r.MeshFaceMaterial = r.MultiMaterial,
        r.PointsMaterial = function(t) {
            r.Material.call(this),
            this.type = "PointsMaterial",
            this.color = new r.Color(16777215),
            this.map = null ,
            this.size = 1,
            this.sizeAttenuation = !0,
            this.vertexColors = r.NoColors,
            this.fog = !0,
            this.setValues(t)
        }
        ,
        r.PointsMaterial.prototype = Object.create(r.Material.prototype),
        r.PointsMaterial.prototype.constructor = r.PointsMaterial,
        r.PointsMaterial.prototype.copy = function(t) {
            return r.Material.prototype.copy.call(this, t),
            this.color.copy(t.color),
            this.map = t.map,
            this.size = t.size,
            this.sizeAttenuation = t.sizeAttenuation,
            this.vertexColors = t.vertexColors,
            this.fog = t.fog,
            this
        }
        ,
        r.PointCloudMaterial = function(t) {
            return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),
            new r.PointsMaterial(t)
        }
        ,
        r.ParticleBasicMaterial = function(t) {
            return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),
            new r.PointsMaterial(t)
        }
        ,
        r.ParticleSystemMaterial = function(t) {
            return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),
            new r.PointsMaterial(t)
        }
        ,
        r.ShaderMaterial = function(t) {
            r.Material.call(this),
            this.type = "ShaderMaterial",
            this.defines = {},
            this.uniforms = {},
            this.vertexShader = "void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",
            this.fragmentShader = "void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",
            this.shading = r.SmoothShading,
            this.linewidth = 1,
            this.wireframe = !1,
            this.wireframeLinewidth = 1,
            this.lights = this.fog = !1,
            this.vertexColors = r.NoColors,
            this.derivatives = this.morphNormals = this.morphTargets = this.skinning = !1,
            this.defaultAttributeValues = {
                color: [1, 1, 1],
                uv: [0, 0],
                uv2: [0, 0]
            },
            this.index0AttributeName = void 0,
            void 0 !== t && (void 0 !== t.attributes && console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),
            this.setValues(t))
        }
        ,
        r.ShaderMaterial.prototype = Object.create(r.Material.prototype),
        r.ShaderMaterial.prototype.constructor = r.ShaderMaterial,
        r.ShaderMaterial.prototype.copy = function(t) {
            return r.Material.prototype.copy.call(this, t),
            this.fragmentShader = t.fragmentShader,
            this.vertexShader = t.vertexShader,
            this.uniforms = r.UniformsUtils.clone(t.uniforms),
            this.attributes = t.attributes,
            this.defines = t.defines,
            this.shading = t.shading,
            this.wireframe = t.wireframe,
            this.wireframeLinewidth = t.wireframeLinewidth,
            this.fog = t.fog,
            this.lights = t.lights,
            this.vertexColors = t.vertexColors,
            this.skinning = t.skinning,
            this.morphTargets = t.morphTargets,
            this.morphNormals = t.morphNormals,
            this.derivatives = t.derivatives,
            this
        }
        ,
        r.ShaderMaterial.prototype.toJSON = function(t) {
            return t = r.Material.prototype.toJSON.call(this, t),
            t.uniforms = this.uniforms,
            t.attributes = this.attributes,
            t.vertexShader = this.vertexShader,
            t.fragmentShader = this.fragmentShader,
            t
        }
        ,
        r.RawShaderMaterial = function(t) {
            r.ShaderMaterial.call(this, t),
            this.type = "RawShaderMaterial"
        }
        ,
        r.RawShaderMaterial.prototype = Object.create(r.ShaderMaterial.prototype),
        r.RawShaderMaterial.prototype.constructor = r.RawShaderMaterial,
        r.SpriteMaterial = function(t) {
            r.Material.call(this),
            this.type = "SpriteMaterial",
            this.color = new r.Color(16777215),
            this.map = null ,
            this.rotation = 0,
            this.fog = !1,
            this.setValues(t)
        }
        ,
        r.SpriteMaterial.prototype = Object.create(r.Material.prototype),
        r.SpriteMaterial.prototype.constructor = r.SpriteMaterial,
        r.SpriteMaterial.prototype.copy = function(t) {
            return r.Material.prototype.copy.call(this, t),
            this.color.copy(t.color),
            this.map = t.map,
            this.rotation = t.rotation,
            this.fog = t.fog,
            this
        }
        ,
        r.Texture = function(t, e, n, i, o, a, s, l, h) {
            Object.defineProperty(this, "id", {
                value: r.TextureIdCount++
            }),
            this.uuid = r.Math.generateUUID(),
            this.sourceFile = this.name = "",
            this.image = void 0 !== t ? t : r.Texture.DEFAULT_IMAGE,
            this.mipmaps = [],
            this.mapping = void 0 !== e ? e : r.Texture.DEFAULT_MAPPING,
            this.wrapS = void 0 !== n ? n : r.ClampToEdgeWrapping,
            this.wrapT = void 0 !== i ? i : r.ClampToEdgeWrapping,
            this.magFilter = void 0 !== o ? o : r.LinearFilter,
            this.minFilter = void 0 !== a ? a : r.LinearMipMapLinearFilter,
            this.anisotropy = void 0 !== h ? h : 1,
            this.format = void 0 !== s ? s : r.RGBAFormat,
            this.type = void 0 !== l ? l : r.UnsignedByteType,
            this.offset = new r.Vector2(0,0),
            this.repeat = new r.Vector2(1,1),
            this.generateMipmaps = !0,
            this.premultiplyAlpha = !1,
            this.flipY = !0,
            this.unpackAlignment = 4,
            this.version = 0,
            this.onUpdate = null
        }
        ,
        r.Texture.DEFAULT_IMAGE = void 0,
        r.Texture.DEFAULT_MAPPING = r.UVMapping,
        r.Texture.prototype = {
            constructor: r.Texture,
            set needsUpdate(t) {
                !0 === t && this.version++
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                return this.image = t.image,
                this.mipmaps = t.mipmaps.slice(0),
                this.mapping = t.mapping,
                this.wrapS = t.wrapS,
                this.wrapT = t.wrapT,
                this.magFilter = t.magFilter,
                this.minFilter = t.minFilter,
                this.anisotropy = t.anisotropy,
                this.format = t.format,
                this.type = t.type,
                this.offset.copy(t.offset),
                this.repeat.copy(t.repeat),
                this.generateMipmaps = t.generateMipmaps,
                this.premultiplyAlpha = t.premultiplyAlpha,
                this.flipY = t.flipY,
                this.unpackAlignment = t.unpackAlignment,
                this
            },
            toJSON: function(t) {
                if (void 0 !== t.textures[this.uuid])
                    return t.textures[this.uuid];
                var e = {
                    metadata: {
                        version: 4.4,
                        type: "Texture",
                        generator: "Texture.toJSON"
                    },
                    uuid: this.uuid,
                    name: this.name,
                    mapping: this.mapping,
                    repeat: [this.repeat.x, this.repeat.y],
                    offset: [this.offset.x, this.offset.y],
                    wrap: [this.wrapS, this.wrapT],
                    minFilter: this.minFilter,
                    magFilter: this.magFilter,
                    anisotropy: this.anisotropy
                };
                if (void 0 !== this.image) {
                    var n = this.image;
                    if (void 0 === n.uuid && (n.uuid = r.Math.generateUUID()),
                    void 0 === t.images[n.uuid]) {
                        var i, o = t.images, a = n.uuid, s = n.uuid;
                        void 0 !== n.toDataURL ? i = n : (i = document.createElement("canvas"),
                        i.width = n.width,
                        i.height = n.height,
                        i.getContext("2d").drawImage(n, 0, 0, n.width, n.height)),
                        i = 2048 < i.width || 2048 < i.height ? i.toDataURL("image/jpeg", .6) : i.toDataURL("image/png"),
                        o[a] = {
                            uuid: s,
                            url: i
                        }
                    }
                    e.image = n.uuid
                }
                return t.textures[this.uuid] = e
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            },
            transformUv: function(t) {
                if (this.mapping === r.UVMapping) {
                    if (t.multiply(this.repeat),
                    t.add(this.offset),
                    0 > t.x || 1 < t.x)
                        switch (this.wrapS) {
                        case r.RepeatWrapping:
                            t.x -= Math.floor(t.x);
                            break;
                        case r.ClampToEdgeWrapping:
                            t.x = 0 > t.x ? 0 : 1;
                            break;
                        case r.MirroredRepeatWrapping:
                            1 === Math.abs(Math.floor(t.x) % 2) ? t.x = Math.ceil(t.x) - t.x : t.x -= Math.floor(t.x)
                        }
                    if (0 > t.y || 1 < t.y)
                        switch (this.wrapT) {
                        case r.RepeatWrapping:
                            t.y -= Math.floor(t.y);
                            break;
                        case r.ClampToEdgeWrapping:
                            t.y = 0 > t.y ? 0 : 1;
                            break;
                        case r.MirroredRepeatWrapping:
                            1 === Math.abs(Math.floor(t.y) % 2) ? t.y = Math.ceil(t.y) - t.y : t.y -= Math.floor(t.y)
                        }
                    this.flipY && (t.y = 1 - t.y)
                }
            }
        },
        r.EventDispatcher.prototype.apply(r.Texture.prototype),
        r.TextureIdCount = 0,
        r.CanvasTexture = function(t, e, n, i, o, a, s, l, h) {
            r.Texture.call(this, t, e, n, i, o, a, s, l, h),
            this.needsUpdate = !0
        }
        ,
        r.CanvasTexture.prototype = Object.create(r.Texture.prototype),
        r.CanvasTexture.prototype.constructor = r.CanvasTexture,
        r.CubeTexture = function(t, e, n, i, o, a, s, l, h) {
            e = void 0 !== e ? e : r.CubeReflectionMapping,
            r.Texture.call(this, t, e, n, i, o, a, s, l, h),
            this.images = t,
            this.flipY = !1
        }
        ,
        r.CubeTexture.prototype = Object.create(r.Texture.prototype),
        r.CubeTexture.prototype.constructor = r.CubeTexture,
        r.CubeTexture.prototype.copy = function(t) {
            return r.Texture.prototype.copy.call(this, t),
            this.images = t.images,
            this
        }
        ,
        r.CompressedTexture = function(t, e, n, i, o, a, s, l, h, c, u) {
            r.Texture.call(this, null , a, s, l, h, c, i, o, u),
            this.image = {
                width: e,
                height: n
            },
            this.mipmaps = t,
            this.generateMipmaps = this.flipY = !1
        }
        ,
        r.CompressedTexture.prototype = Object.create(r.Texture.prototype),
        r.CompressedTexture.prototype.constructor = r.CompressedTexture,
        r.DataTexture = function(t, e, n, i, o, a, s, l, h, c, u) {
            r.Texture.call(this, null , a, s, l, h, c, i, o, u),
            this.image = {
                data: t,
                width: e,
                height: n
            },
            this.magFilter = void 0 !== h ? h : r.NearestFilter,
            this.minFilter = void 0 !== c ? c : r.NearestFilter,
            this.generateMipmaps = this.flipY = !1
        }
        ,
        r.DataTexture.prototype = Object.create(r.Texture.prototype),
        r.DataTexture.prototype.constructor = r.DataTexture,
        r.VideoTexture = function(t, e, n, i, o, a, s, l, h) {
            r.Texture.call(this, t, e, n, i, o, a, s, l, h),
            this.generateMipmaps = !1;
            var c = this
              , u = function() {
                requestAnimationFrame(u),
                t.readyState === t.HAVE_ENOUGH_DATA && (c.needsUpdate = !0)
            };
            u()
        }
        ,
        r.VideoTexture.prototype = Object.create(r.Texture.prototype),
        r.VideoTexture.prototype.constructor = r.VideoTexture,
        r.Group = function() {
            r.Object3D.call(this),
            this.type = "Group"
        }
        ,
        r.Group.prototype = Object.create(r.Object3D.prototype),
        r.Group.prototype.constructor = r.Group,
        r.Points = function(t, e) {
            r.Object3D.call(this),
            this.type = "Points",
            this.geometry = void 0 !== t ? t : new r.Geometry,
            this.material = void 0 !== e ? e : new r.PointsMaterial({
                color: 16777215 * Math.random()
            })
        }
        ,
        r.Points.prototype = Object.create(r.Object3D.prototype),
        r.Points.prototype.constructor = r.Points,
        r.Points.prototype.raycast = function() {
            var t = new r.Matrix4
              , e = new r.Ray;
            return function(n, i) {
                function o(t, r) {
                    var o = e.distanceSqToPoint(t);
                    if (h > o) {
                        var s = e.closestPointToPoint(t);
                        s.applyMatrix4(a.matrixWorld);
                        var l = n.ray.origin.distanceTo(s);
                        l < n.near || l > n.far || i.push({
                            distance: l,
                            distanceToRay: Math.sqrt(o),
                            point: s.clone(),
                            index: r,
                            face: null ,
                            object: a
                        })
                    }
                }
                var a = this
                  , s = a.geometry
                  , l = n.params.Points.threshold;
                if (t.getInverse(this.matrixWorld),
                e.copy(n.ray).applyMatrix4(t),
                null === s.boundingBox || !1 !== e.isIntersectionBox(s.boundingBox)) {
                    var l = l / ((this.scale.x + this.scale.y + this.scale.z) / 3)
                      , h = l * l
                      , l = new r.Vector3;
                    if (s instanceof r.BufferGeometry) {
                        var c = s.index
                          , s = s.attributes.position.array;
                        if (null !== c)
                            for (var u = c.array, c = 0, p = u.length; p > c; c++) {
                                var d = u[c];
                                l.fromArray(s, 3 * d),
                                o(l, d)
                            }
                        else
                            for (c = 0,
                            u = s.length / 3; u > c; c++)
                                l.fromArray(s, 3 * c),
                                o(l, c)
                    } else
                        for (l = s.vertices,
                        c = 0,
                        u = l.length; u > c; c++)
                            o(l[c], c)
                }
            }
        }(),
        r.Points.prototype.clone = function() {
            return new this.constructor(this.geometry,this.material).copy(this)
        }
        ,
        r.Points.prototype.toJSON = function(t) {
            var e = r.Object3D.prototype.toJSON.call(this, t);
            return void 0 === t.geometries[this.geometry.uuid] && (t.geometries[this.geometry.uuid] = this.geometry.toJSON()),
            void 0 === t.materials[this.material.uuid] && (t.materials[this.material.uuid] = this.material.toJSON()),
            e.object.geometry = this.geometry.uuid,
            e.object.material = this.material.uuid,
            e
        }
        ,
        r.PointCloud = function(t, e) {
            return console.warn("THREE.PointCloud has been renamed to THREE.Points."),
            new r.Points(t,e)
        }
        ,
        r.ParticleSystem = function(t, e) {
            return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),
            new r.Points(t,e)
        }
        ,
        r.Line = function(t, e, n) {
            return 1 === n ? (console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),
            new r.LineSegments(t,e)) : (r.Object3D.call(this),
            this.type = "Line",
            this.geometry = void 0 !== t ? t : new r.Geometry,
            void (this.material = void 0 !== e ? e : new r.LineBasicMaterial({
                color: 16777215 * Math.random()
            })))
        }
        ,
        r.Line.prototype = Object.create(r.Object3D.prototype),
        r.Line.prototype.constructor = r.Line,
        r.Line.prototype.raycast = function() {
            var t = new r.Matrix4
              , e = new r.Ray
              , n = new r.Sphere;
            return function(i, o) {
                var a = i.linePrecision
                  , a = a * a
                  , s = this.geometry;
                if (null === s.boundingSphere && s.computeBoundingSphere(),
                n.copy(s.boundingSphere),
                n.applyMatrix4(this.matrixWorld),
                !1 !== i.ray.isIntersectionSphere(n)) {
                    t.getInverse(this.matrixWorld),
                    e.copy(i.ray).applyMatrix4(t);
                    var l = new r.Vector3
                      , h = new r.Vector3
                      , c = new r.Vector3
                      , u = new r.Vector3
                      , p = this instanceof r.LineSegments ? 2 : 1;
                    if (s instanceof r.BufferGeometry) {
                        var d = s.index
                          , f = s.attributes;
                        if (null !== d)
                            for (var s = d.array, f = f.position.array, d = 0, m = s.length - 1; m > d; d += p) {
                                var g = s[d + 1];
                                l.fromArray(f, 3 * s[d]),
                                h.fromArray(f, 3 * g),
                                g = e.distanceSqToSegment(l, h, u, c),
                                g > a || (u.applyMatrix4(this.matrixWorld),
                                g = i.ray.origin.distanceTo(u),
                                g < i.near || g > i.far || o.push({
                                    distance: g,
                                    point: c.clone().applyMatrix4(this.matrixWorld),
                                    index: d,
                                    face: null ,
                                    faceIndex: null ,
                                    object: this
                                }))
                            }
                        else
                            for (f = f.position.array,
                            d = 0,
                            m = f.length / 3 - 1; m > d; d += p)
                                l.fromArray(f, 3 * d),
                                h.fromArray(f, 3 * d + 3),
                                g = e.distanceSqToSegment(l, h, u, c),
                                g > a || (u.applyMatrix4(this.matrixWorld),
                                g = i.ray.origin.distanceTo(u),
                                g < i.near || g > i.far || o.push({
                                    distance: g,
                                    point: c.clone().applyMatrix4(this.matrixWorld),
                                    index: d,
                                    face: null ,
                                    faceIndex: null ,
                                    object: this
                                }))
                    } else if (s instanceof r.Geometry)
                        for (l = s.vertices,
                        h = l.length,
                        d = 0; h - 1 > d; d += p)
                            g = e.distanceSqToSegment(l[d], l[d + 1], u, c),
                            g > a || (u.applyMatrix4(this.matrixWorld),
                            g = i.ray.origin.distanceTo(u),
                            g < i.near || g > i.far || o.push({
                                distance: g,
                                point: c.clone().applyMatrix4(this.matrixWorld),
                                index: d,
                                face: null ,
                                faceIndex: null ,
                                object: this
                            }))
                }
            }
        }(),
        r.Line.prototype.clone = function() {
            return new this.constructor(this.geometry,this.material).copy(this)
        }
        ,
        r.Line.prototype.toJSON = function(t) {
            var e = r.Object3D.prototype.toJSON.call(this, t);
            return void 0 === t.geometries[this.geometry.uuid] && (t.geometries[this.geometry.uuid] = this.geometry.toJSON()),
            void 0 === t.materials[this.material.uuid] && (t.materials[this.material.uuid] = this.material.toJSON()),
            e.object.geometry = this.geometry.uuid,
            e.object.material = this.material.uuid,
            e
        }
        ,
        r.LineStrip = 0,
        r.LinePieces = 1,
        r.LineSegments = function(t, e) {
            r.Line.call(this, t, e),
            this.type = "LineSegments"
        }
        ,
        r.LineSegments.prototype = Object.create(r.Line.prototype),
        r.LineSegments.prototype.constructor = r.LineSegments,
        r.Mesh = function(t, e) {
            r.Object3D.call(this),
            this.type = "Mesh",
            this.geometry = void 0 !== t ? t : new r.Geometry,
            this.material = void 0 !== e ? e : new r.MeshBasicMaterial({
                color: 16777215 * Math.random()
            }),
            this.updateMorphTargets()
        }
        ,
        r.Mesh.prototype = Object.create(r.Object3D.prototype),
        r.Mesh.prototype.constructor = r.Mesh,
        r.Mesh.prototype.updateMorphTargets = function() {
            if (void 0 !== this.geometry.morphTargets && 0 < this.geometry.morphTargets.length) {
                this.morphTargetBase = -1,
                this.morphTargetInfluences = [],
                this.morphTargetDictionary = {};
                for (var t = 0, e = this.geometry.morphTargets.length; e > t; t++)
                    this.morphTargetInfluences.push(0),
                    this.morphTargetDictionary[this.geometry.morphTargets[t].name] = t
            }
        }
        ,
        r.Mesh.prototype.getMorphTargetIndexByName = function(t) {
            return void 0 !== this.morphTargetDictionary[t] ? this.morphTargetDictionary[t] : (console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target " + t + " does not exist. Returning 0."),
            0)
        }
        ,
        r.Mesh.prototype.raycast = function() {
            function t(t, e, n, i, o, a, s) {
                return r.Triangle.barycoordFromPoint(t, e, n, i, f),
                o.multiplyScalar(f.x),
                a.multiplyScalar(f.y),
                s.multiplyScalar(f.z),
                o.add(a).add(s),
                o.clone()
            }
            var e = new r.Matrix4
              , n = new r.Ray
              , i = new r.Sphere
              , o = new r.Vector3
              , a = new r.Vector3
              , s = new r.Vector3
              , l = new r.Vector3
              , h = new r.Vector3
              , c = new r.Vector3
              , u = new r.Vector2
              , p = new r.Vector2
              , d = new r.Vector2
              , f = new r.Vector3
              , m = new r.Vector3
              , g = new r.Vector3;
            return function(f, v) {
                var y = this.geometry
                  , _ = this.material;
                if (void 0 !== _ && (null === y.boundingSphere && y.computeBoundingSphere(),
                i.copy(y.boundingSphere),
                i.applyMatrix4(this.matrixWorld),
                !1 !== f.ray.isIntersectionSphere(i) && (e.getInverse(this.matrixWorld),
                n.copy(f.ray).applyMatrix4(e),
                null === y.boundingBox || !1 !== n.isIntersectionBox(y.boundingBox)))) {
                    var x, b, w;
                    if (y instanceof r.BufferGeometry)
                        if (x = y.index,
                        y = y.attributes,
                        null !== x)
                            for (var S = x.array, T = y.position.array, M = 0, C = S.length; C > M; M += 3) {
                                if (x = S[M],
                                b = S[M + 1],
                                w = S[M + 2],
                                o.fromArray(T, 3 * x),
                                a.fromArray(T, 3 * b),
                                s.fromArray(T, 3 * w),
                                _.side === r.BackSide) {
                                    if (null === n.intersectTriangle(s, a, o, !0, m))
                                        continue
                                } else if (null === n.intersectTriangle(o, a, s, _.side !== r.DoubleSide, m))
                                    continue;
                                g.copy(m),
                                g.applyMatrix4(this.matrixWorld);
                                var A = f.ray.origin.distanceTo(g);
                                if (!(A < f.near || A > f.far)) {
                                    var E;
                                    void 0 !== y.uv && (E = y.uv.array,
                                    u.fromArray(E, 2 * x),
                                    p.fromArray(E, 2 * b),
                                    d.fromArray(E, 2 * w),
                                    E = t(m, o, a, s, u, p, d)),
                                    v.push({
                                        distance: A,
                                        point: g.clone(),
                                        uv: E,
                                        face: new r.Face3(x,b,w,r.Triangle.normal(o, a, s)),
                                        faceIndex: Math.floor(M / 3),
                                        object: this
                                    })
                                }
                            }
                        else
                            for (T = y.position.array,
                            M = 0,
                            C = T.length; C > M; M += 9) {
                                if (o.fromArray(T, M),
                                a.fromArray(T, M + 3),
                                s.fromArray(T, M + 6),
                                _.side === r.BackSide) {
                                    if (null === n.intersectTriangle(s, a, o, !0, m))
                                        continue
                                } else if (null === n.intersectTriangle(o, a, s, _.side !== r.DoubleSide, m))
                                    continue;
                                g.copy(m),
                                g.applyMatrix4(this.matrixWorld),
                                A = f.ray.origin.distanceTo(g),
                                A < f.near || A > f.far || (void 0 !== y.uv && (E = y.uv.array,
                                u.fromArray(E, M),
                                p.fromArray(E, M + 2),
                                d.fromArray(E, M + 4),
                                E = t(m, o, a, s, u, p, d)),
                                x = M / 3,
                                b = x + 1,
                                w = x + 2,
                                v.push({
                                    distance: A,
                                    point: g.clone(),
                                    uv: E,
                                    face: new r.Face3(x,b,w,r.Triangle.normal(o, a, s)),
                                    index: x,
                                    object: this
                                }))
                            }
                    else if (y instanceof r.Geometry)
                        for (var S = _ instanceof r.MeshFaceMaterial, T = !0 === S ? _.materials : null , M = y.vertices, C = y.faces, L = 0, P = C.length; P > L; L++) {
                            var k = C[L]
                              , A = !0 === S ? T[k.materialIndex] : _;
                            if (void 0 !== A) {
                                if (x = M[k.a],
                                b = M[k.b],
                                w = M[k.c],
                                !0 === A.morphTargets) {
                                    var R = y.morphTargets
                                      , O = this.morphTargetInfluences;
                                    o.set(0, 0, 0),
                                    a.set(0, 0, 0),
                                    s.set(0, 0, 0);
                                    for (var D = 0, F = R.length; F > D; D++) {
                                        var U = O[D];
                                        if (0 !== U) {
                                            var I = R[D].vertices;
                                            o.addScaledVector(l.subVectors(I[k.a], x), U),
                                            a.addScaledVector(h.subVectors(I[k.b], b), U),
                                            s.addScaledVector(c.subVectors(I[k.c], w), U)
                                        }
                                    }
                                    o.add(x),
                                    a.add(b),
                                    s.add(w),
                                    x = o,
                                    b = a,
                                    w = s
                                }
                                if (A.side === r.BackSide) {
                                    if (null === n.intersectTriangle(w, b, x, !0, m))
                                        continue
                                } else if (null === n.intersectTriangle(x, b, w, A.side !== r.DoubleSide, m))
                                    continue;
                                g.copy(m),
                                g.applyMatrix4(this.matrixWorld),
                                A = f.ray.origin.distanceTo(g),
                                A < f.near || A > f.far || (0 < y.faceVertexUvs[0].length && (E = y.faceVertexUvs[0][L],
                                u.copy(E[0]),
                                p.copy(E[1]),
                                d.copy(E[2]),
                                E = t(m, x, b, w, u, p, d)),
                                v.push({
                                    distance: A,
                                    point: g.clone(),
                                    uv: E,
                                    face: k,
                                    faceIndex: L,
                                    object: this
                                }))
                            }
                        }
                }
            }
        }(),
        r.Mesh.prototype.clone = function() {
            return new this.constructor(this.geometry,this.material).copy(this)
        }
        ,
        r.Mesh.prototype.toJSON = function(t) {
            var e = r.Object3D.prototype.toJSON.call(this, t);
            return void 0 === t.geometries[this.geometry.uuid] && (t.geometries[this.geometry.uuid] = this.geometry.toJSON(t)),
            void 0 === t.materials[this.material.uuid] && (t.materials[this.material.uuid] = this.material.toJSON(t)),
            e.object.geometry = this.geometry.uuid,
            e.object.material = this.material.uuid,
            e
        }
        ,
        r.Bone = function(t) {
            r.Object3D.call(this),
            this.type = "Bone",
            this.skin = t
        }
        ,
        r.Bone.prototype = Object.create(r.Object3D.prototype),
        r.Bone.prototype.constructor = r.Bone,
        r.Bone.prototype.copy = function(t) {
            return r.Object3D.prototype.copy.call(this, t),
            this.skin = t.skin,
            this
        }
        ,
        r.Skeleton = function(t, e, n) {
            if (this.useVertexTexture = void 0 !== n ? n : !0,
            this.identityMatrix = new r.Matrix4,
            t = t || [],
            this.bones = t.slice(0),
            this.useVertexTexture ? (t = Math.sqrt(4 * this.bones.length),
            t = r.Math.nextPowerOfTwo(Math.ceil(t)),
            this.boneTextureHeight = this.boneTextureWidth = t = Math.max(t, 4),
            this.boneMatrices = new Float32Array(this.boneTextureWidth * this.boneTextureHeight * 4),
            this.boneTexture = new r.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,r.RGBAFormat,r.FloatType)) : this.boneMatrices = new Float32Array(16 * this.bones.length),
            void 0 === e)
                this.calculateInverses();
            else if (this.bones.length === e.length)
                this.boneInverses = e.slice(0);
            else
                for (console.warn("THREE.Skeleton bonInverses is the wrong length."),
                this.boneInverses = [],
                e = 0,
                t = this.bones.length; t > e; e++)
                    this.boneInverses.push(new r.Matrix4)
        }
        ,
        r.Skeleton.prototype.calculateInverses = function() {
            this.boneInverses = [];
            for (var t = 0, e = this.bones.length; e > t; t++) {
                var n = new r.Matrix4;
                this.bones[t] && n.getInverse(this.bones[t].matrixWorld),
                this.boneInverses.push(n)
            }
        }
        ,
        r.Skeleton.prototype.pose = function() {
            for (var t, e = 0, n = this.bones.length; n > e; e++)
                (t = this.bones[e]) && t.matrixWorld.getInverse(this.boneInverses[e]);
            for (e = 0,
            n = this.bones.length; n > e; e++)
                (t = this.bones[e]) && (t.parent ? (t.matrix.getInverse(t.parent.matrixWorld),
                t.matrix.multiply(t.matrixWorld)) : t.matrix.copy(t.matrixWorld),
                t.matrix.decompose(t.position, t.quaternion, t.scale))
        }
        ,
        r.Skeleton.prototype.update = function() {
            var t = new r.Matrix4;
            return function() {
                for (var e = 0, n = this.bones.length; n > e; e++)
                    t.multiplyMatrices(this.bones[e] ? this.bones[e].matrixWorld : this.identityMatrix, this.boneInverses[e]),
                    t.flattenToArrayOffset(this.boneMatrices, 16 * e);
                this.useVertexTexture && (this.boneTexture.needsUpdate = !0)
            }
        }(),
        r.Skeleton.prototype.clone = function() {
            return new r.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)
        }
        ,
        r.SkinnedMesh = function(t, e, n) {
            if (r.Mesh.call(this, t, e),
            this.type = "SkinnedMesh",
            this.bindMode = "attached",
            this.bindMatrix = new r.Matrix4,
            this.bindMatrixInverse = new r.Matrix4,
            t = [],
            this.geometry && void 0 !== this.geometry.bones) {
                for (var i, o = 0, a = this.geometry.bones.length; a > o; ++o)
                    i = this.geometry.bones[o],
                    e = new r.Bone(this),
                    t.push(e),
                    e.name = i.name,
                    e.position.fromArray(i.pos),
                    e.quaternion.fromArray(i.rotq),
                    void 0 !== i.scl && e.scale.fromArray(i.scl);
                for (o = 0,
                a = this.geometry.bones.length; a > o; ++o)
                    i = this.geometry.bones[o],
                    -1 !== i.parent ? t[i.parent].add(t[o]) : this.add(t[o])
            }
            this.normalizeSkinWeights(),
            this.updateMatrixWorld(!0),
            this.bind(new r.Skeleton(t,void 0,n), this.matrixWorld)
        }
        ,
        r.SkinnedMesh.prototype = Object.create(r.Mesh.prototype),
        r.SkinnedMesh.prototype.constructor = r.SkinnedMesh,
        r.SkinnedMesh.prototype.bind = function(t, e) {
            this.skeleton = t,
            void 0 === e && (this.updateMatrixWorld(!0),
            this.skeleton.calculateInverses(),
            e = this.matrixWorld),
            this.bindMatrix.copy(e),
            this.bindMatrixInverse.getInverse(e)
        }
        ,
        r.SkinnedMesh.prototype.pose = function() {
            this.skeleton.pose()
        }
        ,
        r.SkinnedMesh.prototype.normalizeSkinWeights = function() {
            if (this.geometry instanceof r.Geometry)
                for (var t = 0; t < this.geometry.skinIndices.length; t++) {
                    var e = this.geometry.skinWeights[t]
                      , n = 1 / e.lengthManhattan();
                    1 / 0 !== n ? e.multiplyScalar(n) : e.set(1)
                }
        }
        ,
        r.SkinnedMesh.prototype.updateMatrixWorld = function(t) {
            r.Mesh.prototype.updateMatrixWorld.call(this, !0),
            "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : console.warn("THREE.SkinnedMesh unrecognized bindMode: " + this.bindMode)
        }
        ,
        r.SkinnedMesh.prototype.clone = function() {
            return new this.constructor(this.geometry,this.material,this.useVertexTexture).copy(this)
        }
        ,
        r.MorphAnimMesh = function(t, e) {
            r.Mesh.call(this, t, e),
            this.type = "MorphAnimMesh",
            this.duration = 1e3,
            this.mirroredLoop = !1,
            this.currentKeyframe = this.lastKeyframe = this.time = 0,
            this.direction = 1,
            this.directionBackwards = !1,
            this.setFrameRange(0, t.morphTargets.length - 1)
        }
        ,
        r.MorphAnimMesh.prototype = Object.create(r.Mesh.prototype),
        r.MorphAnimMesh.prototype.constructor = r.MorphAnimMesh,
        r.MorphAnimMesh.prototype.setFrameRange = function(t, e) {
            this.startKeyframe = t,
            this.endKeyframe = e,
            this.length = this.endKeyframe - this.startKeyframe + 1
        }
        ,
        r.MorphAnimMesh.prototype.setDirectionForward = function() {
            this.direction = 1,
            this.directionBackwards = !1
        }
        ,
        r.MorphAnimMesh.prototype.setDirectionBackward = function() {
            this.direction = -1,
            this.directionBackwards = !0
        }
        ,
        r.MorphAnimMesh.prototype.parseAnimations = function() {
            var t = this.geometry;
            t.animations || (t.animations = {});
            for (var e, n = t.animations, r = /([a-z]+)_?(\d+)/, i = 0, o = t.morphTargets.length; o > i; i++) {
                var a = t.morphTargets[i].name.match(r);
                if (a && 1 < a.length) {
                    a = a[1],
                    n[a] || (n[a] = {
                        start: 1 / 0,
                        end: -(1 / 0)
                    });
                    var s = n[a];
                    i < s.start && (s.start = i),
                    i > s.end && (s.end = i),
                    e || (e = a)
                }
            }
            t.firstAnimation = e
        }
        ,
        r.MorphAnimMesh.prototype.setAnimationLabel = function(t, e, n) {
            this.geometry.animations || (this.geometry.animations = {}),
            this.geometry.animations[t] = {
                start: e,
                end: n
            }
        }
        ,
        r.MorphAnimMesh.prototype.playAnimation = function(t, e) {
            var n = this.geometry.animations[t];
            n ? (this.setFrameRange(n.start, n.end),
            this.duration = (n.end - n.start) / e * 1e3,
            this.time = 0) : console.warn("THREE.MorphAnimMesh: animation[" + t + "] undefined in .playAnimation()")
        }
        ,
        r.MorphAnimMesh.prototype.updateAnimation = function(t) {
            var e = this.duration / this.length;
            this.time += this.direction * t,
            this.mirroredLoop ? (this.time > this.duration || 0 > this.time) && (this.direction *= -1,
            this.time > this.duration && (this.time = this.duration,
            this.directionBackwards = !0),
            0 > this.time && (this.time = 0,
            this.directionBackwards = !1)) : (this.time %= this.duration,
            0 > this.time && (this.time += this.duration));
            var n = this.startKeyframe + r.Math.clamp(Math.floor(this.time / e), 0, this.length - 1);
            t = this.morphTargetInfluences,
            n !== this.currentKeyframe && (t[this.lastKeyframe] = 0,
            t[this.currentKeyframe] = 1,
            t[n] = 0,
            this.lastKeyframe = this.currentKeyframe,
            this.currentKeyframe = n),
            e = this.time % e / e,
            this.directionBackwards && (e = 1 - e),
            t[this.currentKeyframe] = e,
            t[this.lastKeyframe] = 1 - e
        }
        ,
        r.MorphAnimMesh.prototype.interpolateTargets = function(t, e, n) {
            for (var r = this.morphTargetInfluences, i = 0, o = r.length; o > i; i++)
                r[i] = 0;
            t > -1 && (r[t] = 1 - n),
            e > -1 && (r[e] = n)
        }
        ,
        r.MorphAnimMesh.prototype.copy = function(t) {
            return r.Mesh.prototype.copy.call(this, t),
            this.duration = t.duration,
            this.mirroredLoop = t.mirroredLoop,
            this.time = t.time,
            this.lastKeyframe = t.lastKeyframe,
            this.currentKeyframe = t.currentKeyframe,
            this.direction = t.direction,
            this.directionBackwards = t.directionBackwards,
            this
        }
        ,
        r.LOD = function() {
            r.Object3D.call(this),
            this.type = "LOD",
            Object.defineProperties(this, {
                levels: {
                    enumerable: !0,
                    value: []
                },
                objects: {
                    get: function() {
                        return console.warn("THREE.LOD: .objects has been renamed to .levels."),
                        this.levels
                    }
                }
            })
        }
        ,
        r.LOD.prototype = Object.create(r.Object3D.prototype),
        r.LOD.prototype.constructor = r.LOD,
        r.LOD.prototype.addLevel = function(t, e) {
            void 0 === e && (e = 0),
            e = Math.abs(e);
            for (var n = this.levels, r = 0; r < n.length && !(e < n[r].distance); r++)
                ;
            n.splice(r, 0, {
                distance: e,
                object: t
            }),
            this.add(t)
        }
        ,
        r.LOD.prototype.getObjectForDistance = function(t) {
            for (var e = this.levels, n = 1, r = e.length; r > n && !(t < e[n].distance); n++)
                ;
            return e[n - 1].object
        }
        ,
        r.LOD.prototype.raycast = function() {
            var t = new r.Vector3;
            return function(e, n) {
                t.setFromMatrixPosition(this.matrixWorld);
                var r = e.ray.origin.distanceTo(t);
                this.getObjectForDistance(r).raycast(e, n)
            }
        }(),
        r.LOD.prototype.update = function() {
            var t = new r.Vector3
              , e = new r.Vector3;
            return function(n) {
                var r = this.levels;
                if (1 < r.length) {
                    t.setFromMatrixPosition(n.matrixWorld),
                    e.setFromMatrixPosition(this.matrixWorld),
                    n = t.distanceTo(e),
                    r[0].object.visible = !0;
                    for (var i = 1, o = r.length; o > i && n >= r[i].distance; i++)
                        r[i - 1].object.visible = !1,
                        r[i].object.visible = !0;
                    for (; o > i; i++)
                        r[i].object.visible = !1
                }
            }
        }(),
        r.LOD.prototype.copy = function(t) {
            r.Object3D.prototype.copy.call(this, t, !1),
            t = t.levels;
            for (var e = 0, n = t.length; n > e; e++) {
                var i = t[e];
                this.addLevel(i.object.clone(), i.distance)
            }
            return this
        }
        ,
        r.LOD.prototype.toJSON = function(t) {
            t = r.Object3D.prototype.toJSON.call(this, t),
            t.object.levels = [];
            for (var e = this.levels, n = 0, i = e.length; i > n; n++) {
                var o = e[n];
                t.object.levels.push({
                    object: o.object.uuid,
                    distance: o.distance
                })
            }
            return t
        }
        ,
        r.Sprite = function() {
            var t = new Uint16Array([0, 1, 2, 0, 2, 3])
              , e = new Float32Array([-.5, -.5, 0, .5, -.5, 0, .5, .5, 0, -.5, .5, 0])
              , n = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])
              , i = new r.BufferGeometry;
            return i.setIndex(new r.BufferAttribute(t,1)),
            i.addAttribute("position", new r.BufferAttribute(e,3)),
            i.addAttribute("uv", new r.BufferAttribute(n,2)),
            function(t) {
                r.Object3D.call(this),
                this.type = "Sprite",
                this.geometry = i,
                this.material = void 0 !== t ? t : new r.SpriteMaterial
            }
        }(),
        r.Sprite.prototype = Object.create(r.Object3D.prototype),
        r.Sprite.prototype.constructor = r.Sprite,
        r.Sprite.prototype.raycast = function() {
            var t = new r.Vector3;
            return function(e, n) {
                t.setFromMatrixPosition(this.matrixWorld);
                var r = e.ray.distanceSqToPoint(t);
                r > this.scale.x * this.scale.y || n.push({
                    distance: Math.sqrt(r),
                    point: this.position,
                    face: null ,
                    object: this
                })
            }
        }(),
        r.Sprite.prototype.clone = function() {
            return new this.constructor(this.material).copy(this)
        }
        ,
        r.Sprite.prototype.toJSON = function(t) {
            var e = r.Object3D.prototype.toJSON.call(this, t);
            return void 0 === t.materials[this.material.uuid] && (t.materials[this.material.uuid] = this.material.toJSON()),
            e.object.material = this.material.uuid,
            e
        }
        ,
        r.Particle = r.Sprite,
        r.LensFlare = function(t, e, n, i, o) {
            r.Object3D.call(this),
            this.lensFlares = [],
            this.positionScreen = new r.Vector3,
            this.customUpdateCallback = void 0,
            void 0 !== t && this.add(t, e, n, i, o)
        }
        ,
        r.LensFlare.prototype = Object.create(r.Object3D.prototype),
        r.LensFlare.prototype.constructor = r.LensFlare,
        r.LensFlare.prototype.add = function(t, e, n, i, o, a) {
            void 0 === e && (e = -1),
            void 0 === n && (n = 0),
            void 0 === a && (a = 1),
            void 0 === o && (o = new r.Color(16777215)),
            void 0 === i && (i = r.NormalBlending),
            n = Math.min(n, Math.max(0, n)),
            this.lensFlares.push({
                texture: t,
                size: e,
                distance: n,
                x: 0,
                y: 0,
                z: 0,
                scale: 1,
                rotation: 0,
                opacity: a,
                color: o,
                blending: i
            })
        }
        ,
        r.LensFlare.prototype.updateLensFlares = function() {
            var t, e, n = this.lensFlares.length, r = 2 * -this.positionScreen.x, i = 2 * -this.positionScreen.y;
            for (t = 0; n > t; t++)
                e = this.lensFlares[t],
                e.x = this.positionScreen.x + r * e.distance,
                e.y = this.positionScreen.y + i * e.distance,
                e.wantedRotation = e.x * Math.PI * .25,
                e.rotation += .25 * (e.wantedRotation - e.rotation)
        }
        ,
        r.LensFlare.prototype.copy = function(t) {
            r.Object3D.prototype.copy.call(this, t),
            this.positionScreen.copy(t.positionScreen),
            this.customUpdateCallback = t.customUpdateCallback;
            for (var e = 0, n = t.lensFlares.length; n > e; e++)
                this.lensFlares.push(t.lensFlares[e]);
            return this
        }
        ,
        r.Scene = function() {
            r.Object3D.call(this),
            this.type = "Scene",
            this.overrideMaterial = this.fog = null ,
            this.autoUpdate = !0
        }
        ,
        r.Scene.prototype = Object.create(r.Object3D.prototype),
        r.Scene.prototype.constructor = r.Scene,
        r.Scene.prototype.copy = function(t) {
            return r.Object3D.prototype.copy.call(this, t),
            null !== t.fog && (this.fog = t.fog.clone()),
            null !== t.overrideMaterial && (this.overrideMaterial = t.overrideMaterial.clone()),
            this.autoUpdate = t.autoUpdate,
            this.matrixAutoUpdate = t.matrixAutoUpdate,
            this
        }
        ,
        r.Fog = function(t, e, n) {
            this.name = "",
            this.color = new r.Color(t),
            this.near = void 0 !== e ? e : 1,
            this.far = void 0 !== n ? n : 1e3
        }
        ,
        r.Fog.prototype.clone = function() {
            return new r.Fog(this.color.getHex(),this.near,this.far)
        }
        ,
        r.FogExp2 = function(t, e) {
            this.name = "",
            this.color = new r.Color(t),
            this.density = void 0 !== e ? e : 25e-5
        }
        ,
        r.FogExp2.prototype.clone = function() {
            return new r.FogExp2(this.color.getHex(),this.density)
        }
        ,
        r.ShaderChunk = {},
        r.ShaderChunk.alphamap_fragment = "#ifdef USE_ALPHAMAP\n\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",
        r.ShaderChunk.alphamap_pars_fragment = "#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",
        r.ShaderChunk.alphatest_fragment = "#ifdef ALPHATEST\n\n	if ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",
        r.ShaderChunk.aomap_fragment = "#ifdef USE_AOMAP\n\n	totalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n#endif\n",
        r.ShaderChunk.aomap_pars_fragment = "#ifdef USE_AOMAP\n\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n\n#endif",
        r.ShaderChunk.begin_vertex = "\nvec3 transformed = vec3( position );\n",
        r.ShaderChunk.beginnormal_vertex = "\nvec3 objectNormal = vec3( normal );\n",
        r.ShaderChunk.bumpmap_pars_fragment = "#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n	// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n	// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n	// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif\n",
        r.ShaderChunk.color_fragment = "#ifdef USE_COLOR\n\n	diffuseColor.rgb *= vColor;\n\n#endif",
        r.ShaderChunk.color_pars_fragment = "#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",
        r.ShaderChunk.color_pars_vertex = "#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",
        r.ShaderChunk.color_vertex = "#ifdef USE_COLOR\n\n	vColor.xyz = color.xyz;\n\n#endif",
        r.ShaderChunk.common = "#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\n	return normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\n	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n	float distance = dot( planeNormal, point - pointOnPlane );\n\n	return - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\n	if ( decayExponent > 0.0 ) {\n\n	  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n	}\n\n	return 1.0;\n\n}\n\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\n\n	// Original approximation by Christophe Schlick '94\n	//;float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n	// Optimized variant (presented by Epic at SIGGRAPH '13)\n	float fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\n\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\n\n	// geometry term is (nl)(nv) / 4(nl)(nv)\n\n	return 0.25;\n\n}\n\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\n\n	// factor of 1/PI in distribution term omitted\n\n	return ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\n\n	vec3 halfDir = normalize( lightDir + viewDir );\n\n	//float dotNL = saturate( dot( normal, lightDir ) );\n	//float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotLH = saturate( dot( lightDir, halfDir ) );\n\n	vec3 F = F_Schlick( specularColor, dotLH );\n\n	float G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n	float D = D_BlinnPhong( shininess, dotNH );\n\n	return F * G * D;\n\n}\n\nvec3 inputToLinear( in vec3 a ) {\n\n	#ifdef GAMMA_INPUT\n\n		return pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\n	#else\n\n		return a;\n\n	#endif\n\n}\n\nvec3 linearToOutput( in vec3 a ) {\n\n	#ifdef GAMMA_OUTPUT\n\n		return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\n	#else\n\n		return a;\n\n	#endif\n\n}\n",
        r.ShaderChunk.defaultnormal_vertex = "#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",
        r.ShaderChunk.displacementmap_vertex = "#ifdef USE_DISPLACEMENTMAP\n\n	transformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n",
        r.ShaderChunk.displacementmap_pars_vertex = "#ifdef USE_DISPLACEMENTMAP\n\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n\n#endif\n",
        r.ShaderChunk.emissivemap_fragment = "#ifdef USE_EMISSIVEMAP\n\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n	emissiveColor.rgb = inputToLinear( emissiveColor.rgb );\n\n	totalEmissiveLight *= emissiveColor.rgb;\n\n#endif\n",
        r.ShaderChunk.emissivemap_pars_fragment = "#ifdef USE_EMISSIVEMAP\n\n	uniform sampler2D emissiveMap;\n\n#endif\n",
        r.ShaderChunk.envmap_fragment = "#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// Transforming Normal Vectors with the Inverse Transformation\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	envColor.xyz = inputToLinear( envColor.xyz );\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n",
        r.ShaderChunk.envmap_pars_fragment = "#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n",
        r.ShaderChunk.envmap_pars_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n",
        r.ShaderChunk.envmap_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = transformDirection( objectNormal, modelMatrix );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n",
        r.ShaderChunk.fog_fragment = "#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	outgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif",
        r.ShaderChunk.fog_pars_fragment = "#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",
        r.ShaderChunk.lightmap_fragment = "#ifdef USE_LIGHTMAP\n\n	totalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n#endif\n",
        r.ShaderChunk.lightmap_pars_fragment = "#ifdef USE_LIGHTMAP\n\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n\n#endif",
        r.ShaderChunk.lights_lambert_pars_vertex = "uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n",
        r.ShaderChunk.lights_lambert_vertex = "vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\nvec3 normal = normalize( transformedNormal );\n\n#if MAX_POINT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = pointLightColor[ i ];\n\n		vec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n		// attenuation\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lightDir );\n\n		vLightFront += lightColor * attenuation * saturate( dotProduct );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = spotLightColor[ i ];\n\n		vec3 lightPosition = spotLightPosition[ i ];\n		vec3 lVector = lightPosition - mvPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n			// attenuation\n\n			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n			attenuation *= spotEffect;\n\n			// diffuse\n\n			float dotProduct = dot( normal, lightDir );\n\n			vLightFront += lightColor * attenuation * saturate( dotProduct );\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec3 lightColor = directionalLightColor[ i ];\n\n		vec3 lightDir = directionalLightDirection[ i ];\n\n		// diffuse\n\n		float dotProduct = dot( normal, lightDir );\n\n		vLightFront += lightColor * saturate( dotProduct );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += lightColor * saturate( - dotProduct );\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lightDir = hemisphereLightDirection[ i ];\n\n		// diffuse\n\n		float dotProduct = dot( normal, lightDir );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			float hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront += ambientLightColor;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack += ambientLightColor;\n\n#endif\n",
        r.ShaderChunk.lights_phong_fragment = "#ifndef FLAT_SHADED\n\n	vec3 normal = normalize( vNormal );\n\n	#ifdef DOUBLE_SIDED\n\n		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n	#endif\n\n#else\n\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\nvec3 viewDir = normalize( vViewPosition );\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = pointLightColor[ i ];\n\n		vec3 lightPosition = pointLightPosition[ i ];\n		vec3 lVector = lightPosition + vViewPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n		// attenuation\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n		// diffuse\n\n		float cosineTerm = saturate( dot( normal, lightDir ) );\n\n		totalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n		// specular\n\n		vec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n		totalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = spotLightColor[ i ];\n\n		vec3 lightPosition = spotLightPosition[ i ];\n		vec3 lVector = lightPosition + vViewPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n			// attenuation\n\n			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n			attenuation *= spotEffect;\n\n			// diffuse\n\n			float cosineTerm = saturate( dot( normal, lightDir ) );\n\n			totalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n			// specular\n\n			vec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n			totalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec3 lightColor = directionalLightColor[ i ];\n\n		vec3 lightDir = directionalLightDirection[ i ];\n\n		// diffuse\n\n		float cosineTerm = saturate( dot( normal, lightDir ) );\n\n		totalDiffuseLight += lightColor * cosineTerm;\n\n		// specular\n\n		vec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n		totalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lightDir = hemisphereLightDirection[ i ];\n\n		// diffuse\n\n		float dotProduct = dot( normal, lightDir );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		totalDiffuseLight += lightColor;\n\n		// specular (sky term only)\n\n		vec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n		totalSpecularLight += brdf * specularStrength * lightColor * max( dotProduct, 0.0 );\n\n	}\n\n#endif\n\n#ifdef METAL\n\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;\n\n#else\n\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;\n\n#endif\n",
        r.ShaderChunk.lights_phong_pars_fragment = "uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n	varying vec3 vNormal;\n\n#endif\n",
        r.ShaderChunk.lights_phong_pars_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n",
        r.ShaderChunk.lights_phong_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif\n",
        r.ShaderChunk.linear_to_gamma_fragment = "\n	outgoingLight = linearToOutput( outgoingLight );\n",
        r.ShaderChunk.logdepthbuf_fragment = "#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",
        r.ShaderChunk.logdepthbuf_pars_fragment = "#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n#endif\n",
        r.ShaderChunk.logdepthbuf_pars_vertex = "#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",
        r.ShaderChunk.logdepthbuf_vertex = "#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",
        r.ShaderChunk.map_fragment = "#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	texelColor.xyz = inputToLinear( texelColor.xyz );\n\n	diffuseColor *= texelColor;\n\n#endif\n",
        r.ShaderChunk.map_pars_fragment = "#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",
        r.ShaderChunk.map_particle_fragment = "#ifdef USE_MAP\n\n	diffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n",
        r.ShaderChunk.map_particle_pars_fragment = "#ifdef USE_MAP\n\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n\n#endif\n",
        r.ShaderChunk.morphnormal_vertex = "#ifdef USE_MORPHNORMALS\n\n	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n",
        r.ShaderChunk.morphtarget_pars_vertex = "#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",
        r.ShaderChunk.morphtarget_vertex = "#ifdef USE_MORPHTARGETS\n\n	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n#endif\n",
        r.ShaderChunk.normalmap_pars_fragment = "#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n	// Per-Pixel Tangent Space Normal Mapping\n	// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",
        r.ShaderChunk.project_vertex = "#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",
        r.ShaderChunk.shadowmap_fragment = "#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			if ( inFrustum ) outgoingLight *= frustumColors[ i ];\n\n		#endif\n\n	}\n\n	outgoingLight = outgoingLight * shadowColor;\n\n#endif\n",
        r.ShaderChunk.shadowmap_pars_fragment = "#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif",
        r.ShaderChunk.shadowmap_pars_vertex = "#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",
        r.ShaderChunk.shadowmap_vertex = "#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",
        r.ShaderChunk.skinbase_vertex = "#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",
        r.ShaderChunk.skinning_pars_vertex = "#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",
        r.ShaderChunk.skinning_vertex = "#ifdef USE_SKINNING\n\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",
        r.ShaderChunk.skinnormal_vertex = "#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n#endif\n",
        r.ShaderChunk.specularmap_fragment = "float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",
        r.ShaderChunk.specularmap_pars_fragment = "#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",
        r.ShaderChunk.uv2_pars_fragment = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n	varying vec2 vUv2;\n\n#endif",
        r.ShaderChunk.uv2_pars_vertex = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n\n#endif",
        r.ShaderChunk.uv2_vertex = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n	vUv2 = uv2;\n\n#endif",
        r.ShaderChunk.uv_pars_fragment = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n	varying vec2 vUv;\n\n#endif",
        r.ShaderChunk.uv_pars_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",
        r.ShaderChunk.uv_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",
        r.ShaderChunk.worldpos_vertex = "#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n	#endif\n\n#endif\n",
        r.UniformsUtils = {
            merge: function(t) {
                for (var e = {}, n = 0; n < t.length; n++) {
                    var r, i = this.clone(t[n]);
                    for (r in i)
                        e[r] = i[r]
                }
                return e
            },
            clone: function(t) {
                var e, n = {};
                for (e in t) {
                    n[e] = {};
                    for (var i in t[e]) {
                        var o = t[e][i];
                        o instanceof r.Color || o instanceof r.Vector2 || o instanceof r.Vector3 || o instanceof r.Vector4 || o instanceof r.Matrix3 || o instanceof r.Matrix4 || o instanceof r.Texture ? n[e][i] = o.clone() : Array.isArray(o) ? n[e][i] = o.slice() : n[e][i] = o
                    }
                }
                return n
            }
        },
        r.UniformsLib = {
            common: {
                diffuse: {
                    type: "c",
                    value: new r.Color(15658734)
                },
                opacity: {
                    type: "f",
                    value: 1
                },
                map: {
                    type: "t",
                    value: null
                },
                offsetRepeat: {
                    type: "v4",
                    value: new r.Vector4(0,0,1,1)
                },
                specularMap: {
                    type: "t",
                    value: null
                },
                alphaMap: {
                    type: "t",
                    value: null
                },
                envMap: {
                    type: "t",
                    value: null
                },
                flipEnvMap: {
                    type: "f",
                    value: -1
                },
                reflectivity: {
                    type: "f",
                    value: 1
                },
                refractionRatio: {
                    type: "f",
                    value: .98
                }
            },
            aomap: {
                aoMap: {
                    type: "t",
                    value: null
                },
                aoMapIntensity: {
                    type: "f",
                    value: 1
                }
            },
            lightmap: {
                lightMap: {
                    type: "t",
                    value: null
                },
                lightMapIntensity: {
                    type: "f",
                    value: 1
                }
            },
            emissivemap: {
                emissiveMap: {
                    type: "t",
                    value: null
                }
            },
            bumpmap: {
                bumpMap: {
                    type: "t",
                    value: null
                },
                bumpScale: {
                    type: "f",
                    value: 1
                }
            },
            normalmap: {
                normalMap: {
                    type: "t",
                    value: null
                },
                normalScale: {
                    type: "v2",
                    value: new r.Vector2(1,1)
                }
            },
            displacementmap: {
                displacementMap: {
                    type: "t",
                    value: null
                },
                displacementScale: {
                    type: "f",
                    value: 1
                },
                displacementBias: {
                    type: "f",
                    value: 0
                }
            },
            fog: {
                fogDensity: {
                    type: "f",
                    value: 25e-5
                },
                fogNear: {
                    type: "f",
                    value: 1
                },
                fogFar: {
                    type: "f",
                    value: 2e3
                },
                fogColor: {
                    type: "c",
                    value: new r.Color(16777215)
                }
            },
            lights: {
                ambientLightColor: {
                    type: "fv",
                    value: []
                },
                directionalLightDirection: {
                    type: "fv",
                    value: []
                },
                directionalLightColor: {
                    type: "fv",
                    value: []
                },
                hemisphereLightDirection: {
                    type: "fv",
                    value: []
                },
                hemisphereLightSkyColor: {
                    type: "fv",
                    value: []
                },
                hemisphereLightGroundColor: {
                    type: "fv",
                    value: []
                },
                pointLightColor: {
                    type: "fv",
                    value: []
                },
                pointLightPosition: {
                    type: "fv",
                    value: []
                },
                pointLightDistance: {
                    type: "fv1",
                    value: []
                },
                pointLightDecay: {
                    type: "fv1",
                    value: []
                },
                spotLightColor: {
                    type: "fv",
                    value: []
                },
                spotLightPosition: {
                    type: "fv",
                    value: []
                },
                spotLightDirection: {
                    type: "fv",
                    value: []
                },
                spotLightDistance: {
                    type: "fv1",
                    value: []
                },
                spotLightAngleCos: {
                    type: "fv1",
                    value: []
                },
                spotLightExponent: {
                    type: "fv1",
                    value: []
                },
                spotLightDecay: {
                    type: "fv1",
                    value: []
                }
            },
            points: {
                psColor: {
                    type: "c",
                    value: new r.Color(15658734)
                },
                opacity: {
                    type: "f",
                    value: 1
                },
                size: {
                    type: "f",
                    value: 1
                },
                scale: {
                    type: "f",
                    value: 1
                },
                map: {
                    type: "t",
                    value: null
                },
                offsetRepeat: {
                    type: "v4",
                    value: new r.Vector4(0,0,1,1)
                },
                fogDensity: {
                    type: "f",
                    value: 25e-5
                },
                fogNear: {
                    type: "f",
                    value: 1
                },
                fogFar: {
                    type: "f",
                    value: 2e3
                },
                fogColor: {
                    type: "c",
                    value: new r.Color(16777215)
                }
            },
            shadowmap: {
                shadowMap: {
                    type: "tv",
                    value: []
                },
                shadowMapSize: {
                    type: "v2v",
                    value: []
                },
                shadowBias: {
                    type: "fv1",
                    value: []
                },
                shadowDarkness: {
                    type: "fv1",
                    value: []
                },
                shadowMatrix: {
                    type: "m4v",
                    value: []
                }
            }
        },
        r.ShaderLib = {
            basic: {
                uniforms: r.UniformsUtils.merge([r.UniformsLib.common, r.UniformsLib.aomap, r.UniformsLib.fog, r.UniformsLib.shadowmap]),
                vertexShader: [r.ShaderChunk.common, r.ShaderChunk.uv_pars_vertex, r.ShaderChunk.uv2_pars_vertex, r.ShaderChunk.envmap_pars_vertex, r.ShaderChunk.color_pars_vertex, r.ShaderChunk.morphtarget_pars_vertex, r.ShaderChunk.skinning_pars_vertex, r.ShaderChunk.shadowmap_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.uv_vertex, r.ShaderChunk.uv2_vertex, r.ShaderChunk.color_vertex, r.ShaderChunk.skinbase_vertex, "	#ifdef USE_ENVMAP", r.ShaderChunk.beginnormal_vertex, r.ShaderChunk.morphnormal_vertex, r.ShaderChunk.skinnormal_vertex, r.ShaderChunk.defaultnormal_vertex, "	#endif", r.ShaderChunk.begin_vertex, r.ShaderChunk.morphtarget_vertex, r.ShaderChunk.skinning_vertex, r.ShaderChunk.project_vertex, r.ShaderChunk.logdepthbuf_vertex, r.ShaderChunk.worldpos_vertex, r.ShaderChunk.envmap_vertex, r.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
                fragmentShader: ["uniform vec3 diffuse;\nuniform float opacity;", r.ShaderChunk.common, r.ShaderChunk.color_pars_fragment, r.ShaderChunk.uv_pars_fragment, r.ShaderChunk.uv2_pars_fragment, r.ShaderChunk.map_pars_fragment, r.ShaderChunk.alphamap_pars_fragment, r.ShaderChunk.aomap_pars_fragment, r.ShaderChunk.envmap_pars_fragment, r.ShaderChunk.fog_pars_fragment, r.ShaderChunk.shadowmap_pars_fragment, r.ShaderChunk.specularmap_pars_fragment, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	vec3 totalAmbientLight = vec3( 1.0 );", r.ShaderChunk.logdepthbuf_fragment, r.ShaderChunk.map_fragment, r.ShaderChunk.color_fragment, r.ShaderChunk.alphamap_fragment, r.ShaderChunk.alphatest_fragment, r.ShaderChunk.specularmap_fragment, r.ShaderChunk.aomap_fragment, "	outgoingLight = diffuseColor.rgb * totalAmbientLight;", r.ShaderChunk.envmap_fragment, r.ShaderChunk.shadowmap_fragment, r.ShaderChunk.linear_to_gamma_fragment, r.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")
            },
            lambert: {
                uniforms: r.UniformsUtils.merge([r.UniformsLib.common, r.UniformsLib.fog, r.UniformsLib.lights, r.UniformsLib.shadowmap, {
                    emissive: {
                        type: "c",
                        value: new r.Color(0)
                    }
                }]),
                vertexShader: ["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif", r.ShaderChunk.common, r.ShaderChunk.uv_pars_vertex, r.ShaderChunk.uv2_pars_vertex, r.ShaderChunk.envmap_pars_vertex, r.ShaderChunk.lights_lambert_pars_vertex, r.ShaderChunk.color_pars_vertex, r.ShaderChunk.morphtarget_pars_vertex, r.ShaderChunk.skinning_pars_vertex, r.ShaderChunk.shadowmap_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.uv_vertex, r.ShaderChunk.uv2_vertex, r.ShaderChunk.color_vertex, r.ShaderChunk.beginnormal_vertex, r.ShaderChunk.morphnormal_vertex, r.ShaderChunk.skinbase_vertex, r.ShaderChunk.skinnormal_vertex, r.ShaderChunk.defaultnormal_vertex, r.ShaderChunk.begin_vertex, r.ShaderChunk.morphtarget_vertex, r.ShaderChunk.skinning_vertex, r.ShaderChunk.project_vertex, r.ShaderChunk.logdepthbuf_vertex, r.ShaderChunk.worldpos_vertex, r.ShaderChunk.envmap_vertex, r.ShaderChunk.lights_lambert_vertex, r.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
                fragmentShader: ["uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif", r.ShaderChunk.common, r.ShaderChunk.color_pars_fragment, r.ShaderChunk.uv_pars_fragment, r.ShaderChunk.uv2_pars_fragment, r.ShaderChunk.map_pars_fragment, r.ShaderChunk.alphamap_pars_fragment, r.ShaderChunk.envmap_pars_fragment, r.ShaderChunk.fog_pars_fragment, r.ShaderChunk.shadowmap_pars_fragment, r.ShaderChunk.specularmap_pars_fragment, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );", r.ShaderChunk.logdepthbuf_fragment, r.ShaderChunk.map_fragment, r.ShaderChunk.color_fragment, r.ShaderChunk.alphamap_fragment, r.ShaderChunk.alphatest_fragment, r.ShaderChunk.specularmap_fragment, "	#ifdef DOUBLE_SIDED\n		if ( gl_FrontFacing )\n			outgoingLight += diffuseColor.rgb * vLightFront + emissive;\n		else\n			outgoingLight += diffuseColor.rgb * vLightBack + emissive;\n	#else\n		outgoingLight += diffuseColor.rgb * vLightFront + emissive;\n	#endif", r.ShaderChunk.envmap_fragment, r.ShaderChunk.shadowmap_fragment, r.ShaderChunk.linear_to_gamma_fragment, r.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")
            },
            phong: {
                uniforms: r.UniformsUtils.merge([r.UniformsLib.common, r.UniformsLib.aomap, r.UniformsLib.lightmap, r.UniformsLib.emissivemap, r.UniformsLib.bumpmap, r.UniformsLib.normalmap, r.UniformsLib.displacementmap, r.UniformsLib.fog, r.UniformsLib.lights, r.UniformsLib.shadowmap, {
                    emissive: {
                        type: "c",
                        value: new r.Color(0)
                    },
                    specular: {
                        type: "c",
                        value: new r.Color(1118481)
                    },
                    shininess: {
                        type: "f",
                        value: 30
                    }
                }]),
                vertexShader: ["#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif", r.ShaderChunk.common, r.ShaderChunk.uv_pars_vertex, r.ShaderChunk.uv2_pars_vertex, r.ShaderChunk.displacementmap_pars_vertex, r.ShaderChunk.envmap_pars_vertex, r.ShaderChunk.lights_phong_pars_vertex, r.ShaderChunk.color_pars_vertex, r.ShaderChunk.morphtarget_pars_vertex, r.ShaderChunk.skinning_pars_vertex, r.ShaderChunk.shadowmap_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.uv_vertex, r.ShaderChunk.uv2_vertex, r.ShaderChunk.color_vertex, r.ShaderChunk.beginnormal_vertex, r.ShaderChunk.morphnormal_vertex, r.ShaderChunk.skinbase_vertex, r.ShaderChunk.skinnormal_vertex, r.ShaderChunk.defaultnormal_vertex, "#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif", r.ShaderChunk.begin_vertex, r.ShaderChunk.displacementmap_vertex, r.ShaderChunk.morphtarget_vertex, r.ShaderChunk.skinning_vertex, r.ShaderChunk.project_vertex, r.ShaderChunk.logdepthbuf_vertex, "	vViewPosition = - mvPosition.xyz;", r.ShaderChunk.worldpos_vertex, r.ShaderChunk.envmap_vertex, r.ShaderChunk.lights_phong_vertex, r.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
                fragmentShader: ["#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;", r.ShaderChunk.common, r.ShaderChunk.color_pars_fragment, r.ShaderChunk.uv_pars_fragment, r.ShaderChunk.uv2_pars_fragment, r.ShaderChunk.map_pars_fragment, r.ShaderChunk.alphamap_pars_fragment, r.ShaderChunk.aomap_pars_fragment, r.ShaderChunk.lightmap_pars_fragment, r.ShaderChunk.emissivemap_pars_fragment, r.ShaderChunk.envmap_pars_fragment, r.ShaderChunk.fog_pars_fragment, r.ShaderChunk.lights_phong_pars_fragment, r.ShaderChunk.shadowmap_pars_fragment, r.ShaderChunk.bumpmap_pars_fragment, r.ShaderChunk.normalmap_pars_fragment, r.ShaderChunk.specularmap_pars_fragment, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	vec3 totalAmbientLight = ambientLightColor;\n	vec3 totalEmissiveLight = emissive;", r.ShaderChunk.logdepthbuf_fragment, r.ShaderChunk.map_fragment, r.ShaderChunk.color_fragment, r.ShaderChunk.alphamap_fragment, r.ShaderChunk.alphatest_fragment, r.ShaderChunk.specularmap_fragment, r.ShaderChunk.lightmap_fragment, r.ShaderChunk.aomap_fragment, r.ShaderChunk.emissivemap_fragment, r.ShaderChunk.lights_phong_fragment, r.ShaderChunk.envmap_fragment, r.ShaderChunk.shadowmap_fragment, r.ShaderChunk.linear_to_gamma_fragment, r.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")
            },
            points: {
                uniforms: r.UniformsUtils.merge([r.UniformsLib.points, r.UniformsLib.shadowmap]),
                vertexShader: ["uniform float size;\nuniform float scale;", r.ShaderChunk.common, r.ShaderChunk.color_pars_vertex, r.ShaderChunk.shadowmap_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.color_vertex, "	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	#ifdef USE_SIZEATTENUATION\n		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n	#else\n		gl_PointSize = size;\n	#endif\n	gl_Position = projectionMatrix * mvPosition;", r.ShaderChunk.logdepthbuf_vertex, r.ShaderChunk.worldpos_vertex, r.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
                fragmentShader: ["uniform vec3 psColor;\nuniform float opacity;", r.ShaderChunk.common, r.ShaderChunk.color_pars_fragment, r.ShaderChunk.map_particle_pars_fragment, r.ShaderChunk.fog_pars_fragment, r.ShaderChunk.shadowmap_pars_fragment, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( psColor, opacity );", r.ShaderChunk.logdepthbuf_fragment, r.ShaderChunk.map_particle_fragment, r.ShaderChunk.color_fragment, r.ShaderChunk.alphatest_fragment, "	outgoingLight = diffuseColor.rgb;", r.ShaderChunk.shadowmap_fragment, r.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")
            },
            dashed: {
                uniforms: r.UniformsUtils.merge([r.UniformsLib.common, r.UniformsLib.fog, {
                    scale: {
                        type: "f",
                        value: 1
                    },
                    dashSize: {
                        type: "f",
                        value: 1
                    },
                    totalSize: {
                        type: "f",
                        value: 2
                    }
                }]),
                vertexShader: ["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;", r.ShaderChunk.common, r.ShaderChunk.color_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.color_vertex, "	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;", r.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;", r.ShaderChunk.common, r.ShaderChunk.color_pars_fragment, r.ShaderChunk.fog_pars_fragment, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );", r.ShaderChunk.logdepthbuf_fragment, r.ShaderChunk.color_fragment, "	outgoingLight = diffuseColor.rgb;", r.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")
            },
            depth: {
                uniforms: {
                    mNear: {
                        type: "f",
                        value: 1
                    },
                    mFar: {
                        type: "f",
                        value: 2e3
                    },
                    opacity: {
                        type: "f",
                        value: 1
                    }
                },
                vertexShader: [r.ShaderChunk.common, r.ShaderChunk.morphtarget_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.begin_vertex, r.ShaderChunk.morphtarget_vertex, r.ShaderChunk.project_vertex, r.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform float mNear;\nuniform float mFar;\nuniform float opacity;", r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", r.ShaderChunk.logdepthbuf_fragment, "	#ifdef USE_LOGDEPTHBUF_EXT\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n	#else\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n	#endif\n	float color = 1.0 - smoothstep( mNear, mFar, depth );\n	gl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")
            },
            normal: {
                uniforms: {
                    opacity: {
                        type: "f",
                        value: 1
                    }
                },
                vertexShader: ["varying vec3 vNormal;", r.ShaderChunk.common, r.ShaderChunk.morphtarget_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {\n	vNormal = normalize( normalMatrix * normal );", r.ShaderChunk.begin_vertex, r.ShaderChunk.morphtarget_vertex, r.ShaderChunk.project_vertex, r.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform float opacity;\nvarying vec3 vNormal;", r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );", r.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
            },
            cube: {
                uniforms: {
                    tCube: {
                        type: "t",
                        value: null
                    },
                    tFlip: {
                        type: "f",
                        value: -1
                    }
                },
                vertexShader: ["varying vec3 vWorldPosition;", r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", r.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;", r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );", r.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
            },
            equirect: {
                uniforms: {
                    tEquirect: {
                        type: "t",
                        value: null
                    },
                    tFlip: {
                        type: "f",
                        value: -1
                    }
                },
                vertexShader: ["varying vec3 vWorldPosition;", r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", r.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;", r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\nvec3 direction = normalize( vWorldPosition );\nvec2 sampleUV;\nsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\nsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\ngl_FragColor = texture2D( tEquirect, sampleUV );", r.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
            },
            depthRGBA: {
                uniforms: {},
                vertexShader: [r.ShaderChunk.common, r.ShaderChunk.morphtarget_pars_vertex, r.ShaderChunk.skinning_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.skinbase_vertex, r.ShaderChunk.begin_vertex, r.ShaderChunk.morphtarget_vertex, r.ShaderChunk.skinning_vertex, r.ShaderChunk.project_vertex, r.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: [r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_fragment, "vec4 pack_depth( const in float depth ) {\n	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n	res -= res.xxyz * bit_mask;\n	return res;\n}\nvoid main() {", r.ShaderChunk.logdepthbuf_fragment, "	#ifdef USE_LOGDEPTHBUF_EXT\n		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n	#else\n		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n	#endif\n}"].join("\n")
            }
        },
        r.WebGLRenderer = function(t) {
            function e(t, e, n, r) {
                !0 === I && (t *= r,
                e *= r,
                n *= r),
                xt.clearColor(t, e, n, r)
            }
            function n() {
                Tt.init(),
                xt.viewport(at, st, lt, ht),
                e(N.r, N.g, N.b, j)
            }
            function i() {
                it = tt = null ,
                rt = "",
                nt = -1,
                gt = !0,
                Tt.reset()
            }
            function o(t) {
                t.preventDefault(),
                i(),
                n(),
                Mt.clear()
            }
            function a(t) {
                t = t.target,
                t.removeEventListener("dispose", a);
                t: {
                    var e = Mt.get(t);
                    if (t.image && e.__image__webglTextureCube)
                        xt.deleteTexture(e.__image__webglTextureCube);
                    else {
                        if (void 0 === e.__webglInit)
                            break t;
                        xt.deleteTexture(e.__webglTexture)
                    }
                    Mt["delete"](t)
                }
                yt.textures--
            }
            function s(t) {
                t = t.target,
                t.removeEventListener("dispose", s);
                var e = Mt.get(t);
                if (t && void 0 !== e.__webglTexture) {
                    if (xt.deleteTexture(e.__webglTexture),
                    t instanceof r.WebGLRenderTargetCube)
                        for (var n = 0; 6 > n; n++)
                            xt.deleteFramebuffer(e.__webglFramebuffer[n]),
                            xt.deleteRenderbuffer(e.__webglRenderbuffer[n]);
                    else
                        xt.deleteFramebuffer(e.__webglFramebuffer),
                        xt.deleteRenderbuffer(e.__webglRenderbuffer);
                    Mt["delete"](t)
                }
                yt.textures--
            }
            function l(t) {
                t = t.target,
                t.removeEventListener("dispose", l),
                h(t),
                Mt["delete"](t)
            }
            function h(t) {
                var e = Mt.get(t).program;
                t.program = void 0,
                void 0 !== e && At.releaseProgram(e)
            }
            function c(t, e) {
                return e[0] - t[0]
            }
            function u(t, e) {
                return t.object.renderOrder !== e.object.renderOrder ? t.object.renderOrder - e.object.renderOrder : t.material.id !== e.material.id ? t.material.id - e.material.id : t.z !== e.z ? t.z - e.z : t.id - e.id
            }
            function p(t, e) {
                return t.object.renderOrder !== e.object.renderOrder ? t.object.renderOrder - e.object.renderOrder : t.z !== e.z ? e.z - t.z : t.id - e.id
            }
            function d(t, e, n, r, i) {
                var o;
                n.transparent ? (r = H,
                o = ++W) : (r = G,
                o = ++z),
                o = r[o],
                void 0 !== o ? (o.id = t.id,
                o.object = t,
                o.geometry = e,
                o.material = n,
                o.z = ft.z,
                o.group = i) : (o = {
                    id: t.id,
                    object: t,
                    geometry: e,
                    material: n,
                    z: ft.z,
                    group: i
                },
                r.push(o))
            }
            function f(t) {
                if (!1 !== t.visible) {
                    if (t instanceof r.Light)
                        V.push(t);
                    else if (t instanceof r.Sprite)
                        Z.push(t);
                    else if (t instanceof r.LensFlare)
                        J.push(t);
                    else if (t instanceof r.ImmediateRenderObject) {
                        var e, n;
                        t.material.transparent ? (e = Y,
                        n = ++K) : (e = q,
                        n = ++X),
                        n < e.length ? e[n] = t : e.push(t)
                    } else if ((t instanceof r.Mesh || t instanceof r.Line || t instanceof r.Points) && (t instanceof r.SkinnedMesh && t.skeleton.update(),
                    !1 === t.frustumCulled || !0 === pt.intersectsObject(t))) {
                        var i = t.material;
                        if (!0 === i.visible)
                            if (!0 === $.sortObjects && (ft.setFromMatrixPosition(t.matrixWorld),
                            ft.applyProjection(dt)),
                            e = Ct.update(t),
                            i instanceof r.MeshFaceMaterial) {
                                n = e.groups;
                                for (var o = i.materials, i = 0, a = n.length; a > i; i++) {
                                    var s = n[i]
                                      , l = o[s.materialIndex];
                                    !0 === l.visible && d(t, e, l, ft.z, s)
                                }
                            } else
                                d(t, e, i, ft.z)
                    }
                    for (t = t.children,
                    i = 0,
                    a = t.length; a > i; i++)
                        f(t[i])
                }
            }
            function m(t, e, n, r, i) {
                for (var o = 0, a = t.length; a > o; o++) {
                    var s = t[o]
                      , l = s.object
                      , h = s.geometry
                      , c = void 0 === i ? s.material : i
                      , s = s.group;
                    l.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse, l.matrixWorld),
                    l.normalMatrix.getNormalMatrix(l.modelViewMatrix),
                    $.renderBufferDirect(e, n, r, h, c, l, s)
                }
            }
            function g(t, e, n, r, i) {
                for (var o = i, a = 0, s = t.length; s > a; a++) {
                    var l = t[a];
                    l.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse, l.matrixWorld),
                    l.normalMatrix.getNormalMatrix(l.modelViewMatrix),
                    void 0 === i && (o = l.material),
                    v(o);
                    var h = y(e, n, r, o, l);
                    rt = "",
                    l.render(function(t) {
                        $.renderBufferImmediate(t, h, o)
                    })
                }
            }
            function v(t) {
                t.side !== r.DoubleSide ? Tt.enable(xt.CULL_FACE) : Tt.disable(xt.CULL_FACE),
                Tt.setFlipSided(t.side === r.BackSide),
                !0 === t.transparent ? Tt.setBlending(t.blending, t.blendEquation, t.blendSrc, t.blendDst, t.blendEquationAlpha, t.blendSrcAlpha, t.blendDstAlpha) : Tt.setBlending(r.NoBlending),
                Tt.setDepthFunc(t.depthFunc),
                Tt.setDepthTest(t.depthTest),
                Tt.setDepthWrite(t.depthWrite),
                Tt.setColorWrite(t.colorWrite),
                Tt.setPolygonOffset(t.polygonOffset, t.polygonOffsetFactor, t.polygonOffsetUnits)
            }
            function y(t, e, n, i, o) {
                ot = 0;
                var s = Mt.get(i);
                if (i.needsUpdate || !s.program) {
                    t: {
                        var c = Mt.get(i)
                          , u = At.getParameters(i, e, n, o)
                          , p = At.getProgramCode(i, u)
                          , d = c.program
                          , f = !0;
                        if (void 0 === d)
                            i.addEventListener("dispose", l);
                        else if (d.code !== p)
                            h(i);
                        else {
                            if (void 0 !== u.shaderID)
                                break t;
                            f = !1
                        }
                        if (f) {
                            if (u.shaderID) {
                                var m = r.ShaderLib[u.shaderID];
                                c.__webglShader = {
                                    name: i.type,
                                    uniforms: r.UniformsUtils.clone(m.uniforms),
                                    vertexShader: m.vertexShader,
                                    fragmentShader: m.fragmentShader
                                }
                            } else
                                c.__webglShader = {
                                    name: i.type,
                                    uniforms: i.uniforms,
                                    vertexShader: i.vertexShader,
                                    fragmentShader: i.fragmentShader
                                };
                            i.__webglShader = c.__webglShader,
                            d = At.acquireProgram(i, u, p),
                            c.program = d,
                            i.program = d
                        }
                        var g = d.getAttributes();
                        if (i.morphTargets)
                            for (var v = i.numSupportedMorphTargets = 0; v < $.maxMorphTargets; v++)
                                0 <= g["morphTarget" + v] && i.numSupportedMorphTargets++;
                        if (i.morphNormals)
                            for (v = i.numSupportedMorphNormals = 0; v < $.maxMorphNormals; v++)
                                0 <= g["morphNormal" + v] && i.numSupportedMorphNormals++;
                        c.uniformsList = [];
                        var y, T = c.program.getUniforms();
                        for (y in c.__webglShader.uniforms) {
                            var M = T[y];
                            M && c.uniformsList.push([c.__webglShader.uniforms[y], M])
                        }
                    }
                    i.needsUpdate = !1
                }
                var C = !1
                  , L = !1
                  , P = !1
                  , k = s.program
                  , R = k.getUniforms()
                  , O = s.__webglShader.uniforms;
                if (k.id !== tt && (xt.useProgram(k.program),
                tt = k.id,
                P = L = C = !0),
                i.id !== nt && (-1 === nt && (P = !0),
                nt = i.id,
                L = !0),
                (C || t !== it) && (xt.uniformMatrix4fv(R.projectionMatrix, !1, t.projectionMatrix.elements),
                St.logarithmicDepthBuffer && xt.uniform1f(R.logDepthBufFC, 2 / (Math.log(t.far + 1) / Math.LN2)),
                t !== it && (it = t),
                (i instanceof r.ShaderMaterial || i instanceof r.MeshPhongMaterial || i.envMap) && void 0 !== R.cameraPosition && (ft.setFromMatrixPosition(t.matrixWorld),
                xt.uniform3f(R.cameraPosition, ft.x, ft.y, ft.z)),
                (i instanceof r.MeshPhongMaterial || i instanceof r.MeshLambertMaterial || i instanceof r.MeshBasicMaterial || i instanceof r.ShaderMaterial || i.skinning) && void 0 !== R.viewMatrix && xt.uniformMatrix4fv(R.viewMatrix, !1, t.matrixWorldInverse.elements)),
                i.skinning)
                    if (o.bindMatrix && void 0 !== R.bindMatrix && xt.uniformMatrix4fv(R.bindMatrix, !1, o.bindMatrix.elements),
                    o.bindMatrixInverse && void 0 !== R.bindMatrixInverse && xt.uniformMatrix4fv(R.bindMatrixInverse, !1, o.bindMatrixInverse.elements),
                    St.floatVertexTextures && o.skeleton && o.skeleton.useVertexTexture) {
                        if (void 0 !== R.boneTexture) {
                            var D = x();
                            xt.uniform1i(R.boneTexture, D),
                            $.setTexture(o.skeleton.boneTexture, D)
                        }
                        void 0 !== R.boneTextureWidth && xt.uniform1i(R.boneTextureWidth, o.skeleton.boneTextureWidth),
                        void 0 !== R.boneTextureHeight && xt.uniform1i(R.boneTextureHeight, o.skeleton.boneTextureHeight)
                    } else
                        o.skeleton && o.skeleton.boneMatrices && void 0 !== R.boneGlobalMatrices && xt.uniformMatrix4fv(R.boneGlobalMatrices, !1, o.skeleton.boneMatrices);
                if (L) {
                    if (n && i.fog && (O.fogColor.value = n.color,
                    n instanceof r.Fog ? (O.fogNear.value = n.near,
                    O.fogFar.value = n.far) : n instanceof r.FogExp2 && (O.fogDensity.value = n.density)),
                    i instanceof r.MeshPhongMaterial || i instanceof r.MeshLambertMaterial || i.lights) {
                        if (gt) {
                            var F, U, I, B, N, j, V, G, P = !0, z = 0, H = 0, W = 0, q = vt, X = t.matrixWorldInverse, Y = q.directional.colors, K = q.directional.positions, Q = q.point.colors, Z = q.point.positions, J = q.point.distances, et = q.point.decays, rt = q.spot.colors, at = q.spot.positions, st = q.spot.distances, lt = q.spot.directions, ht = q.spot.anglesCos, ct = q.spot.exponents, ut = q.spot.decays, pt = q.hemi.skyColors, dt = q.hemi.groundColors, _t = q.hemi.positions, bt = 0, wt = 0, Ct = 0, Et = 0, Lt = 0, Pt = 0, kt = 0, Rt = 0, Ot = 0, Dt = 0, Ft = 0, Ut = 0;
                            for (F = 0,
                            U = e.length; U > F; F++)
                                I = e[F],
                                I.onlyShadow || (B = I.color,
                                V = I.intensity,
                                G = I.distance,
                                I instanceof r.AmbientLight ? I.visible && (z += B.r,
                                H += B.g,
                                W += B.b) : I instanceof r.DirectionalLight ? (Lt += 1,
                                I.visible && (mt.setFromMatrixPosition(I.matrixWorld),
                                ft.setFromMatrixPosition(I.target.matrixWorld),
                                mt.sub(ft),
                                mt.transformDirection(X),
                                Ot = 3 * bt,
                                K[Ot + 0] = mt.x,
                                K[Ot + 1] = mt.y,
                                K[Ot + 2] = mt.z,
                                b(Y, Ot, B, V),
                                bt += 1)) : I instanceof r.PointLight ? (Pt += 1,
                                I.visible && (Dt = 3 * wt,
                                b(Q, Dt, B, V),
                                ft.setFromMatrixPosition(I.matrixWorld),
                                ft.applyMatrix4(X),
                                Z[Dt + 0] = ft.x,
                                Z[Dt + 1] = ft.y,
                                Z[Dt + 2] = ft.z,
                                J[wt] = G,
                                et[wt] = 0 === I.distance ? 0 : I.decay,
                                wt += 1)) : I instanceof r.SpotLight ? (kt += 1,
                                I.visible && (Ft = 3 * Ct,
                                b(rt, Ft, B, V),
                                mt.setFromMatrixPosition(I.matrixWorld),
                                ft.copy(mt).applyMatrix4(X),
                                at[Ft + 0] = ft.x,
                                at[Ft + 1] = ft.y,
                                at[Ft + 2] = ft.z,
                                st[Ct] = G,
                                ft.setFromMatrixPosition(I.target.matrixWorld),
                                mt.sub(ft),
                                mt.transformDirection(X),
                                lt[Ft + 0] = mt.x,
                                lt[Ft + 1] = mt.y,
                                lt[Ft + 2] = mt.z,
                                ht[Ct] = Math.cos(I.angle),
                                ct[Ct] = I.exponent,
                                ut[Ct] = 0 === I.distance ? 0 : I.decay,
                                Ct += 1)) : I instanceof r.HemisphereLight && (Rt += 1,
                                I.visible && (mt.setFromMatrixPosition(I.matrixWorld),
                                mt.transformDirection(X),
                                Ut = 3 * Et,
                                _t[Ut + 0] = mt.x,
                                _t[Ut + 1] = mt.y,
                                _t[Ut + 2] = mt.z,
                                N = I.color,
                                j = I.groundColor,
                                b(pt, Ut, N, V),
                                b(dt, Ut, j, V),
                                Et += 1)));
                            for (F = 3 * bt,
                            U = Math.max(Y.length, 3 * Lt); U > F; F++)
                                Y[F] = 0;
                            for (F = 3 * wt,
                            U = Math.max(Q.length, 3 * Pt); U > F; F++)
                                Q[F] = 0;
                            for (F = 3 * Ct,
                            U = Math.max(rt.length, 3 * kt); U > F; F++)
                                rt[F] = 0;
                            for (F = 3 * Et,
                            U = Math.max(pt.length, 3 * Rt); U > F; F++)
                                pt[F] = 0;
                            for (F = 3 * Et,
                            U = Math.max(dt.length, 3 * Rt); U > F; F++)
                                dt[F] = 0;
                            q.directional.length = bt,
                            q.point.length = wt,
                            q.spot.length = Ct,
                            q.hemi.length = Et,
                            q.ambient[0] = z,
                            q.ambient[1] = H,
                            q.ambient[2] = W,
                            gt = !1
                        }
                        if (P) {
                            var It = vt;
                            O.ambientLightColor.value = It.ambient,
                            O.directionalLightColor.value = It.directional.colors,
                            O.directionalLightDirection.value = It.directional.positions,
                            O.pointLightColor.value = It.point.colors,
                            O.pointLightPosition.value = It.point.positions,
                            O.pointLightDistance.value = It.point.distances,
                            O.pointLightDecay.value = It.point.decays,
                            O.spotLightColor.value = It.spot.colors,
                            O.spotLightPosition.value = It.spot.positions,
                            O.spotLightDistance.value = It.spot.distances,
                            O.spotLightDirection.value = It.spot.directions,
                            O.spotLightAngleCos.value = It.spot.anglesCos,
                            O.spotLightExponent.value = It.spot.exponents,
                            O.spotLightDecay.value = It.spot.decays,
                            O.hemisphereLightSkyColor.value = It.hemi.skyColors,
                            O.hemisphereLightGroundColor.value = It.hemi.groundColors,
                            O.hemisphereLightDirection.value = It.hemi.positions,
                            _(O, !0)
                        } else
                            _(O, !1)
                    }
                    if (i instanceof r.MeshBasicMaterial || i instanceof r.MeshLambertMaterial || i instanceof r.MeshPhongMaterial) {
                        O.opacity.value = i.opacity,
                        O.diffuse.value = i.color,
                        i.emissive && (O.emissive.value = i.emissive),
                        O.map.value = i.map,
                        O.specularMap.value = i.specularMap,
                        O.alphaMap.value = i.alphaMap,
                        i.aoMap && (O.aoMap.value = i.aoMap,
                        O.aoMapIntensity.value = i.aoMapIntensity);
                        var Bt;
                        if (i.map ? Bt = i.map : i.specularMap ? Bt = i.specularMap : i.displacementMap ? Bt = i.displacementMap : i.normalMap ? Bt = i.normalMap : i.bumpMap ? Bt = i.bumpMap : i.alphaMap ? Bt = i.alphaMap : i.emissiveMap && (Bt = i.emissiveMap),
                        void 0 !== Bt) {
                            var Nt = Bt.offset
                              , jt = Bt.repeat;
                            O.offsetRepeat.value.set(Nt.x, Nt.y, jt.x, jt.y)
                        }
                        O.envMap.value = i.envMap,
                        O.flipEnvMap.value = i.envMap instanceof r.WebGLRenderTargetCube ? 1 : -1,
                        O.reflectivity.value = i.reflectivity,
                        O.refractionRatio.value = i.refractionRatio
                    }
                    if (i instanceof r.LineBasicMaterial)
                        O.diffuse.value = i.color,
                        O.opacity.value = i.opacity;
                    else if (i instanceof r.LineDashedMaterial)
                        O.diffuse.value = i.color,
                        O.opacity.value = i.opacity,
                        O.dashSize.value = i.dashSize,
                        O.totalSize.value = i.dashSize + i.gapSize,
                        O.scale.value = i.scale;
                    else if (i instanceof r.PointsMaterial) {
                        if (O.psColor.value = i.color,
                        O.opacity.value = i.opacity,
                        O.size.value = i.size,
                        O.scale.value = E.height / 2,
                        O.map.value = i.map,
                        null !== i.map) {
                            var Vt = i.map.offset
                              , Gt = i.map.repeat;
                            O.offsetRepeat.value.set(Vt.x, Vt.y, Gt.x, Gt.y)
                        }
                    } else
                        i instanceof r.MeshPhongMaterial ? (O.specular.value = i.specular,
                        O.shininess.value = i.shininess,
                        i.lightMap && (O.lightMap.value = i.lightMap,
                        O.lightMapIntensity.value = i.lightMapIntensity),
                        i.emissiveMap && (O.emissiveMap.value = i.emissiveMap),
                        i.bumpMap && (O.bumpMap.value = i.bumpMap,
                        O.bumpScale.value = i.bumpScale),
                        i.normalMap && (O.normalMap.value = i.normalMap,
                        O.normalScale.value.copy(i.normalScale)),
                        i.displacementMap && (O.displacementMap.value = i.displacementMap,
                        O.displacementScale.value = i.displacementScale,
                        O.displacementBias.value = i.displacementBias)) : i instanceof r.MeshDepthMaterial ? (O.mNear.value = t.near,
                        O.mFar.value = t.far,
                        O.opacity.value = i.opacity) : i instanceof r.MeshNormalMaterial && (O.opacity.value = i.opacity);
                    if (o.receiveShadow && !i._shadowPass && O.shadowMatrix)
                        for (var zt = 0, Ht = 0, Wt = e.length; Wt > Ht; Ht++) {
                            var qt = e[Ht];
                            qt.castShadow && (qt instanceof r.SpotLight || qt instanceof r.DirectionalLight) && (O.shadowMap.value[zt] = qt.shadowMap,
                            O.shadowMapSize.value[zt] = qt.shadowMapSize,
                            O.shadowMatrix.value[zt] = qt.shadowMatrix,
                            O.shadowDarkness.value[zt] = qt.shadowDarkness,
                            O.shadowBias.value[zt] = qt.shadowBias,
                            zt++)
                        }
                    for (var Xt, Yt, Kt = s.uniformsList, Qt = 0, Zt = Kt.length; Zt > Qt; Qt++) {
                        var Jt = Kt[Qt][0];
                        if (!1 !== Jt.needsUpdate) {
                            var $t = Jt.type
                              , te = Jt.value
                              , ee = Kt[Qt][1];
                            switch ($t) {
                            case "1i":
                                xt.uniform1i(ee, te);
                                break;
                            case "1f":
                                xt.uniform1f(ee, te);
                                break;
                            case "2f":
                                xt.uniform2f(ee, te[0], te[1]);
                                break;
                            case "3f":
                                xt.uniform3f(ee, te[0], te[1], te[2]);
                                break;
                            case "4f":
                                xt.uniform4f(ee, te[0], te[1], te[2], te[3]);
                                break;
                            case "1iv":
                                xt.uniform1iv(ee, te);
                                break;
                            case "3iv":
                                xt.uniform3iv(ee, te);
                                break;
                            case "1fv":
                                xt.uniform1fv(ee, te);
                                break;
                            case "2fv":
                                xt.uniform2fv(ee, te);
                                break;
                            case "3fv":
                                xt.uniform3fv(ee, te);
                                break;
                            case "4fv":
                                xt.uniform4fv(ee, te);
                                break;
                            case "Matrix3fv":
                                xt.uniformMatrix3fv(ee, !1, te);
                                break;
                            case "Matrix4fv":
                                xt.uniformMatrix4fv(ee, !1, te);
                                break;
                            case "i":
                                xt.uniform1i(ee, te);
                                break;
                            case "f":
                                xt.uniform1f(ee, te);
                                break;
                            case "v2":
                                xt.uniform2f(ee, te.x, te.y);
                                break;
                            case "v3":
                                xt.uniform3f(ee, te.x, te.y, te.z);
                                break;
                            case "v4":
                                xt.uniform4f(ee, te.x, te.y, te.z, te.w);
                                break;
                            case "c":
                                xt.uniform3f(ee, te.r, te.g, te.b);
                                break;
                            case "iv1":
                                xt.uniform1iv(ee, te);
                                break;
                            case "iv":
                                xt.uniform3iv(ee, te);
                                break;
                            case "fv1":
                                xt.uniform1fv(ee, te);
                                break;
                            case "fv":
                                xt.uniform3fv(ee, te);
                                break;
                            case "v2v":
                                void 0 === Jt._array && (Jt._array = new Float32Array(2 * te.length));
                                for (var ne = 0, re = 0, ie = te.length; ie > ne; ne++,
                                re += 2)
                                    Jt._array[re + 0] = te[ne].x,
                                    Jt._array[re + 1] = te[ne].y;
                                xt.uniform2fv(ee, Jt._array);
                                break;
                            case "v3v":
                                void 0 === Jt._array && (Jt._array = new Float32Array(3 * te.length));
                                for (var oe = ne = 0, ie = te.length; ie > ne; ne++,
                                oe += 3)
                                    Jt._array[oe + 0] = te[ne].x,
                                    Jt._array[oe + 1] = te[ne].y,
                                    Jt._array[oe + 2] = te[ne].z;
                                xt.uniform3fv(ee, Jt._array);
                                break;
                            case "v4v":
                                void 0 === Jt._array && (Jt._array = new Float32Array(4 * te.length));
                                for (var ae = ne = 0, ie = te.length; ie > ne; ne++,
                                ae += 4)
                                    Jt._array[ae + 0] = te[ne].x,
                                    Jt._array[ae + 1] = te[ne].y,
                                    Jt._array[ae + 2] = te[ne].z,
                                    Jt._array[ae + 3] = te[ne].w;
                                xt.uniform4fv(ee, Jt._array);
                                break;
                            case "m3":
                                xt.uniformMatrix3fv(ee, !1, te.elements);
                                break;
                            case "m3v":
                                for (void 0 === Jt._array && (Jt._array = new Float32Array(9 * te.length)),
                                ne = 0,
                                ie = te.length; ie > ne; ne++)
                                    te[ne].flattenToArrayOffset(Jt._array, 9 * ne);
                                xt.uniformMatrix3fv(ee, !1, Jt._array);
                                break;
                            case "m4":
                                xt.uniformMatrix4fv(ee, !1, te.elements);
                                break;
                            case "m4v":
                                for (void 0 === Jt._array && (Jt._array = new Float32Array(16 * te.length)),
                                ne = 0,
                                ie = te.length; ie > ne; ne++)
                                    te[ne].flattenToArrayOffset(Jt._array, 16 * ne);
                                xt.uniformMatrix4fv(ee, !1, Jt._array);
                                break;
                            case "t":
                                if (Xt = te,
                                Yt = x(),
                                xt.uniform1i(ee, Yt),
                                !Xt)
                                    continue;
                                if (Xt instanceof r.CubeTexture || Array.isArray(Xt.image) && 6 === Xt.image.length) {
                                    var se = Xt
                                      , le = Yt
                                      , he = Mt.get(se);
                                    if (6 === se.image.length)
                                        if (0 < se.version && he.__version !== se.version) {
                                            he.__image__webglTextureCube || (se.addEventListener("dispose", a),
                                            he.__image__webglTextureCube = xt.createTexture(),
                                            yt.textures++),
                                            Tt.activeTexture(xt.TEXTURE0 + le),
                                            Tt.bindTexture(xt.TEXTURE_CUBE_MAP, he.__image__webglTextureCube),
                                            xt.pixelStorei(xt.UNPACK_FLIP_Y_WEBGL, se.flipY);
                                            for (var ce = se instanceof r.CompressedTexture, ue = se.image[0]instanceof r.DataTexture, pe = [], de = 0; 6 > de; de++)
                                                pe[de] = !$.autoScaleCubemaps || ce || ue ? ue ? se.image[de].image : se.image[de] : S(se.image[de], St.maxCubemapSize);
                                            var fe = pe[0]
                                              , me = r.Math.isPowerOfTwo(fe.width) && r.Math.isPowerOfTwo(fe.height)
                                              , ge = A(se.format)
                                              , ve = A(se.type);
                                            for (w(xt.TEXTURE_CUBE_MAP, se, me),
                                            de = 0; 6 > de; de++)
                                                if (ce)
                                                    for (var ye, _e = pe[de].mipmaps, xe = 0, be = _e.length; be > xe; xe++)
                                                        ye = _e[xe],
                                                        se.format !== r.RGBAFormat && se.format !== r.RGBFormat ? -1 < Tt.getCompressedTextureFormats().indexOf(ge) ? Tt.compressedTexImage2D(xt.TEXTURE_CUBE_MAP_POSITIVE_X + de, xe, ge, ye.width, ye.height, 0, ye.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()") : Tt.texImage2D(xt.TEXTURE_CUBE_MAP_POSITIVE_X + de, xe, ge, ye.width, ye.height, 0, ge, ve, ye.data);
                                                else
                                                    ue ? Tt.texImage2D(xt.TEXTURE_CUBE_MAP_POSITIVE_X + de, 0, ge, pe[de].width, pe[de].height, 0, ge, ve, pe[de].data) : Tt.texImage2D(xt.TEXTURE_CUBE_MAP_POSITIVE_X + de, 0, ge, ge, ve, pe[de]);
                                            se.generateMipmaps && me && xt.generateMipmap(xt.TEXTURE_CUBE_MAP),
                                            he.__version = se.version,
                                            se.onUpdate && se.onUpdate(se)
                                        } else
                                            Tt.activeTexture(xt.TEXTURE0 + le),
                                            Tt.bindTexture(xt.TEXTURE_CUBE_MAP, he.__image__webglTextureCube)
                                } else if (Xt instanceof r.WebGLRenderTargetCube) {
                                    var we = Xt;
                                    Tt.activeTexture(xt.TEXTURE0 + Yt),
                                    Tt.bindTexture(xt.TEXTURE_CUBE_MAP, Mt.get(we).__webglTexture)
                                } else
                                    $.setTexture(Xt, Yt);
                                break;
                            case "tv":
                                for (void 0 === Jt._array && (Jt._array = []),
                                ne = 0,
                                ie = Jt.value.length; ie > ne; ne++)
                                    Jt._array[ne] = x();
                                for (xt.uniform1iv(ee, Jt._array),
                                ne = 0,
                                ie = Jt.value.length; ie > ne; ne++)
                                    Xt = Jt.value[ne],
                                    Yt = Jt._array[ne],
                                    Xt && $.setTexture(Xt, Yt);
                                break;
                            default:
                                console.warn("THREE.WebGLRenderer: Unknown uniform type: " + $t)
                            }
                        }
                    }
                }
                return xt.uniformMatrix4fv(R.modelViewMatrix, !1, o.modelViewMatrix.elements),
                R.normalMatrix && xt.uniformMatrix3fv(R.normalMatrix, !1, o.normalMatrix.elements),
                void 0 !== R.modelMatrix && xt.uniformMatrix4fv(R.modelMatrix, !1, o.matrixWorld.elements),
                k
            }
            function _(t, e) {
                t.ambientLightColor.needsUpdate = e,
                t.directionalLightColor.needsUpdate = e,
                t.directionalLightDirection.needsUpdate = e,
                t.pointLightColor.needsUpdate = e,
                t.pointLightPosition.needsUpdate = e,
                t.pointLightDistance.needsUpdate = e,
                t.pointLightDecay.needsUpdate = e,
                t.spotLightColor.needsUpdate = e,
                t.spotLightPosition.needsUpdate = e,
                t.spotLightDistance.needsUpdate = e,
                t.spotLightDirection.needsUpdate = e,
                t.spotLightAngleCos.needsUpdate = e,
                t.spotLightExponent.needsUpdate = e,
                t.spotLightDecay.needsUpdate = e,
                t.hemisphereLightSkyColor.needsUpdate = e,
                t.hemisphereLightGroundColor.needsUpdate = e,
                t.hemisphereLightDirection.needsUpdate = e
            }
            function x() {
                var t = ot;
                return t >= St.maxTextures && console.warn("WebGLRenderer: trying to use " + t + " texture units while this GPU supports only " + St.maxTextures),
                ot += 1,
                t
            }
            function b(t, e, n, r) {
                t[e + 0] = n.r * r,
                t[e + 1] = n.g * r,
                t[e + 2] = n.b * r
            }
            function w(t, e, n) {
                n ? (xt.texParameteri(t, xt.TEXTURE_WRAP_S, A(e.wrapS)),
                xt.texParameteri(t, xt.TEXTURE_WRAP_T, A(e.wrapT)),
                xt.texParameteri(t, xt.TEXTURE_MAG_FILTER, A(e.magFilter)),
                xt.texParameteri(t, xt.TEXTURE_MIN_FILTER, A(e.minFilter))) : (xt.texParameteri(t, xt.TEXTURE_WRAP_S, xt.CLAMP_TO_EDGE),
                xt.texParameteri(t, xt.TEXTURE_WRAP_T, xt.CLAMP_TO_EDGE),
                e.wrapS === r.ClampToEdgeWrapping && e.wrapT === r.ClampToEdgeWrapping || console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( " + e.sourceFile + " )"),
                xt.texParameteri(t, xt.TEXTURE_MAG_FILTER, C(e.magFilter)),
                xt.texParameteri(t, xt.TEXTURE_MIN_FILTER, C(e.minFilter)),
                e.minFilter !== r.NearestFilter && e.minFilter !== r.LinearFilter && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( " + e.sourceFile + " )")),
                !(n = wt.get("EXT_texture_filter_anisotropic")) || e.type === r.FloatType && null === wt.get("OES_texture_float_linear") || e.type === r.HalfFloatType && null === wt.get("OES_texture_half_float_linear") || !(1 < e.anisotropy || Mt.get(e).__currentAnisotropy) || (xt.texParameterf(t, n.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(e.anisotropy, $.getMaxAnisotropy())),
                Mt.get(e).__currentAnisotropy = e.anisotropy)
            }
            function S(t, e) {
                if (t.width > e || t.height > e) {
                    var n = e / Math.max(t.width, t.height)
                      , r = document.createElement("canvas");
                    return r.width = Math.floor(t.width * n),
                    r.height = Math.floor(t.height * n),
                    r.getContext("2d").drawImage(t, 0, 0, t.width, t.height, 0, 0, r.width, r.height),
                    console.warn("THREE.WebGLRenderer: image is too big (" + t.width + "x" + t.height + "). Resized to " + r.width + "x" + r.height, t),
                    r
                }
                return t
            }
            function T(t, e, n) {
                xt.bindFramebuffer(xt.FRAMEBUFFER, t),
                xt.framebufferTexture2D(xt.FRAMEBUFFER, xt.COLOR_ATTACHMENT0, n, Mt.get(e).__webglTexture, 0)
            }
            function M(t, e) {
                xt.bindRenderbuffer(xt.RENDERBUFFER, t),
                e.depthBuffer && !e.stencilBuffer ? (xt.renderbufferStorage(xt.RENDERBUFFER, xt.DEPTH_COMPONENT16, e.width, e.height),
                xt.framebufferRenderbuffer(xt.FRAMEBUFFER, xt.DEPTH_ATTACHMENT, xt.RENDERBUFFER, t)) : e.depthBuffer && e.stencilBuffer ? (xt.renderbufferStorage(xt.RENDERBUFFER, xt.DEPTH_STENCIL, e.width, e.height),
                xt.framebufferRenderbuffer(xt.FRAMEBUFFER, xt.DEPTH_STENCIL_ATTACHMENT, xt.RENDERBUFFER, t)) : xt.renderbufferStorage(xt.RENDERBUFFER, xt.RGBA4, e.width, e.height)
            }
            function C(t) {
                return t === r.NearestFilter || t === r.NearestMipMapNearestFilter || t === r.NearestMipMapLinearFilter ? xt.NEAREST : xt.LINEAR
            }
            function A(t) {
                var e;
                if (t === r.RepeatWrapping)
                    return xt.REPEAT;
                if (t === r.ClampToEdgeWrapping)
                    return xt.CLAMP_TO_EDGE;
                if (t === r.MirroredRepeatWrapping)
                    return xt.MIRRORED_REPEAT;
                if (t === r.NearestFilter)
                    return xt.NEAREST;
                if (t === r.NearestMipMapNearestFilter)
                    return xt.NEAREST_MIPMAP_NEAREST;
                if (t === r.NearestMipMapLinearFilter)
                    return xt.NEAREST_MIPMAP_LINEAR;
                if (t === r.LinearFilter)
                    return xt.LINEAR;
                if (t === r.LinearMipMapNearestFilter)
                    return xt.LINEAR_MIPMAP_NEAREST;
                if (t === r.LinearMipMapLinearFilter)
                    return xt.LINEAR_MIPMAP_LINEAR;
                if (t === r.UnsignedByteType)
                    return xt.UNSIGNED_BYTE;
                if (t === r.UnsignedShort4444Type)
                    return xt.UNSIGNED_SHORT_4_4_4_4;
                if (t === r.UnsignedShort5551Type)
                    return xt.UNSIGNED_SHORT_5_5_5_1;
                if (t === r.UnsignedShort565Type)
                    return xt.UNSIGNED_SHORT_5_6_5;
                if (t === r.ByteType)
                    return xt.BYTE;
                if (t === r.ShortType)
                    return xt.SHORT;
                if (t === r.UnsignedShortType)
                    return xt.UNSIGNED_SHORT;
                if (t === r.IntType)
                    return xt.INT;
                if (t === r.UnsignedIntType)
                    return xt.UNSIGNED_INT;
                if (t === r.FloatType)
                    return xt.FLOAT;
                if (e = wt.get("OES_texture_half_float"),
                null !== e && t === r.HalfFloatType)
                    return e.HALF_FLOAT_OES;
                if (t === r.AlphaFormat)
                    return xt.ALPHA;
                if (t === r.RGBFormat)
                    return xt.RGB;
                if (t === r.RGBAFormat)
                    return xt.RGBA;
                if (t === r.LuminanceFormat)
                    return xt.LUMINANCE;
                if (t === r.LuminanceAlphaFormat)
                    return xt.LUMINANCE_ALPHA;
                if (t === r.AddEquation)
                    return xt.FUNC_ADD;
                if (t === r.SubtractEquation)
                    return xt.FUNC_SUBTRACT;
                if (t === r.ReverseSubtractEquation)
                    return xt.FUNC_REVERSE_SUBTRACT;
                if (t === r.ZeroFactor)
                    return xt.ZERO;
                if (t === r.OneFactor)
                    return xt.ONE;
                if (t === r.SrcColorFactor)
                    return xt.SRC_COLOR;
                if (t === r.OneMinusSrcColorFactor)
                    return xt.ONE_MINUS_SRC_COLOR;
                if (t === r.SrcAlphaFactor)
                    return xt.SRC_ALPHA;
                if (t === r.OneMinusSrcAlphaFactor)
                    return xt.ONE_MINUS_SRC_ALPHA;
                if (t === r.DstAlphaFactor)
                    return xt.DST_ALPHA;
                if (t === r.OneMinusDstAlphaFactor)
                    return xt.ONE_MINUS_DST_ALPHA;
                if (t === r.DstColorFactor)
                    return xt.DST_COLOR;
                if (t === r.OneMinusDstColorFactor)
                    return xt.ONE_MINUS_DST_COLOR;
                if (t === r.SrcAlphaSaturateFactor)
                    return xt.SRC_ALPHA_SATURATE;
                if (e = wt.get("WEBGL_compressed_texture_s3tc"),
                null !== e) {
                    if (t === r.RGB_S3TC_DXT1_Format)
                        return e.COMPRESSED_RGB_S3TC_DXT1_EXT;
                    if (t === r.RGBA_S3TC_DXT1_Format)
                        return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                    if (t === r.RGBA_S3TC_DXT3_Format)
                        return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                    if (t === r.RGBA_S3TC_DXT5_Format)
                        return e.COMPRESSED_RGBA_S3TC_DXT5_EXT
                }
                if (e = wt.get("WEBGL_compressed_texture_pvrtc"),
                null !== e) {
                    if (t === r.RGB_PVRTC_4BPPV1_Format)
                        return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                    if (t === r.RGB_PVRTC_2BPPV1_Format)
                        return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                    if (t === r.RGBA_PVRTC_4BPPV1_Format)
                        return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                    if (t === r.RGBA_PVRTC_2BPPV1_Format)
                        return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
                }
                if (e = wt.get("WEBGL_compressed_texture_etc1"),
                null !== e && t === r.RGB_ETC1_Format)
                    return console.log("p === THREE.RGB_ETC1_Format", e.COMPRESSED_RGB_ETC1_WEBGL),
                    e.COMPRESSED_RGB_ETC1_WEBGL;
                if (e = wt.get("EXT_blend_minmax"),
                null !== e) {
                    if (t === r.MinEquation)
                        return e.MIN_EXT;
                    if (t === r.MaxEquation)
                        return e.MAX_EXT
                }
                return 0
            }
            console.log("THREE.WebGLRenderer", r.REVISION),
            t = t || {};
            var E = void 0 !== t.canvas ? t.canvas : document.createElement("canvas")
              , L = void 0 !== t.context ? t.context : null
              , P = E.width
              , k = E.height
              , R = 1
              , O = void 0 !== t.alpha ? t.alpha : !1
              , D = void 0 !== t.depth ? t.depth : !0
              , F = void 0 !== t.stencil ? t.stencil : !0
              , U = void 0 !== t.antialias ? t.antialias : !1
              , I = void 0 !== t.premultipliedAlpha ? t.premultipliedAlpha : !0
              , B = void 0 !== t.preserveDrawingBuffer ? t.preserveDrawingBuffer : !1
              , N = new r.Color(0)
              , j = 0
              , V = []
              , G = []
              , z = -1
              , H = []
              , W = -1
              , q = []
              , X = -1
              , Y = []
              , K = -1
              , Q = new Float32Array(8)
              , Z = []
              , J = [];
            this.domElement = E,
            this.context = null ,
            this.sortObjects = this.autoClearStencil = this.autoClearDepth = this.autoClearColor = this.autoClear = !0,
            this.gammaFactor = 2,
            this.gammaOutput = this.gammaInput = !1,
            this.maxMorphTargets = 8,
            this.maxMorphNormals = 4,
            this.autoScaleCubemaps = !0;
            var $ = this
              , tt = null
              , et = null
              , nt = -1
              , rt = ""
              , it = null
              , ot = 0
              , at = 0
              , st = 0
              , lt = E.width
              , ht = E.height
              , ct = 0
              , ut = 0
              , pt = new r.Frustum
              , dt = new r.Matrix4
              , ft = new r.Vector3
              , mt = new r.Vector3
              , gt = !0
              , vt = {
                ambient: [0, 0, 0],
                directional: {
                    length: 0,
                    colors: [],
                    positions: []
                },
                point: {
                    length: 0,
                    colors: [],
                    positions: [],
                    distances: [],
                    decays: []
                },
                spot: {
                    length: 0,
                    colors: [],
                    positions: [],
                    distances: [],
                    directions: [],
                    anglesCos: [],
                    exponents: [],
                    decays: []
                },
                hemi: {
                    length: 0,
                    skyColors: [],
                    groundColors: [],
                    positions: []
                }
            }
              , yt = {
                geometries: 0,
                textures: 0
            }
              , _t = {
                calls: 0,
                vertices: 0,
                faces: 0,
                points: 0
            };
            this.info = {
                render: _t,
                memory: yt,
                programs: null
            };
            var xt;
            try {
                if (O = {
                    alpha: O,
                    depth: D,
                    stencil: F,
                    antialias: U,
                    premultipliedAlpha: I,
                    preserveDrawingBuffer: B
                },
                xt = L || E.getContext("webgl", O) || E.getContext("experimental-webgl", O),
                null === xt) {
                    if (null !== E.getContext("webgl"))
                        throw "Error creating WebGL context with your selected attributes.";
                    throw "Error creating WebGL context."
                }
                E.addEventListener("webglcontextlost", o, !1)
            } catch (bt) {
                console.error("THREE.WebGLRenderer: " + bt)
            }
            var wt = new r.WebGLExtensions(xt);
            wt.get("OES_texture_float"),
            wt.get("OES_texture_float_linear"),
            wt.get("OES_texture_half_float"),
            wt.get("OES_texture_half_float_linear"),
            wt.get("OES_standard_derivatives"),
            wt.get("ANGLE_instanced_arrays"),
            wt.get("OES_element_index_uint") && (r.BufferGeometry.MaxIndex = 4294967296);
            var St = new r.WebGLCapabilities(xt,wt,t)
              , Tt = new r.WebGLState(xt,wt,A)
              , Mt = new r.WebGLProperties
              , Ct = new r.WebGLObjects(xt,Mt,this.info)
              , At = new r.WebGLPrograms(this,St);
            this.info.programs = At.programs;
            var Et = new r.WebGLBufferRenderer(xt,wt,_t)
              , Lt = new r.WebGLIndexedBufferRenderer(xt,wt,_t);
            n(),
            this.context = xt,
            this.capabilities = St,
            this.extensions = wt,
            this.state = Tt;
            var Pt = new r.WebGLShadowMap(this,V,Ct);
            this.shadowMap = Pt;
            var kt = new r.SpritePlugin(this,Z)
              , Rt = new r.LensFlarePlugin(this,J);
            this.getContext = function() {
                return xt
            }
            ,
            this.getContextAttributes = function() {
                return xt.getContextAttributes()
            }
            ,
            this.forceContextLoss = function() {
                wt.get("WEBGL_lose_context").loseContext()
            }
            ,
            this.getMaxAnisotropy = function() {
                var t;
                return function() {
                    if (void 0 !== t)
                        return t;
                    var e = wt.get("EXT_texture_filter_anisotropic");
                    return t = null !== e ? xt.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
                }
            }(),
            this.getPrecision = function() {
                return St.precision
            }
            ,
            this.getPixelRatio = function() {
                return R
            }
            ,
            this.setPixelRatio = function(t) {
                void 0 !== t && (R = t)
            }
            ,
            this.getSize = function() {
                return {
                    width: P,
                    height: k
                }
            }
            ,
            this.setSize = function(t, e, n) {
                P = t,
                k = e,
                E.width = t * R,
                E.height = e * R,
                !1 !== n && (E.style.width = t + "px",
                E.style.height = e + "px"),
                this.setViewport(0, 0, t, e)
            }
            ,
            this.setViewport = function(t, e, n, r) {
                at = t * R,
                st = e * R,
                lt = n * R,
                ht = r * R,
                xt.viewport(at, st, lt, ht)
            }
            ,
            this.setScissor = function(t, e, n, r) {
                xt.scissor(t * R, e * R, n * R, r * R)
            }
            ,
            this.enableScissorTest = function(t) {
                Tt.setScissorTest(t)
            }
            ,
            this.getClearColor = function() {
                return N
            }
            ,
            this.setClearColor = function(t, n) {
                N.set(t),
                j = void 0 !== n ? n : 1,
                e(N.r, N.g, N.b, j)
            }
            ,
            this.getClearAlpha = function() {
                return j
            }
            ,
            this.setClearAlpha = function(t) {
                j = t,
                e(N.r, N.g, N.b, j)
            }
            ,
            this.clear = function(t, e, n) {
                var r = 0;
                (void 0 === t || t) && (r |= xt.COLOR_BUFFER_BIT),
                (void 0 === e || e) && (r |= xt.DEPTH_BUFFER_BIT),
                (void 0 === n || n) && (r |= xt.STENCIL_BUFFER_BIT),
                xt.clear(r)
            }
            ,
            this.clearColor = function() {
                xt.clear(xt.COLOR_BUFFER_BIT)
            }
            ,
            this.clearDepth = function() {
                xt.clear(xt.DEPTH_BUFFER_BIT)
            }
            ,
            this.clearStencil = function() {
                xt.clear(xt.STENCIL_BUFFER_BIT)
            }
            ,
            this.clearTarget = function(t, e, n, r) {
                this.setRenderTarget(t),
                this.clear(e, n, r)
            }
            ,
            this.resetGLState = i,
            this.dispose = function() {
                E.removeEventListener("webglcontextlost", o, !1)
            }
            ,
            this.renderBufferImmediate = function(t, e, n) {
                Tt.initAttributes();
                var i = Mt.get(t);
                if (t.hasPositions && !i.position && (i.position = xt.createBuffer()),
                t.hasNormals && !i.normal && (i.normal = xt.createBuffer()),
                t.hasUvs && !i.uv && (i.uv = xt.createBuffer()),
                t.hasColors && !i.color && (i.color = xt.createBuffer()),
                e = e.getAttributes(),
                t.hasPositions && (xt.bindBuffer(xt.ARRAY_BUFFER, i.position),
                xt.bufferData(xt.ARRAY_BUFFER, t.positionArray, xt.DYNAMIC_DRAW),
                Tt.enableAttribute(e.position),
                xt.vertexAttribPointer(e.position, 3, xt.FLOAT, !1, 0, 0)),
                t.hasNormals) {
                    if (xt.bindBuffer(xt.ARRAY_BUFFER, i.normal),
                    "MeshPhongMaterial" !== n.type && n.shading === r.FlatShading)
                        for (var o = 0, a = 3 * t.count; a > o; o += 9) {
                            var s = t.normalArray
                              , l = (s[o + 0] + s[o + 3] + s[o + 6]) / 3
                              , h = (s[o + 1] + s[o + 4] + s[o + 7]) / 3
                              , c = (s[o + 2] + s[o + 5] + s[o + 8]) / 3;
                            s[o + 0] = l,
                            s[o + 1] = h,
                            s[o + 2] = c,
                            s[o + 3] = l,
                            s[o + 4] = h,
                            s[o + 5] = c,
                            s[o + 6] = l,
                            s[o + 7] = h,
                            s[o + 8] = c
                        }
                    xt.bufferData(xt.ARRAY_BUFFER, t.normalArray, xt.DYNAMIC_DRAW),
                    Tt.enableAttribute(e.normal),
                    xt.vertexAttribPointer(e.normal, 3, xt.FLOAT, !1, 0, 0)
                }
                t.hasUvs && n.map && (xt.bindBuffer(xt.ARRAY_BUFFER, i.uv),
                xt.bufferData(xt.ARRAY_BUFFER, t.uvArray, xt.DYNAMIC_DRAW),
                Tt.enableAttribute(e.uv),
                xt.vertexAttribPointer(e.uv, 2, xt.FLOAT, !1, 0, 0)),
                t.hasColors && n.vertexColors !== r.NoColors && (xt.bindBuffer(xt.ARRAY_BUFFER, i.color),
                xt.bufferData(xt.ARRAY_BUFFER, t.colorArray, xt.DYNAMIC_DRAW),
                Tt.enableAttribute(e.color),
                xt.vertexAttribPointer(e.color, 3, xt.FLOAT, !1, 0, 0)),
                Tt.disableUnusedAttributes(),
                xt.drawArrays(xt.TRIANGLES, 0, t.count),
                t.count = 0
            }
            ,
            this.renderBufferDirect = function(t, e, n, i, o, a, s) {
                v(o);
                var l = y(t, e, n, o, a)
                  , h = !1;
                if (t = i.id + "_" + l.id + "_" + o.wireframe,
                t !== rt && (rt = t,
                h = !0),
                t = a.morphTargetInfluences,
                void 0 !== t) {
                    for (e = [],
                    n = 0,
                    h = t.length; h > n; n++) {
                        var u = t[n];
                        e.push([u, n])
                    }
                    e.sort(c),
                    8 < e.length && (e.length = 8);
                    var p = i.morphAttributes;
                    for (n = 0,
                    h = e.length; h > n; n++)
                        u = e[n],
                        Q[n] = u[0],
                        0 !== u[0] ? (t = u[1],
                        !0 === o.morphTargets && p.position && i.addAttribute("morphTarget" + n, p.position[t]),
                        !0 === o.morphNormals && p.normal && i.addAttribute("morphNormal" + n, p.normal[t])) : (!0 === o.morphTargets && i.removeAttribute("morphTarget" + n),
                        !0 === o.morphNormals && i.removeAttribute("morphNormal" + n));
                    t = l.getUniforms(),
                    null !== t.morphTargetInfluences && xt.uniform1fv(t.morphTargetInfluences, Q),
                    h = !0
                }
                if (t = i.index,
                n = i.attributes.position,
                !0 === o.wireframe && (t = Ct.getWireframeAttribute(i)),
                null !== t ? (e = Lt,
                e.setIndex(t)) : e = Et,
                h) {
                    t: {
                        var d, h = void 0;
                        if (i instanceof r.InstancedBufferGeometry && (d = wt.get("ANGLE_instanced_arrays"),
                        null === d))
                            console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                        else {
                            void 0 === h && (h = 0),
                            Tt.initAttributes();
                            var f, u = i.attributes, l = l.getAttributes(), p = o.defaultAttributeValues;
                            for (f in l) {
                                var m = l[f];
                                if (m >= 0) {
                                    var g = u[f];
                                    if (void 0 !== g) {
                                        Tt.enableAttribute(m);
                                        var _ = g.itemSize
                                          , x = Ct.getAttributeBuffer(g);
                                        if (g instanceof r.InterleavedBufferAttribute) {
                                            var b = g.data
                                              , w = b.stride
                                              , g = g.offset;
                                            if (xt.bindBuffer(xt.ARRAY_BUFFER, x),
                                            xt.vertexAttribPointer(m, _, xt.FLOAT, !1, w * b.array.BYTES_PER_ELEMENT, (h * w + g) * b.array.BYTES_PER_ELEMENT),
                                            b instanceof r.InstancedInterleavedBuffer) {
                                                if (null === d) {
                                                    console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.");
                                                    break t
                                                }
                                                d.vertexAttribDivisorANGLE(m, b.meshPerAttribute),
                                                void 0 === i.maxInstancedCount && (i.maxInstancedCount = b.meshPerAttribute * b.count)
                                            }
                                        } else if (xt.bindBuffer(xt.ARRAY_BUFFER, x),
                                        xt.vertexAttribPointer(m, _, xt.FLOAT, !1, 0, h * _ * 4),
                                        g instanceof r.InstancedBufferAttribute) {
                                            if (null === d) {
                                                console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.");
                                                break t
                                            }
                                            d.vertexAttribDivisorANGLE(m, g.meshPerAttribute),
                                            void 0 === i.maxInstancedCount && (i.maxInstancedCount = g.meshPerAttribute * g.count)
                                        }
                                    } else if (void 0 !== p && (_ = p[f],
                                    void 0 !== _))
                                        switch (_.length) {
                                        case 2:
                                            xt.vertexAttrib2fv(m, _);
                                            break;
                                        case 3:
                                            xt.vertexAttrib3fv(m, _);
                                            break;
                                        case 4:
                                            xt.vertexAttrib4fv(m, _);
                                            break;
                                        default:
                                            xt.vertexAttrib1fv(m, _)
                                        }
                                }
                            }
                            Tt.disableUnusedAttributes()
                        }
                    }
                    null !== t && xt.bindBuffer(xt.ELEMENT_ARRAY_BUFFER, Ct.getAttributeBuffer(t))
                }
                void 0 === s && (s = i.drawRange,
                s = {
                    start: s.start,
                    count: Math.min(s.count, null !== t ? t.array.length : n.count)
                }),
                a instanceof r.Mesh ? (!0 === o.wireframe ? (Tt.setLineWidth(o.wireframeLinewidth * R),
                e.setMode(xt.LINES)) : e.setMode(xt.TRIANGLES),
                i instanceof r.InstancedBufferGeometry && 0 < i.maxInstancedCount ? e.renderInstances(i) : e.render(s.start, s.count)) : a instanceof r.Line ? (i = o.linewidth,
                void 0 === i && (i = 1),
                Tt.setLineWidth(i * R),
                a instanceof r.LineSegments ? e.setMode(xt.LINES) : e.setMode(xt.LINE_STRIP),
                e.render(s.start, s.count)) : a instanceof r.Points && (e.setMode(xt.POINTS),
                e.render(s.start, s.count))
            }
            ,
            this.render = function(t, e, n, i) {
                if (!1 == e instanceof r.Camera)
                    console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
                else {
                    var o = t.fog;
                    rt = "",
                    nt = -1,
                    it = null ,
                    gt = !0,
                    !0 === t.autoUpdate && t.updateMatrixWorld(),
                    null === e.parent && e.updateMatrixWorld(),
                    e.matrixWorldInverse.getInverse(e.matrixWorld),
                    dt.multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse),
                    pt.setFromMatrix(dt),
                    V.length = 0,
                    K = X = W = z = -1,
                    Z.length = 0,
                    J.length = 0,
                    f(t),
                    G.length = z + 1,
                    H.length = W + 1,
                    q.length = X + 1,
                    Y.length = K + 1,
                    !0 === $.sortObjects && (G.sort(u),
                    H.sort(p)),
                    Pt.render(t, e),
                    _t.calls = 0,
                    _t.vertices = 0,
                    _t.faces = 0,
                    _t.points = 0,
                    this.setRenderTarget(n),
                    (this.autoClear || i) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil),
                    t.overrideMaterial ? (i = t.overrideMaterial,
                    m(G, e, V, o, i),
                    m(H, e, V, o, i),
                    g(q, e, V, o, i),
                    g(Y, e, V, o, i)) : (Tt.setBlending(r.NoBlending),
                    m(G, e, V, o),
                    g(q, e, V, o),
                    m(H, e, V, o),
                    g(Y, e, V, o)),
                    kt.render(t, e),
                    Rt.render(t, e, ct, ut),
                    n && n.generateMipmaps && n.minFilter !== r.NearestFilter && n.minFilter !== r.LinearFilter && (n instanceof r.WebGLRenderTargetCube ? (Tt.bindTexture(xt.TEXTURE_CUBE_MAP, Mt.get(n).__webglTexture),
                    xt.generateMipmap(xt.TEXTURE_CUBE_MAP),
                    Tt.bindTexture(xt.TEXTURE_CUBE_MAP, null )) : (Tt.bindTexture(xt.TEXTURE_2D, Mt.get(n).__webglTexture),
                    xt.generateMipmap(xt.TEXTURE_2D),
                    Tt.bindTexture(xt.TEXTURE_2D, null ))),
                    Tt.setDepthTest(!0),
                    Tt.setDepthWrite(!0),
                    Tt.setColorWrite(!0)
                }
            }
            ,
            this.setFaceCulling = function(t, e) {
                t === r.CullFaceNone ? Tt.disable(xt.CULL_FACE) : (e === r.FrontFaceDirectionCW ? xt.frontFace(xt.CW) : xt.frontFace(xt.CCW),
                t === r.CullFaceBack ? xt.cullFace(xt.BACK) : t === r.CullFaceFront ? xt.cullFace(xt.FRONT) : xt.cullFace(xt.FRONT_AND_BACK),
                Tt.enable(xt.CULL_FACE))
            }
            ,
            this.setTexture = function(t, e) {
                var n = Mt.get(t);
                if (0 < t.version && n.__version !== t.version) {
                    var i = t.image;
                    if (void 0 === i)
                        console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined", t);
                    else if (!1 === i.complete)
                        console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete", t);
                    else {
                        void 0 === n.__webglInit && (n.__webglInit = !0,
                        t.__webglInit = !0,
                        t.addEventListener("dispose", a),
                        n.__webglTexture = xt.createTexture(),
                        yt.textures++),
                        Tt.activeTexture(xt.TEXTURE0 + e),
                        Tt.bindTexture(xt.TEXTURE_2D, n.__webglTexture),
                        xt.pixelStorei(xt.UNPACK_FLIP_Y_WEBGL, t.flipY),
                        xt.pixelStorei(xt.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.premultiplyAlpha),
                        xt.pixelStorei(xt.UNPACK_ALIGNMENT, t.unpackAlignment),
                        t.image = S(t.image, St.maxTextureSize);
                        var o = t.image
                          , i = r.Math.isPowerOfTwo(o.width) && r.Math.isPowerOfTwo(o.height)
                          , s = A(t.format)
                          , l = A(t.type);
                        w(xt.TEXTURE_2D, t, i);
                        var h = t.mipmaps;
                        if (t instanceof r.DataTexture)
                            if (0 < h.length && i) {
                                for (var c = 0, u = h.length; u > c; c++)
                                    o = h[c],
                                    Tt.texImage2D(xt.TEXTURE_2D, c, s, o.width, o.height, 0, s, l, o.data);
                                t.generateMipmaps = !1
                            } else
                                Tt.texImage2D(xt.TEXTURE_2D, 0, s, o.width, o.height, 0, s, l, o.data);
                        else if (t instanceof r.CompressedTexture)
                            for (c = 0,
                            u = h.length; u > c; c++)
                                o = h[c],
                                t.format !== r.RGBAFormat && t.format !== r.RGBFormat ? -1 < Tt.getCompressedTextureFormats().indexOf(s) ? Tt.compressedTexImage2D(xt.TEXTURE_2D, c, s, o.width, o.height, 0, o.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : Tt.texImage2D(xt.TEXTURE_2D, c, s, o.width, o.height, 0, s, l, o.data);
                        else if (0 < h.length && i) {
                            for (c = 0,
                            u = h.length; u > c; c++)
                                o = h[c],
                                Tt.texImage2D(xt.TEXTURE_2D, c, s, s, l, o);
                            t.generateMipmaps = !1
                        } else
                            Tt.texImage2D(xt.TEXTURE_2D, 0, s, s, l, t.image);
                        t.generateMipmaps && i && xt.generateMipmap(xt.TEXTURE_2D),
                        n.__version = t.version,
                        t.onUpdate && t.onUpdate(t)
                    }
                } else
                    Tt.activeTexture(xt.TEXTURE0 + e),
                    Tt.bindTexture(xt.TEXTURE_2D, n.__webglTexture)
            }
            ,
            this.setRenderTarget = function(t) {
                var e = t instanceof r.WebGLRenderTargetCube;
                if (t && void 0 === Mt.get(t).__webglFramebuffer) {
                    var n = Mt.get(t);
                    void 0 === t.depthBuffer && (t.depthBuffer = !0),
                    void 0 === t.stencilBuffer && (t.stencilBuffer = !0),
                    t.addEventListener("dispose", s),
                    n.__webglTexture = xt.createTexture(),
                    yt.textures++;
                    var i = r.Math.isPowerOfTwo(t.width) && r.Math.isPowerOfTwo(t.height)
                      , o = A(t.format)
                      , a = A(t.type);
                    if (e) {
                        n.__webglFramebuffer = [],
                        n.__webglRenderbuffer = [],
                        Tt.bindTexture(xt.TEXTURE_CUBE_MAP, n.__webglTexture),
                        w(xt.TEXTURE_CUBE_MAP, t, i);
                        for (var l = 0; 6 > l; l++)
                            n.__webglFramebuffer[l] = xt.createFramebuffer(),
                            n.__webglRenderbuffer[l] = xt.createRenderbuffer(),
                            Tt.texImage2D(xt.TEXTURE_CUBE_MAP_POSITIVE_X + l, 0, o, t.width, t.height, 0, o, a, null ),
                            T(n.__webglFramebuffer[l], t, xt.TEXTURE_CUBE_MAP_POSITIVE_X + l),
                            M(n.__webglRenderbuffer[l], t);
                        t.generateMipmaps && i && xt.generateMipmap(xt.TEXTURE_CUBE_MAP)
                    } else
                        n.__webglFramebuffer = xt.createFramebuffer(),
                        n.__webglRenderbuffer = t.shareDepthFrom ? t.shareDepthFrom.__webglRenderbuffer : xt.createRenderbuffer(),
                        Tt.bindTexture(xt.TEXTURE_2D, n.__webglTexture),
                        w(xt.TEXTURE_2D, t, i),
                        Tt.texImage2D(xt.TEXTURE_2D, 0, o, t.width, t.height, 0, o, a, null ),
                        T(n.__webglFramebuffer, t, xt.TEXTURE_2D),
                        t.shareDepthFrom ? t.depthBuffer && !t.stencilBuffer ? xt.framebufferRenderbuffer(xt.FRAMEBUFFER, xt.DEPTH_ATTACHMENT, xt.RENDERBUFFER, n.__webglRenderbuffer) : t.depthBuffer && t.stencilBuffer && xt.framebufferRenderbuffer(xt.FRAMEBUFFER, xt.DEPTH_STENCIL_ATTACHMENT, xt.RENDERBUFFER, n.__webglRenderbuffer) : M(n.__webglRenderbuffer, t),
                        t.generateMipmaps && i && xt.generateMipmap(xt.TEXTURE_2D);
                    e ? Tt.bindTexture(xt.TEXTURE_CUBE_MAP, null ) : Tt.bindTexture(xt.TEXTURE_2D, null ),
                    xt.bindRenderbuffer(xt.RENDERBUFFER, null ),
                    xt.bindFramebuffer(xt.FRAMEBUFFER, null )
                }
                t ? (n = Mt.get(t),
                e = e ? n.__webglFramebuffer[t.activeCubeFace] : n.__webglFramebuffer,
                n = t.width,
                t = t.height,
                o = i = 0) : (e = null ,
                n = lt,
                t = ht,
                i = at,
                o = st),
                e !== et && (xt.bindFramebuffer(xt.FRAMEBUFFER, e),
                xt.viewport(i, o, n, t),
                et = e),
                ct = n,
                ut = t
            }
            ,
            this.readRenderTargetPixels = function(t, e, n, i, o, a) {
                if (t instanceof r.WebGLRenderTarget) {
                    if (Mt.get(t).__webglFramebuffer)
                        if (t.format !== r.RGBAFormat)
                            console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.");
                        else {
                            var s = !1;
                            Mt.get(t).__webglFramebuffer !== et && (xt.bindFramebuffer(xt.FRAMEBUFFER, Mt.get(t).__webglFramebuffer),
                            s = !0),
                            xt.checkFramebufferStatus(xt.FRAMEBUFFER) === xt.FRAMEBUFFER_COMPLETE ? xt.readPixels(e, n, i, o, xt.RGBA, xt.UNSIGNED_BYTE, a) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."),
                            s && xt.bindFramebuffer(xt.FRAMEBUFFER, et)
                        }
                } else
                    console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")
            }
            ,
            this.supportsFloatTextures = function() {
                return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),
                wt.get("OES_texture_float")
            }
            ,
            this.supportsHalfFloatTextures = function() {
                return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),
                wt.get("OES_texture_half_float")
            }
            ,
            this.supportsStandardDerivatives = function() {
                return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),
                wt.get("OES_standard_derivatives")
            }
            ,
            this.supportsCompressedTextureS3TC = function() {
                return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),
                wt.get("WEBGL_compressed_texture_s3tc")
            }
            ,
            this.supportsCompressedTexturePVRTC = function() {
                return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),
                wt.get("WEBGL_compressed_texture_pvrtc")
            }
            ,
            this.supportsCompressedTextureETC1 = function() {
                return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureETC1() is now .extensions.get( 'WEBGL_compressed_texture_etc1' )."),
                wt.get("WEBGL_compressed_texture_etc1")
            }
            ,
            this.supportsBlendMinMax = function() {
                return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),
                wt.get("EXT_blend_minmax")
            }
            ,
            this.supportsVertexTextures = function() {
                return St.vertexTextures
            }
            ,
            this.supportsInstancedArrays = function() {
                return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),
                wt.get("ANGLE_instanced_arrays")
            }
            ,
            this.initMaterial = function() {
                console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")
            }
            ,
            this.addPrePlugin = function() {
                console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")
            }
            ,
            this.addPostPlugin = function() {
                console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")
            }
            ,
            this.updateShadowMap = function() {
                console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")
            }
            ,
            Object.defineProperties(this, {
                shadowMapEnabled: {
                    get: function() {
                        return Pt.enabled
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),
                        Pt.enabled = t
                    }
                },
                shadowMapType: {
                    get: function() {
                        return Pt.type
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),
                        Pt.type = t
                    }
                },
                shadowMapCullFace: {
                    get: function() {
                        return Pt.cullFace
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),
                        Pt.cullFace = t
                    }
                },
                shadowMapDebug: {
                    get: function() {
                        return Pt.debug
                    },
                    set: function(t) {
                        console.warn("THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug."),
                        Pt.debug = t
                    }
                }
            })
        }
        ,
        r.WebGLRenderTarget = function(t, e, n) {
            this.uuid = r.Math.generateUUID(),
            this.width = t,
            this.height = e,
            n = n || {},
            this.wrapS = void 0 !== n.wrapS ? n.wrapS : r.ClampToEdgeWrapping,
            this.wrapT = void 0 !== n.wrapT ? n.wrapT : r.ClampToEdgeWrapping,
            this.magFilter = void 0 !== n.magFilter ? n.magFilter : r.LinearFilter,
            this.minFilter = void 0 !== n.minFilter ? n.minFilter : r.LinearMipMapLinearFilter,
            this.anisotropy = void 0 !== n.anisotropy ? n.anisotropy : 1,
            this.offset = new r.Vector2(0,0),
            this.repeat = new r.Vector2(1,1),
            this.format = void 0 !== n.format ? n.format : r.RGBAFormat,
            this.type = void 0 !== n.type ? n.type : r.UnsignedByteType,
            this.depthBuffer = void 0 !== n.depthBuffer ? n.depthBuffer : !0,
            this.stencilBuffer = void 0 !== n.stencilBuffer ? n.stencilBuffer : !0,
            this.generateMipmaps = !0,
            this.shareDepthFrom = void 0 !== n.shareDepthFrom ? n.shareDepthFrom : null
        }
        ,
        r.WebGLRenderTarget.prototype = {
            constructor: r.WebGLRenderTarget,
            setSize: function(t, e) {
                (this.width !== t || this.height !== e) && (this.width = t,
                this.height = e,
                this.dispose())
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(t) {
                return this.width = t.width,
                this.height = t.height,
                this.wrapS = t.wrapS,
                this.wrapT = t.wrapT,
                this.magFilter = t.magFilter,
                this.minFilter = t.minFilter,
                this.anisotropy = t.anisotropy,
                this.offset.copy(t.offset),
                this.repeat.copy(t.repeat),
                this.format = t.format,
                this.type = t.type,
                this.depthBuffer = t.depthBuffer,
                this.stencilBuffer = t.stencilBuffer,
                this.generateMipmaps = t.generateMipmaps,
                this.shareDepthFrom = t.shareDepthFrom,
                this
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            }
        },
        r.EventDispatcher.prototype.apply(r.WebGLRenderTarget.prototype),
        r.WebGLRenderTargetCube = function(t, e, n) {
            r.WebGLRenderTarget.call(this, t, e, n),
            this.activeCubeFace = 0
        }
        ,
        r.WebGLRenderTargetCube.prototype = Object.create(r.WebGLRenderTarget.prototype),
        r.WebGLRenderTargetCube.prototype.constructor = r.WebGLRenderTargetCube,
        r.WebGLBufferRenderer = function(t, e, n) {
            var i;
            this.setMode = function(t) {
                i = t
            }
            ,
            this.render = function(e, r) {
                t.drawArrays(i, e, r),
                n.calls++,
                n.vertices += r,
                i === t.TRIANGLES && (n.faces += r / 3)
            }
            ,
            this.renderInstances = function(t) {
                var n = e.get("ANGLE_instanced_arrays");
                if (null === n)
                    console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                else {
                    var o = t.attributes.position;
                    o instanceof r.InterleavedBufferAttribute ? n.drawArraysInstancedANGLE(i, 0, o.data.count, t.maxInstancedCount) : n.drawArraysInstancedANGLE(i, 0, o.count, t.maxInstancedCount)
                }
            }
        }
        ,
        r.WebGLIndexedBufferRenderer = function(t, e, n) {
            var r, i, o;
            this.setMode = function(t) {
                r = t
            }
            ,
            this.setIndex = function(n) {
                n.array instanceof Uint32Array && e.get("OES_element_index_uint") ? (i = t.UNSIGNED_INT,
                o = 4) : (i = t.UNSIGNED_SHORT,
                o = 2)
            }
            ,
            this.render = function(e, a) {
                t.drawElements(r, a, i, e * o),
                n.calls++,
                n.vertices += a,
                r === t.TRIANGLES && (n.faces += a / 3)
            }
            ,
            this.renderInstances = function(t) {
                var n = e.get("ANGLE_instanced_arrays");
                null === n ? console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.") : n.drawElementsInstancedANGLE(r, t.index.array.length, i, 0, t.maxInstancedCount)
            }
        }
        ,
        r.WebGLExtensions = function(t) {
            var e = {};
            this.get = function(n) {
                if (void 0 !== e[n])
                    return e[n];
                var r;
                switch (n) {
                case "EXT_texture_filter_anisotropic":
                    r = t.getExtension("EXT_texture_filter_anisotropic") || t.getExtension("MOZ_EXT_texture_filter_anisotropic") || t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                    break;
                case "WEBGL_compressed_texture_s3tc":
                    r = t.getExtension("WEBGL_compressed_texture_s3tc") || t.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                    break;
                case "WEBGL_compressed_texture_pvrtc":
                    r = t.getExtension("WEBGL_compressed_texture_pvrtc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                    break;
                case "WEBGL_compressed_texture_etc1":
                    r = t.getExtension("WEBGL_compressed_texture_etc1") || t.getExtension("MOZ_WEBGL_compressed_texture_etc1") || t.getExtension("WEBKIT_WEBGL_compressed_texture_etc1");
                    break;
                default:
                    r = t.getExtension(n)
                }
                return null === r && console.warn("THREE.WebGLRenderer: " + n + " extension not supported."),
                e[n] = r
            }
        }
        ,
        r.WebGLCapabilities = function(t, e, n) {
            function r(e) {
                if (!t.getShaderPrecisionFormat)
                    return "highp";
                if ("highp" === e) {
                    if (0 < t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.HIGH_FLOAT).precision && 0 < t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_FLOAT).precision)
                        return "highp";
                    e = "mediump"
                }
                return "mediump" === e && 0 < t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.MEDIUM_FLOAT).precision && 0 < t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.MEDIUM_FLOAT).precision ? "mediump" : "lowp"
            }
            this.getMaxPrecision = r,
            this.precision = void 0 !== n.precision ? n.precision : "highp",
            this.logarithmicDepthBuffer = void 0 !== n.logarithmicDepthBuffer ? n.logarithmicDepthBuffer : !1,
            this.maxTextures = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),
            this.maxVertexTextures = t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
            this.maxTextureSize = t.getParameter(t.MAX_TEXTURE_SIZE),
            this.maxCubemapSize = t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),
            this.maxAttributes = t.getParameter(t.MAX_VERTEX_ATTRIBS),
            this.maxVertexUniforms = t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),
            this.maxVaryings = t.getParameter(t.MAX_VARYING_VECTORS),
            this.maxFragmentUniforms = t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),
            this.vertexTextures = 0 < this.maxVertexTextures,
            this.floatFragmentTextures = !!e.get("OES_texture_float"),
            this.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures,
            n = r(this.precision),
            n !== this.precision && (console.warn("THREE.WebGLRenderer:", this.precision, "not supported, using", n, "instead."),
            this.precision = n),
            this.logarithmicDepthBuffer && (this.logarithmicDepthBuffer = !!e.get("EXT_frag_depth"))
        }
        ,
        r.WebGLGeometries = function(t, e, n) {
            function i(t) {
                t = t.target;
                var r, s = a[t.id].attributes;
                for (r in s)
                    o(s[r]);
                t.removeEventListener("dispose", i),
                delete a[t.id],
                r = e.get(t),
                r.wireframe && o(r.wireframe),
                n.memory.geometries--
            }
            function o(n) {
                var i;
                i = n instanceof r.InterleavedBufferAttribute ? e.get(n.data).__webglBuffer : e.get(n).__webglBuffer,
                void 0 !== i && (t.deleteBuffer(i),
                n instanceof r.InterleavedBufferAttribute ? e["delete"](n.data) : e["delete"](n))
            }
            var a = {};
            this.get = function(t) {
                var e = t.geometry;
                if (void 0 !== a[e.id])
                    return a[e.id];
                e.addEventListener("dispose", i);
                var o;
                return e instanceof r.BufferGeometry ? o = e : e instanceof r.Geometry && (void 0 === e._bufferGeometry && (e._bufferGeometry = (new r.BufferGeometry).setFromObject(t)),
                o = e._bufferGeometry),
                a[e.id] = o,
                n.memory.geometries++,
                o
            }
        }
        ,
        r.WebGLObjects = function(t, e, n) {
            function i(n, i) {
                var o = n instanceof r.InterleavedBufferAttribute ? n.data : n
                  , a = e.get(o);
                void 0 === a.__webglBuffer ? (a.__webglBuffer = t.createBuffer(),
                t.bindBuffer(i, a.__webglBuffer),
                t.bufferData(i, o.array, o.dynamic ? t.DYNAMIC_DRAW : t.STATIC_DRAW),
                a.version = o.version) : a.version !== o.version && (t.bindBuffer(i, a.__webglBuffer),
                !1 === o.dynamic || -1 === o.updateRange.count ? t.bufferSubData(i, 0, o.array) : 0 === o.updateRange.count ? console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.") : (t.bufferSubData(i, o.updateRange.offset * o.array.BYTES_PER_ELEMENT, o.array.subarray(o.updateRange.offset, o.updateRange.offset + o.updateRange.count)),
                o.updateRange.count = 0),
                a.version = o.version)
            }
            function o(t, e, n) {
                if (e > n) {
                    var r = e;
                    e = n,
                    n = r
                }
                return r = t[e],
                void 0 === r ? (t[e] = [n],
                !0) : -1 === r.indexOf(n) ? (r.push(n),
                !0) : !1
            }
            var a = new r.WebGLGeometries(t,e,n);
            this.getAttributeBuffer = function(t) {
                return t instanceof r.InterleavedBufferAttribute ? e.get(t.data).__webglBuffer : e.get(t).__webglBuffer
            }
            ,
            this.getWireframeAttribute = function(n) {
                var a = e.get(n);
                if (void 0 !== a.wireframe)
                    return a.wireframe;
                var s = []
                  , l = n.index
                  , h = n.attributes;
                if (n = h.position,
                null !== l)
                    for (var h = {}, l = l.array, c = 0, u = l.length; u > c; c += 3) {
                        var p = l[c + 0]
                          , d = l[c + 1]
                          , f = l[c + 2];
                        o(h, p, d) && s.push(p, d),
                        o(h, d, f) && s.push(d, f),
                        o(h, f, p) && s.push(f, p)
                    }
                else
                    for (l = h.position.array,
                    c = 0,
                    u = l.length / 3 - 1; u > c; c += 3)
                        p = c + 0,
                        d = c + 1,
                        f = c + 2,
                        s.push(p, d, d, f, f, p);
                return s = new r.BufferAttribute(new (65535 < n.count ? Uint32Array : Uint16Array)(s),1),
                i(s, t.ELEMENT_ARRAY_BUFFER),
                a.wireframe = s
            }
            ,
            this.update = function(e) {
                var n = a.get(e);
                e.geometry instanceof r.Geometry && n.updateFromObject(e),
                e = n.index;
                var o = n.attributes;
                null !== e && i(e, t.ELEMENT_ARRAY_BUFFER);
                for (var s in o)
                    i(o[s], t.ARRAY_BUFFER);
                e = n.morphAttributes;
                for (s in e)
                    for (var o = e[s], l = 0, h = o.length; h > l; l++)
                        i(o[l], t.ARRAY_BUFFER);
                return n
            }
        }
        ,
        r.WebGLProgram = function() {
            function t(t) {
                var e, n = [];
                for (e in t) {
                    var r = t[e];
                    !1 !== r && n.push("#define " + e + " " + r)
                }
                return n.join("\n")
            }
            function e(t) {
                return "" !== t
            }
            var n = 0;
            return function(i, o, a, s) {
                var l = i.context
                  , h = a.defines
                  , c = a.__webglShader.vertexShader
                  , u = a.__webglShader.fragmentShader
                  , p = "SHADOWMAP_TYPE_BASIC";
                s.shadowMapType === r.PCFShadowMap ? p = "SHADOWMAP_TYPE_PCF" : s.shadowMapType === r.PCFSoftShadowMap && (p = "SHADOWMAP_TYPE_PCF_SOFT");
                var d = "ENVMAP_TYPE_CUBE"
                  , f = "ENVMAP_MODE_REFLECTION"
                  , m = "ENVMAP_BLENDING_MULTIPLY";
                if (s.envMap) {
                    switch (a.envMap.mapping) {
                    case r.CubeReflectionMapping:
                    case r.CubeRefractionMapping:
                        d = "ENVMAP_TYPE_CUBE";
                        break;
                    case r.EquirectangularReflectionMapping:
                    case r.EquirectangularRefractionMapping:
                        d = "ENVMAP_TYPE_EQUIREC";
                        break;
                    case r.SphericalReflectionMapping:
                        d = "ENVMAP_TYPE_SPHERE"
                    }
                    switch (a.envMap.mapping) {
                    case r.CubeRefractionMapping:
                    case r.EquirectangularRefractionMapping:
                        f = "ENVMAP_MODE_REFRACTION"
                    }
                    switch (a.combine) {
                    case r.MultiplyOperation:
                        m = "ENVMAP_BLENDING_MULTIPLY";
                        break;
                    case r.MixOperation:
                        m = "ENVMAP_BLENDING_MIX";
                        break;
                    case r.AddOperation:
                        m = "ENVMAP_BLENDING_ADD"
                    }
                }
                var g = 0 < i.gammaFactor ? i.gammaFactor : 1
                  , v = t(h)
                  , y = l.createProgram();
                a instanceof r.RawShaderMaterial ? i = h = "" : (h = ["precision " + s.precision + " float;", "precision " + s.precision + " int;", "#define SHADER_NAME " + a.__webglShader.name, v, s.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", i.gammaInput ? "#define GAMMA_INPUT" : "", i.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define GAMMA_FACTOR " + g, "#define MAX_DIR_LIGHTS " + s.maxDirLights, "#define MAX_POINT_LIGHTS " + s.maxPointLights, "#define MAX_SPOT_LIGHTS " + s.maxSpotLights, "#define MAX_HEMI_LIGHTS " + s.maxHemiLights, "#define MAX_SHADOWS " + s.maxShadows, "#define MAX_BONES " + s.maxBones, s.map ? "#define USE_MAP" : "", s.envMap ? "#define USE_ENVMAP" : "", s.envMap ? "#define " + f : "", s.lightMap ? "#define USE_LIGHTMAP" : "", s.aoMap ? "#define USE_AOMAP" : "", s.emissiveMap ? "#define USE_EMISSIVEMAP" : "", s.bumpMap ? "#define USE_BUMPMAP" : "", s.normalMap ? "#define USE_NORMALMAP" : "", s.displacementMap && s.supportsVertexTextures ? "#define USE_DISPLACEMENTMAP" : "", s.specularMap ? "#define USE_SPECULARMAP" : "", s.alphaMap ? "#define USE_ALPHAMAP" : "", s.vertexColors ? "#define USE_COLOR" : "", s.flatShading ? "#define FLAT_SHADED" : "", s.skinning ? "#define USE_SKINNING" : "", s.useVertexTexture ? "#define BONE_TEXTURE" : "", s.morphTargets ? "#define USE_MORPHTARGETS" : "", s.morphNormals && !1 === s.flatShading ? "#define USE_MORPHNORMALS" : "", s.doubleSided ? "#define DOUBLE_SIDED" : "", s.flipSided ? "#define FLIP_SIDED" : "", s.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", s.shadowMapEnabled ? "#define " + p : "", s.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", s.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", s.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", s.logarithmicDepthBuffer && i.extensions.get("EXT_frag_depth") ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "#ifdef USE_COLOR", "	attribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "	attribute vec3 morphTarget0;", "	attribute vec3 morphTarget1;", "	attribute vec3 morphTarget2;", "	attribute vec3 morphTarget3;", "	#ifdef USE_MORPHNORMALS", "		attribute vec3 morphNormal0;", "		attribute vec3 morphNormal1;", "		attribute vec3 morphNormal2;", "		attribute vec3 morphNormal3;", "	#else", "		attribute vec3 morphTarget4;", "		attribute vec3 morphTarget5;", "		attribute vec3 morphTarget6;", "		attribute vec3 morphTarget7;", "	#endif", "#endif", "#ifdef USE_SKINNING", "	attribute vec4 skinIndex;", "	attribute vec4 skinWeight;", "#endif", "\n"].filter(e).join("\n"),
                i = [s.bumpMap || s.normalMap || s.flatShading || a.derivatives ? "#extension GL_OES_standard_derivatives : enable" : "", s.logarithmicDepthBuffer && i.extensions.get("EXT_frag_depth") ? "#extension GL_EXT_frag_depth : enable" : "", "precision " + s.precision + " float;", "precision " + s.precision + " int;", "#define SHADER_NAME " + a.__webglShader.name, v, "#define MAX_DIR_LIGHTS " + s.maxDirLights, "#define MAX_POINT_LIGHTS " + s.maxPointLights, "#define MAX_SPOT_LIGHTS " + s.maxSpotLights, "#define MAX_HEMI_LIGHTS " + s.maxHemiLights, "#define MAX_SHADOWS " + s.maxShadows, s.alphaTest ? "#define ALPHATEST " + s.alphaTest : "", i.gammaInput ? "#define GAMMA_INPUT" : "", i.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define GAMMA_FACTOR " + g, s.useFog && s.fog ? "#define USE_FOG" : "", s.useFog && s.fogExp ? "#define FOG_EXP2" : "", s.map ? "#define USE_MAP" : "", s.envMap ? "#define USE_ENVMAP" : "", s.envMap ? "#define " + d : "", s.envMap ? "#define " + f : "", s.envMap ? "#define " + m : "", s.lightMap ? "#define USE_LIGHTMAP" : "", s.aoMap ? "#define USE_AOMAP" : "", s.emissiveMap ? "#define USE_EMISSIVEMAP" : "", s.bumpMap ? "#define USE_BUMPMAP" : "", s.normalMap ? "#define USE_NORMALMAP" : "", s.specularMap ? "#define USE_SPECULARMAP" : "", s.alphaMap ? "#define USE_ALPHAMAP" : "", s.vertexColors ? "#define USE_COLOR" : "", s.flatShading ? "#define FLAT_SHADED" : "", s.metal ? "#define METAL" : "", s.doubleSided ? "#define DOUBLE_SIDED" : "", s.flipSided ? "#define FLIP_SIDED" : "", s.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", s.shadowMapEnabled ? "#define " + p : "", s.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", s.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", s.logarithmicDepthBuffer && i.extensions.get("EXT_frag_depth") ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", "\n"].filter(e).join("\n")),
                u = i + u,
                c = r.WebGLShader(l, l.VERTEX_SHADER, h + c),
                u = r.WebGLShader(l, l.FRAGMENT_SHADER, u),
                l.attachShader(y, c),
                l.attachShader(y, u),
                void 0 !== a.index0AttributeName ? l.bindAttribLocation(y, 0, a.index0AttributeName) : !0 === s.morphTargets && l.bindAttribLocation(y, 0, "position"),
                l.linkProgram(y),
                s = l.getProgramInfoLog(y),
                p = l.getShaderInfoLog(c),
                d = l.getShaderInfoLog(u),
                m = f = !0,
                !1 === l.getProgramParameter(y, l.LINK_STATUS) ? (f = !1,
                console.error("THREE.WebGLProgram: shader error: ", l.getError(), "gl.VALIDATE_STATUS", l.getProgramParameter(y, l.VALIDATE_STATUS), "gl.getProgramInfoLog", s, p, d)) : "" !== s ? console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", s) : ("" === p || "" === d) && (m = !1),
                m && (this.diagnostics = {
                    runnable: f,
                    material: a,
                    programLog: s,
                    vertexShader: {
                        log: p,
                        prefix: h
                    },
                    fragmentShader: {
                        log: d,
                        prefix: i
                    }
                }),
                l.deleteShader(c),
                l.deleteShader(u);
                var _;
                this.getUniforms = function() {
                    if (void 0 === _) {
                        for (var t = {}, e = l.getProgramParameter(y, l.ACTIVE_UNIFORMS), n = 0; e > n; n++) {
                            var r = l.getActiveUniform(y, n).name
                              , i = l.getUniformLocation(y, r)
                              , o = r.lastIndexOf("[0]");
                            -1 !== o && o === r.length - 3 && (t[r.substr(0, o)] = i),
                            t[r] = i
                        }
                        _ = t
                    }
                    return _
                }
                ;
                var x;
                return this.getAttributes = function() {
                    if (void 0 === x) {
                        for (var t = {}, e = l.getProgramParameter(y, l.ACTIVE_ATTRIBUTES), n = 0; e > n; n++) {
                            var r = l.getActiveAttrib(y, n).name;
                            t[r] = l.getAttribLocation(y, r)
                        }
                        x = t
                    }
                    return x
                }
                ,
                this.destroy = function() {
                    l.deleteProgram(y),
                    this.program = void 0
                }
                ,
                Object.defineProperties(this, {
                    uniforms: {
                        get: function() {
                            return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),
                            this.getUniforms()
                        }
                    },
                    attributes: {
                        get: function() {
                            return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),
                            this.getAttributes()
                        }
                    }
                }),
                this.id = n++,
                this.code = o,
                this.usedTimes = 1,
                this.program = y,
                this.vertexShader = c,
                this.fragmentShader = u,
                this
            }
        }(),
        r.WebGLPrograms = function(t, e) {
            var n = []
              , i = {
                MeshDepthMaterial: "depth",
                MeshNormalMaterial: "normal",
                MeshBasicMaterial: "basic",
                MeshLambertMaterial: "lambert",
                MeshPhongMaterial: "phong",
                LineBasicMaterial: "basic",
                LineDashedMaterial: "dashed",
                PointsMaterial: "points"
            }
              , o = "precision supportsVertexTextures map envMap envMapMode lightMap aoMap emissiveMap bumpMap normalMap specularMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals maxDirLights maxPointLights maxSpotLights maxHemiLights maxShadows shadowMapEnabled shadowMapType shadowMapDebug alphaTest metal doubleSided flipSided".split(" ");
            this.getParameters = function(n, o, a, s) {
                for (var l, h, c, u, p = i[n.type], d = u = c = h = l = 0, f = o.length; f > d; d++) {
                    var m = o[d];
                    m.onlyShadow || !1 === m.visible || (m instanceof r.DirectionalLight && l++,
                    m instanceof r.PointLight && h++,
                    m instanceof r.SpotLight && c++,
                    m instanceof r.HemisphereLight && u++)
                }
                for (f = d = 0,
                m = o.length; m > f; f++) {
                    var g = o[f];
                    g.castShadow && (g instanceof r.SpotLight && d++,
                    g instanceof r.DirectionalLight && d++)
                }
                return o = d,
                e.floatVertexTextures && s && s.skeleton && s.skeleton.useVertexTexture ? d = 1024 : (d = Math.floor((e.maxVertexUniforms - 20) / 4),
                void 0 !== s && s instanceof r.SkinnedMesh && (d = Math.min(s.skeleton.bones.length, d),
                d < s.skeleton.bones.length && console.warn("WebGLRenderer: too many bones - " + s.skeleton.bones.length + ", this GPU supports just " + d + " (try OpenGL instead of ANGLE)"))),
                f = t.getPrecision(),
                null !== n.precision && (f = e.getMaxPrecision(n.precision),
                f !== n.precision && console.warn("THREE.WebGLRenderer.initMaterial:", n.precision, "not supported, using", f, "instead.")),
                {
                    shaderID: p,
                    precision: f,
                    supportsVertexTextures: e.vertexTextures,
                    map: !!n.map,
                    envMap: !!n.envMap,
                    envMapMode: n.envMap && n.envMap.mapping,
                    lightMap: !!n.lightMap,
                    aoMap: !!n.aoMap,
                    emissiveMap: !!n.emissiveMap,
                    bumpMap: !!n.bumpMap,
                    normalMap: !!n.normalMap,
                    displacementMap: !!n.displacementMap,
                    specularMap: !!n.specularMap,
                    alphaMap: !!n.alphaMap,
                    combine: n.combine,
                    vertexColors: n.vertexColors,
                    fog: a,
                    useFog: n.fog,
                    fogExp: a instanceof r.FogExp2,
                    flatShading: n.shading === r.FlatShading,
                    sizeAttenuation: n.sizeAttenuation,
                    logarithmicDepthBuffer: e.logarithmicDepthBuffer,
                    skinning: n.skinning,
                    maxBones: d,
                    useVertexTexture: e.floatVertexTextures && s && s.skeleton && s.skeleton.useVertexTexture,
                    morphTargets: n.morphTargets,
                    morphNormals: n.morphNormals,
                    maxMorphTargets: t.maxMorphTargets,
                    maxMorphNormals: t.maxMorphNormals,
                    maxDirLights: l,
                    maxPointLights: h,
                    maxSpotLights: c,
                    maxHemiLights: u,
                    maxShadows: o,
                    shadowMapEnabled: t.shadowMap.enabled && s.receiveShadow && o > 0,
                    shadowMapType: t.shadowMap.type,
                    shadowMapDebug: t.shadowMap.debug,
                    alphaTest: n.alphaTest,
                    metal: n.metal,
                    doubleSided: n.side === r.DoubleSide,
                    flipSided: n.side === r.BackSide
                }
            }
            ,
            this.getProgramCode = function(t, e) {
                var n = [];
                if (e.shaderID ? n.push(e.shaderID) : (n.push(t.fragmentShader),
                n.push(t.vertexShader)),
                void 0 !== t.defines)
                    for (var r in t.defines)
                        n.push(r),
                        n.push(t.defines[r]);
                for (r = 0; r < o.length; r++) {
                    var i = o[r];
                    n.push(i),
                    n.push(e[i])
                }
                return n.join()
            }
            ,
            this.acquireProgram = function(e, i, o) {
                for (var a, s = 0, l = n.length; l > s; s++) {
                    var h = n[s];
                    if (h.code === o) {
                        a = h,
                        ++a.usedTimes;
                        break
                    }
                }
                return void 0 === a && (a = new r.WebGLProgram(t,o,e,i),
                n.push(a)),
                a
            }
            ,
            this.releaseProgram = function(t) {
                if (0 === --t.usedTimes) {
                    var e = n.indexOf(t);
                    n[e] = n[n.length - 1],
                    n.pop(),
                    t.destroy()
                }
            }
            ,
            this.programs = n
        }
        ,
        r.WebGLProperties = function() {
            var t = {};
            this.get = function(e) {
                e = e.uuid;
                var n = t[e];
                return void 0 === n && (n = {},
                t[e] = n),
                n
            }
            ,
            this["delete"] = function(e) {
                delete t[e.uuid]
            }
            ,
            this.clear = function() {
                t = {}
            }
        }
        ,
        r.WebGLShader = function() {
            var t = function(t) {
                t = t.split("\n");
                for (var e = 0; e < t.length; e++)
                    t[e] = e + 1 + ": " + t[e];
                return t.join("\n")
            };
            return function(e, n, r) {
                var i = e.createShader(n);
                return e.shaderSource(i, r),
                e.compileShader(i),
                !1 === e.getShaderParameter(i, e.COMPILE_STATUS) && console.error("THREE.WebGLShader: Shader couldn't compile."),
                "" !== e.getShaderInfoLog(i) && console.warn("THREE.WebGLShader: gl.getShaderInfoLog()", n === e.VERTEX_SHADER ? "vertex" : "fragment", e.getShaderInfoLog(i), t(r)),
                i
            }
        }(),
        r.WebGLShadowMap = function(t, e, n) {
            function i(t, e) {
                var n = t.geometry
                  , n = void 0 !== n.morphTargets && 0 < n.morphTargets.length && e.morphTargets
                  , i = t instanceof r.SkinnedMesh && e.skinning
                  , n = t.customDepthMaterial ? t.customDepthMaterial : i ? n ? v : g : n ? m : f;
                return n.visible = e.visible,
                n.wireframe = e.wireframe,
                n.wireframeLinewidth = e.wireframeLinewidth,
                n
            }
            function o(t, e) {
                if (!1 !== t.visible) {
                    (t instanceof r.Mesh || t instanceof r.Line || t instanceof r.Points) && t.castShadow && (!1 === t.frustumCulled || !0 === l.intersectsObject(t)) && !0 === t.material.visible && (t.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse, t.matrixWorld),
                    u.push(t));
                    for (var n = t.children, i = 0, a = n.length; a > i; i++)
                        o(n[i], e)
                }
            }
            var a = t.context
              , s = t.state
              , l = new r.Frustum
              , h = new r.Matrix4;
            new r.Vector3,
            new r.Vector3;
            var c = new r.Vector3
              , u = []
              , p = r.ShaderLib.depthRGBA
              , d = r.UniformsUtils.clone(p.uniforms)
              , f = new r.ShaderMaterial({
                uniforms: d,
                vertexShader: p.vertexShader,
                fragmentShader: p.fragmentShader
            })
              , m = new r.ShaderMaterial({
                uniforms: d,
                vertexShader: p.vertexShader,
                fragmentShader: p.fragmentShader,
                morphTargets: !0
            })
              , g = new r.ShaderMaterial({
                uniforms: d,
                vertexShader: p.vertexShader,
                fragmentShader: p.fragmentShader,
                skinning: !0
            })
              , v = new r.ShaderMaterial({
                uniforms: d,
                vertexShader: p.vertexShader,
                fragmentShader: p.fragmentShader,
                morphTargets: !0,
                skinning: !0
            });
            f._shadowPass = !0,
            m._shadowPass = !0,
            g._shadowPass = !0,
            v._shadowPass = !0;
            var y = this;
            this.enabled = !1,
            this.autoUpdate = !0,
            this.needsUpdate = !1,
            this.type = r.PCFShadowMap,
            this.cullFace = r.CullFaceFront,
            this.render = function(p, d) {
                if (!1 !== y.enabled && (!1 !== y.autoUpdate || !1 !== y.needsUpdate)) {
                    a.clearColor(1, 1, 1, 1),
                    s.disable(a.BLEND),
                    s.enable(a.CULL_FACE),
                    a.frontFace(a.CCW),
                    y.cullFace === r.CullFaceFront ? a.cullFace(a.FRONT) : a.cullFace(a.BACK),
                    s.setDepthTest(!0);
                    for (var f = 0, m = e.length; m > f; f++) {
                        var g = e[f];
                        if (g.castShadow) {
                            if (!g.shadowMap) {
                                var v = r.LinearFilter;
                                y.type === r.PCFSoftShadowMap && (v = r.NearestFilter),
                                g.shadowMap = new r.WebGLRenderTarget(g.shadowMapWidth,g.shadowMapHeight,{
                                    minFilter: v,
                                    magFilter: v,
                                    format: r.RGBAFormat
                                }),
                                g.shadowMapSize = new r.Vector2(g.shadowMapWidth,g.shadowMapHeight),
                                g.shadowMatrix = new r.Matrix4
                            }
                            if (!g.shadowCamera) {
                                if (g instanceof r.SpotLight)
                                    g.shadowCamera = new r.PerspectiveCamera(g.shadowCameraFov,g.shadowMapWidth / g.shadowMapHeight,g.shadowCameraNear,g.shadowCameraFar);
                                else {
                                    if (!(g instanceof r.DirectionalLight)) {
                                        console.error("THREE.ShadowMapPlugin: Unsupported light type for shadow", g);
                                        continue
                                    }
                                    g.shadowCamera = new r.OrthographicCamera(g.shadowCameraLeft,g.shadowCameraRight,g.shadowCameraTop,g.shadowCameraBottom,g.shadowCameraNear,g.shadowCameraFar)
                                }
                                p.add(g.shadowCamera),
                                !0 === p.autoUpdate && p.updateMatrixWorld()
                            }
                            g.shadowCameraVisible && !g.cameraHelper && (g.cameraHelper = new r.CameraHelper(g.shadowCamera),
                            p.add(g.cameraHelper));
                            var _ = g.shadowMap
                              , x = g.shadowMatrix
                              , v = g.shadowCamera;
                            for (v.position.setFromMatrixPosition(g.matrixWorld),
                            c.setFromMatrixPosition(g.target.matrixWorld),
                            v.lookAt(c),
                            v.updateMatrixWorld(),
                            v.matrixWorldInverse.getInverse(v.matrixWorld),
                            g.cameraHelper && (g.cameraHelper.visible = g.shadowCameraVisible),
                            g.shadowCameraVisible && g.cameraHelper.update(),
                            x.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1),
                            x.multiply(v.projectionMatrix),
                            x.multiply(v.matrixWorldInverse),
                            h.multiplyMatrices(v.projectionMatrix, v.matrixWorldInverse),
                            l.setFromMatrix(h),
                            t.setRenderTarget(_),
                            t.clear(),
                            u.length = 0,
                            o(p, v),
                            g = 0,
                            _ = u.length; _ > g; g++) {
                                var x = u[g]
                                  , b = n.update(x)
                                  , w = x.material;
                                if (w instanceof r.MeshFaceMaterial)
                                    for (var S = b.groups, w = w.materials, T = 0, M = S.length; M > T; T++) {
                                        var C = S[T]
                                          , A = w[C.materialIndex];
                                        !0 === A.visible && t.renderBufferDirect(v, e, null , b, i(x, A), x, C)
                                    }
                                else
                                    t.renderBufferDirect(v, e, null , b, i(x, w), x)
                            }
                        }
                    }
                    f = t.getClearColor(),
                    m = t.getClearAlpha(),
                    t.setClearColor(f, m),
                    s.enable(a.BLEND),
                    y.cullFace === r.CullFaceFront && a.cullFace(a.BACK),
                    t.resetGLState(),
                    y.needsUpdate = !1
                }
            }
        }
        ,
        r.WebGLState = function(t, e, n) {
            var i = this
              , o = new Uint8Array(16)
              , a = new Uint8Array(16)
              , s = {}
              , l = null
              , h = null
              , c = null
              , u = null
              , p = null
              , d = null
              , f = null
              , m = null
              , g = null
              , v = null
              , y = null
              , _ = null
              , x = null
              , b = null
              , w = null
              , S = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)
              , T = void 0
              , M = {};
            this.init = function() {
                t.clearColor(0, 0, 0, 1),
                t.clearDepth(1),
                t.clearStencil(0),
                this.enable(t.DEPTH_TEST),
                t.depthFunc(t.LEQUAL),
                t.frontFace(t.CCW),
                t.cullFace(t.BACK),
                this.enable(t.CULL_FACE),
                this.enable(t.BLEND),
                t.blendEquation(t.FUNC_ADD),
                t.blendFunc(t.SRC_ALPHA, t.ONE_MINUS_SRC_ALPHA)
            }
            ,
            this.initAttributes = function() {
                for (var t = 0, e = o.length; e > t; t++)
                    o[t] = 0
            }
            ,
            this.enableAttribute = function(e) {
                o[e] = 1,
                0 === a[e] && (t.enableVertexAttribArray(e),
                a[e] = 1)
            }
            ,
            this.disableUnusedAttributes = function() {
                for (var e = 0, n = a.length; n > e; e++)
                    a[e] !== o[e] && (t.disableVertexAttribArray(e),
                    a[e] = 0)
            }
            ,
            this.enable = function(e) {
                !0 !== s[e] && (t.enable(e),
                s[e] = !0)
            }
            ,
            this.disable = function(e) {
                !1 !== s[e] && (t.disable(e),
                s[e] = !1)
            }
            ,
            this.getCompressedTextureFormats = function() {
                if (null === l && (l = [],
                e.get("WEBGL_compressed_texture_pvrtc") || e.get("WEBGL_compressed_texture_etc1") || e.get("WEBGL_compressed_texture_s3tc")))
                    for (var n = t.getParameter(t.COMPRESSED_TEXTURE_FORMATS), r = 0; r < n.length; r++)
                        l.push(n[r]);
                return l
            }
            ,
            this.setBlending = function(e, i, o, a, s, l, g) {
                e !== h && (e === r.NoBlending ? this.disable(t.BLEND) : e === r.AdditiveBlending ? (this.enable(t.BLEND),
                t.blendEquation(t.FUNC_ADD),
                t.blendFunc(t.SRC_ALPHA, t.ONE)) : e === r.SubtractiveBlending ? (this.enable(t.BLEND),
                t.blendEquation(t.FUNC_ADD),
                t.blendFunc(t.ZERO, t.ONE_MINUS_SRC_COLOR)) : e === r.MultiplyBlending ? (this.enable(t.BLEND),
                t.blendEquation(t.FUNC_ADD),
                t.blendFunc(t.ZERO, t.SRC_COLOR)) : e === r.CustomBlending ? this.enable(t.BLEND) : (this.enable(t.BLEND),
                t.blendEquationSeparate(t.FUNC_ADD, t.FUNC_ADD),
                t.blendFuncSeparate(t.SRC_ALPHA, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA)),
                h = e),
                e === r.CustomBlending ? (s = s || i,
                l = l || o,
                g = g || a,
                (i !== c || s !== d) && (t.blendEquationSeparate(n(i), n(s)),
                c = i,
                d = s),
                (o !== u || a !== p || l !== f || g !== m) && (t.blendFuncSeparate(n(o), n(a), n(l), n(g)),
                u = o,
                p = a,
                f = l,
                m = g)) : m = f = d = p = u = c = null
            }
            ,
            this.setDepthFunc = function(e) {
                if (g !== e) {
                    if (e)
                        switch (e) {
                        case r.NeverDepth:
                            t.depthFunc(t.NEVER);
                            break;
                        case r.AlwaysDepth:
                            t.depthFunc(t.ALWAYS);
                            break;
                        case r.LessDepth:
                            t.depthFunc(t.LESS);
                            break;
                        case r.LessEqualDepth:
                            t.depthFunc(t.LEQUAL);
                            break;
                        case r.EqualDepth:
                            t.depthFunc(t.EQUAL);
                            break;
                        case r.GreaterEqualDepth:
                            t.depthFunc(t.GEQUAL);
                            break;
                        case r.GreaterDepth:
                            t.depthFunc(t.GREATER);
                            break;
                        case r.NotEqualDepth:
                            t.depthFunc(t.NOTEQUAL);
                            break;
                        default:
                            t.depthFunc(t.LEQUAL)
                        }
                    else
                        t.depthFunc(t.LEQUAL);
                    g = e
                }
            }
            ,
            this.setDepthTest = function(e) {
                e ? this.enable(t.DEPTH_TEST) : this.disable(t.DEPTH_TEST)
            }
            ,
            this.setDepthWrite = function(e) {
                v !== e && (t.depthMask(e),
                v = e)
            }
            ,
            this.setColorWrite = function(e) {
                y !== e && (t.colorMask(e, e, e, e),
                y = e)
            }
            ,
            this.setFlipSided = function(e) {
                _ !== e && (e ? t.frontFace(t.CW) : t.frontFace(t.CCW),
                _ = e)
            }
            ,
            this.setLineWidth = function(e) {
                e !== x && (t.lineWidth(e),
                x = e)
            }
            ,
            this.setPolygonOffset = function(e, n, r) {
                e ? this.enable(t.POLYGON_OFFSET_FILL) : this.disable(t.POLYGON_OFFSET_FILL),
                !e || b === n && w === r || (t.polygonOffset(n, r),
                b = n,
                w = r)
            }
            ,
            this.setScissorTest = function(e) {
                e ? this.enable(t.SCISSOR_TEST) : this.disable(t.SCISSOR_TEST)
            }
            ,
            this.activeTexture = function(e) {
                void 0 === e && (e = t.TEXTURE0 + S - 1),
                T !== e && (t.activeTexture(e),
                T = e)
            }
            ,
            this.bindTexture = function(e, n) {
                void 0 === T && i.activeTexture();
                var r = M[T];
                void 0 === r && (r = {
                    type: void 0,
                    texture: void 0
                },
                M[T] = r),
                (r.type !== e || r.texture !== n) && (t.bindTexture(e, n),
                r.type = e,
                r.texture = n)
            }
            ,
            this.compressedTexImage2D = function() {
                try {
                    t.compressedTexImage2D.apply(t, arguments)
                } catch (e) {
                    console.error(e)
                }
            }
            ,
            this.texImage2D = function() {
                try {
                    t.texImage2D.apply(t, arguments)
                } catch (e) {
                    console.error(e)
                }
            }
            ,
            this.reset = function() {
                for (var e = 0; e < a.length; e++)
                    1 === a[e] && (t.disableVertexAttribArray(e),
                    a[e] = 0);
                s = {},
                _ = y = v = h = l = null
            }
        }
        ,
        r.LensFlarePlugin = function(t, e) {
            var n, i, o, a, s, l, h, c, u, p, d, f, m, g, v, y, _ = t.context, x = t.state;
            this.render = function(b, w, S, T) {
                if (0 !== e.length) {
                    b = new r.Vector3;
                    var M = T / S
                      , C = .5 * S
                      , A = .5 * T
                      , E = 16 / T
                      , L = new r.Vector2(E * M,E)
                      , P = new r.Vector3(1,1,0)
                      , k = new r.Vector2(1,1);
                    if (void 0 === m) {
                        var E = new Float32Array([-1, -1, 0, 0, 1, -1, 1, 0, 1, 1, 1, 1, -1, 1, 0, 1])
                          , R = new Uint16Array([0, 1, 2, 0, 2, 3]);
                        d = _.createBuffer(),
                        f = _.createBuffer(),
                        _.bindBuffer(_.ARRAY_BUFFER, d),
                        _.bufferData(_.ARRAY_BUFFER, E, _.STATIC_DRAW),
                        _.bindBuffer(_.ELEMENT_ARRAY_BUFFER, f),
                        _.bufferData(_.ELEMENT_ARRAY_BUFFER, R, _.STATIC_DRAW),
                        v = _.createTexture(),
                        y = _.createTexture(),
                        x.bindTexture(_.TEXTURE_2D, v),
                        _.texImage2D(_.TEXTURE_2D, 0, _.RGB, 16, 16, 0, _.RGB, _.UNSIGNED_BYTE, null ),
                        _.texParameteri(_.TEXTURE_2D, _.TEXTURE_WRAP_S, _.CLAMP_TO_EDGE),
                        _.texParameteri(_.TEXTURE_2D, _.TEXTURE_WRAP_T, _.CLAMP_TO_EDGE),
                        _.texParameteri(_.TEXTURE_2D, _.TEXTURE_MAG_FILTER, _.NEAREST),
                        _.texParameteri(_.TEXTURE_2D, _.TEXTURE_MIN_FILTER, _.NEAREST),
                        x.bindTexture(_.TEXTURE_2D, y),
                        _.texImage2D(_.TEXTURE_2D, 0, _.RGBA, 16, 16, 0, _.RGBA, _.UNSIGNED_BYTE, null ),
                        _.texParameteri(_.TEXTURE_2D, _.TEXTURE_WRAP_S, _.CLAMP_TO_EDGE),
                        _.texParameteri(_.TEXTURE_2D, _.TEXTURE_WRAP_T, _.CLAMP_TO_EDGE),
                        _.texParameteri(_.TEXTURE_2D, _.TEXTURE_MAG_FILTER, _.NEAREST),
                        _.texParameteri(_.TEXTURE_2D, _.TEXTURE_MIN_FILTER, _.NEAREST);
                        var E = (g = 0 < _.getParameter(_.MAX_VERTEX_TEXTURE_IMAGE_UNITS)) ? {
                            vertexShader: "uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
                            fragmentShader: "uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"
                        } : {
                            vertexShader: "uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
                            fragmentShader: "precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"
                        }
                          , R = _.createProgram()
                          , O = _.createShader(_.FRAGMENT_SHADER)
                          , D = _.createShader(_.VERTEX_SHADER)
                          , F = "precision " + t.getPrecision() + " float;\n";
                        _.shaderSource(O, F + E.fragmentShader),
                        _.shaderSource(D, F + E.vertexShader),
                        _.compileShader(O),
                        _.compileShader(D),
                        _.attachShader(R, O),
                        _.attachShader(R, D),
                        _.linkProgram(R),
                        m = R,
                        u = _.getAttribLocation(m, "position"),
                        p = _.getAttribLocation(m, "uv"),
                        n = _.getUniformLocation(m, "renderType"),
                        i = _.getUniformLocation(m, "map"),
                        o = _.getUniformLocation(m, "occlusionMap"),
                        a = _.getUniformLocation(m, "opacity"),
                        s = _.getUniformLocation(m, "color"),
                        l = _.getUniformLocation(m, "scale"),
                        h = _.getUniformLocation(m, "rotation"),
                        c = _.getUniformLocation(m, "screenPosition")
                    }
                    for (_.useProgram(m),
                    x.initAttributes(),
                    x.enableAttribute(u),
                    x.enableAttribute(p),
                    x.disableUnusedAttributes(),
                    _.uniform1i(o, 0),
                    _.uniform1i(i, 1),
                    _.bindBuffer(_.ARRAY_BUFFER, d),
                    _.vertexAttribPointer(u, 2, _.FLOAT, !1, 16, 0),
                    _.vertexAttribPointer(p, 2, _.FLOAT, !1, 16, 8),
                    _.bindBuffer(_.ELEMENT_ARRAY_BUFFER, f),
                    x.disable(_.CULL_FACE),
                    _.depthMask(!1),
                    R = 0,
                    O = e.length; O > R; R++)
                        if (E = 16 / T,
                        L.set(E * M, E),
                        D = e[R],
                        b.set(D.matrixWorld.elements[12], D.matrixWorld.elements[13], D.matrixWorld.elements[14]),
                        b.applyMatrix4(w.matrixWorldInverse),
                        b.applyProjection(w.projectionMatrix),
                        P.copy(b),
                        k.x = P.x * C + C,
                        k.y = P.y * A + A,
                        g || 0 < k.x && k.x < S && 0 < k.y && k.y < T) {
                            x.activeTexture(_.TEXTURE0),
                            x.bindTexture(_.TEXTURE_2D, null ),
                            x.activeTexture(_.TEXTURE1),
                            x.bindTexture(_.TEXTURE_2D, v),
                            _.copyTexImage2D(_.TEXTURE_2D, 0, _.RGB, k.x - 8, k.y - 8, 16, 16, 0),
                            _.uniform1i(n, 0),
                            _.uniform2f(l, L.x, L.y),
                            _.uniform3f(c, P.x, P.y, P.z),
                            x.disable(_.BLEND),
                            x.enable(_.DEPTH_TEST),
                            _.drawElements(_.TRIANGLES, 6, _.UNSIGNED_SHORT, 0),
                            x.activeTexture(_.TEXTURE0),
                            x.bindTexture(_.TEXTURE_2D, y),
                            _.copyTexImage2D(_.TEXTURE_2D, 0, _.RGBA, k.x - 8, k.y - 8, 16, 16, 0),
                            _.uniform1i(n, 1),
                            x.disable(_.DEPTH_TEST),
                            x.activeTexture(_.TEXTURE1),
                            x.bindTexture(_.TEXTURE_2D, v),
                            _.drawElements(_.TRIANGLES, 6, _.UNSIGNED_SHORT, 0),
                            D.positionScreen.copy(P),
                            D.customUpdateCallback ? D.customUpdateCallback(D) : D.updateLensFlares(),
                            _.uniform1i(n, 2),
                            x.enable(_.BLEND);
                            for (var F = 0, U = D.lensFlares.length; U > F; F++) {
                                var I = D.lensFlares[F];
                                .001 < I.opacity && .001 < I.scale && (P.x = I.x,
                                P.y = I.y,
                                P.z = I.z,
                                E = I.size * I.scale / T,
                                L.x = E * M,
                                L.y = E,
                                _.uniform3f(c, P.x, P.y, P.z),
                                _.uniform2f(l, L.x, L.y),
                                _.uniform1f(h, I.rotation),
                                _.uniform1f(a, I.opacity),
                                _.uniform3f(s, I.color.r, I.color.g, I.color.b),
                                x.setBlending(I.blending, I.blendEquation, I.blendSrc, I.blendDst),
                                t.setTexture(I.texture, 1),
                                _.drawElements(_.TRIANGLES, 6, _.UNSIGNED_SHORT, 0))
                            }
                        }
                    x.enable(_.CULL_FACE),
                    x.enable(_.DEPTH_TEST),
                    _.depthMask(!0),
                    t.resetGLState()
                }
            }
        }
        ,
        r.SpritePlugin = function(t, e) {
            function n(t, e) {
                return t.z !== e.z ? e.z - t.z : e.id - t.id
            }
            var i, o, a, s, l, h, c, u, p, d, f, m, g, v, y, _, x, b, w, S, T, M = t.context, C = t.state, A = new r.Vector3, E = new r.Quaternion, L = new r.Vector3;
            this.render = function(P, k) {
                if (0 !== e.length) {
                    if (void 0 === S) {
                        var R = new Float32Array([-.5, -.5, 0, 0, .5, -.5, 1, 0, .5, .5, 1, 1, -.5, .5, 0, 1])
                          , O = new Uint16Array([0, 1, 2, 0, 2, 3]);
                        b = M.createBuffer(),
                        w = M.createBuffer(),
                        M.bindBuffer(M.ARRAY_BUFFER, b),
                        M.bufferData(M.ARRAY_BUFFER, R, M.STATIC_DRAW),
                        M.bindBuffer(M.ELEMENT_ARRAY_BUFFER, w),
                        M.bufferData(M.ELEMENT_ARRAY_BUFFER, O, M.STATIC_DRAW);
                        var R = M.createProgram()
                          , O = M.createShader(M.VERTEX_SHADER)
                          , D = M.createShader(M.FRAGMENT_SHADER);
                        M.shaderSource(O, ["precision " + t.getPrecision() + " float;", "uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")),
                        M.shaderSource(D, ["precision " + t.getPrecision() + " float;", "uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")),
                        M.compileShader(O),
                        M.compileShader(D),
                        M.attachShader(R, O),
                        M.attachShader(R, D),
                        M.linkProgram(R),
                        S = R,
                        _ = M.getAttribLocation(S, "position"),
                        x = M.getAttribLocation(S, "uv"),
                        i = M.getUniformLocation(S, "uvOffset"),
                        o = M.getUniformLocation(S, "uvScale"),
                        a = M.getUniformLocation(S, "rotation"),
                        s = M.getUniformLocation(S, "scale"),
                        l = M.getUniformLocation(S, "color"),
                        h = M.getUniformLocation(S, "map"),
                        c = M.getUniformLocation(S, "opacity"),
                        u = M.getUniformLocation(S, "modelViewMatrix"),
                        p = M.getUniformLocation(S, "projectionMatrix"),
                        d = M.getUniformLocation(S, "fogType"),
                        f = M.getUniformLocation(S, "fogDensity"),
                        m = M.getUniformLocation(S, "fogNear"),
                        g = M.getUniformLocation(S, "fogFar"),
                        v = M.getUniformLocation(S, "fogColor"),
                        y = M.getUniformLocation(S, "alphaTest"),
                        R = document.createElement("canvas"),
                        R.width = 8,
                        R.height = 8,
                        O = R.getContext("2d"),
                        O.fillStyle = "white",
                        O.fillRect(0, 0, 8, 8),
                        T = new r.Texture(R),
                        T.needsUpdate = !0
                    }
                    M.useProgram(S),
                    C.initAttributes(),
                    C.enableAttribute(_),
                    C.enableAttribute(x),
                    C.disableUnusedAttributes(),
                    C.disable(M.CULL_FACE),
                    C.enable(M.BLEND),
                    M.bindBuffer(M.ARRAY_BUFFER, b),
                    M.vertexAttribPointer(_, 2, M.FLOAT, !1, 16, 0),
                    M.vertexAttribPointer(x, 2, M.FLOAT, !1, 16, 8),
                    M.bindBuffer(M.ELEMENT_ARRAY_BUFFER, w),
                    M.uniformMatrix4fv(p, !1, k.projectionMatrix.elements),
                    C.activeTexture(M.TEXTURE0),
                    M.uniform1i(h, 0),
                    O = R = 0,
                    (D = P.fog) ? (M.uniform3f(v, D.color.r, D.color.g, D.color.b),
                    D instanceof r.Fog ? (M.uniform1f(m, D.near),
                    M.uniform1f(g, D.far),
                    M.uniform1i(d, 1),
                    O = R = 1) : D instanceof r.FogExp2 && (M.uniform1f(f, D.density),
                    M.uniform1i(d, 2),
                    O = R = 2)) : (M.uniform1i(d, 0),
                    O = R = 0);
                    for (var D = 0, F = e.length; F > D; D++) {
                        var U = e[D];
                        U.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse, U.matrixWorld),
                        U.z = -U.modelViewMatrix.elements[14]
                    }
                    e.sort(n);
                    for (var I = [], D = 0, F = e.length; F > D; D++) {
                        var U = e[D]
                          , B = U.material;
                        M.uniform1f(y, B.alphaTest),
                        M.uniformMatrix4fv(u, !1, U.modelViewMatrix.elements),
                        U.matrixWorld.decompose(A, E, L),
                        I[0] = L.x,
                        I[1] = L.y,
                        U = 0,
                        P.fog && B.fog && (U = O),
                        R !== U && (M.uniform1i(d, U),
                        R = U),
                        null !== B.map ? (M.uniform2f(i, B.map.offset.x, B.map.offset.y),
                        M.uniform2f(o, B.map.repeat.x, B.map.repeat.y)) : (M.uniform2f(i, 0, 0),
                        M.uniform2f(o, 1, 1)),
                        M.uniform1f(c, B.opacity),
                        M.uniform3f(l, B.color.r, B.color.g, B.color.b),
                        M.uniform1f(a, B.rotation),
                        M.uniform2fv(s, I),
                        C.setBlending(B.blending, B.blendEquation, B.blendSrc, B.blendDst),
                        C.setDepthTest(B.depthTest),
                        C.setDepthWrite(B.depthWrite),
                        B.map && B.map.image && B.map.image.width ? t.setTexture(B.map, 0) : t.setTexture(T, 0),
                        M.drawElements(M.TRIANGLES, 6, M.UNSIGNED_SHORT, 0)
                    }
                    C.enable(M.CULL_FACE),
                    t.resetGLState()
                }
            }
        }
        ,
        r.GeometryUtils = {
            merge: function(t, e, n) {
                console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");
                var i;
                e instanceof r.Mesh && (e.matrixAutoUpdate && e.updateMatrix(),
                i = e.matrix,
                e = e.geometry),
                t.merge(e, i, n)
            },
            center: function(t) {
                return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),
                t.center()
            }
        },
        r.ImageUtils = {
            crossOrigin: void 0,
            loadTexture: function(t, e, n, i) {
                var o = new r.ImageLoader;
                o.crossOrigin = this.crossOrigin;
                var a = new r.Texture(void 0,e);
                return o.load(t, function(t) {
                    a.image = t,
                    a.needsUpdate = !0,
                    n && n(a)
                }, void 0, function(t) {
                    i && i(t)
                }),
                a.sourceFile = t,
                a
            },
            loadTextureCube: function(t, e, n, i) {
                var o = new r.ImageLoader;
                o.crossOrigin = this.crossOrigin;
                var a = new r.CubeTexture([],e)
                  , s = 0;
                e = function(e) {
                    o.load(t[e], function(t) {
                        a.images[e] = t,
                        s += 1,
                        6 === s && (a.needsUpdate = !0,
                        n && n(a))
                    }, void 0, i)
                }
                ;
                for (var l = 0, h = t.length; h > l; ++l)
                    e(l);
                return a
            },
            loadCompressedTexture: function() {
                console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")
            },
            loadCompressedTextureCube: function() {
                console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")
            },
            getNormalMap: function(t, e) {
                var n = function(t) {
                    var e = Math.sqrt(t[0] * t[0] + t[1] * t[1] + t[2] * t[2]);
                    return [t[0] / e, t[1] / e, t[2] / e]
                };
                e |= 1;
                var r = t.width
                  , i = t.height
                  , o = document.createElement("canvas");
                o.width = r,
                o.height = i;
                var a = o.getContext("2d");
                a.drawImage(t, 0, 0);
                for (var s = a.getImageData(0, 0, r, i).data, l = a.createImageData(r, i), h = l.data, c = 0; r > c; c++)
                    for (var u = 0; i > u; u++) {
                        var p = 0 > u - 1 ? 0 : u - 1
                          , d = u + 1 > i - 1 ? i - 1 : u + 1
                          , f = 0 > c - 1 ? 0 : c - 1
                          , m = c + 1 > r - 1 ? r - 1 : c + 1
                          , g = []
                          , v = [0, 0, s[4 * (u * r + c)] / 255 * e];
                        for (g.push([-1, 0, s[4 * (u * r + f)] / 255 * e]),
                        g.push([-1, -1, s[4 * (p * r + f)] / 255 * e]),
                        g.push([0, -1, s[4 * (p * r + c)] / 255 * e]),
                        g.push([1, -1, s[4 * (p * r + m)] / 255 * e]),
                        g.push([1, 0, s[4 * (u * r + m)] / 255 * e]),
                        g.push([1, 1, s[4 * (d * r + m)] / 255 * e]),
                        g.push([0, 1, s[4 * (d * r + c)] / 255 * e]),
                        g.push([-1, 1, s[4 * (d * r + f)] / 255 * e]),
                        p = [],
                        f = g.length,
                        d = 0; f > d; d++) {
                            var m = g[d]
                              , y = g[(d + 1) % f]
                              , m = [m[0] - v[0], m[1] - v[1], m[2] - v[2]]
                              , y = [y[0] - v[0], y[1] - v[1], y[2] - v[2]];
                            p.push(n([m[1] * y[2] - m[2] * y[1], m[2] * y[0] - m[0] * y[2], m[0] * y[1] - m[1] * y[0]]))
                        }
                        for (g = [0, 0, 0],
                        d = 0; d < p.length; d++)
                            g[0] += p[d][0],
                            g[1] += p[d][1],
                            g[2] += p[d][2];
                        g[0] /= p.length,
                        g[1] /= p.length,
                        g[2] /= p.length,
                        v = 4 * (u * r + c),
                        h[v] = (g[0] + 1) / 2 * 255 | 0,
                        h[v + 1] = (g[1] + 1) / 2 * 255 | 0,
                        h[v + 2] = 255 * g[2] | 0,
                        h[v + 3] = 255
                    }
                return a.putImageData(l, 0, 0),
                o
            },
            generateDataTexture: function(t, e, n) {
                var i = t * e
                  , o = new Uint8Array(3 * i)
                  , a = Math.floor(255 * n.r)
                  , s = Math.floor(255 * n.g);
                n = Math.floor(255 * n.b);
                for (var l = 0; i > l; l++)
                    o[3 * l] = a,
                    o[3 * l + 1] = s,
                    o[3 * l + 2] = n;
                return t = new r.DataTexture(o,t,e,r.RGBFormat),
                t.needsUpdate = !0,
                t
            }
        },
        r.SceneUtils = {
            createMultiMaterialObject: function(t, e) {
                for (var n = new r.Group, i = 0, o = e.length; o > i; i++)
                    n.add(new r.Mesh(t,e[i]));
                return n
            },
            detach: function(t, e, n) {
                t.applyMatrix(e.matrixWorld),
                e.remove(t),
                n.add(t)
            },
            attach: function(t, e, n) {
                var i = new r.Matrix4;
                i.getInverse(n.matrixWorld),
                t.applyMatrix(i),
                e.remove(t),
                n.add(t)
            }
        },
        r.FontUtils = {
            faces: {},
            face: "helvetiker",
            weight: "normal",
            style: "normal",
            size: 150,
            divisions: 10,
            getFace: function() {
                try {
                    return this.faces[this.face.toLowerCase()][this.weight][this.style]
                } catch (t) {
                    throw "The font " + this.face + " with " + this.weight + " weight and " + this.style + " style is missing."
                }
            },
            loadFace: function(t) {
                var e = t.familyName.toLowerCase();
                return this.faces[e] = this.faces[e] || {},
                this.faces[e][t.cssFontWeight] = this.faces[e][t.cssFontWeight] || {},
                this.faces[e][t.cssFontWeight][t.cssFontStyle] = t,
                this.faces[e][t.cssFontWeight][t.cssFontStyle] = t
            },
            drawText: function(t) {
                var e = this.getFace()
                  , n = this.size / e.resolution
                  , i = 0
                  , o = String(t).split("")
                  , a = o.length
                  , s = [];
                for (t = 0; a > t; t++) {
                    var l = new r.Path
                      , l = this.extractGlyphPoints(o[t], e, n, i, l)
                      , i = i + l.offset;
                    s.push(l.path)
                }
                return {
                    paths: s,
                    offset: i / 2
                }
            },
            extractGlyphPoints: function(t, e, n, i, o) {
                var a, s, l, h, c, u, p, d, f, m, g, v = [], y = e.glyphs[t] || e.glyphs["?"];
                if (y) {
                    if (y.o)
                        for (e = y._cachedOutline || (y._cachedOutline = y.o.split(" ")),
                        h = e.length,
                        t = 0; h > t; )
                            switch (l = e[t++]) {
                            case "m":
                                l = e[t++] * n + i,
                                c = e[t++] * n,
                                o.moveTo(l, c);
                                break;
                            case "l":
                                l = e[t++] * n + i,
                                c = e[t++] * n,
                                o.lineTo(l, c);
                                break;
                            case "q":
                                if (l = e[t++] * n + i,
                                c = e[t++] * n,
                                d = e[t++] * n + i,
                                f = e[t++] * n,
                                o.quadraticCurveTo(d, f, l, c),
                                a = v[v.length - 1])
                                    for (u = a.x,
                                    p = a.y,
                                    a = 1,
                                    s = this.divisions; s >= a; a++) {
                                        var _ = a / s;
                                        r.Shape.Utils.b2(_, u, d, l),
                                        r.Shape.Utils.b2(_, p, f, c)
                                    }
                                break;
                            case "b":
                                if (l = e[t++] * n + i,
                                c = e[t++] * n,
                                d = e[t++] * n + i,
                                f = e[t++] * n,
                                m = e[t++] * n + i,
                                g = e[t++] * n,
                                o.bezierCurveTo(d, f, m, g, l, c),
                                a = v[v.length - 1])
                                    for (u = a.x,
                                    p = a.y,
                                    a = 1,
                                    s = this.divisions; s >= a; a++)
                                        _ = a / s,
                                        r.Shape.Utils.b3(_, u, d, m, l),
                                        r.Shape.Utils.b3(_, p, f, g, c)
                            }
                    return {
                        offset: y.ha * n,
                        path: o
                    }
                }
            }
        },
        r.FontUtils.generateShapes = function(t, e) {
            e = e || {};
            var n = void 0 !== e.curveSegments ? e.curveSegments : 4
              , i = void 0 !== e.font ? e.font : "helvetiker"
              , o = void 0 !== e.weight ? e.weight : "normal"
              , a = void 0 !== e.style ? e.style : "normal";
            for (r.FontUtils.size = void 0 !== e.size ? e.size : 100,
            r.FontUtils.divisions = n,
            r.FontUtils.face = i,
            r.FontUtils.weight = o,
            r.FontUtils.style = a,
            n = r.FontUtils.drawText(t).paths,
            i = [],
            o = 0,
            a = n.length; a > o; o++)
                Array.prototype.push.apply(i, n[o].toShapes());
            return i
        }
        ,
        function(t) {
            var e = function(t) {
                for (var e = t.length, n = 0, r = e - 1, i = 0; e > i; r = i++)
                    n += t[r].x * t[i].y - t[i].x * t[r].y;
                return .5 * n
            };
            return t.Triangulate = function(t, n) {
                var r = t.length;
                if (3 > r)
                    return null ;
                var i, o, a, s = [], l = [], h = [];
                if (0 < e(t))
                    for (o = 0; r > o; o++)
                        l[o] = o;
                else
                    for (o = 0; r > o; o++)
                        l[o] = r - 1 - o;
                var c = 2 * r;
                for (o = r - 1; r > 2; ) {
                    if (0 >= c--) {
                        console.warn("THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()");
                        break
                    }
                    i = o,
                    i >= r && (i = 0),
                    o = i + 1,
                    o >= r && (o = 0),
                    a = o + 1,
                    a >= r && (a = 0);
                    var u;
                    t: {
                        var p = u = void 0
                          , d = void 0
                          , f = void 0
                          , m = void 0
                          , g = void 0
                          , v = void 0
                          , y = void 0
                          , _ = void 0
                          , p = t[l[i]].x
                          , d = t[l[i]].y
                          , f = t[l[o]].x
                          , m = t[l[o]].y
                          , g = t[l[a]].x
                          , v = t[l[a]].y;
                        if (1e-10 > (f - p) * (v - d) - (m - d) * (g - p))
                            u = !1;
                        else {
                            var x = void 0
                              , b = void 0
                              , w = void 0
                              , S = void 0
                              , T = void 0
                              , M = void 0
                              , C = void 0
                              , A = void 0
                              , E = void 0
                              , L = void 0
                              , E = A = C = _ = y = void 0
                              , x = g - f
                              , b = v - m
                              , w = p - g
                              , S = d - v
                              , T = f - p
                              , M = m - d;
                            for (u = 0; r > u; u++)
                                if (y = t[l[u]].x,
                                _ = t[l[u]].y,
                                !(y === p && _ === d || y === f && _ === m || y === g && _ === v) && (C = y - p,
                                A = _ - d,
                                E = y - f,
                                L = _ - m,
                                y -= g,
                                _ -= v,
                                E = x * L - b * E,
                                C = T * A - M * C,
                                A = w * _ - S * y,
                                E >= -1e-10 && A >= -1e-10 && C >= -1e-10)) {
                                    u = !1;
                                    break t
                                }
                            u = !0
                        }
                    }
                    if (u) {
                        for (s.push([t[l[i]], t[l[o]], t[l[a]]]),
                        h.push([l[i], l[o], l[a]]),
                        i = o,
                        a = o + 1; r > a; i++,
                        a++)
                            l[i] = l[a];
                        r--,
                        c = 2 * r
                    }
                }
                return n ? h : s
            }
            ,
            t.Triangulate.area = e,
            t
        }(r.FontUtils),
        r.typeface_js = {
            faces: r.FontUtils.faces,
            loadFace: r.FontUtils.loadFace
        },
        "undefined" != typeof self && (self._typeface_js = r.typeface_js),
        r.Audio = function(t) {
            r.Object3D.call(this),
            this.type = "Audio",
            this.context = t.context,
            this.source = this.context.createBufferSource(),
            this.source.onended = this.onEnded.bind(this),
            this.gain = this.context.createGain(),
            this.gain.connect(this.context.destination),
            this.panner = this.context.createPanner(),
            this.panner.connect(this.gain),
            this.autoplay = !1,
            this.startTime = 0,
            this.playbackRate = 1,
            this.isPlaying = !1
        }
        ,
        r.Audio.prototype = Object.create(r.Object3D.prototype),
        r.Audio.prototype.constructor = r.Audio,
        r.Audio.prototype.load = function(t) {
            var e = this
              , n = new XMLHttpRequest;
            return n.open("GET", t, !0),
            n.responseType = "arraybuffer",
            n.onload = function(t) {
                e.context.decodeAudioData(this.response, function(t) {
                    e.source.buffer = t,
                    e.autoplay && e.play()
                })
            }
            ,
            n.send(),
            this
        }
        ,
        r.Audio.prototype.play = function() {
            if (!0 === this.isPlaying)
                console.warn("THREE.Audio: Audio is already playing.");
            else {
                var t = this.context.createBufferSource();
                t.buffer = this.source.buffer,
                t.loop = this.source.loop,
                t.onended = this.source.onended,
                t.start(0, this.startTime),
                t.playbackRate.value = this.playbackRate,
                this.isPlaying = !0,
                this.source = t,
                this.connect()
            }
        }
        ,
        r.Audio.prototype.pause = function() {
            this.source.stop(),
            this.startTime = this.context.currentTime
        }
        ,
        r.Audio.prototype.stop = function() {
            this.source.stop(),
            this.startTime = 0
        }
        ,
        r.Audio.prototype.connect = function() {
            void 0 !== this.filter ? (this.source.connect(this.filter),
            this.filter.connect(this.panner)) : this.source.connect(this.panner)
        }
        ,
        r.Audio.prototype.disconnect = function() {
            void 0 !== this.filter ? (this.source.disconnect(this.filter),
            this.filter.disconnect(this.panner)) : this.source.disconnect(this.panner)
        }
        ,
        r.Audio.prototype.setFilter = function(t) {
            !0 === this.isPlaying ? (this.disconnect(),
            this.filter = t,
            this.connect()) : this.filter = t
        }
        ,
        r.Audio.prototype.getFilter = function() {
            return this.filter
        }
        ,
        r.Audio.prototype.setPlaybackRate = function(t) {
            this.playbackRate = t,
            !0 === this.isPlaying && (this.source.playbackRate.value = this.playbackRate)
        }
        ,
        r.Audio.prototype.getPlaybackRate = function() {
            return this.playbackRate
        }
        ,
        r.Audio.prototype.onEnded = function() {
            this.isPlaying = !1
        }
        ,
        r.Audio.prototype.setLoop = function(t) {
            this.source.loop = t
        }
        ,
        r.Audio.prototype.getLoop = function() {
            return this.source.loop
        }
        ,
        r.Audio.prototype.setRefDistance = function(t) {
            this.panner.refDistance = t
        }
        ,
        r.Audio.prototype.getRefDistance = function() {
            return this.panner.refDistance
        }
        ,
        r.Audio.prototype.setRolloffFactor = function(t) {
            this.panner.rolloffFactor = t
        }
        ,
        r.Audio.prototype.getRolloffFactor = function() {
            return this.panner.rolloffFactor
        }
        ,
        r.Audio.prototype.setVolume = function(t) {
            this.gain.gain.value = t
        }
        ,
        r.Audio.prototype.getVolume = function() {
            return this.gain.gain.value
        }
        ,
        r.Audio.prototype.updateMatrixWorld = function() {
            var t = new r.Vector3;
            return function(e) {
                r.Object3D.prototype.updateMatrixWorld.call(this, e),
                t.setFromMatrixPosition(this.matrixWorld),
                this.panner.setPosition(t.x, t.y, t.z)
            }
        }(),
        r.AudioListener = function() {
            r.Object3D.call(this),
            this.type = "AudioListener",
            this.context = new (window.AudioContext || window.webkitAudioContext)
        }
        ,
        r.AudioListener.prototype = Object.create(r.Object3D.prototype),
        r.AudioListener.prototype.constructor = r.AudioListener,
        r.AudioListener.prototype.updateMatrixWorld = function() {
            var t = new r.Vector3
              , e = new r.Quaternion
              , n = new r.Vector3
              , i = new r.Vector3;
            return function(o) {
                r.Object3D.prototype.updateMatrixWorld.call(this, o),
                o = this.context.listener;
                var a = this.up;
                this.matrixWorld.decompose(t, e, n),
                i.set(0, 0, -1).applyQuaternion(e),
                o.setPosition(t.x, t.y, t.z),
                o.setOrientation(i.x, i.y, i.z, a.x, a.y, a.z)
            }
        }(),
        r.Curve = function() {}
        ,
        r.Curve.prototype.getPoint = function(t) {
            return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),
            null
        }
        ,
        r.Curve.prototype.getPointAt = function(t) {
            return t = this.getUtoTmapping(t),
            this.getPoint(t)
        }
        ,
        r.Curve.prototype.getPoints = function(t) {
            t || (t = 5);
            var e, n = [];
            for (e = 0; t >= e; e++)
                n.push(this.getPoint(e / t));
            return n
        }
        ,
        r.Curve.prototype.getSpacedPoints = function(t) {
            t || (t = 5);
            var e, n = [];
            for (e = 0; t >= e; e++)
                n.push(this.getPointAt(e / t));
            return n
        }
        ,
        r.Curve.prototype.getLength = function() {
            var t = this.getLengths();
            return t[t.length - 1]
        }
        ,
        r.Curve.prototype.getLengths = function(t) {
            if (t || (t = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200),
            this.cacheArcLengths && this.cacheArcLengths.length === t + 1 && !this.needsUpdate)
                return this.cacheArcLengths;
            this.needsUpdate = !1;
            var e, n, r = [], i = this.getPoint(0), o = 0;
            for (r.push(0),
            n = 1; t >= n; n++)
                e = this.getPoint(n / t),
                o += e.distanceTo(i),
                r.push(o),
                i = e;
            return this.cacheArcLengths = r
        }
        ,
        r.Curve.prototype.updateArcLengths = function() {
            this.needsUpdate = !0,
            this.getLengths()
        }
        ,
        r.Curve.prototype.getUtoTmapping = function(t, e) {
            var n, r = this.getLengths(), i = 0, o = r.length;
            n = e ? e : t * r[o - 1];
            for (var a, s = 0, l = o - 1; l >= s; )
                if (i = Math.floor(s + (l - s) / 2),
                a = r[i] - n,
                0 > a)
                    s = i + 1;
                else {
                    if (!(a > 0)) {
                        l = i;
                        break
                    }
                    l = i - 1
                }
            return i = l,
            r[i] === n ? i / (o - 1) : (s = r[i],
            r = (i + (n - s) / (r[i + 1] - s)) / (o - 1))
        }
        ,
        r.Curve.prototype.getTangent = function(t) {
            var e = t - 1e-4;
            return t += 1e-4,
            0 > e && (e = 0),
            t > 1 && (t = 1),
            e = this.getPoint(e),
            this.getPoint(t).clone().sub(e).normalize()
        }
        ,
        r.Curve.prototype.getTangentAt = function(t) {
            return t = this.getUtoTmapping(t),
            this.getTangent(t)
        }
        ,
        r.Curve.Utils = {
            tangentQuadraticBezier: function(t, e, n, r) {
                return 2 * (1 - t) * (n - e) + 2 * t * (r - n)
            },
            tangentCubicBezier: function(t, e, n, r, i) {
                return -3 * e * (1 - t) * (1 - t) + 3 * n * (1 - t) * (1 - t) - 6 * t * n * (1 - t) + 6 * t * r * (1 - t) - 3 * t * t * r + 3 * t * t * i
            },
            tangentSpline: function(t, e, n, r, i) {
                return 6 * t * t - 6 * t + (3 * t * t - 4 * t + 1) + (-6 * t * t + 6 * t) + (3 * t * t - 2 * t)
            },
            interpolate: function(t, e, n, r, i) {
                t = .5 * (n - t),
                r = .5 * (r - e);
                var o = i * i;
                return (2 * e - 2 * n + t + r) * i * o + (-3 * e + 3 * n - 2 * t - r) * o + t * i + e
            }
        },
        r.Curve.create = function(t, e) {
            return t.prototype = Object.create(r.Curve.prototype),
            t.prototype.constructor = t,
            t.prototype.getPoint = e,
            t
        }
        ,
        r.CurvePath = function() {
            this.curves = [],
            this.bends = [],
            this.autoClose = !1
        }
        ,
        r.CurvePath.prototype = Object.create(r.Curve.prototype),
        r.CurvePath.prototype.constructor = r.CurvePath,
        r.CurvePath.prototype.add = function(t) {
            this.curves.push(t)
        }
        ,
        r.CurvePath.prototype.checkConnection = function() {}
        ,
        r.CurvePath.prototype.closePath = function() {
            var t = this.curves[0].getPoint(0)
              , e = this.curves[this.curves.length - 1].getPoint(1);
            t.equals(e) || this.curves.push(new r.LineCurve(e,t))
        }
        ,
        r.CurvePath.prototype.getPoint = function(t) {
            var e = t * this.getLength()
              , n = this.getCurveLengths();
            for (t = 0; t < n.length; ) {
                if (n[t] >= e)
                    return e = n[t] - e,
                    t = this.curves[t],
                    e = 1 - e / t.getLength(),
                    t.getPointAt(e);
                t++
            }
            return null
        }
        ,
        r.CurvePath.prototype.getLength = function() {
            var t = this.getCurveLengths();
            return t[t.length - 1]
        }
        ,
        r.CurvePath.prototype.getCurveLengths = function() {
            if (this.cacheLengths && this.cacheLengths.length === this.curves.length)
                return this.cacheLengths;
            var t, e = [], n = 0, r = this.curves.length;
            for (t = 0; r > t; t++)
                n += this.curves[t].getLength(),
                e.push(n);
            return this.cacheLengths = e
        }
        ,
        r.CurvePath.prototype.getBoundingBox = function() {
            var t, e, n, i, o, a, s = this.getPoints();
            t = e = Number.NEGATIVE_INFINITY,
            i = o = Number.POSITIVE_INFINITY;
            var l, h, c, u, p = s[0]instanceof r.Vector3;
            for (u = p ? new r.Vector3 : new r.Vector2,
            h = 0,
            c = s.length; c > h; h++)
                l = s[h],
                l.x > t ? t = l.x : l.x < i && (i = l.x),
                l.y > e ? e = l.y : l.y < o && (o = l.y),
                p && (l.z > n ? n = l.z : l.z < a && (a = l.z)),
                u.add(l);
            return s = {
                minX: i,
                minY: o,
                maxX: t,
                maxY: e
            },
            p && (s.maxZ = n,
            s.minZ = a),
            s
        }
        ,
        r.CurvePath.prototype.createPointsGeometry = function(t) {
            return t = this.getPoints(t, !0),
            this.createGeometry(t)
        }
        ,
        r.CurvePath.prototype.createSpacedPointsGeometry = function(t) {
            return t = this.getSpacedPoints(t, !0),
            this.createGeometry(t)
        }
        ,
        r.CurvePath.prototype.createGeometry = function(t) {
            for (var e = new r.Geometry, n = 0; n < t.length; n++)
                e.vertices.push(new r.Vector3(t[n].x,t[n].y,t[n].z || 0));
            return e
        }
        ,
        r.CurvePath.prototype.addWrapPath = function(t) {
            this.bends.push(t)
        }
        ,
        r.CurvePath.prototype.getTransformedPoints = function(t, e) {
            var n, r, i = this.getPoints(t);
            for (e || (e = this.bends),
            n = 0,
            r = e.length; r > n; n++)
                i = this.getWrapPoints(i, e[n]);
            return i
        }
        ,
        r.CurvePath.prototype.getTransformedSpacedPoints = function(t, e) {
            var n, r, i = this.getSpacedPoints(t);
            for (e || (e = this.bends),
            n = 0,
            r = e.length; r > n; n++)
                i = this.getWrapPoints(i, e[n]);
            return i
        }
        ,
        r.CurvePath.prototype.getWrapPoints = function(t, e) {
            var n, r, i, o, a, s, l = this.getBoundingBox();
            for (n = 0,
            r = t.length; r > n; n++)
                i = t[n],
                o = i.x,
                a = i.y,
                s = o / l.maxX,
                s = e.getUtoTmapping(s, o),
                o = e.getPoint(s),
                s = e.getTangent(s),
                s.set(-s.y, s.x).multiplyScalar(a),
                i.x = o.x + s.x,
                i.y = o.y + s.y;
            return t
        }
        ,
        r.Path = function(t) {
            r.CurvePath.call(this),
            this.actions = [],
            t && this.fromPoints(t)
        }
        ,
        r.Path.prototype = Object.create(r.CurvePath.prototype),
        r.Path.prototype.constructor = r.Path,
        r.PathActions = {
            MOVE_TO: "moveTo",
            LINE_TO: "lineTo",
            QUADRATIC_CURVE_TO: "quadraticCurveTo",
            BEZIER_CURVE_TO: "bezierCurveTo",
            CSPLINE_THRU: "splineThru",
            ARC: "arc",
            ELLIPSE: "ellipse"
        },
        r.Path.prototype.fromPoints = function(t) {
            this.moveTo(t[0].x, t[0].y);
            for (var e = 1, n = t.length; n > e; e++)
                this.lineTo(t[e].x, t[e].y)
        }
        ,
        r.Path.prototype.moveTo = function(t, e) {
            var n = Array.prototype.slice.call(arguments);
            this.actions.push({
                action: r.PathActions.MOVE_TO,
                args: n
            })
        }
        ,
        r.Path.prototype.lineTo = function(t, e) {
            var n = Array.prototype.slice.call(arguments)
              , i = this.actions[this.actions.length - 1].args
              , i = new r.LineCurve(new r.Vector2(i[i.length - 2],i[i.length - 1]),new r.Vector2(t,e));
            this.curves.push(i),
            this.actions.push({
                action: r.PathActions.LINE_TO,
                args: n
            })
        }
        ,
        r.Path.prototype.quadraticCurveTo = function(t, e, n, i) {
            var o = Array.prototype.slice.call(arguments)
              , a = this.actions[this.actions.length - 1].args
              , a = new r.QuadraticBezierCurve(new r.Vector2(a[a.length - 2],a[a.length - 1]),new r.Vector2(t,e),new r.Vector2(n,i));
            this.curves.push(a),
            this.actions.push({
                action: r.PathActions.QUADRATIC_CURVE_TO,
                args: o
            })
        }
        ,
        r.Path.prototype.bezierCurveTo = function(t, e, n, i, o, a) {
            var s = Array.prototype.slice.call(arguments)
              , l = this.actions[this.actions.length - 1].args
              , l = new r.CubicBezierCurve(new r.Vector2(l[l.length - 2],l[l.length - 1]),new r.Vector2(t,e),new r.Vector2(n,i),new r.Vector2(o,a));
            this.curves.push(l),
            this.actions.push({
                action: r.PathActions.BEZIER_CURVE_TO,
                args: s
            })
        }
        ,
        r.Path.prototype.splineThru = function(t) {
            var e = Array.prototype.slice.call(arguments)
              , n = this.actions[this.actions.length - 1].args
              , n = [new r.Vector2(n[n.length - 2],n[n.length - 1])];
            Array.prototype.push.apply(n, t),
            n = new r.SplineCurve(n),
            this.curves.push(n),
            this.actions.push({
                action: r.PathActions.CSPLINE_THRU,
                args: e
            })
        }
        ,
        r.Path.prototype.arc = function(t, e, n, r, i, o) {
            var a = this.actions[this.actions.length - 1].args;
            this.absarc(t + a[a.length - 2], e + a[a.length - 1], n, r, i, o)
        }
        ,
        r.Path.prototype.absarc = function(t, e, n, r, i, o) {
            this.absellipse(t, e, n, n, r, i, o)
        }
        ,
        r.Path.prototype.ellipse = function(t, e, n, r, i, o, a, s) {
            var l = this.actions[this.actions.length - 1].args;
            this.absellipse(t + l[l.length - 2], e + l[l.length - 1], n, r, i, o, a, s)
        }
        ,
        r.Path.prototype.absellipse = function(t, e, n, i, o, a, s, l) {
            var h = [t, e, n, i, o, a, s, l || 0];
            t = new r.EllipseCurve(t,e,n,i,o,a,s,l),
            this.curves.push(t),
            t = t.getPoint(1),
            h.push(t.x),
            h.push(t.y),
            this.actions.push({
                action: r.PathActions.ELLIPSE,
                args: h
            })
        }
        ,
        r.Path.prototype.getSpacedPoints = function(t, e) {
            t || (t = 40);
            for (var n = [], r = 0; t > r; r++)
                n.push(this.getPoint(r / t));
            return n
        }
        ,
        r.Path.prototype.getPoints = function(t, e) {
            if (this.useSpacedPoints)
                return this.getSpacedPoints(t, e);
            t = t || 12;
            var n, i, o, a, s, l, h, c, u, p, d, f, m, g = [];
            for (n = 0,
            i = this.actions.length; i > n; n++)
                switch (o = this.actions[n],
                a = o.action,
                o = o.args,
                a) {
                case r.PathActions.MOVE_TO:
                    g.push(new r.Vector2(o[0],o[1]));
                    break;
                case r.PathActions.LINE_TO:
                    g.push(new r.Vector2(o[0],o[1]));
                    break;
                case r.PathActions.QUADRATIC_CURVE_TO:
                    for (s = o[2],
                    l = o[3],
                    u = o[0],
                    p = o[1],
                    0 < g.length ? (a = g[g.length - 1],
                    d = a.x,
                    f = a.y) : (a = this.actions[n - 1].args,
                    d = a[a.length - 2],
                    f = a[a.length - 1]),
                    o = 1; t >= o; o++)
                        m = o / t,
                        a = r.Shape.Utils.b2(m, d, u, s),
                        m = r.Shape.Utils.b2(m, f, p, l),
                        g.push(new r.Vector2(a,m));
                    break;
                case r.PathActions.BEZIER_CURVE_TO:
                    for (s = o[4],
                    l = o[5],
                    u = o[0],
                    p = o[1],
                    h = o[2],
                    c = o[3],
                    0 < g.length ? (a = g[g.length - 1],
                    d = a.x,
                    f = a.y) : (a = this.actions[n - 1].args,
                    d = a[a.length - 2],
                    f = a[a.length - 1]),
                    o = 1; t >= o; o++)
                        m = o / t,
                        a = r.Shape.Utils.b3(m, d, u, h, s),
                        m = r.Shape.Utils.b3(m, f, p, c, l),
                        g.push(new r.Vector2(a,m));
                    break;
                case r.PathActions.CSPLINE_THRU:
                    for (a = this.actions[n - 1].args,
                    m = [new r.Vector2(a[a.length - 2],a[a.length - 1])],
                    a = t * o[0].length,
                    m = m.concat(o[0]),
                    m = new r.SplineCurve(m),
                    o = 1; a >= o; o++)
                        g.push(m.getPointAt(o / a));
                    break;
                case r.PathActions.ARC:
                    for (s = o[0],
                    l = o[1],
                    p = o[2],
                    h = o[3],
                    a = o[4],
                    u = !!o[5],
                    d = a - h,
                    f = 2 * t,
                    o = 1; f >= o; o++)
                        m = o / f,
                        u || (m = 1 - m),
                        m = h + m * d,
                        a = s + p * Math.cos(m),
                        m = l + p * Math.sin(m),
                        g.push(new r.Vector2(a,m));
                    break;
                case r.PathActions.ELLIPSE:
                    s = o[0],
                    l = o[1],
                    p = o[2],
                    c = o[3],
                    h = o[4],
                    a = o[5],
                    u = !!o[6];
                    var v = o[7];
                    d = a - h,
                    f = 2 * t;
                    var y, _;
                    for (0 !== v && (y = Math.cos(v),
                    _ = Math.sin(v)),
                    o = 1; f >= o; o++) {
                        if (m = o / f,
                        u || (m = 1 - m),
                        m = h + m * d,
                        a = s + p * Math.cos(m),
                        m = l + c * Math.sin(m),
                        0 !== v) {
                            var x = a;
                            a = (x - s) * y - (m - l) * _ + s,
                            m = (x - s) * _ + (m - l) * y + l
                        }
                        g.push(new r.Vector2(a,m))
                    }
                }
            return n = g[g.length - 1],
            1e-10 > Math.abs(n.x - g[0].x) && 1e-10 > Math.abs(n.y - g[0].y) && g.splice(g.length - 1, 1),
            e && g.push(g[0]),
            g
        }
        ,
        r.Path.prototype.toShapes = function(t, e) {
            function n(t) {
                for (var e = [], n = 0, i = t.length; i > n; n++) {
                    var o = t[n]
                      , a = new r.Shape;
                    a.actions = o.actions,
                    a.curves = o.curves,
                    e.push(a)
                }
                return e
            }
            function i(t, e) {
                for (var n = e.length, r = !1, i = n - 1, o = 0; n > o; i = o++) {
                    var a = e[i]
                      , s = e[o]
                      , l = s.x - a.x
                      , h = s.y - a.y;
                    if (1e-10 < Math.abs(h)) {
                        if (0 > h && (a = e[o],
                        l = -l,
                        s = e[i],
                        h = -h),
                        !(t.y < a.y || t.y > s.y))
                            if (t.y === a.y) {
                                if (t.x === a.x)
                                    return !0
                            } else {
                                if (i = h * (t.x - a.x) - l * (t.y - a.y),
                                0 === i)
                                    return !0;
                                0 > i || (r = !r)
                            }
                    } else if (t.y === a.y && (s.x <= t.x && t.x <= a.x || a.x <= t.x && t.x <= s.x))
                        return !0
                }
                return r
            }
            var o = function(t) {
                var e, n, i, o, a = [], s = new r.Path;
                for (e = 0,
                n = t.length; n > e; e++)
                    i = t[e],
                    o = i.args,
                    i = i.action,
                    i === r.PathActions.MOVE_TO && 0 !== s.actions.length && (a.push(s),
                    s = new r.Path),
                    s[i].apply(s, o);
                return 0 !== s.actions.length && a.push(s),
                a
            }(this.actions);
            if (0 === o.length)
                return [];
            if (!0 === e)
                return n(o);
            var a, s, l, h = [];
            if (1 === o.length)
                return s = o[0],
                l = new r.Shape,
                l.actions = s.actions,
                l.curves = s.curves,
                h.push(l),
                h;
            var c = !r.Shape.Utils.isClockWise(o[0].getPoints())
              , c = t ? !c : c;
            l = [];
            var u, p = [], d = [], f = 0;
            p[f] = void 0,
            d[f] = [];
            var m, g;
            for (m = 0,
            g = o.length; g > m; m++)
                s = o[m],
                u = s.getPoints(),
                a = r.Shape.Utils.isClockWise(u),
                (a = t ? !a : a) ? (!c && p[f] && f++,
                p[f] = {
                    s: new r.Shape,
                    p: u
                },
                p[f].s.actions = s.actions,
                p[f].s.curves = s.curves,
                c && f++,
                d[f] = []) : d[f].push({
                    h: s,
                    p: u[0]
                });
            if (!p[0])
                return n(o);
            if (1 < p.length) {
                for (m = !1,
                g = [],
                s = 0,
                o = p.length; o > s; s++)
                    l[s] = [];
                for (s = 0,
                o = p.length; o > s; s++)
                    for (a = d[s],
                    c = 0; c < a.length; c++) {
                        f = a[c],
                        u = !0;
                        for (var v = 0; v < p.length; v++)
                            i(f.p, p[v].p) && (s !== v && g.push({
                                froms: s,
                                tos: v,
                                hole: c
                            }),
                            u ? (u = !1,
                            l[v].push(f)) : m = !0);
                        u && l[s].push(f)
                    }
                0 < g.length && (m || (d = l))
            }
            for (m = 0,
            g = p.length; g > m; m++)
                for (l = p[m].s,
                h.push(l),
                s = d[m],
                o = 0,
                a = s.length; a > o; o++)
                    l.holes.push(s[o].h);
            return h
        }
        ,
        r.Shape = function() {
            r.Path.apply(this, arguments),
            this.holes = []
        }
        ,
        r.Shape.prototype = Object.create(r.Path.prototype),
        r.Shape.prototype.constructor = r.Shape,
        r.Shape.prototype.extrude = function(t) {
            return new r.ExtrudeGeometry(this,t)
        }
        ,
        r.Shape.prototype.makeGeometry = function(t) {
            return new r.ShapeGeometry(this,t)
        }
        ,
        r.Shape.prototype.getPointsHoles = function(t) {
            var e, n = this.holes.length, r = [];
            for (e = 0; n > e; e++)
                r[e] = this.holes[e].getTransformedPoints(t, this.bends);
            return r
        }
        ,
        r.Shape.prototype.getSpacedPointsHoles = function(t) {
            var e, n = this.holes.length, r = [];
            for (e = 0; n > e; e++)
                r[e] = this.holes[e].getTransformedSpacedPoints(t, this.bends);
            return r
        }
        ,
        r.Shape.prototype.extractAllPoints = function(t) {
            return {
                shape: this.getTransformedPoints(t),
                holes: this.getPointsHoles(t)
            }
        }
        ,
        r.Shape.prototype.extractPoints = function(t) {
            return this.useSpacedPoints ? this.extractAllSpacedPoints(t) : this.extractAllPoints(t)
        }
        ,
        r.Shape.prototype.extractAllSpacedPoints = function(t) {
            return {
                shape: this.getTransformedSpacedPoints(t),
                holes: this.getSpacedPointsHoles(t)
            }
        }
        ,
        r.Shape.Utils = {
            triangulateShape: function(t, e) {
                function n(t, e, n) {
                    return t.x !== e.x ? t.x < e.x ? t.x <= n.x && n.x <= e.x : e.x <= n.x && n.x <= t.x : t.y < e.y ? t.y <= n.y && n.y <= e.y : e.y <= n.y && n.y <= t.y
                }
                function i(t, e, r, i, o) {
                    var a = e.x - t.x
                      , s = e.y - t.y
                      , l = i.x - r.x
                      , h = i.y - r.y
                      , c = t.x - r.x
                      , u = t.y - r.y
                      , p = s * l - a * h
                      , d = s * c - a * u;
                    if (1e-10 < Math.abs(p)) {
                        if (p > 0) {
                            if (0 > d || d > p)
                                return [];
                            if (l = h * c - l * u,
                            0 > l || l > p)
                                return []
                        } else {
                            if (d > 0 || p > d)
                                return [];
                            if (l = h * c - l * u,
                            l > 0 || p > l)
                                return []
                        }
                        return 0 === l ? !o || 0 !== d && d !== p ? [t] : [] : l === p ? !o || 0 !== d && d !== p ? [e] : [] : 0 === d ? [r] : d === p ? [i] : (o = l / p,
                        [{
                            x: t.x + o * a,
                            y: t.y + o * s
                        }])
                    }
                    return 0 !== d || h * c !== l * u ? [] : (s = 0 === a && 0 === s,
                    l = 0 === l && 0 === h,
                    s && l ? t.x !== r.x || t.y !== r.y ? [] : [t] : s ? n(r, i, t) ? [t] : [] : l ? n(t, e, r) ? [r] : [] : (0 !== a ? (t.x < e.x ? (a = t,
                    l = t.x,
                    s = e,
                    t = e.x) : (a = e,
                    l = e.x,
                    s = t,
                    t = t.x),
                    r.x < i.x ? (e = r,
                    p = r.x,
                    h = i,
                    r = i.x) : (e = i,
                    p = i.x,
                    h = r,
                    r = r.x)) : (t.y < e.y ? (a = t,
                    l = t.y,
                    s = e,
                    t = e.y) : (a = e,
                    l = e.y,
                    s = t,
                    t = t.y),
                    r.y < i.y ? (e = r,
                    p = r.y,
                    h = i,
                    r = i.y) : (e = i,
                    p = i.y,
                    h = r,
                    r = r.y)),
                    p >= l ? p > t ? [] : t === p ? o ? [] : [e] : r >= t ? [e, s] : [e, h] : l > r ? [] : l === r ? o ? [] : [a] : r >= t ? [a, s] : [a, h]))
                }
                function o(t, e, n, r) {
                    var i = e.x - t.x
                      , o = e.y - t.y;
                    e = n.x - t.x,
                    n = n.y - t.y;
                    var a = r.x - t.x;
                    return r = r.y - t.y,
                    t = i * n - o * e,
                    i = i * r - o * a,
                    1e-10 < Math.abs(t) ? (e = a * n - r * e,
                    t > 0 ? i >= 0 && e >= 0 : i >= 0 || e >= 0) : i > 0
                }
                var a, s, l, h, c, u = {};
                for (l = t.concat(),
                a = 0,
                s = e.length; s > a; a++)
                    Array.prototype.push.apply(l, e[a]);
                for (a = 0,
                s = l.length; s > a; a++)
                    c = l[a].x + ":" + l[a].y,
                    void 0 !== u[c] && console.warn("THREE.Shape: Duplicate point", c),
                    u[c] = a;
                a = function(t, e) {
                    function n(t, e) {
                        var n = g.length - 1
                          , r = t - 1;
                        0 > r && (r = n);
                        var i = t + 1;
                        return i > n && (i = 0),
                        (n = o(g[t], g[r], g[i], s[e])) ? (n = s.length - 1,
                        r = e - 1,
                        0 > r && (r = n),
                        i = e + 1,
                        i > n && (i = 0),
                        (n = o(s[e], s[r], s[i], g[t])) ? !0 : !1) : !1
                    }
                    function r(t, e) {
                        var n, r;
                        for (n = 0; n < g.length; n++)
                            if (r = n + 1,
                            r %= g.length,
                            r = i(t, e, g[n], g[r], !0),
                            0 < r.length)
                                return !0;
                        return !1
                    }
                    function a(t, n) {
                        var r, o, a, s;
                        for (r = 0; r < v.length; r++)
                            for (o = e[v[r]],
                            a = 0; a < o.length; a++)
                                if (s = a + 1,
                                s %= o.length,
                                s = i(t, n, o[a], o[s], !0),
                                0 < s.length)
                                    return !0;
                        return !1
                    }
                    var s, l, h, c, u, p, d, f, m, g = t.concat(), v = [], y = [], _ = 0;
                    for (l = e.length; l > _; _++)
                        v.push(_);
                    d = 0;
                    for (var x = 2 * v.length; 0 < v.length; ) {
                        if (x--,
                        0 > x) {
                            console.log("Infinite Loop! Holes left:" + v.length + ", Probably Hole outside Shape!");
                            break
                        }
                        for (h = d; h < g.length; h++) {
                            for (c = g[h],
                            l = -1,
                            _ = 0; _ < v.length; _++)
                                if (u = v[_],
                                p = c.x + ":" + c.y + ":" + u,
                                void 0 === y[p]) {
                                    for (s = e[u],
                                    f = 0; f < s.length; f++)
                                        if (u = s[f],
                                        n(h, f) && !r(c, u) && !a(c, u)) {
                                            l = f,
                                            v.splice(_, 1),
                                            d = g.slice(0, h + 1),
                                            u = g.slice(h),
                                            f = s.slice(l),
                                            m = s.slice(0, l + 1),
                                            g = d.concat(f).concat(m).concat(u),
                                            d = h;
                                            break
                                        }
                                    if (l >= 0)
                                        break;
                                    y[p] = !0
                                }
                            if (l >= 0)
                                break
                        }
                    }
                    return g
                }(t, e);
                var p = r.FontUtils.Triangulate(a, !1);
                for (a = 0,
                s = p.length; s > a; a++)
                    for (h = p[a],
                    l = 0; 3 > l; l++)
                        c = h[l].x + ":" + h[l].y,
                        c = u[c],
                        void 0 !== c && (h[l] = c);
                return p.concat()
            },
            isClockWise: function(t) {
                return 0 > r.FontUtils.Triangulate.area(t)
            },
            b2p0: function(t, e) {
                var n = 1 - t;
                return n * n * e
            },
            b2p1: function(t, e) {
                return 2 * (1 - t) * t * e
            },
            b2p2: function(t, e) {
                return t * t * e
            },
            b2: function(t, e, n, r) {
                return this.b2p0(t, e) + this.b2p1(t, n) + this.b2p2(t, r)
            },
            b3p0: function(t, e) {
                var n = 1 - t;
                return n * n * n * e
            },
            b3p1: function(t, e) {
                var n = 1 - t;
                return 3 * n * n * t * e
            },
            b3p2: function(t, e) {
                return 3 * (1 - t) * t * t * e
            },
            b3p3: function(t, e) {
                return t * t * t * e
            },
            b3: function(t, e, n, r, i) {
                return this.b3p0(t, e) + this.b3p1(t, n) + this.b3p2(t, r) + this.b3p3(t, i)
            }
        },
        r.LineCurve = function(t, e) {
            this.v1 = t,
            this.v2 = e
        }
        ,
        r.LineCurve.prototype = Object.create(r.Curve.prototype),
        r.LineCurve.prototype.constructor = r.LineCurve,
        r.LineCurve.prototype.getPoint = function(t) {
            var e = this.v2.clone().sub(this.v1);
            return e.multiplyScalar(t).add(this.v1),
            e
        }
        ,
        r.LineCurve.prototype.getPointAt = function(t) {
            return this.getPoint(t)
        }
        ,
        r.LineCurve.prototype.getTangent = function(t) {
            return this.v2.clone().sub(this.v1).normalize()
        }
        ,
        r.QuadraticBezierCurve = function(t, e, n) {
            this.v0 = t,
            this.v1 = e,
            this.v2 = n
        }
        ,
        r.QuadraticBezierCurve.prototype = Object.create(r.Curve.prototype),
        r.QuadraticBezierCurve.prototype.constructor = r.QuadraticBezierCurve,
        r.QuadraticBezierCurve.prototype.getPoint = function(t) {
            var e = new r.Vector2;
            return e.x = r.Shape.Utils.b2(t, this.v0.x, this.v1.x, this.v2.x),
            e.y = r.Shape.Utils.b2(t, this.v0.y, this.v1.y, this.v2.y),
            e
        }
        ,
        r.QuadraticBezierCurve.prototype.getTangent = function(t) {
            var e = new r.Vector2;
            return e.x = r.Curve.Utils.tangentQuadraticBezier(t, this.v0.x, this.v1.x, this.v2.x),
            e.y = r.Curve.Utils.tangentQuadraticBezier(t, this.v0.y, this.v1.y, this.v2.y),
            e.normalize()
        }
        ,
        r.CubicBezierCurve = function(t, e, n, r) {
            this.v0 = t,
            this.v1 = e,
            this.v2 = n,
            this.v3 = r
        }
        ,
        r.CubicBezierCurve.prototype = Object.create(r.Curve.prototype),
        r.CubicBezierCurve.prototype.constructor = r.CubicBezierCurve,
        r.CubicBezierCurve.prototype.getPoint = function(t) {
            var e;
            return e = r.Shape.Utils.b3(t, this.v0.x, this.v1.x, this.v2.x, this.v3.x),
            t = r.Shape.Utils.b3(t, this.v0.y, this.v1.y, this.v2.y, this.v3.y),
            new r.Vector2(e,t)
        }
        ,
        r.CubicBezierCurve.prototype.getTangent = function(t) {
            var e;
            return e = r.Curve.Utils.tangentCubicBezier(t, this.v0.x, this.v1.x, this.v2.x, this.v3.x),
            t = r.Curve.Utils.tangentCubicBezier(t, this.v0.y, this.v1.y, this.v2.y, this.v3.y),
            e = new r.Vector2(e,t),
            e.normalize(),
            e
        }
        ,
        r.SplineCurve = function(t) {
            this.points = void 0 == t ? [] : t
        }
        ,
        r.SplineCurve.prototype = Object.create(r.Curve.prototype),
        r.SplineCurve.prototype.constructor = r.SplineCurve,
        r.SplineCurve.prototype.getPoint = function(t) {
            var e = this.points;
            t *= e.length - 1;
            var n = Math.floor(t);
            t -= n;
            var i = e[0 === n ? n : n - 1]
              , o = e[n]
              , a = e[n > e.length - 2 ? e.length - 1 : n + 1]
              , e = e[n > e.length - 3 ? e.length - 1 : n + 2]
              , n = new r.Vector2;
            return n.x = r.Curve.Utils.interpolate(i.x, o.x, a.x, e.x, t),
            n.y = r.Curve.Utils.interpolate(i.y, o.y, a.y, e.y, t),
            n
        }
        ,
        r.EllipseCurve = function(t, e, n, r, i, o, a, s) {
            this.aX = t,
            this.aY = e,
            this.xRadius = n,
            this.yRadius = r,
            this.aStartAngle = i,
            this.aEndAngle = o,
            this.aClockwise = a,
            this.aRotation = s || 0
        }
        ,
        r.EllipseCurve.prototype = Object.create(r.Curve.prototype),
        r.EllipseCurve.prototype.constructor = r.EllipseCurve,
        r.EllipseCurve.prototype.getPoint = function(t) {
            var e = this.aEndAngle - this.aStartAngle;
            0 > e && (e += 2 * Math.PI),
            e > 2 * Math.PI && (e -= 2 * Math.PI),
            e = !0 === this.aClockwise ? this.aEndAngle + (1 - t) * (2 * Math.PI - e) : this.aStartAngle + t * e,
            t = this.aX + this.xRadius * Math.cos(e);
            var n = this.aY + this.yRadius * Math.sin(e);
            if (0 !== this.aRotation) {
                var e = Math.cos(this.aRotation)
                  , i = Math.sin(this.aRotation)
                  , o = t;
                t = (o - this.aX) * e - (n - this.aY) * i + this.aX,
                n = (o - this.aX) * i + (n - this.aY) * e + this.aY
            }
            return new r.Vector2(t,n)
        }
        ,
        r.ArcCurve = function(t, e, n, i, o, a) {
            r.EllipseCurve.call(this, t, e, n, n, i, o, a)
        }
        ,
        r.ArcCurve.prototype = Object.create(r.EllipseCurve.prototype),
        r.ArcCurve.prototype.constructor = r.ArcCurve,
        r.LineCurve3 = r.Curve.create(function(t, e) {
            this.v1 = t,
            this.v2 = e
        }, function(t) {
            var e = new r.Vector3;
            return e.subVectors(this.v2, this.v1),
            e.multiplyScalar(t),
            e.add(this.v1),
            e
        }),
        r.QuadraticBezierCurve3 = r.Curve.create(function(t, e, n) {
            this.v0 = t,
            this.v1 = e,
            this.v2 = n
        }, function(t) {
            var e = new r.Vector3;
            return e.x = r.Shape.Utils.b2(t, this.v0.x, this.v1.x, this.v2.x),
            e.y = r.Shape.Utils.b2(t, this.v0.y, this.v1.y, this.v2.y),
            e.z = r.Shape.Utils.b2(t, this.v0.z, this.v1.z, this.v2.z),
            e
        }),
        r.CubicBezierCurve3 = r.Curve.create(function(t, e, n, r) {
            this.v0 = t,
            this.v1 = e,
            this.v2 = n,
            this.v3 = r
        }, function(t) {
            var e = new r.Vector3;
            return e.x = r.Shape.Utils.b3(t, this.v0.x, this.v1.x, this.v2.x, this.v3.x),
            e.y = r.Shape.Utils.b3(t, this.v0.y, this.v1.y, this.v2.y, this.v3.y),
            e.z = r.Shape.Utils.b3(t, this.v0.z, this.v1.z, this.v2.z, this.v3.z),
            e
        }),
        r.SplineCurve3 = r.Curve.create(function(t) {
            console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),
            this.points = void 0 == t ? [] : t
        }, function(t) {
            var e = this.points;
            t *= e.length - 1;
            var n = Math.floor(t);
            t -= n;
            var i = e[0 == n ? n : n - 1]
              , o = e[n]
              , a = e[n > e.length - 2 ? e.length - 1 : n + 1]
              , e = e[n > e.length - 3 ? e.length - 1 : n + 2]
              , n = new r.Vector3;
            return n.x = r.Curve.Utils.interpolate(i.x, o.x, a.x, e.x, t),
            n.y = r.Curve.Utils.interpolate(i.y, o.y, a.y, e.y, t),
            n.z = r.Curve.Utils.interpolate(i.z, o.z, a.z, e.z, t),
            n
        }),
        r.CatmullRomCurve3 = function() {
            function t() {}
            var e = new r.Vector3
              , n = new t
              , i = new t
              , o = new t;
            return t.prototype.init = function(t, e, n, r) {
                this.c0 = t,
                this.c1 = n,
                this.c2 = -3 * t + 3 * e - 2 * n - r,
                this.c3 = 2 * t - 2 * e + n + r
            }
            ,
            t.prototype.initNonuniformCatmullRom = function(t, e, n, r, i, o, a) {
                t = ((e - t) / i - (n - t) / (i + o) + (n - e) / o) * o,
                r = ((n - e) / o - (r - e) / (o + a) + (r - n) / a) * o,
                this.init(e, n, t, r)
            }
            ,
            t.prototype.initCatmullRom = function(t, e, n, r, i) {
                this.init(e, n, i * (n - t), i * (r - e))
            }
            ,
            t.prototype.calc = function(t) {
                var e = t * t;
                return this.c0 + this.c1 * t + this.c2 * e + this.c3 * e * t
            }
            ,
            r.Curve.create(function(t) {
                this.points = t || []
            }, function(t) {
                var a, s, l = this.points;
                s = l.length,
                2 > s && console.log("duh, you need at least 2 points"),
                t *= s - 1,
                a = Math.floor(t),
                t -= a,
                0 === t && a === s - 1 && (a = s - 2,
                t = 1);
                var h, c, u;
                if (0 === a ? (e.subVectors(l[0], l[1]).add(l[0]),
                h = e) : h = l[a - 1],
                c = l[a],
                u = l[a + 1],
                s > a + 2 ? l = l[a + 2] : (e.subVectors(l[s - 1], l[s - 2]).add(l[s - 2]),
                l = e),
                void 0 === this.type || "centripetal" === this.type || "chordal" === this.type) {
                    var p = "chordal" === this.type ? .5 : .25;
                    s = Math.pow(h.distanceToSquared(c), p),
                    a = Math.pow(c.distanceToSquared(u), p),
                    p = Math.pow(u.distanceToSquared(l), p),
                    1e-4 > a && (a = 1),
                    1e-4 > s && (s = a),
                    1e-4 > p && (p = a),
                    n.initNonuniformCatmullRom(h.x, c.x, u.x, l.x, s, a, p),
                    i.initNonuniformCatmullRom(h.y, c.y, u.y, l.y, s, a, p),
                    o.initNonuniformCatmullRom(h.z, c.z, u.z, l.z, s, a, p)
                } else
                    "catmullrom" === this.type && (s = void 0 !== this.tension ? this.tension : .5,
                    n.initCatmullRom(h.x, c.x, u.x, l.x, s),
                    i.initCatmullRom(h.y, c.y, u.y, l.y, s),
                    o.initCatmullRom(h.z, c.z, u.z, l.z, s));
                return new r.Vector3(n.calc(t),i.calc(t),o.calc(t))
            })
        }(),
        r.ClosedSplineCurve3 = r.Curve.create(function(t) {
            this.points = void 0 == t ? [] : t
        }, function(t) {
            var e = this.points;
            t *= e.length - 0;
            var n = Math.floor(t);
            t -= n;
            var n = n + (n > 0 ? 0 : (Math.floor(Math.abs(n) / e.length) + 1) * e.length)
              , i = e[(n - 1) % e.length]
              , o = e[n % e.length]
              , a = e[(n + 1) % e.length]
              , e = e[(n + 2) % e.length]
              , n = new r.Vector3;
            return n.x = r.Curve.Utils.interpolate(i.x, o.x, a.x, e.x, t),
            n.y = r.Curve.Utils.interpolate(i.y, o.y, a.y, e.y, t),
            n.z = r.Curve.Utils.interpolate(i.z, o.z, a.z, e.z, t),
            n
        }),
        r.AnimationHandler = {
            LINEAR: 0,
            CATMULLROM: 1,
            CATMULLROM_FORWARD: 2,
            add: function() {
                console.warn("THREE.AnimationHandler.add() has been deprecated.")
            },
            get: function() {
                console.warn("THREE.AnimationHandler.get() has been deprecated.")
            },
            remove: function() {
                console.warn("THREE.AnimationHandler.remove() has been deprecated.")
            },
            animations: [],
            init: function(t) {
                if (!0 === t.initialized)
                    return t;
                for (var e = 0; e < t.hierarchy.length; e++) {
                    for (var n = 0; n < t.hierarchy[e].keys.length; n++)
                        if (0 > t.hierarchy[e].keys[n].time && (t.hierarchy[e].keys[n].time = 0),
                        void 0 !== t.hierarchy[e].keys[n].rot && !(t.hierarchy[e].keys[n].rot instanceof r.Quaternion)) {
                            var i = t.hierarchy[e].keys[n].rot;
                            t.hierarchy[e].keys[n].rot = (new r.Quaternion).fromArray(i)
                        }
                    if (t.hierarchy[e].keys.length && void 0 !== t.hierarchy[e].keys[0].morphTargets) {
                        for (i = {},
                        n = 0; n < t.hierarchy[e].keys.length; n++)
                            for (var o = 0; o < t.hierarchy[e].keys[n].morphTargets.length; o++) {
                                var a = t.hierarchy[e].keys[n].morphTargets[o];
                                i[a] = -1
                            }
                        for (t.hierarchy[e].usedMorphTargets = i,
                        n = 0; n < t.hierarchy[e].keys.length; n++) {
                            var s = {};
                            for (a in i) {
                                for (o = 0; o < t.hierarchy[e].keys[n].morphTargets.length; o++)
                                    if (t.hierarchy[e].keys[n].morphTargets[o] === a) {
                                        s[a] = t.hierarchy[e].keys[n].morphTargetsInfluences[o];
                                        break
                                    }
                                o === t.hierarchy[e].keys[n].morphTargets.length && (s[a] = 0)
                            }
                            t.hierarchy[e].keys[n].morphTargetsInfluences = s
                        }
                    }
                    for (n = 1; n < t.hierarchy[e].keys.length; n++)
                        t.hierarchy[e].keys[n].time === t.hierarchy[e].keys[n - 1].time && (t.hierarchy[e].keys.splice(n, 1),
                        n--);
                    for (n = 0; n < t.hierarchy[e].keys.length; n++)
                        t.hierarchy[e].keys[n].index = n
                }
                return t.initialized = !0,
                t
            },
            parse: function(t) {
                var e = function(t, n) {
                    n.push(t);
                    for (var r = 0; r < t.children.length; r++)
                        e(t.children[r], n)
                }
                  , n = [];
                if (t instanceof r.SkinnedMesh)
                    for (var i = 0; i < t.skeleton.bones.length; i++)
                        n.push(t.skeleton.bones[i]);
                else
                    e(t, n);
                return n
            },
            play: function(t) {
                -1 === this.animations.indexOf(t) && this.animations.push(t)
            },
            stop: function(t) {
                t = this.animations.indexOf(t),
                -1 !== t && this.animations.splice(t, 1)
            },
            update: function(t) {
                for (var e = 0; e < this.animations.length; e++)
                    this.animations[e].resetBlendWeights();
                for (e = 0; e < this.animations.length; e++)
                    this.animations[e].update(t)
            }
        },
        r.Animation = function(t, e) {
            this.root = t,
            this.data = r.AnimationHandler.init(e),
            this.hierarchy = r.AnimationHandler.parse(t),
            this.currentTime = 0,
            this.timeScale = 1,
            this.isPlaying = !1,
            this.loop = !0,
            this.weight = 0,
            this.interpolationType = r.AnimationHandler.LINEAR
        }
        ,
        r.Animation.prototype = {
            constructor: r.Animation,
            keyTypes: ["pos", "rot", "scl"],
            play: function(t, e) {
                this.currentTime = void 0 !== t ? t : 0,
                this.weight = void 0 !== e ? e : 1,
                this.isPlaying = !0,
                this.reset(),
                r.AnimationHandler.play(this)
            },
            stop: function() {
                this.isPlaying = !1,
                r.AnimationHandler.stop(this)
            },
            reset: function() {
                for (var t = 0, e = this.hierarchy.length; e > t; t++) {
                    var n = this.hierarchy[t];
                    void 0 === n.animationCache && (n.animationCache = {
                        animations: {},
                        blending: {
                            positionWeight: 0,
                            quaternionWeight: 0,
                            scaleWeight: 0
                        }
                    });
                    var r = this.data.name
                      , i = n.animationCache.animations
                      , o = i[r];
                    for (void 0 === o && (o = {
                        prevKey: {
                            pos: 0,
                            rot: 0,
                            scl: 0
                        },
                        nextKey: {
                            pos: 0,
                            rot: 0,
                            scl: 0
                        },
                        originalMatrix: n.matrix
                    },
                    i[r] = o),
                    n = 0; 3 > n; n++) {
                        for (var r = this.keyTypes[n], i = this.data.hierarchy[t].keys[0], a = this.getNextKeyWith(r, t, 1); a.time < this.currentTime && a.index > i.index; )
                            i = a,
                            a = this.getNextKeyWith(r, t, a.index + 1);
                        o.prevKey[r] = i,
                        o.nextKey[r] = a
                    }
                }
            },
            resetBlendWeights: function() {
                for (var t = 0, e = this.hierarchy.length; e > t; t++) {
                    var n = this.hierarchy[t].animationCache;
                    void 0 !== n && (n = n.blending,
                    n.positionWeight = 0,
                    n.quaternionWeight = 0,
                    n.scaleWeight = 0)
                }
            },
            update: function() {
                var t = []
                  , e = new r.Vector3
                  , n = new r.Vector3
                  , i = new r.Quaternion
                  , o = function(t, e) {
                    var n, r, i, o, s, l, h = [], c = [];
                    return n = (t.length - 1) * e,
                    r = Math.floor(n),
                    n -= r,
                    h[0] = 0 === r ? r : r - 1,
                    h[1] = r,
                    h[2] = r > t.length - 2 ? r : r + 1,
                    h[3] = r > t.length - 3 ? r : r + 2,
                    r = t[h[0]],
                    o = t[h[1]],
                    s = t[h[2]],
                    l = t[h[3]],
                    h = n * n,
                    i = n * h,
                    c[0] = a(r[0], o[0], s[0], l[0], n, h, i),
                    c[1] = a(r[1], o[1], s[1], l[1], n, h, i),
                    c[2] = a(r[2], o[2], s[2], l[2], n, h, i),
                    c
                }
                  , a = function(t, e, n, r, i, o, a) {
                    return t = .5 * (n - t),
                    r = .5 * (r - e),
                    (2 * (e - n) + t + r) * a + (-3 * (e - n) - 2 * t - r) * o + t * i + e
                };
                return function(a) {
                    if (!1 !== this.isPlaying && (this.currentTime += a * this.timeScale,
                    0 !== this.weight)) {
                        a = this.data.length,
                        (this.currentTime > a || 0 > this.currentTime) && (this.loop ? (this.currentTime %= a,
                        0 > this.currentTime && (this.currentTime += a),
                        this.reset()) : this.stop()),
                        a = 0;
                        for (var s = this.hierarchy.length; s > a; a++)
                            for (var l = this.hierarchy[a], h = l.animationCache.animations[this.data.name], c = l.animationCache.blending, u = 0; 3 > u; u++) {
                                var p = this.keyTypes[u]
                                  , d = h.prevKey[p]
                                  , f = h.nextKey[p];
                                if (0 < this.timeScale && f.time <= this.currentTime || 0 > this.timeScale && d.time >= this.currentTime) {
                                    for (d = this.data.hierarchy[a].keys[0],
                                    f = this.getNextKeyWith(p, a, 1); f.time < this.currentTime && f.index > d.index; )
                                        d = f,
                                        f = this.getNextKeyWith(p, a, f.index + 1);
                                    h.prevKey[p] = d,
                                    h.nextKey[p] = f
                                }
                                var m = (this.currentTime - d.time) / (f.time - d.time)
                                  , g = d[p]
                                  , v = f[p];
                                0 > m && (m = 0),
                                m > 1 && (m = 1),
                                "pos" === p ? this.interpolationType === r.AnimationHandler.LINEAR ? (n.x = g[0] + (v[0] - g[0]) * m,
                                n.y = g[1] + (v[1] - g[1]) * m,
                                n.z = g[2] + (v[2] - g[2]) * m,
                                d = this.weight / (this.weight + c.positionWeight),
                                l.position.lerp(n, d),
                                c.positionWeight += this.weight) : (this.interpolationType === r.AnimationHandler.CATMULLROM || this.interpolationType === r.AnimationHandler.CATMULLROM_FORWARD) && (t[0] = this.getPrevKeyWith("pos", a, d.index - 1).pos,
                                t[1] = g,
                                t[2] = v,
                                t[3] = this.getNextKeyWith("pos", a, f.index + 1).pos,
                                m = .33 * m + .33,
                                f = o(t, m),
                                d = this.weight / (this.weight + c.positionWeight),
                                c.positionWeight += this.weight,
                                p = l.position,
                                p.x += (f[0] - p.x) * d,
                                p.y += (f[1] - p.y) * d,
                                p.z += (f[2] - p.z) * d,
                                this.interpolationType === r.AnimationHandler.CATMULLROM_FORWARD && (m = o(t, 1.01 * m),
                                e.set(m[0], m[1], m[2]),
                                e.sub(p),
                                e.y = 0,
                                e.normalize(),
                                m = Math.atan2(e.x, e.z),
                                l.rotation.set(0, m, 0))) : "rot" === p ? (r.Quaternion.slerp(g, v, i, m),
                                0 === c.quaternionWeight ? (l.quaternion.copy(i),
                                c.quaternionWeight = this.weight) : (d = this.weight / (this.weight + c.quaternionWeight),
                                r.Quaternion.slerp(l.quaternion, i, l.quaternion, d),
                                c.quaternionWeight += this.weight)) : "scl" === p && (n.x = g[0] + (v[0] - g[0]) * m,
                                n.y = g[1] + (v[1] - g[1]) * m,
                                n.z = g[2] + (v[2] - g[2]) * m,
                                d = this.weight / (this.weight + c.scaleWeight),
                                l.scale.lerp(n, d),
                                c.scaleWeight += this.weight)
                            }
                        return !0
                    }
                }
            }(),
            getNextKeyWith: function(t, e, n) {
                var i = this.data.hierarchy[e].keys;
                for (n = this.interpolationType === r.AnimationHandler.CATMULLROM || this.interpolationType === r.AnimationHandler.CATMULLROM_FORWARD ? n < i.length - 1 ? n : i.length - 1 : n % i.length; n < i.length; n++)
                    if (void 0 !== i[n][t])
                        return i[n];
                return this.data.hierarchy[e].keys[0]
            },
            getPrevKeyWith: function(t, e, n) {
                var i = this.data.hierarchy[e].keys;
                for (n = this.interpolationType === r.AnimationHandler.CATMULLROM || this.interpolationType === r.AnimationHandler.CATMULLROM_FORWARD ? n > 0 ? n : 0 : n >= 0 ? n : n + i.length; n >= 0; n--)
                    if (void 0 !== i[n][t])
                        return i[n];
                return this.data.hierarchy[e].keys[i.length - 1]
            }
        },
        r.KeyFrameAnimation = function(t) {
            this.root = t.node,
            this.data = r.AnimationHandler.init(t),
            this.hierarchy = r.AnimationHandler.parse(this.root),
            this.currentTime = 0,
            this.timeScale = .001,
            this.isPlaying = !1,
            this.loop = this.isPaused = !0,
            t = 0;
            for (var e = this.hierarchy.length; e > t; t++) {
                var n = this.data.hierarchy[t].sids
                  , i = this.hierarchy[t];
                if (this.data.hierarchy[t].keys.length && n) {
                    for (var o = 0; o < n.length; o++) {
                        var a = n[o]
                          , s = this.getNextKeyWith(a, t, 0);
                        s && s.apply(a)
                    }
                    i.matrixAutoUpdate = !1,
                    this.data.hierarchy[t].node.updateMatrix(),
                    i.matrixWorldNeedsUpdate = !0
                }
            }
        }
        ,
        r.KeyFrameAnimation.prototype = {
            constructor: r.KeyFrameAnimation,
            play: function(t) {
                if (this.currentTime = void 0 !== t ? t : 0,
                !1 === this.isPlaying) {
                    this.isPlaying = !0;
                    var e, n, i = this.hierarchy.length;
                    for (t = 0; i > t; t++)
                        e = this.hierarchy[t],
                        n = this.data.hierarchy[t],
                        void 0 === n.animationCache && (n.animationCache = {},
                        n.animationCache.prevKey = null ,
                        n.animationCache.nextKey = null ,
                        n.animationCache.originalMatrix = e.matrix),
                        e = this.data.hierarchy[t].keys,
                        e.length && (n.animationCache.prevKey = e[0],
                        n.animationCache.nextKey = e[1],
                        this.startTime = Math.min(e[0].time, this.startTime),
                        this.endTime = Math.max(e[e.length - 1].time, this.endTime));
                    this.update(0)
                }
                this.isPaused = !1,
                r.AnimationHandler.play(this)
            },
            stop: function() {
                this.isPaused = this.isPlaying = !1,
                r.AnimationHandler.stop(this);
                for (var t = 0; t < this.data.hierarchy.length; t++) {
                    var e = this.hierarchy[t]
                      , n = this.data.hierarchy[t];
                    if (void 0 !== n.animationCache) {
                        var i = n.animationCache.originalMatrix;
                        i.copy(e.matrix),
                        e.matrix = i,
                        delete n.animationCache
                    }
                }
            },
            update: function(t) {
                if (!1 !== this.isPlaying) {
                    this.currentTime += t * this.timeScale,
                    t = this.data.length,
                    !0 === this.loop && this.currentTime > t && (this.currentTime %= t),
                    this.currentTime = Math.min(this.currentTime, t),
                    t = 0;
                    for (var e = this.hierarchy.length; e > t; t++) {
                        var n = this.hierarchy[t]
                          , r = this.data.hierarchy[t]
                          , i = r.keys
                          , r = r.animationCache;
                        if (i.length) {
                            var o = r.prevKey
                              , a = r.nextKey;
                            if (a.time <= this.currentTime) {
                                for (; a.time < this.currentTime && a.index > o.index; )
                                    o = a,
                                    a = i[o.index + 1];
                                r.prevKey = o,
                                r.nextKey = a
                            }
                            a.time >= this.currentTime ? o.interpolate(a, this.currentTime) : o.interpolate(a, a.time),
                            this.data.hierarchy[t].node.updateMatrix(),
                            n.matrixWorldNeedsUpdate = !0
                        }
                    }
                }
            },
            getNextKeyWith: function(t, e, n) {
                for (e = this.data.hierarchy[e].keys,
                n %= e.length; n < e.length; n++)
                    if (e[n].hasTarget(t))
                        return e[n];
                return e[0]
            },
            getPrevKeyWith: function(t, e, n) {
                for (e = this.data.hierarchy[e].keys,
                n = n >= 0 ? n : n + e.length; n >= 0; n--)
                    if (e[n].hasTarget(t))
                        return e[n];
                return e[e.length - 1]
            }
        },
        r.MorphAnimation = function(t) {
            this.mesh = t,
            this.frames = t.morphTargetInfluences.length,
            this.currentTime = 0,
            this.duration = 1e3,
            this.loop = !0,
            this.currentFrame = this.lastFrame = 0,
            this.isPlaying = !1
        }
        ,
        r.MorphAnimation.prototype = {
            constructor: r.MorphAnimation,
            play: function() {
                this.isPlaying = !0
            },
            pause: function() {
                this.isPlaying = !1
            },
            update: function(t) {
                if (!1 !== this.isPlaying) {
                    this.currentTime += t,
                    !0 === this.loop && this.currentTime > this.duration && (this.currentTime %= this.duration),
                    this.currentTime = Math.min(this.currentTime, this.duration);
                    var e = this.duration / this.frames;
                    t = Math.floor(this.currentTime / e);
                    var n = this.mesh.morphTargetInfluences;
                    t !== this.currentFrame && (n[this.lastFrame] = 0,
                    n[this.currentFrame] = 1,
                    n[t] = 0,
                    this.lastFrame = this.currentFrame,
                    this.currentFrame = t),
                    e = this.currentTime % e / e,
                    n[t] = e,
                    n[this.lastFrame] = 1 - e
                }
            }
        },
        r.BoxGeometry = function(t, e, n, i, o, a) {
            function s(t, e, n, i, o, a, s, h) {
                var c, u = l.widthSegments, p = l.heightSegments, d = o / 2, f = a / 2, m = l.vertices.length;
                "x" === t && "y" === e || "y" === t && "x" === e ? c = "z" : "x" === t && "z" === e || "z" === t && "x" === e ? (c = "y",
                p = l.depthSegments) : ("z" === t && "y" === e || "y" === t && "z" === e) && (c = "x",
                u = l.depthSegments);
                var g = u + 1
                  , v = p + 1
                  , y = o / u
                  , _ = a / p
                  , x = new r.Vector3;
                for (x[c] = s > 0 ? 1 : -1,
                o = 0; v > o; o++)
                    for (a = 0; g > a; a++) {
                        var b = new r.Vector3;
                        b[t] = (a * y - d) * n,
                        b[e] = (o * _ - f) * i,
                        b[c] = s,
                        l.vertices.push(b)
                    }
                for (o = 0; p > o; o++)
                    for (a = 0; u > a; a++)
                        f = a + g * o,
                        t = a + g * (o + 1),
                        e = a + 1 + g * (o + 1),
                        n = a + 1 + g * o,
                        i = new r.Vector2(a / u,1 - o / p),
                        s = new r.Vector2(a / u,1 - (o + 1) / p),
                        c = new r.Vector2((a + 1) / u,1 - (o + 1) / p),
                        d = new r.Vector2((a + 1) / u,1 - o / p),
                        f = new r.Face3(f + m,t + m,n + m),
                        f.normal.copy(x),
                        f.vertexNormals.push(x.clone(), x.clone(), x.clone()),
                        f.materialIndex = h,
                        l.faces.push(f),
                        l.faceVertexUvs[0].push([i, s, d]),
                        f = new r.Face3(t + m,e + m,n + m),
                        f.normal.copy(x),
                        f.vertexNormals.push(x.clone(), x.clone(), x.clone()),
                        f.materialIndex = h,
                        l.faces.push(f),
                        l.faceVertexUvs[0].push([s.clone(), c, d.clone()])
            }
            r.Geometry.call(this),
            this.type = "BoxGeometry",
            this.parameters = {
                width: t,
                height: e,
                depth: n,
                widthSegments: i,
                heightSegments: o,
                depthSegments: a
            },
            this.widthSegments = i || 1,
            this.heightSegments = o || 1,
            this.depthSegments = a || 1;
            var l = this;
            i = t / 2,
            o = e / 2,
            a = n / 2,
            s("z", "y", -1, -1, n, e, i, 0),
            s("z", "y", 1, -1, n, e, -i, 1),
            s("x", "z", 1, 1, t, n, o, 2),
            s("x", "z", 1, -1, t, n, -o, 3),
            s("x", "y", 1, -1, t, e, a, 4),
            s("x", "y", -1, -1, t, e, -a, 5),
            this.mergeVertices()
        }
        ,
        r.BoxGeometry.prototype = Object.create(r.Geometry.prototype),
        r.BoxGeometry.prototype.constructor = r.BoxGeometry,
        r.BoxGeometry.prototype.clone = function() {
            return new r.BoxGeometry(this.parameters.width,this.parameters.height,this.parameters.depth,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.depthSegments)
        }
        ,
        r.CubeGeometry = r.BoxGeometry,
        r.CircleGeometry = function(t, e, n, i) {
            r.Geometry.call(this),
            this.type = "CircleGeometry",
            this.parameters = {
                radius: t,
                segments: e,
                thetaStart: n,
                thetaLength: i
            },
            t = t || 50,
            e = void 0 !== e ? Math.max(3, e) : 8,
            n = void 0 !== n ? n : 0,
            i = void 0 !== i ? i : 2 * Math.PI;
            var o, a = [];
            o = new r.Vector3;
            var s = new r.Vector2(.5,.5);
            for (this.vertices.push(o),
            a.push(s),
            o = 0; e >= o; o++) {
                var l = new r.Vector3
                  , h = n + o / e * i;
                l.x = t * Math.cos(h),
                l.y = t * Math.sin(h),
                this.vertices.push(l),
                a.push(new r.Vector2((l.x / t + 1) / 2,(l.y / t + 1) / 2))
            }
            for (n = new r.Vector3(0,0,1),
            o = 1; e >= o; o++)
                this.faces.push(new r.Face3(o,o + 1,0,[n.clone(), n.clone(), n.clone()])),
                this.faceVertexUvs[0].push([a[o].clone(), a[o + 1].clone(), s.clone()]);
            this.computeFaceNormals(),
            this.boundingSphere = new r.Sphere(new r.Vector3,t)
        }
        ,
        r.CircleGeometry.prototype = Object.create(r.Geometry.prototype),
        r.CircleGeometry.prototype.constructor = r.CircleGeometry,
        r.CircleGeometry.prototype.clone = function() {
            return new r.CircleGeometry(this.parameters.radius,this.parameters.segments,this.parameters.thetaStart,this.parameters.thetaLength)
        }
        ,
        r.CircleBufferGeometry = function(t, e, n, i) {
            r.BufferGeometry.call(this),
            this.type = "CircleBufferGeometry",
            this.parameters = {
                radius: t,
                segments: e,
                thetaStart: n,
                thetaLength: i
            },
            t = t || 50,
            e = void 0 !== e ? Math.max(3, e) : 8,
            n = void 0 !== n ? n : 0,
            i = void 0 !== i ? i : 2 * Math.PI;
            var o = e + 2
              , a = new Float32Array(3 * o)
              , s = new Float32Array(3 * o)
              , o = new Float32Array(2 * o);
            s[3] = 1,
            o[0] = .5,
            o[1] = .5;
            for (var l = 0, h = 3, c = 2; e >= l; l++,
            h += 3,
            c += 2) {
                var u = n + l / e * i;
                a[h] = t * Math.cos(u),
                a[h + 1] = t * Math.sin(u),
                s[h + 2] = 1,
                o[c] = (a[h] / t + 1) / 2,
                o[c + 1] = (a[h + 1] / t + 1) / 2
            }
            for (n = [],
            h = 1; e >= h; h++)
                n.push(h),
                n.push(h + 1),
                n.push(0);
            this.setIndex(new r.BufferAttribute(new Uint16Array(n),1)),
            this.addAttribute("position", new r.BufferAttribute(a,3)),
            this.addAttribute("normal", new r.BufferAttribute(s,3)),
            this.addAttribute("uv", new r.BufferAttribute(o,2)),
            this.boundingSphere = new r.Sphere(new r.Vector3,t)
        }
        ,
        r.CircleBufferGeometry.prototype = Object.create(r.BufferGeometry.prototype),
        r.CircleBufferGeometry.prototype.constructor = r.CircleBufferGeometry,
        r.CircleBufferGeometry.prototype.clone = function() {
            var t = new r.CircleBufferGeometry(this.parameters.radius,this.parameters.segments,this.parameters.thetaStart,this.parameters.thetaLength);
            return t.copy(this),
            t
        }
        ,
        r.CylinderGeometry = function(t, e, n, i, o, a, s, l) {
            r.Geometry.call(this),
            this.type = "CylinderGeometry",
            this.parameters = {
                radiusTop: t,
                radiusBottom: e,
                height: n,
                radialSegments: i,
                heightSegments: o,
                openEnded: a,
                thetaStart: s,
                thetaLength: l
            },
            t = void 0 !== t ? t : 20,
            e = void 0 !== e ? e : 20,
            n = void 0 !== n ? n : 100,
            i = i || 8,
            o = o || 1,
            a = void 0 !== a ? a : !1,
            s = void 0 !== s ? s : 0,
            l = void 0 !== l ? l : 2 * Math.PI;
            var h, c, u = n / 2, p = [], d = [];
            for (c = 0; o >= c; c++) {
                var f = []
                  , m = []
                  , g = c / o
                  , v = g * (e - t) + t;
                for (h = 0; i >= h; h++) {
                    var y = h / i
                      , _ = new r.Vector3;
                    _.x = v * Math.sin(y * l + s),
                    _.y = -g * n + u,
                    _.z = v * Math.cos(y * l + s),
                    this.vertices.push(_),
                    f.push(this.vertices.length - 1),
                    m.push(new r.Vector2(y,1 - g))
                }
                p.push(f),
                d.push(m)
            }
            for (n = (e - t) / n,
            h = 0; i > h; h++)
                for (0 !== t ? (s = this.vertices[p[0][h]].clone(),
                l = this.vertices[p[0][h + 1]].clone()) : (s = this.vertices[p[1][h]].clone(),
                l = this.vertices[p[1][h + 1]].clone()),
                s.setY(Math.sqrt(s.x * s.x + s.z * s.z) * n).normalize(),
                l.setY(Math.sqrt(l.x * l.x + l.z * l.z) * n).normalize(),
                c = 0; o > c; c++) {
                    var f = p[c][h]
                      , m = p[c + 1][h]
                      , g = p[c + 1][h + 1]
                      , v = p[c][h + 1]
                      , y = s.clone()
                      , _ = s.clone()
                      , x = l.clone()
                      , b = l.clone()
                      , w = d[c][h].clone()
                      , S = d[c + 1][h].clone()
                      , T = d[c + 1][h + 1].clone()
                      , M = d[c][h + 1].clone();
                    this.faces.push(new r.Face3(f,m,v,[y, _, b])),
                    this.faceVertexUvs[0].push([w, S, M]),
                    this.faces.push(new r.Face3(m,g,v,[_.clone(), x, b.clone()])),
                    this.faceVertexUvs[0].push([S.clone(), T, M.clone()])
                }
            if (!1 === a && t > 0)
                for (this.vertices.push(new r.Vector3(0,u,0)),
                h = 0; i > h; h++)
                    f = p[0][h],
                    m = p[0][h + 1],
                    g = this.vertices.length - 1,
                    y = new r.Vector3(0,1,0),
                    _ = new r.Vector3(0,1,0),
                    x = new r.Vector3(0,1,0),
                    w = d[0][h].clone(),
                    S = d[0][h + 1].clone(),
                    T = new r.Vector2(S.x,0),
                    this.faces.push(new r.Face3(f,m,g,[y, _, x],void 0,1)),
                    this.faceVertexUvs[0].push([w, S, T]);
            if (!1 === a && e > 0)
                for (this.vertices.push(new r.Vector3(0,-u,0)),
                h = 0; i > h; h++)
                    f = p[o][h + 1],
                    m = p[o][h],
                    g = this.vertices.length - 1,
                    y = new r.Vector3(0,-1,0),
                    _ = new r.Vector3(0,-1,0),
                    x = new r.Vector3(0,-1,0),
                    w = d[o][h + 1].clone(),
                    S = d[o][h].clone(),
                    T = new r.Vector2(S.x,1),
                    this.faces.push(new r.Face3(f,m,g,[y, _, x],void 0,2)),
                    this.faceVertexUvs[0].push([w, S, T]);
            this.computeFaceNormals()
        }
        ,
        r.CylinderGeometry.prototype = Object.create(r.Geometry.prototype),
        r.CylinderGeometry.prototype.constructor = r.CylinderGeometry,
        r.CylinderGeometry.prototype.clone = function() {
            return new r.CylinderGeometry(this.parameters.radiusTop,this.parameters.radiusBottom,this.parameters.height,this.parameters.radialSegments,this.parameters.heightSegments,this.parameters.openEnded,this.parameters.thetaStart,this.parameters.thetaLength)
        }
        ,
        r.EdgesGeometry = function(t, e) {
            r.BufferGeometry.call(this);
            var n, i = Math.cos(r.Math.degToRad(void 0 !== e ? e : 1)), o = [0, 0], a = {}, s = function(t, e) {
                return t - e
            }, l = ["a", "b", "c"];
            t instanceof r.BufferGeometry ? (n = new r.Geometry,
            n.fromBufferGeometry(t)) : n = t.clone(),
            n.mergeVertices(),
            n.computeFaceNormals();
            var h = n.vertices;
            n = n.faces;
            for (var c = 0, u = n.length; u > c; c++)
                for (var p = n[c], d = 0; 3 > d; d++) {
                    o[0] = p[l[d]],
                    o[1] = p[l[(d + 1) % 3]],
                    o.sort(s);
                    var f = o.toString();
                    void 0 === a[f] ? a[f] = {
                        vert1: o[0],
                        vert2: o[1],
                        face1: c,
                        face2: void 0
                    } : a[f].face2 = c
                }
            o = [];
            for (f in a)
                s = a[f],
                (void 0 === s.face2 || n[s.face1].normal.dot(n[s.face2].normal) <= i) && (l = h[s.vert1],
                o.push(l.x),
                o.push(l.y),
                o.push(l.z),
                l = h[s.vert2],
                o.push(l.x),
                o.push(l.y),
                o.push(l.z));
            this.addAttribute("position", new r.BufferAttribute(new Float32Array(o),3))
        }
        ,
        r.EdgesGeometry.prototype = Object.create(r.BufferGeometry.prototype),
        r.EdgesGeometry.prototype.constructor = r.EdgesGeometry,
        r.ExtrudeGeometry = function(t, e) {
            "undefined" != typeof t && (r.Geometry.call(this),
            this.type = "ExtrudeGeometry",
            t = Array.isArray(t) ? t : [t],
            this.addShapeList(t, e),
            this.computeFaceNormals())
        }
        ,
        r.ExtrudeGeometry.prototype = Object.create(r.Geometry.prototype),
        r.ExtrudeGeometry.prototype.constructor = r.ExtrudeGeometry,
        r.ExtrudeGeometry.prototype.addShapeList = function(t, e) {
            for (var n = t.length, r = 0; n > r; r++)
                this.addShape(t[r], e)
        }
        ,
        r.ExtrudeGeometry.prototype.addShape = function(t, e) {
            function n(t, e, n) {
                return e || console.error("THREE.ExtrudeGeometry: vec does not exist"),
                e.clone().multiplyScalar(n).add(t)
            }
            function i(t, e, n) {
                var i = 1
                  , i = t.x - e.x
                  , o = t.y - e.y
                  , a = n.x - t.x
                  , s = n.y - t.y
                  , l = i * i + o * o;
                if (1e-10 < Math.abs(i * s - o * a)) {
                    var h = Math.sqrt(l)
                      , c = Math.sqrt(a * a + s * s)
                      , l = e.x - o / h;
                    if (e = e.y + i / h,
                    a = ((n.x - s / c - l) * s - (n.y + a / c - e) * a) / (i * s - o * a),
                    n = l + i * a - t.x,
                    t = e + o * a - t.y,
                    i = n * n + t * t,
                    2 >= i)
                        return new r.Vector2(n,t);
                    i = Math.sqrt(i / 2)
                } else
                    t = !1,
                    i > 1e-10 ? a > 1e-10 && (t = !0) : -1e-10 > i ? -1e-10 > a && (t = !0) : Math.sign(o) === Math.sign(s) && (t = !0),
                    t ? (n = -o,
                    t = i,
                    i = Math.sqrt(l)) : (n = i,
                    t = o,
                    i = Math.sqrt(l / 2));
                return new r.Vector2(n / i,t / i)
            }
            function o(t, e) {
                var n, i;
                for (N = t.length; 0 <= --N; ) {
                    n = N,
                    i = N - 1,
                    0 > i && (i = t.length - 1);
                    for (var o = 0, a = _ + 2 * g, o = 0; a > o; o++) {
                        var s = I * o
                          , l = I * (o + 1)
                          , h = e + n + s
                          , s = e + i + s
                          , c = e + i + l
                          , l = e + n + l
                          , h = h + A
                          , s = s + A
                          , c = c + A
                          , l = l + A;
                        C.faces.push(new r.Face3(h,s,l)),
                        C.faces.push(new r.Face3(s,c,l)),
                        h = w.generateSideWallUV(C, h, s, c, l),
                        C.faceVertexUvs[0].push([h[0], h[1], h[3]]),
                        C.faceVertexUvs[0].push([h[1], h[2], h[3]])
                    }
                }
            }
            function a(t, e, n) {
                C.vertices.push(new r.Vector3(t,e,n))
            }
            function s(t, e, n) {
                t += A,
                e += A,
                n += A,
                C.faces.push(new r.Face3(t,e,n)),
                t = w.generateTopUV(C, t, e, n),
                C.faceVertexUvs[0].push(t)
            }
            var l, h, c, u, p, d = void 0 !== e.amount ? e.amount : 100, f = void 0 !== e.bevelThickness ? e.bevelThickness : 6, m = void 0 !== e.bevelSize ? e.bevelSize : f - 2, g = void 0 !== e.bevelSegments ? e.bevelSegments : 3, v = void 0 !== e.bevelEnabled ? e.bevelEnabled : !0, y = void 0 !== e.curveSegments ? e.curveSegments : 12, _ = void 0 !== e.steps ? e.steps : 1, x = e.extrudePath, b = !1, w = void 0 !== e.UVGenerator ? e.UVGenerator : r.ExtrudeGeometry.WorldUVGenerator;
            x && (l = x.getSpacedPoints(_),
            b = !0,
            v = !1,
            h = void 0 !== e.frames ? e.frames : new r.TubeGeometry.FrenetFrames(x,_,!1),
            c = new r.Vector3,
            u = new r.Vector3,
            p = new r.Vector3),
            v || (m = f = g = 0);
            var S, T, M, C = this, A = this.vertices.length, x = t.extractPoints(y), y = x.shape, E = x.holes;
            if (x = !r.Shape.Utils.isClockWise(y)) {
                for (y = y.reverse(),
                T = 0,
                M = E.length; M > T; T++)
                    S = E[T],
                    r.Shape.Utils.isClockWise(S) && (E[T] = S.reverse());
                x = !1
            }
            var L = r.Shape.Utils.triangulateShape(y, E)
              , P = y;
            for (T = 0,
            M = E.length; M > T; T++)
                S = E[T],
                y = y.concat(S);
            var k, R, O, D, F, U, I = y.length, B = L.length, x = [], N = 0;
            for (O = P.length,
            k = O - 1,
            R = N + 1; O > N; N++,
            k++,
            R++)
                k === O && (k = 0),
                R === O && (R = 0),
                x[N] = i(P[N], P[k], P[R]);
            var j, V = [], G = x.concat();
            for (T = 0,
            M = E.length; M > T; T++) {
                for (S = E[T],
                j = [],
                N = 0,
                O = S.length,
                k = O - 1,
                R = N + 1; O > N; N++,
                k++,
                R++)
                    k === O && (k = 0),
                    R === O && (R = 0),
                    j[N] = i(S[N], S[k], S[R]);
                V.push(j),
                G = G.concat(j)
            }
            for (k = 0; g > k; k++) {
                for (O = k / g,
                D = f * (1 - O),
                R = m * Math.sin(O * Math.PI / 2),
                N = 0,
                O = P.length; O > N; N++)
                    F = n(P[N], x[N], R),
                    a(F.x, F.y, -D);
                for (T = 0,
                M = E.length; M > T; T++)
                    for (S = E[T],
                    j = V[T],
                    N = 0,
                    O = S.length; O > N; N++)
                        F = n(S[N], j[N], R),
                        a(F.x, F.y, -D)
            }
            for (R = m,
            N = 0; I > N; N++)
                F = v ? n(y[N], G[N], R) : y[N],
                b ? (u.copy(h.normals[0]).multiplyScalar(F.x),
                c.copy(h.binormals[0]).multiplyScalar(F.y),
                p.copy(l[0]).add(u).add(c),
                a(p.x, p.y, p.z)) : a(F.x, F.y, 0);
            for (O = 1; _ >= O; O++)
                for (N = 0; I > N; N++)
                    F = v ? n(y[N], G[N], R) : y[N],
                    b ? (u.copy(h.normals[O]).multiplyScalar(F.x),
                    c.copy(h.binormals[O]).multiplyScalar(F.y),
                    p.copy(l[O]).add(u).add(c),
                    a(p.x, p.y, p.z)) : a(F.x, F.y, d / _ * O);
            for (k = g - 1; k >= 0; k--) {
                for (O = k / g,
                D = f * (1 - O),
                R = m * Math.sin(O * Math.PI / 2),
                N = 0,
                O = P.length; O > N; N++)
                    F = n(P[N], x[N], R),
                    a(F.x, F.y, d + D);
                for (T = 0,
                M = E.length; M > T; T++)
                    for (S = E[T],
                    j = V[T],
                    N = 0,
                    O = S.length; O > N; N++)
                        F = n(S[N], j[N], R),
                        b ? a(F.x, F.y + l[_ - 1].y, l[_ - 1].x + D) : a(F.x, F.y, d + D)
            }
            !function() {
                if (v) {
                    var t;
                    for (t = 0 * I,
                    N = 0; B > N; N++)
                        U = L[N],
                        s(U[2] + t, U[1] + t, U[0] + t);
                    for (t = _ + 2 * g,
                    t *= I,
                    N = 0; B > N; N++)
                        U = L[N],
                        s(U[0] + t, U[1] + t, U[2] + t)
                } else {
                    for (N = 0; B > N; N++)
                        U = L[N],
                        s(U[2], U[1], U[0]);
                    for (N = 0; B > N; N++)
                        U = L[N],
                        s(U[0] + I * _, U[1] + I * _, U[2] + I * _)
                }
            }(),
            function() {
                var t = 0;
                for (o(P, t),
                t += P.length,
                T = 0,
                M = E.length; M > T; T++)
                    S = E[T],
                    o(S, t),
                    t += S.length
            }()
        }
        ,
        r.ExtrudeGeometry.WorldUVGenerator = {
            generateTopUV: function(t, e, n, i) {
                return t = t.vertices,
                e = t[e],
                n = t[n],
                i = t[i],
                [new r.Vector2(e.x,e.y), new r.Vector2(n.x,n.y), new r.Vector2(i.x,i.y)]
            },
            generateSideWallUV: function(t, e, n, i, o) {
                return t = t.vertices,
                e = t[e],
                n = t[n],
                i = t[i],
                o = t[o],
                .01 > Math.abs(e.y - n.y) ? [new r.Vector2(e.x,1 - e.z), new r.Vector2(n.x,1 - n.z), new r.Vector2(i.x,1 - i.z), new r.Vector2(o.x,1 - o.z)] : [new r.Vector2(e.y,1 - e.z), new r.Vector2(n.y,1 - n.z), new r.Vector2(i.y,1 - i.z), new r.Vector2(o.y,1 - o.z)]
            }
        },
        r.ShapeGeometry = function(t, e) {
            r.Geometry.call(this),
            this.type = "ShapeGeometry",
            !1 === Array.isArray(t) && (t = [t]),
            this.addShapeList(t, e),
            this.computeFaceNormals()
        }
        ,
        r.ShapeGeometry.prototype = Object.create(r.Geometry.prototype),
        r.ShapeGeometry.prototype.constructor = r.ShapeGeometry,
        r.ShapeGeometry.prototype.addShapeList = function(t, e) {
            for (var n = 0, r = t.length; r > n; n++)
                this.addShape(t[n], e);
            return this
        }
        ,
        r.ShapeGeometry.prototype.addShape = function(t, e) {
            void 0 === e && (e = {});
            var n, i, o, a = e.material, s = void 0 === e.UVGenerator ? r.ExtrudeGeometry.WorldUVGenerator : e.UVGenerator, l = this.vertices.length;
            n = t.extractPoints(void 0 !== e.curveSegments ? e.curveSegments : 12);
            var h = n.shape
              , c = n.holes;
            if (!r.Shape.Utils.isClockWise(h))
                for (h = h.reverse(),
                n = 0,
                i = c.length; i > n; n++)
                    o = c[n],
                    r.Shape.Utils.isClockWise(o) && (c[n] = o.reverse());
            var u = r.Shape.Utils.triangulateShape(h, c);
            for (n = 0,
            i = c.length; i > n; n++)
                o = c[n],
                h = h.concat(o);
            for (c = h.length,
            i = u.length,
            n = 0; c > n; n++)
                o = h[n],
                this.vertices.push(new r.Vector3(o.x,o.y,0));
            for (n = 0; i > n; n++)
                c = u[n],
                h = c[0] + l,
                o = c[1] + l,
                c = c[2] + l,
                this.faces.push(new r.Face3(h,o,c,null ,null ,a)),
                this.faceVertexUvs[0].push(s.generateTopUV(this, h, o, c))
        }
        ,
        r.LatheGeometry = function(t, e, n, i) {
            r.Geometry.call(this),
            this.type = "LatheGeometry",
            this.parameters = {
                points: t,
                segments: e,
                phiStart: n,
                phiLength: i
            },
            e = e || 12,
            n = n || 0,
            i = i || 2 * Math.PI;
            for (var o = 1 / (t.length - 1), a = 1 / e, s = 0, l = e; l >= s; s++)
                for (var h = n + s * a * i, c = Math.cos(h), u = Math.sin(h), h = 0, p = t.length; p > h; h++) {
                    var d = t[h]
                      , f = new r.Vector3;
                    f.x = c * d.x - u * d.y,
                    f.y = u * d.x + c * d.y,
                    f.z = d.z,
                    this.vertices.push(f)
                }
            for (n = t.length,
            s = 0,
            l = e; l > s; s++)
                for (h = 0,
                p = t.length - 1; p > h; h++) {
                    e = u = h + n * s,
                    i = u + n;
                    var c = u + 1 + n
                      , u = u + 1
                      , d = s * a
                      , f = h * o
                      , m = d + a
                      , g = f + o;
                    this.faces.push(new r.Face3(e,i,u)),
                    this.faceVertexUvs[0].push([new r.Vector2(d,f), new r.Vector2(m,f), new r.Vector2(d,g)]),
                    this.faces.push(new r.Face3(i,c,u)),
                    this.faceVertexUvs[0].push([new r.Vector2(m,f), new r.Vector2(m,g), new r.Vector2(d,g)])
                }
            this.mergeVertices(),
            this.computeFaceNormals(),
            this.computeVertexNormals()
        }
        ,
        r.LatheGeometry.prototype = Object.create(r.Geometry.prototype),
        r.LatheGeometry.prototype.constructor = r.LatheGeometry,
        r.PlaneGeometry = function(t, e, n, i) {
            r.Geometry.call(this),
            this.type = "PlaneGeometry",
            this.parameters = {
                width: t,
                height: e,
                widthSegments: n,
                heightSegments: i
            },
            this.fromBufferGeometry(new r.PlaneBufferGeometry(t,e,n,i))
        }
        ,
        r.PlaneGeometry.prototype = Object.create(r.Geometry.prototype),
        r.PlaneGeometry.prototype.constructor = r.PlaneGeometry,
        r.PlaneGeometry.prototype.clone = function() {
            return new r.PlaneGeometry(this.parameters.width,this.parameters.height,this.parameters.widthSegments,this.parameters.heightSegments)
        }
        ,
        r.PlaneBufferGeometry = function(t, e, n, i) {
            r.BufferGeometry.call(this),
            this.type = "PlaneBufferGeometry",
            this.parameters = {
                width: t,
                height: e,
                widthSegments: n,
                heightSegments: i
            };
            var o = t / 2
              , a = e / 2;
            n = Math.floor(n) || 1,
            i = Math.floor(i) || 1;
            var s = n + 1
              , l = i + 1
              , h = t / n
              , c = e / i;
            e = new Float32Array(s * l * 3),
            t = new Float32Array(s * l * 3);
            for (var u = new Float32Array(s * l * 2), p = 0, d = 0, f = 0; l > f; f++)
                for (var m = f * c - a, g = 0; s > g; g++)
                    e[p] = g * h - o,
                    e[p + 1] = -m,
                    t[p + 2] = 1,
                    u[d] = g / n,
                    u[d + 1] = 1 - f / i,
                    p += 3,
                    d += 2;
            for (p = 0,
            o = new (65535 < e.length / 3 ? Uint32Array : Uint16Array)(n * i * 6),
            f = 0; i > f; f++)
                for (g = 0; n > g; g++)
                    a = g + s * (f + 1),
                    l = g + 1 + s * (f + 1),
                    h = g + 1 + s * f,
                    o[p] = g + s * f,
                    o[p + 1] = a,
                    o[p + 2] = h,
                    o[p + 3] = a,
                    o[p + 4] = l,
                    o[p + 5] = h,
                    p += 6;
            this.setIndex(new r.BufferAttribute(o,1)),
            this.addAttribute("position", new r.BufferAttribute(e,3)),
            this.addAttribute("normal", new r.BufferAttribute(t,3)),
            this.addAttribute("uv", new r.BufferAttribute(u,2))
        }
        ,
        r.PlaneBufferGeometry.prototype = Object.create(r.BufferGeometry.prototype),
        r.PlaneBufferGeometry.prototype.constructor = r.PlaneBufferGeometry,
        r.PlaneBufferGeometry.prototype.clone = function() {
            var t = new r.PlaneBufferGeometry(this.parameters.width,this.parameters.height,this.parameters.widthSegments,this.parameters.heightSegments);
            return t.copy(this),
            t
        }
        ,
        r.RingGeometry = function(t, e, n, i, o, a) {
            r.Geometry.call(this),
            this.type = "RingGeometry",
            this.parameters = {
                innerRadius: t,
                outerRadius: e,
                thetaSegments: n,
                phiSegments: i,
                thetaStart: o,
                thetaLength: a
            },
            t = t || 0,
            e = e || 50,
            o = void 0 !== o ? o : 0,
            a = void 0 !== a ? a : 2 * Math.PI,
            n = void 0 !== n ? Math.max(3, n) : 8,
            i = void 0 !== i ? Math.max(1, i) : 8;
            var s, l = [], h = t, c = (e - t) / i;
            for (t = 0; i + 1 > t; t++) {
                for (s = 0; n + 1 > s; s++) {
                    var u = new r.Vector3
                      , p = o + s / n * a;
                    u.x = h * Math.cos(p),
                    u.y = h * Math.sin(p),
                    this.vertices.push(u),
                    l.push(new r.Vector2((u.x / e + 1) / 2,(u.y / e + 1) / 2))
                }
                h += c
            }
            for (e = new r.Vector3(0,0,1),
            t = 0; i > t; t++)
                for (o = t * (n + 1),
                s = 0; n > s; s++)
                    a = p = s + o,
                    c = p + n + 1,
                    u = p + n + 2,
                    this.faces.push(new r.Face3(a,c,u,[e.clone(), e.clone(), e.clone()])),
                    this.faceVertexUvs[0].push([l[a].clone(), l[c].clone(), l[u].clone()]),
                    a = p,
                    c = p + n + 2,
                    u = p + 1,
                    this.faces.push(new r.Face3(a,c,u,[e.clone(), e.clone(), e.clone()])),
                    this.faceVertexUvs[0].push([l[a].clone(), l[c].clone(), l[u].clone()]);
            this.computeFaceNormals(),
            this.boundingSphere = new r.Sphere(new r.Vector3,h)
        }
        ,
        r.RingGeometry.prototype = Object.create(r.Geometry.prototype),
        r.RingGeometry.prototype.constructor = r.RingGeometry,
        r.RingGeometry.prototype.clone = function() {
            return new r.RingGeometry(this.parameters.innerRadius,this.parameters.outerRadius,this.parameters.thetaSegments,this.parameters.phiSegments,this.parameters.thetaStart,this.parameters.thetaLength)
        }
        ,
        r.SphereGeometry = function(t, e, n, i, o, a, s) {
            r.Geometry.call(this),
            this.type = "SphereGeometry",
            this.parameters = {
                radius: t,
                widthSegments: e,
                heightSegments: n,
                phiStart: i,
                phiLength: o,
                thetaStart: a,
                thetaLength: s
            },
            this.fromBufferGeometry(new r.SphereBufferGeometry(t,e,n,i,o,a,s))
        }
        ,
        r.SphereGeometry.prototype = Object.create(r.Geometry.prototype),
        r.SphereGeometry.prototype.constructor = r.SphereGeometry,
        r.SphereGeometry.prototype.clone = function() {
            return new r.SphereGeometry(this.parameters.radius,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.phiStart,this.parameters.phiLength,this.parameters.thetaStart,this.parameters.thetaLength)
        }
        ,
        r.SphereBufferGeometry = function(t, e, n, i, o, a, s) {
            r.BufferGeometry.call(this),
            this.type = "SphereBufferGeometry",
            this.parameters = {
                radius: t,
                widthSegments: e,
                heightSegments: n,
                phiStart: i,
                phiLength: o,
                thetaStart: a,
                thetaLength: s
            },
            t = t || 50,
            e = Math.max(3, Math.floor(e) || 8),
            n = Math.max(2, Math.floor(n) || 6),
            i = void 0 !== i ? i : 0,
            o = void 0 !== o ? o : 2 * Math.PI,
            a = void 0 !== a ? a : 0,
            s = void 0 !== s ? s : Math.PI;
            for (var l = a + s, h = (e + 1) * (n + 1), c = new r.BufferAttribute(new Float32Array(3 * h),3), u = new r.BufferAttribute(new Float32Array(3 * h),3), h = new r.BufferAttribute(new Float32Array(2 * h),2), p = 0, d = [], f = new r.Vector3, m = 0; n >= m; m++) {
                for (var g = [], v = m / n, y = 0; e >= y; y++) {
                    var _ = y / e
                      , x = -t * Math.cos(i + _ * o) * Math.sin(a + v * s)
                      , b = t * Math.cos(a + v * s)
                      , w = t * Math.sin(i + _ * o) * Math.sin(a + v * s);
                    f.set(x, b, w).normalize(),
                    c.setXYZ(p, x, b, w),
                    u.setXYZ(p, f.x, f.y, f.z),
                    h.setXY(p, _, 1 - v),
                    g.push(p),
                    p++
                }
                d.push(g)
            }
            for (i = [],
            m = 0; n > m; m++)
                for (y = 0; e > y; y++)
                    o = d[m][y + 1],
                    s = d[m][y],
                    p = d[m + 1][y],
                    f = d[m + 1][y + 1],
                    (0 !== m || a > 0) && i.push(o, s, f),
                    (m !== n - 1 || l < Math.PI) && i.push(s, p, f);
            this.setIndex(new r.BufferAttribute(new Uint16Array(i),1)),
            this.addAttribute("position", c),
            this.addAttribute("normal", u),
            this.addAttribute("uv", h),
            this.boundingSphere = new r.Sphere(new r.Vector3,t)
        }
        ,
        r.SphereBufferGeometry.prototype = Object.create(r.BufferGeometry.prototype),
        r.SphereBufferGeometry.prototype.constructor = r.SphereBufferGeometry,
        r.SphereBufferGeometry.prototype.clone = function() {
            var t = new r.SphereBufferGeometry(this.parameters.radius,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.phiStart,this.parameters.phiLength,this.parameters.thetaStart,this.parameters.thetaLength);
            return t.copy(this),
            t
        }
        ,
        r.TextGeometry = function(t, e) {
            e = e || {};
            var n = r.FontUtils.generateShapes(t, e);
            e.amount = void 0 !== e.height ? e.height : 50,
            void 0 === e.bevelThickness && (e.bevelThickness = 10),
            void 0 === e.bevelSize && (e.bevelSize = 8),
            void 0 === e.bevelEnabled && (e.bevelEnabled = !1),
            r.ExtrudeGeometry.call(this, n, e),
            this.type = "TextGeometry"
        }
        ,
        r.TextGeometry.prototype = Object.create(r.ExtrudeGeometry.prototype),
        r.TextGeometry.prototype.constructor = r.TextGeometry,
        r.TorusGeometry = function(t, e, n, i, o) {
            r.Geometry.call(this),
            this.type = "TorusGeometry",
            this.parameters = {
                radius: t,
                tube: e,
                radialSegments: n,
                tubularSegments: i,
                arc: o
            },
            t = t || 100,
            e = e || 40,
            n = n || 8,
            i = i || 6,
            o = o || 2 * Math.PI;
            for (var a = new r.Vector3, s = [], l = [], h = 0; n >= h; h++)
                for (var c = 0; i >= c; c++) {
                    var u = c / i * o
                      , p = h / n * Math.PI * 2;
                    a.x = t * Math.cos(u),
                    a.y = t * Math.sin(u);
                    var d = new r.Vector3;
                    d.x = (t + e * Math.cos(p)) * Math.cos(u),
                    d.y = (t + e * Math.cos(p)) * Math.sin(u),
                    d.z = e * Math.sin(p),
                    this.vertices.push(d),
                    s.push(new r.Vector2(c / i,h / n)),
                    l.push(d.clone().sub(a).normalize())
                }
            for (h = 1; n >= h; h++)
                for (c = 1; i >= c; c++)
                    t = (i + 1) * h + c - 1,
                    e = (i + 1) * (h - 1) + c - 1,
                    o = (i + 1) * (h - 1) + c,
                    a = (i + 1) * h + c,
                    u = new r.Face3(t,e,a,[l[t].clone(), l[e].clone(), l[a].clone()]),
                    this.faces.push(u),
                    this.faceVertexUvs[0].push([s[t].clone(), s[e].clone(), s[a].clone()]),
                    u = new r.Face3(e,o,a,[l[e].clone(), l[o].clone(), l[a].clone()]),
                    this.faces.push(u),
                    this.faceVertexUvs[0].push([s[e].clone(), s[o].clone(), s[a].clone()]);
            this.computeFaceNormals()
        }
        ,
        r.TorusGeometry.prototype = Object.create(r.Geometry.prototype),
        r.TorusGeometry.prototype.constructor = r.TorusGeometry,
        r.TorusGeometry.prototype.clone = function() {
            return new r.TorusGeometry(this.parameters.radius,this.parameters.tube,this.parameters.radialSegments,this.parameters.tubularSegments,this.parameters.arc)
        }
        ,
        r.TorusKnotGeometry = function(t, e, n, i, o, a, s) {
            function l(t, e, n, i, o) {
                var a = Math.cos(t)
                  , s = Math.sin(t);
                return t *= e / n,
                e = Math.cos(t),
                a *= i * (2 + e) * .5,
                s = i * (2 + e) * s * .5,
                i = o * i * Math.sin(t) * .5,
                new r.Vector3(a,s,i)
            }
            r.Geometry.call(this),
            this.type = "TorusKnotGeometry",
            this.parameters = {
                radius: t,
                tube: e,
                radialSegments: n,
                tubularSegments: i,
                p: o,
                q: a,
                heightScale: s
            },
            t = t || 100,
            e = e || 40,
            n = n || 64,
            i = i || 8,
            o = o || 2,
            a = a || 3,
            s = s || 1;
            for (var h = Array(n), c = new r.Vector3, u = new r.Vector3, p = new r.Vector3, d = 0; n > d; ++d) {
                h[d] = Array(i);
                var f = d / n * 2 * o * Math.PI
                  , m = l(f, a, o, t, s)
                  , f = l(f + .01, a, o, t, s);
                for (c.subVectors(f, m),
                u.addVectors(f, m),
                p.crossVectors(c, u),
                u.crossVectors(p, c),
                p.normalize(),
                u.normalize(),
                f = 0; i > f; ++f) {
                    var g = f / i * 2 * Math.PI
                      , v = -e * Math.cos(g)
                      , g = e * Math.sin(g)
                      , y = new r.Vector3;
                    y.x = m.x + v * u.x + g * p.x,
                    y.y = m.y + v * u.y + g * p.y,
                    y.z = m.z + v * u.z + g * p.z,
                    h[d][f] = this.vertices.push(y) - 1
                }
            }
            for (d = 0; n > d; ++d)
                for (f = 0; i > f; ++f)
                    o = (d + 1) % n,
                    a = (f + 1) % i,
                    t = h[d][f],
                    e = h[o][f],
                    o = h[o][a],
                    a = h[d][a],
                    s = new r.Vector2(d / n,f / i),
                    c = new r.Vector2((d + 1) / n,f / i),
                    u = new r.Vector2((d + 1) / n,(f + 1) / i),
                    p = new r.Vector2(d / n,(f + 1) / i),
                    this.faces.push(new r.Face3(t,e,a)),
                    this.faceVertexUvs[0].push([s, c, p]),
                    this.faces.push(new r.Face3(e,o,a)),
                    this.faceVertexUvs[0].push([c.clone(), u, p.clone()]);
            this.computeFaceNormals(),
            this.computeVertexNormals()
        }
        ,
        r.TorusKnotGeometry.prototype = Object.create(r.Geometry.prototype),
        r.TorusKnotGeometry.prototype.constructor = r.TorusKnotGeometry,
        r.TorusKnotGeometry.prototype.clone = function() {
            return new r.TorusKnotGeometry(this.parameters.radius,this.parameters.tube,this.parameters.radialSegments,this.parameters.tubularSegments,this.parameters.p,this.parameters.q,this.parameters.heightScale)
        }
        ,
        r.TubeGeometry = function(t, e, n, i, o, a) {
            r.Geometry.call(this),
            this.type = "TubeGeometry",
            this.parameters = {
                path: t,
                segments: e,
                radius: n,
                radialSegments: i,
                closed: o
            },
            e = e || 64,
            n = n || 1,
            i = i || 8,
            o = o || !1,
            a = a || r.TubeGeometry.NoTaper;
            var s, l, h, c, u, p, d, f, m, g, v = [], y = e + 1, _ = new r.Vector3;
            for (f = new r.TubeGeometry.FrenetFrames(t,e,o),
            m = f.normals,
            g = f.binormals,
            this.tangents = f.tangents,
            this.normals = m,
            this.binormals = g,
            f = 0; y > f; f++)
                for (v[f] = [],
                h = f / (y - 1),
                d = t.getPointAt(h),
                s = m[f],
                l = g[f],
                u = n * a(h),
                h = 0; i > h; h++)
                    c = h / i * 2 * Math.PI,
                    p = -u * Math.cos(c),
                    c = u * Math.sin(c),
                    _.copy(d),
                    _.x += p * s.x + c * l.x,
                    _.y += p * s.y + c * l.y,
                    _.z += p * s.z + c * l.z,
                    v[f][h] = this.vertices.push(new r.Vector3(_.x,_.y,_.z)) - 1;
            for (f = 0; e > f; f++)
                for (h = 0; i > h; h++)
                    a = o ? (f + 1) % e : f + 1,
                    y = (h + 1) % i,
                    t = v[f][h],
                    n = v[a][h],
                    a = v[a][y],
                    y = v[f][y],
                    _ = new r.Vector2(f / e,h / i),
                    m = new r.Vector2((f + 1) / e,h / i),
                    g = new r.Vector2((f + 1) / e,(h + 1) / i),
                    s = new r.Vector2(f / e,(h + 1) / i),
                    this.faces.push(new r.Face3(t,n,y)),
                    this.faceVertexUvs[0].push([_, m, s]),
                    this.faces.push(new r.Face3(n,a,y)),
                    this.faceVertexUvs[0].push([m.clone(), g, s.clone()]);
            this.computeFaceNormals(),
            this.computeVertexNormals()
        }
        ,
        r.TubeGeometry.prototype = Object.create(r.Geometry.prototype),
        r.TubeGeometry.prototype.constructor = r.TubeGeometry,
        r.TubeGeometry.NoTaper = function(t) {
            return 1
        }
        ,
        r.TubeGeometry.SinusoidalTaper = function(t) {
            return Math.sin(Math.PI * t)
        }
        ,
        r.TubeGeometry.FrenetFrames = function(t, e, n) {
            var i = new r.Vector3
              , o = []
              , a = []
              , s = []
              , l = new r.Vector3
              , h = new r.Matrix4;
            e += 1;
            var c, u, p;
            for (this.tangents = o,
            this.normals = a,
            this.binormals = s,
            c = 0; e > c; c++)
                u = c / (e - 1),
                o[c] = t.getTangentAt(u),
                o[c].normalize();
            for (a[0] = new r.Vector3,
            s[0] = new r.Vector3,
            t = Number.MAX_VALUE,
            c = Math.abs(o[0].x),
            u = Math.abs(o[0].y),
            p = Math.abs(o[0].z),
            t >= c && (t = c,
            i.set(1, 0, 0)),
            t >= u && (t = u,
            i.set(0, 1, 0)),
            t >= p && i.set(0, 0, 1),
            l.crossVectors(o[0], i).normalize(),
            a[0].crossVectors(o[0], l),
            s[0].crossVectors(o[0], a[0]),
            c = 1; e > c; c++)
                a[c] = a[c - 1].clone(),
                s[c] = s[c - 1].clone(),
                l.crossVectors(o[c - 1], o[c]),
                1e-4 < l.length() && (l.normalize(),
                i = Math.acos(r.Math.clamp(o[c - 1].dot(o[c]), -1, 1)),
                a[c].applyMatrix4(h.makeRotationAxis(l, i))),
                s[c].crossVectors(o[c], a[c]);
            if (n)
                for (i = Math.acos(r.Math.clamp(a[0].dot(a[e - 1]), -1, 1)),
                i /= e - 1,
                0 < o[0].dot(l.crossVectors(a[0], a[e - 1])) && (i = -i),
                c = 1; e > c; c++)
                    a[c].applyMatrix4(h.makeRotationAxis(o[c], i * c)),
                    s[c].crossVectors(o[c], a[c])
        }
        ,
        r.PolyhedronGeometry = function(t, e, n, i) {
            function o(t) {
                var e = t.normalize().clone();
                e.index = h.vertices.push(e) - 1;
                var n = Math.atan2(t.z, -t.x) / 2 / Math.PI + .5;
                return t = Math.atan2(-t.y, Math.sqrt(t.x * t.x + t.z * t.z)) / Math.PI + .5,
                e.uv = new r.Vector2(n,1 - t),
                e
            }
            function a(t, e, n, i) {
                i = new r.Face3(t.index,e.index,n.index,[t.clone(), e.clone(), n.clone()],void 0,i),
                h.faces.push(i),
                v.copy(t).add(e).add(n).divideScalar(3),
                i = Math.atan2(v.z, -v.x),
                h.faceVertexUvs[0].push([l(t.uv, t, i), l(e.uv, e, i), l(n.uv, n, i)])
            }
            function s(t, e) {
                for (var n = Math.pow(2, e), r = o(h.vertices[t.a]), i = o(h.vertices[t.b]), s = o(h.vertices[t.c]), l = [], c = t.materialIndex, u = 0; n >= u; u++) {
                    l[u] = [];
                    for (var p = o(r.clone().lerp(s, u / n)), d = o(i.clone().lerp(s, u / n)), f = n - u, m = 0; f >= m; m++)
                        l[u][m] = 0 === m && u === n ? p : o(p.clone().lerp(d, m / f))
                }
                for (u = 0; n > u; u++)
                    for (m = 0; 2 * (n - u) - 1 > m; m++)
                        r = Math.floor(m / 2),
                        0 === m % 2 ? a(l[u][r + 1], l[u + 1][r], l[u][r], c) : a(l[u][r + 1], l[u + 1][r + 1], l[u + 1][r], c)
            }
            function l(t, e, n) {
                return 0 > n && 1 === t.x && (t = new r.Vector2(t.x - 1,t.y)),
                0 === e.x && 0 === e.z && (t = new r.Vector2(n / 2 / Math.PI + .5,t.y)),
                t.clone()
            }
            r.Geometry.call(this),
            this.type = "PolyhedronGeometry",
            this.parameters = {
                vertices: t,
                indices: e,
                radius: n,
                detail: i
            },
            n = n || 1,
            i = i || 0;
            for (var h = this, c = 0, u = t.length; u > c; c += 3)
                o(new r.Vector3(t[c],t[c + 1],t[c + 2]));
            t = this.vertices;
            for (var p = [], d = c = 0, u = e.length; u > c; c += 3,
            d++) {
                var f = t[e[c]]
                  , m = t[e[c + 1]]
                  , g = t[e[c + 2]];
                p[d] = new r.Face3(f.index,m.index,g.index,[f.clone(), m.clone(), g.clone()],void 0,d)
            }
            for (var v = new r.Vector3, c = 0, u = p.length; u > c; c++)
                s(p[c], i);
            for (c = 0,
            u = this.faceVertexUvs[0].length; u > c; c++)
                e = this.faceVertexUvs[0][c],
                i = e[0].x,
                t = e[1].x,
                p = e[2].x,
                d = Math.max(i, Math.max(t, p)),
                f = Math.min(i, Math.min(t, p)),
                d > .9 && .1 > f && (.2 > i && (e[0].x += 1),
                .2 > t && (e[1].x += 1),
                .2 > p && (e[2].x += 1));
            for (c = 0,
            u = this.vertices.length; u > c; c++)
                this.vertices[c].multiplyScalar(n);
            this.mergeVertices(),
            this.computeFaceNormals(),
            this.boundingSphere = new r.Sphere(new r.Vector3,n)
        }
        ,
        r.PolyhedronGeometry.prototype = Object.create(r.Geometry.prototype),
        r.PolyhedronGeometry.prototype.constructor = r.PolyhedronGeometry,
        r.PolyhedronGeometry.prototype.clone = function() {
            return new r.PolyhedronGeometry(this.parameters.vertices,this.parameters.indices,this.parameters.radius,this.parameters.detail).copy(this)
        }
        ,
        r.PolyhedronGeometry.prototype.copy = function(t) {
            return r.Geometry.prototype.copy.call(this, t),
            this
        }
        ,
        r.DodecahedronGeometry = function(t, e) {
            var n = (1 + Math.sqrt(5)) / 2
              , i = 1 / n;
            r.PolyhedronGeometry.call(this, [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -i, -n, 0, -i, n, 0, i, -n, 0, i, n, -i, -n, 0, -i, n, 0, i, -n, 0, i, n, 0, -n, 0, -i, n, 0, -i, -n, 0, i, n, 0, i], [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9], t, e),
            this.type = "DodecahedronGeometry",
            this.parameters = {
                radius: t,
                detail: e
            }
        }
        ,
        r.DodecahedronGeometry.prototype = Object.create(r.PolyhedronGeometry.prototype),
        r.DodecahedronGeometry.prototype.constructor = r.DodecahedronGeometry,
        r.DodecahedronGeometry.prototype.clone = function() {
            var t = new r.DodecahedronGeometry(this.parameters.radius,this.parameters.detail);
            return t.copy(this),
            t
        }
        ,
        r.IcosahedronGeometry = function(t, e) {
            var n = (1 + Math.sqrt(5)) / 2;
            r.PolyhedronGeometry.call(this, [-1, n, 0, 1, n, 0, -1, -n, 0, 1, -n, 0, 0, -1, n, 0, 1, n, 0, -1, -n, 0, 1, -n, n, 0, -1, n, 0, 1, -n, 0, -1, -n, 0, 1], [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1], t, e),
            this.type = "IcosahedronGeometry",
            this.parameters = {
                radius: t,
                detail: e
            }
        }
        ,
        r.IcosahedronGeometry.prototype = Object.create(r.PolyhedronGeometry.prototype),
        r.IcosahedronGeometry.prototype.constructor = r.IcosahedronGeometry,
        r.IcosahedronGeometry.prototype.clone = function() {
            var t = new r.IcosahedronGeometry(this.parameters.radius,this.parameters.detail);
            return t.copy(this),
            t
        }
        ,
        r.OctahedronGeometry = function(t, e) {
            r.PolyhedronGeometry.call(this, [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1], [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2], t, e),
            this.type = "OctahedronGeometry",
            this.parameters = {
                radius: t,
                detail: e
            }
        }
        ,
        r.OctahedronGeometry.prototype = Object.create(r.PolyhedronGeometry.prototype),
        r.OctahedronGeometry.prototype.constructor = r.OctahedronGeometry,
        r.OctahedronGeometry.prototype.clone = function() {
            var t = new r.OctahedronGeometry(this.parameters.radius,this.parameters.detail);
            return t.copy(this),
            t
        }
        ,
        r.TetrahedronGeometry = function(t, e) {
            r.PolyhedronGeometry.call(this, [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1], [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1], t, e),
            this.type = "TetrahedronGeometry",
            this.parameters = {
                radius: t,
                detail: e
            }
        }
        ,
        r.TetrahedronGeometry.prototype = Object.create(r.PolyhedronGeometry.prototype),
        r.TetrahedronGeometry.prototype.constructor = r.TetrahedronGeometry,
        r.TetrahedronGeometry.prototype.clone = function() {
            var t = new r.TetrahedronGeometry(this.parameters.radius,this.parameters.detail);
            return t.copy(this),
            t
        }
        ,
        r.ParametricGeometry = function(t, e, n) {
            r.Geometry.call(this),
            this.type = "ParametricGeometry",
            this.parameters = {
                func: t,
                slices: e,
                stacks: n
            };
            var i, o, a, s, l = this.vertices, h = this.faces, c = this.faceVertexUvs[0], u = e + 1;
            for (i = 0; n >= i; i++)
                for (s = i / n,
                o = 0; e >= o; o++)
                    a = o / e,
                    a = t(a, s),
                    l.push(a);
            var p, d, f, m;
            for (i = 0; n > i; i++)
                for (o = 0; e > o; o++)
                    t = i * u + o,
                    l = i * u + o + 1,
                    s = (i + 1) * u + o + 1,
                    a = (i + 1) * u + o,
                    p = new r.Vector2(o / e,i / n),
                    d = new r.Vector2((o + 1) / e,i / n),
                    f = new r.Vector2((o + 1) / e,(i + 1) / n),
                    m = new r.Vector2(o / e,(i + 1) / n),
                    h.push(new r.Face3(t,l,a)),
                    c.push([p, d, m]),
                    h.push(new r.Face3(l,s,a)),
                    c.push([d.clone(), f, m.clone()]);
            this.computeFaceNormals(),
            this.computeVertexNormals()
        }
        ,
        r.ParametricGeometry.prototype = Object.create(r.Geometry.prototype),
        r.ParametricGeometry.prototype.constructor = r.ParametricGeometry,
        r.WireframeGeometry = function(t) {
            r.BufferGeometry.call(this);
            var e = [0, 0]
              , n = {}
              , i = function(t, e) {
                return t - e
            }
              , o = ["a", "b", "c"];
            if (t instanceof r.Geometry) {
                var a = t.vertices
                  , s = t.faces
                  , l = 0
                  , h = new Uint32Array(6 * s.length);
                t = 0;
                for (var c = s.length; c > t; t++)
                    for (var u = s[t], p = 0; 3 > p; p++) {
                        e[0] = u[o[p]],
                        e[1] = u[o[(p + 1) % 3]],
                        e.sort(i);
                        var d = e.toString();
                        void 0 === n[d] && (h[2 * l] = e[0],
                        h[2 * l + 1] = e[1],
                        n[d] = !0,
                        l++)
                    }
                for (e = new Float32Array(6 * l),
                t = 0,
                c = l; c > t; t++)
                    for (p = 0; 2 > p; p++)
                        n = a[h[2 * t + p]],
                        l = 6 * t + 3 * p,
                        e[l + 0] = n.x,
                        e[l + 1] = n.y,
                        e[l + 2] = n.z;
                this.addAttribute("position", new r.BufferAttribute(e,3))
            } else if (t instanceof r.BufferGeometry) {
                if (null !== t.index) {
                    for (c = t.index.array,
                    a = t.attributes.position,
                    o = t.drawcalls,
                    l = 0,
                    0 === o.length && t.addDrawCall(0, c.length),
                    h = new Uint32Array(2 * c.length),
                    s = 0,
                    u = o.length; u > s; ++s) {
                        t = o[s],
                        p = t.start,
                        d = t.count,
                        t = p;
                        for (var f = p + d; f > t; t += 3)
                            for (p = 0; 3 > p; p++)
                                e[0] = c[t + p],
                                e[1] = c[t + (p + 1) % 3],
                                e.sort(i),
                                d = e.toString(),
                                void 0 === n[d] && (h[2 * l] = e[0],
                                h[2 * l + 1] = e[1],
                                n[d] = !0,
                                l++)
                    }
                    for (e = new Float32Array(6 * l),
                    t = 0,
                    c = l; c > t; t++)
                        for (p = 0; 2 > p; p++)
                            l = 6 * t + 3 * p,
                            n = h[2 * t + p],
                            e[l + 0] = a.getX(n),
                            e[l + 1] = a.getY(n),
                            e[l + 2] = a.getZ(n)
                } else
                    for (a = t.attributes.position.array,
                    l = a.length / 3,
                    h = l / 3,
                    e = new Float32Array(6 * l),
                    t = 0,
                    c = h; c > t; t++)
                        for (p = 0; 3 > p; p++)
                            l = 18 * t + 6 * p,
                            h = 9 * t + 3 * p,
                            e[l + 0] = a[h],
                            e[l + 1] = a[h + 1],
                            e[l + 2] = a[h + 2],
                            n = 9 * t + (p + 1) % 3 * 3,
                            e[l + 3] = a[n],
                            e[l + 4] = a[n + 1],
                            e[l + 5] = a[n + 2];
                this.addAttribute("position", new r.BufferAttribute(e,3))
            }
        }
        ,
        r.WireframeGeometry.prototype = Object.create(r.BufferGeometry.prototype),
        r.WireframeGeometry.prototype.constructor = r.WireframeGeometry,
        r.AxisHelper = function(t) {
            t = t || 1;
            var e = new Float32Array([0, 0, 0, t, 0, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, 0, t])
              , n = new Float32Array([1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1]);
            t = new r.BufferGeometry,
            t.addAttribute("position", new r.BufferAttribute(e,3)),
            t.addAttribute("color", new r.BufferAttribute(n,3)),
            e = new r.LineBasicMaterial({
                vertexColors: r.VertexColors
            }),
            r.LineSegments.call(this, t, e)
        }
        ,
        r.AxisHelper.prototype = Object.create(r.LineSegments.prototype),
        r.AxisHelper.prototype.constructor = r.AxisHelper,
        r.ArrowHelper = function() {
            var t = new r.Geometry;
            t.vertices.push(new r.Vector3(0,0,0), new r.Vector3(0,1,0));
            var e = new r.CylinderGeometry(0,.5,1,5,1);
            return e.translate(0, -.5, 0),
            function(n, i, o, a, s, l) {
                r.Object3D.call(this),
                void 0 === a && (a = 16776960),
                void 0 === o && (o = 1),
                void 0 === s && (s = .2 * o),
                void 0 === l && (l = .2 * s),
                this.position.copy(i),
                o > s && (this.line = new r.Line(t,new r.LineBasicMaterial({
                    color: a
                })),
                this.line.matrixAutoUpdate = !1,
                this.add(this.line)),
                this.cone = new r.Mesh(e,new r.MeshBasicMaterial({
                    color: a
                })),
                this.cone.matrixAutoUpdate = !1,
                this.add(this.cone),
                this.setDirection(n),
                this.setLength(o, s, l)
            }
        }(),
        r.ArrowHelper.prototype = Object.create(r.Object3D.prototype),
        r.ArrowHelper.prototype.constructor = r.ArrowHelper,
        r.ArrowHelper.prototype.setDirection = function() {
            var t, e = new r.Vector3;
            return function(n) {
                .99999 < n.y ? this.quaternion.set(0, 0, 0, 1) : -.99999 > n.y ? this.quaternion.set(1, 0, 0, 0) : (e.set(n.z, 0, -n.x).normalize(),
                t = Math.acos(n.y),
                this.quaternion.setFromAxisAngle(e, t))
            }
        }(),
        r.ArrowHelper.prototype.setLength = function(t, e, n) {
            void 0 === e && (e = .2 * t),
            void 0 === n && (n = .2 * e),
            t > e && (this.line.scale.set(1, t - e, 1),
            this.line.updateMatrix()),
            this.cone.scale.set(n, e, n),
            this.cone.position.y = t,
            this.cone.updateMatrix()
        }
        ,
        r.ArrowHelper.prototype.setColor = function(t) {
            void 0 !== this.line && this.line.material.color.set(t),
            this.cone.material.color.set(t)
        }
        ,
        r.BoxHelper = function(t) {
            var e = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7])
              , n = new Float32Array(24)
              , i = new r.BufferGeometry;
            i.setIndex(new r.BufferAttribute(e,1)),
            i.addAttribute("position", new r.BufferAttribute(n,3)),
            r.LineSegments.call(this, i, new r.LineBasicMaterial({
                color: 16776960
            })),
            void 0 !== t && this.update(t)
        }
        ,
        r.BoxHelper.prototype = Object.create(r.LineSegments.prototype),
        r.BoxHelper.prototype.constructor = r.BoxHelper,
        r.BoxHelper.prototype.update = function() {
            var t = new r.Box3;
            return function(e) {
                if (t.setFromObject(e),
                !t.empty()) {
                    e = t.min;
                    var n = t.max
                      , r = this.geometry.attributes.position
                      , i = r.array;
                    i[0] = n.x,
                    i[1] = n.y,
                    i[2] = n.z,
                    i[3] = e.x,
                    i[4] = n.y,
                    i[5] = n.z,
                    i[6] = e.x,
                    i[7] = e.y,
                    i[8] = n.z,
                    i[9] = n.x,
                    i[10] = e.y,
                    i[11] = n.z,
                    i[12] = n.x,
                    i[13] = n.y,
                    i[14] = e.z,
                    i[15] = e.x,
                    i[16] = n.y,
                    i[17] = e.z,
                    i[18] = e.x,
                    i[19] = e.y,
                    i[20] = e.z,
                    i[21] = n.x,
                    i[22] = e.y,
                    i[23] = e.z,
                    r.needsUpdate = !0,
                    this.geometry.computeBoundingSphere()
                }
            }
        }(),
        r.BoundingBoxHelper = function(t, e) {
            var n = void 0 !== e ? e : 8947848;
            this.object = t,
            this.box = new r.Box3,
            r.Mesh.call(this, new r.BoxGeometry(1,1,1), new r.MeshBasicMaterial({
                color: n,
                wireframe: !0
            }))
        }
        ,
        r.BoundingBoxHelper.prototype = Object.create(r.Mesh.prototype),
        r.BoundingBoxHelper.prototype.constructor = r.BoundingBoxHelper,
        r.BoundingBoxHelper.prototype.update = function() {
            this.box.setFromObject(this.object),
            this.box.size(this.scale),
            this.box.center(this.position)
        }
        ,
        r.CameraHelper = function(t) {
            function e(t, e, r) {
                n(t, r),
                n(e, r)
            }
            function n(t, e) {
                i.vertices.push(new r.Vector3),
                i.colors.push(new r.Color(e)),
                void 0 === a[t] && (a[t] = []),
                a[t].push(i.vertices.length - 1)
            }
            var i = new r.Geometry
              , o = new r.LineBasicMaterial({
                color: 16777215,
                vertexColors: r.FaceColors
            })
              , a = {};
            e("n1", "n2", 16755200),
            e("n2", "n4", 16755200),
            e("n4", "n3", 16755200),
            e("n3", "n1", 16755200),
            e("f1", "f2", 16755200),
            e("f2", "f4", 16755200),
            e("f4", "f3", 16755200),
            e("f3", "f1", 16755200),
            e("n1", "f1", 16755200),
            e("n2", "f2", 16755200),
            e("n3", "f3", 16755200),
            e("n4", "f4", 16755200),
            e("p", "n1", 16711680),
            e("p", "n2", 16711680),
            e("p", "n3", 16711680),
            e("p", "n4", 16711680),
            e("u1", "u2", 43775),
            e("u2", "u3", 43775),
            e("u3", "u1", 43775),
            e("c", "t", 16777215),
            e("p", "c", 3355443),
            e("cn1", "cn2", 3355443),
            e("cn3", "cn4", 3355443),
            e("cf1", "cf2", 3355443),
            e("cf3", "cf4", 3355443),
            r.LineSegments.call(this, i, o),
            this.camera = t,
            this.matrix = t.matrixWorld,
            this.matrixAutoUpdate = !1,
            this.pointMap = a,
            this.update()
        }
        ,
        r.CameraHelper.prototype = Object.create(r.LineSegments.prototype),
        r.CameraHelper.prototype.constructor = r.CameraHelper,
        r.CameraHelper.prototype.update = function() {
            var t, e, n = new r.Vector3, i = new r.Camera, o = function(r, o, a, s) {
                if (n.set(o, a, s).unproject(i),
                r = e[r],
                void 0 !== r)
                    for (o = 0,
                    a = r.length; a > o; o++)
                        t.vertices[r[o]].copy(n)
            };
            return function() {
                t = this.geometry,
                e = this.pointMap,
                i.projectionMatrix.copy(this.camera.projectionMatrix),
                o("c", 0, 0, -1),
                o("t", 0, 0, 1),
                o("n1", -1, -1, -1),
                o("n2", 1, -1, -1),
                o("n3", -1, 1, -1),
                o("n4", 1, 1, -1),
                o("f1", -1, -1, 1),
                o("f2", 1, -1, 1),
                o("f3", -1, 1, 1),
                o("f4", 1, 1, 1),
                o("u1", .7, 1.1, -1),
                o("u2", -.7, 1.1, -1),
                o("u3", 0, 2, -1),
                o("cf1", -1, 0, 1),
                o("cf2", 1, 0, 1),
                o("cf3", 0, -1, 1),
                o("cf4", 0, 1, 1),
                o("cn1", -1, 0, -1),
                o("cn2", 1, 0, -1),
                o("cn3", 0, -1, -1),
                o("cn4", 0, 1, -1),
                t.verticesNeedUpdate = !0
            }
        }(),
        r.DirectionalLightHelper = function(t, e) {
            r.Object3D.call(this),
            this.light = t,
            this.light.updateMatrixWorld(),
            this.matrix = t.matrixWorld,
            this.matrixAutoUpdate = !1,
            e = e || 1;
            var n = new r.Geometry;
            n.vertices.push(new r.Vector3(-e,e,0), new r.Vector3(e,e,0), new r.Vector3(e,-e,0), new r.Vector3(-e,-e,0), new r.Vector3(-e,e,0));
            var i = new r.LineBasicMaterial({
                fog: !1
            });
            i.color.copy(this.light.color).multiplyScalar(this.light.intensity),
            this.lightPlane = new r.Line(n,i),
            this.add(this.lightPlane),
            n = new r.Geometry,
            n.vertices.push(new r.Vector3, new r.Vector3),
            i = new r.LineBasicMaterial({
                fog: !1
            }),
            i.color.copy(this.light.color).multiplyScalar(this.light.intensity),
            this.targetLine = new r.Line(n,i),
            this.add(this.targetLine),
            this.update()
        }
        ,
        r.DirectionalLightHelper.prototype = Object.create(r.Object3D.prototype),
        r.DirectionalLightHelper.prototype.constructor = r.DirectionalLightHelper,
        r.DirectionalLightHelper.prototype.dispose = function() {
            this.lightPlane.geometry.dispose(),
            this.lightPlane.material.dispose(),
            this.targetLine.geometry.dispose(),
            this.targetLine.material.dispose()
        }
        ,
        r.DirectionalLightHelper.prototype.update = function() {
            var t = new r.Vector3
              , e = new r.Vector3
              , n = new r.Vector3;
            return function() {
                t.setFromMatrixPosition(this.light.matrixWorld),
                e.setFromMatrixPosition(this.light.target.matrixWorld),
                n.subVectors(e, t),
                this.lightPlane.lookAt(n),
                this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),
                this.targetLine.geometry.vertices[1].copy(n),
                this.targetLine.geometry.verticesNeedUpdate = !0,
                this.targetLine.material.color.copy(this.lightPlane.material.color)
            }
        }(),
        r.EdgesHelper = function(t, e, n) {
            e = void 0 !== e ? e : 16777215,
            r.LineSegments.call(this, new r.EdgesGeometry(t.geometry,n), new r.LineBasicMaterial({
                color: e
            })),
            this.matrix = t.matrixWorld,
            this.matrixAutoUpdate = !1
        }
        ,
        r.EdgesHelper.prototype = Object.create(r.LineSegments.prototype),
        r.EdgesHelper.prototype.constructor = r.EdgesHelper,
        r.FaceNormalsHelper = function(t, e, n, i) {
            this.object = t,
            this.size = void 0 !== e ? e : 1,
            t = void 0 !== n ? n : 16776960,
            i = void 0 !== i ? i : 1,
            e = 0,
            n = this.object.geometry,
            n instanceof r.Geometry ? e = n.faces.length : console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),
            n = new r.BufferGeometry,
            e = new r.Float32Attribute(6 * e,3),
            n.addAttribute("position", e),
            r.LineSegments.call(this, n, new r.LineBasicMaterial({
                color: t,
                linewidth: i
            })),
            this.matrixAutoUpdate = !1,
            this.update()
        }
        ,
        r.FaceNormalsHelper.prototype = Object.create(r.LineSegments.prototype),
        r.FaceNormalsHelper.prototype.constructor = r.FaceNormalsHelper,
        r.FaceNormalsHelper.prototype.update = function() {
            var t = new r.Vector3
              , e = new r.Vector3
              , n = new r.Matrix3;
            return function() {
                this.object.updateMatrixWorld(!0),
                n.getNormalMatrix(this.object.matrixWorld);
                for (var r = this.object.matrixWorld, i = this.geometry.attributes.position, o = this.object.geometry, a = o.vertices, o = o.faces, s = 0, l = 0, h = o.length; h > l; l++) {
                    var c = o[l]
                      , u = c.normal;
                    t.copy(a[c.a]).add(a[c.b]).add(a[c.c]).divideScalar(3).applyMatrix4(r),
                    e.copy(u).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),
                    i.setXYZ(s, t.x, t.y, t.z),
                    s += 1,
                    i.setXYZ(s, e.x, e.y, e.z),
                    s += 1
                }
                return i.needsUpdate = !0,
                this
            }
        }(),
        r.GridHelper = function(t, e) {
            var n = new r.Geometry
              , i = new r.LineBasicMaterial({
                vertexColors: r.VertexColors
            });
            this.color1 = new r.Color(4473924),
            this.color2 = new r.Color(8947848);
            for (var o = -t; t >= o; o += e) {
                n.vertices.push(new r.Vector3(-t,0,o), new r.Vector3(t,0,o), new r.Vector3(o,0,-t), new r.Vector3(o,0,t));
                var a = 0 === o ? this.color1 : this.color2;
                n.colors.push(a, a, a, a)
            }
            r.LineSegments.call(this, n, i)
        }
        ,
        r.GridHelper.prototype = Object.create(r.LineSegments.prototype),
        r.GridHelper.prototype.constructor = r.GridHelper,
        r.GridHelper.prototype.setColors = function(t, e) {
            this.color1.set(t),
            this.color2.set(e),
            this.geometry.colorsNeedUpdate = !0
        }
        ,
        r.HemisphereLightHelper = function(t, e) {
            r.Object3D.call(this),
            this.light = t,
            this.light.updateMatrixWorld(),
            this.matrix = t.matrixWorld,
            this.matrixAutoUpdate = !1,
            this.colors = [new r.Color, new r.Color];
            var n = new r.SphereGeometry(e,4,2);
            n.rotateX(-Math.PI / 2);
            for (var i = 0; 8 > i; i++)
                n.faces[i].color = this.colors[4 > i ? 0 : 1];
            i = new r.MeshBasicMaterial({
                vertexColors: r.FaceColors,
                wireframe: !0
            }),
            this.lightSphere = new r.Mesh(n,i),
            this.add(this.lightSphere),
            this.update()
        }
        ,
        r.HemisphereLightHelper.prototype = Object.create(r.Object3D.prototype),
        r.HemisphereLightHelper.prototype.constructor = r.HemisphereLightHelper,
        r.HemisphereLightHelper.prototype.dispose = function() {
            this.lightSphere.geometry.dispose(),
            this.lightSphere.material.dispose()
        }
        ,
        r.HemisphereLightHelper.prototype.update = function() {
            var t = new r.Vector3;
            return function() {
                this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),
                this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),
                this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),
                this.lightSphere.geometry.colorsNeedUpdate = !0
            }
        }(),
        r.PointLightHelper = function(t, e) {
            this.light = t,
            this.light.updateMatrixWorld();
            var n = new r.SphereGeometry(e,4,2)
              , i = new r.MeshBasicMaterial({
                wireframe: !0,
                fog: !1
            });
            i.color.copy(this.light.color).multiplyScalar(this.light.intensity),
            r.Mesh.call(this, n, i),
            this.matrix = this.light.matrixWorld,
            this.matrixAutoUpdate = !1
        }
        ,
        r.PointLightHelper.prototype = Object.create(r.Mesh.prototype),
        r.PointLightHelper.prototype.constructor = r.PointLightHelper,
        r.PointLightHelper.prototype.dispose = function() {
            this.geometry.dispose(),
            this.material.dispose()
        }
        ,
        r.PointLightHelper.prototype.update = function() {
            this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
        }
        ,
        r.SkeletonHelper = function(t) {
            this.bones = this.getBoneList(t);
            for (var e = new r.Geometry, n = 0; n < this.bones.length; n++)
                this.bones[n].parent instanceof r.Bone && (e.vertices.push(new r.Vector3),
                e.vertices.push(new r.Vector3),
                e.colors.push(new r.Color(0,0,1)),
                e.colors.push(new r.Color(0,1,0)));
            e.dynamic = !0,
            n = new r.LineBasicMaterial({
                vertexColors: r.VertexColors,
                depthTest: !1,
                depthWrite: !1,
                transparent: !0
            }),
            r.LineSegments.call(this, e, n),
            this.root = t,
            this.matrix = t.matrixWorld,
            this.matrixAutoUpdate = !1,
            this.update()
        }
        ,
        r.SkeletonHelper.prototype = Object.create(r.LineSegments.prototype),
        r.SkeletonHelper.prototype.constructor = r.SkeletonHelper,
        r.SkeletonHelper.prototype.getBoneList = function(t) {
            var e = [];
            t instanceof r.Bone && e.push(t);
            for (var n = 0; n < t.children.length; n++)
                e.push.apply(e, this.getBoneList(t.children[n]));
            return e
        }
        ,
        r.SkeletonHelper.prototype.update = function() {
            for (var t = this.geometry, e = (new r.Matrix4).getInverse(this.root.matrixWorld), n = new r.Matrix4, i = 0, o = 0; o < this.bones.length; o++) {
                var a = this.bones[o];
                a.parent instanceof r.Bone && (n.multiplyMatrices(e, a.matrixWorld),
                t.vertices[i].setFromMatrixPosition(n),
                n.multiplyMatrices(e, a.parent.matrixWorld),
                t.vertices[i + 1].setFromMatrixPosition(n),
                i += 2)
            }
            t.verticesNeedUpdate = !0,
            t.computeBoundingSphere()
        }
        ,
        r.SpotLightHelper = function(t) {
            r.Object3D.call(this),
            this.light = t,
            this.light.updateMatrixWorld(),
            this.matrix = t.matrixWorld,
            this.matrixAutoUpdate = !1,
            t = new r.CylinderGeometry(0,1,1,8,1,!0),
            t.translate(0, -.5, 0),
            t.rotateX(-Math.PI / 2);
            var e = new r.MeshBasicMaterial({
                wireframe: !0,
                fog: !1
            });
            this.cone = new r.Mesh(t,e),
            this.add(this.cone),
            this.update()
        }
        ,
        r.SpotLightHelper.prototype = Object.create(r.Object3D.prototype),
        r.SpotLightHelper.prototype.constructor = r.SpotLightHelper,
        r.SpotLightHelper.prototype.dispose = function() {
            this.cone.geometry.dispose(),
            this.cone.material.dispose()
        }
        ,
        r.SpotLightHelper.prototype.update = function() {
            var t = new r.Vector3
              , e = new r.Vector3;
            return function() {
                var n = this.light.distance ? this.light.distance : 1e4
                  , r = n * Math.tan(this.light.angle);
                this.cone.scale.set(r, r, n),
                t.setFromMatrixPosition(this.light.matrixWorld),
                e.setFromMatrixPosition(this.light.target.matrixWorld),
                this.cone.lookAt(e.sub(t)),
                this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
            }
        }(),
        r.VertexNormalsHelper = function(t, e, n, i) {
            this.object = t,
            this.size = void 0 !== e ? e : 1,
            t = void 0 !== n ? n : 16711680,
            i = void 0 !== i ? i : 1,
            e = 0,
            n = this.object.geometry,
            n instanceof r.Geometry ? e = 3 * n.faces.length : n instanceof r.BufferGeometry && (e = n.attributes.normal.count),
            n = new r.BufferGeometry,
            e = new r.Float32Attribute(6 * e,3),
            n.addAttribute("position", e),
            r.LineSegments.call(this, n, new r.LineBasicMaterial({
                color: t,
                linewidth: i
            })),
            this.matrixAutoUpdate = !1,
            this.update()
        }
        ,
        r.VertexNormalsHelper.prototype = Object.create(r.LineSegments.prototype),
        r.VertexNormalsHelper.prototype.constructor = r.VertexNormalsHelper,
        r.VertexNormalsHelper.prototype.update = function() {
            var t = new r.Vector3
              , e = new r.Vector3
              , n = new r.Matrix3;
            return function() {
                var i = ["a", "b", "c"];
                this.object.updateMatrixWorld(!0),
                n.getNormalMatrix(this.object.matrixWorld);
                var o = this.object.matrixWorld
                  , a = this.geometry.attributes.position
                  , s = this.object.geometry;
                if (s instanceof r.Geometry)
                    for (var l = s.vertices, h = s.faces, c = s = 0, u = h.length; u > c; c++)
                        for (var p = h[c], d = 0, f = p.vertexNormals.length; f > d; d++) {
                            var m = p.vertexNormals[d];
                            t.copy(l[p[i[d]]]).applyMatrix4(o),
                            e.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),
                            a.setXYZ(s, t.x, t.y, t.z),
                            s += 1,
                            a.setXYZ(s, e.x, e.y, e.z),
                            s += 1
                        }
                else if (s instanceof r.BufferGeometry)
                    for (i = s.attributes.position,
                    l = s.attributes.normal,
                    d = s = 0,
                    f = i.count; f > d; d++)
                        t.set(i.getX(d), i.getY(d), i.getZ(d)).applyMatrix4(o),
                        e.set(l.getX(d), l.getY(d), l.getZ(d)),
                        e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),
                        a.setXYZ(s, t.x, t.y, t.z),
                        s += 1,
                        a.setXYZ(s, e.x, e.y, e.z),
                        s += 1;
                return a.needsUpdate = !0,
                this
            }
        }(),
        r.WireframeHelper = function(t, e) {
            var n = void 0 !== e ? e : 16777215;
            r.LineSegments.call(this, new r.WireframeGeometry(t.geometry), new r.LineBasicMaterial({
                color: n
            })),
            this.matrix = t.matrixWorld,
            this.matrixAutoUpdate = !1
        }
        ,
        r.WireframeHelper.prototype = Object.create(r.LineSegments.prototype),
        r.WireframeHelper.prototype.constructor = r.WireframeHelper,
        r.ImmediateRenderObject = function() {
            r.Object3D.call(this),
            this.render = function(t) {}
        }
        ,
        r.ImmediateRenderObject.prototype = Object.create(r.Object3D.prototype),
        r.ImmediateRenderObject.prototype.constructor = r.ImmediateRenderObject,
        r.MorphBlendMesh = function(t, e) {
            r.Mesh.call(this, t, e),
            this.animationsMap = {},
            this.animationsList = [];
            var n = this.geometry.morphTargets.length;
            this.createAnimation("__default", 0, n - 1, n / 1),
            this.setAnimationWeight("__default", 1)
        }
        ,
        r.MorphBlendMesh.prototype = Object.create(r.Mesh.prototype),
        r.MorphBlendMesh.prototype.constructor = r.MorphBlendMesh,
        r.MorphBlendMesh.prototype.createAnimation = function(t, e, n, r) {
            e = {
                start: e,
                end: n,
                length: n - e + 1,
                fps: r,
                duration: (n - e) / r,
                lastFrame: 0,
                currentFrame: 0,
                active: !1,
                time: 0,
                direction: 1,
                weight: 1,
                directionBackwards: !1,
                mirroredLoop: !1
            },
            this.animationsMap[t] = e,
            this.animationsList.push(e)
        }
        ,
        r.MorphBlendMesh.prototype.autoCreateAnimations = function(t) {
            for (var e, n = /([a-z]+)_?(\d+)/, r = {}, i = this.geometry, o = 0, a = i.morphTargets.length; a > o; o++) {
                var s = i.morphTargets[o].name.match(n);
                if (s && 1 < s.length) {
                    var l = s[1];
                    r[l] || (r[l] = {
                        start: 1 / 0,
                        end: -(1 / 0)
                    }),
                    s = r[l],
                    o < s.start && (s.start = o),
                    o > s.end && (s.end = o),
                    e || (e = l)
                }
            }
            for (l in r)
                s = r[l],
                this.createAnimation(l, s.start, s.end, t);
            this.firstAnimation = e
        }
        ,
        r.MorphBlendMesh.prototype.setAnimationDirectionForward = function(t) {
            (t = this.animationsMap[t]) && (t.direction = 1,
            t.directionBackwards = !1)
        }
        ,
        r.MorphBlendMesh.prototype.setAnimationDirectionBackward = function(t) {
            (t = this.animationsMap[t]) && (t.direction = -1,
            t.directionBackwards = !0)
        }
        ,
        r.MorphBlendMesh.prototype.setAnimationFPS = function(t, e) {
            var n = this.animationsMap[t];
            n && (n.fps = e,
            n.duration = (n.end - n.start) / n.fps)
        }
        ,
        r.MorphBlendMesh.prototype.setAnimationDuration = function(t, e) {
            var n = this.animationsMap[t];
            n && (n.duration = e,
            n.fps = (n.end - n.start) / n.duration)
        }
        ,
        r.MorphBlendMesh.prototype.setAnimationWeight = function(t, e) {
            var n = this.animationsMap[t];
            n && (n.weight = e)
        }
        ,
        r.MorphBlendMesh.prototype.setAnimationTime = function(t, e) {
            var n = this.animationsMap[t];
            n && (n.time = e)
        }
        ,
        r.MorphBlendMesh.prototype.getAnimationTime = function(t) {
            var e = 0;
            return (t = this.animationsMap[t]) && (e = t.time),
            e
        }
        ,
        r.MorphBlendMesh.prototype.getAnimationDuration = function(t) {
            var e = -1;
            return (t = this.animationsMap[t]) && (e = t.duration),
            e
        }
        ,
        r.MorphBlendMesh.prototype.playAnimation = function(t) {
            var e = this.animationsMap[t];
            e ? (e.time = 0,
            e.active = !0) : console.warn("THREE.MorphBlendMesh: animation[" + t + "] undefined in .playAnimation()")
        }
        ,
        r.MorphBlendMesh.prototype.stopAnimation = function(t) {
            (t = this.animationsMap[t]) && (t.active = !1)
        }
        ,
        r.MorphBlendMesh.prototype.update = function(t) {
            for (var e = 0, n = this.animationsList.length; n > e; e++) {
                var i = this.animationsList[e];
                if (i.active) {
                    var o = i.duration / i.length;
                    i.time += i.direction * t,
                    i.mirroredLoop ? (i.time > i.duration || 0 > i.time) && (i.direction *= -1,
                    i.time > i.duration && (i.time = i.duration,
                    i.directionBackwards = !0),
                    0 > i.time && (i.time = 0,
                    i.directionBackwards = !1)) : (i.time %= i.duration,
                    0 > i.time && (i.time += i.duration));
                    var a = i.start + r.Math.clamp(Math.floor(i.time / o), 0, i.length - 1)
                      , s = i.weight;
                    a !== i.currentFrame && (this.morphTargetInfluences[i.lastFrame] = 0,
                    this.morphTargetInfluences[i.currentFrame] = 1 * s,
                    this.morphTargetInfluences[a] = 0,
                    i.lastFrame = i.currentFrame,
                    i.currentFrame = a),
                    o = i.time % o / o,
                    i.directionBackwards && (o = 1 - o),
                    i.currentFrame !== i.lastFrame ? (this.morphTargetInfluences[i.currentFrame] = o * s,
                    this.morphTargetInfluences[i.lastFrame] = (1 - o) * s) : this.morphTargetInfluences[i.currentFrame] = s
                }
            }
        }
    }
    , {}],
    140: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="app"><h1 style="display: none">La french touch, by martell</h1><div id="mainCanvas"></div><div class="home-start-btn">' + (null == (__t = locale.home.startBtn) ? "" : __t) + '</div><div class="home-logo"></div><div id="intro" class="v-align"></div><div id="outro" class="v-align"></div><div class="logo"><div class="icons-intro icon-logo"></div><div class="intro-language"><select><option value="zh_CN"></option><option value="en_EN">English</option><option value="vi_VNM">Ting Vit</option><option value="zh_TW"></option></select><div class="icons-intro icon-language"></div><div class="text-language">' + (null == (__t = locale.intro.langue) ? "" : __t) + '</div></div></div><div id="intro-desktop" class="v-align"></div></div>';
            return __p
        }
    }
    , {
        lodash: 10
    }],
    141: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="compatibility-container v-align"><div class="compatibility">' + (null == (__t = locale.compatibility.text) ? "" : __t) + '<div class="dropdown"><span>' + (null == (__t = locale.compatibility.choose) ? "" : __t) + '</span><select><option disabled="disabled" selected="selected" value="" style="display:none">---</option><option value="chrome">' + (null == (__t = locale.compatibility.chrome) ? "" : __t) + '</option><option value="firefox">' + (null == (__t = locale.compatibility.firefox) ? "" : __t) + '</option></select><span class="arrow"></span></div><button><div class="button-left"></div><div class="button-right"></div><div class="button-top"></div><div class="button-bottom"></div><div class="button-text">' + (null == (__t = locale.compatibility["continue"]) ? "" : __t) + '</div></button><div class="degraded">' + (null == (__t = locale.compatibility.degraded) ? "" : __t) + '</div></div><div class="background"></div></div>';
            return __p
        }
    }
    , {
        lodash: 10
    }],
    142: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="intro-cs"><div class="intro-cs-legals">' + (null == (__t = locale.intro.legals) ? "" : __t) + '</div><button><div class="button-left"></div><div class="button-right"></div><div class="button-top"></div><div class="button-bottom"></div><div class="button-text">' + (null == (__t = locale.home.startBtn) ? "" : __t) + "</div></button></div>";
            return __p
        }
    }
    , {
        lodash: 10
    }],
    143: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="outro-background"></div><div class="outro-wrapper"><div class="congrats"><h1></h1><p class="sub">' + (null == (__t = locale.outro.congrats.sub) ? "" : __t) + '</p><p class="notice">' + (null == (__t = locale.outro.congrats.notice) ? "" : __t) + '</p></div></div>"';
            return __p
        }
    }
    , {
        lodash: 10
    }],
    144: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div><div class="intro-header"></div><div class="intro-home-subtitle">' + (null == (__t = locale.intro.subtitleFT) ? "" : __t) + '</div><div><div class="intro-qr"></div></div><div class="intro-home-notice1">' + (null == (__t = locale.desktop.notice1) ? "" : __t) + '</div><div class="intro-home-notice2">' + (null == (__t = locale.desktop.notice2) ? "" : __t) + '</div><div class="intro-logo"></div><img class="background" src="img/intro/bg-desktop.jpg"></div>';
            return __p
        }
    }
    , {
        lodash: 10
    }],
    145: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="intro-home"><div class="intro-home-logo"><div class="intro-home-la"><div class="intro-home-l alpha alpha-l-small"></div><div class="intro-home-a alpha alpha-a-small"></div></div><div class="intro-home-french"><div class="intro-home-f alpha alpha-f"></div><div class="intro-home-r alpha alpha-r"></div><div class="intro-home-e alpha alpha-e"></div><div class="intro-home-n alpha alpha-n"></div><div class="intro-home-c alpha alpha-c"></div><div class="intro-home-h alpha alpha-h"></div></div><div class="intro-home-touch"><div class="intro-home-t alpha alpha-t"></div><div class="intro-home-o alpha alpha-o"></div><div class="intro-home-u alpha alpha-u"></div><div class="intro-home-c alpha alpha-c"></div><div class="intro-home-h alpha alpha-h"></div></div></div><div class="intro-home-subtitle">' + (null == (__t = locale.intro.subtitleFT) ? "" : __t) + '</div><div class="intro-home-launch">' + (null == (__t = locale.intro.launchXP) ? "" : __t) + '</div><div class="icon-cardboard icons-intro"></div>',
                __p += settings.CUSTOM_VERSION ? '<div class="separator-wrapper v-align"><div class="separator"></div></div><div class="icon-iphone icons-intro"></div>' : '<a class="intro-home-get" href="http://lftapl.dangdaimingshi.com/?utm_source=VR&utm_medium=VR&utm_campaign=MNB_DDMS">' + (null == (__t = locale.intro.order) ? "" : __t) + "</a>",
                __p += "</div>";
            return __p
        }
    }
    , {
        lodash: 10
    }],
    146: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="nowebgl v-align"><div class="compatibility">' + (null == (__t = locale.nowebgl.text) ? "" : __t) + '<div class="dropdown"><span>' + (null == (__t = locale.nowebgl.choose) ? "" : __t) + '</span><select><option disabled="disabled" selected="selected" value="" style="display:none">---</option><option value="chrome">' + (null == (__t = locale.nowebgl.chrome) ? "" : __t) + '</option><option value="firefox">' + (null == (__t = locale.nowebgl.firefox) ? "" : __t) + '</option><option value="yandex">' + (null == (__t = locale.nowebgl.yandex) ? "" : __t) + '</option><option value="ucbrowser">' + (null == (__t = locale.nowebgl.ucbrowser) ? "" : __t) + '</option></select><span class="arrow"></span></div></div><div class="background"></div><div class="logo"><div class="icons-intro icon-logo"></div><div class="intro-language"><select><option value="zh_CN"></option><option value="en_EN">English</option></select><div class="icons-intro icon-language"></div><div class="text-language">language</div></div></div></div>';
            return __p
        }
    }
    , {
        lodash: 10
    }],
    147: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="intro-order"><div class="intro-order-title">' + (null == (__t = locale.intro.getyour) ? "" : __t) + '<div class="intro-order-cardboardtext"></div></div><div class="intro-order-subtitle"><div class="intro-order-wrapper">' + (null == (__t = locale.intro.immersive) ? "" : __t) + '</div></div><button class="button-order"><div class="button-left"></div><div class="button-right"></div><div class="button-top"></div><div class="button-bottom"></div><div class="button-text"><a href="http://lftapl.dangdaimingshi.com/?utm_source=VR&utm_medium=VR&utm_campaign=MNB_DDMS" target="_blank">' + (null == (__t = locale.intro.ordernow) ? "" : __t) + '</a></div></button><div class="intro-order-play">' + (null == (__t = locale.intro.play) ? "" : __t) + '</div><button class="button-launch"><div class="button-left"></div><div class="button-right"></div><div class="button-top"></div><div class="button-bottom"></div><div class="button-text">' + (null == (__t = locale.intro.launch) ? "" : __t) + "</div></button></div>";
            return __p
        }
    }
    , {
        lodash: 10
    }],
    148: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="preloader"><canvas id="preloader-canvas"></canvas><div class="preloader-percent">' + (null == (__t = locale.intro.loading) ? "" : __t) + "</div></div>";
            return __p
        }
    }
    , {
        lodash: 10
    }],
    149: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="score"><div class="outro-scoring"></div><p class="title">' + (null == (__t = locale.outro.score.title) ? "" : __t) + '</p><p class="total"></p><p class="items"><span>' + (null == (__t = locale.outro.score.items1) ? "" : __t) + '</span><span class="scoreresult">14</span> <span>' + (null == (__t = locale.outro.score.items2) ? "" : __t) + '</span></p><p class="replay"><button><div class="button-left"></div><div class="button-right"></div><div class="button-top"></div><div class="button-bottom"></div><div class="button-text">' + (null == (__t = locale.outro.score.replay) ? "" : __t) + '</div></button></p><p class="share"><button><div class="button-left"></div><div class="button-right"></div><div class="button-top"></div><div class="button-bottom"></div><div class="button-text">' + (null == (__t = locale.outro.score.share) ? "" : __t) + '</div></button></p><div class="outro-popin v-align"></div><div class="onshare-wechat"><div class="close"><div class="first"></div><div class="second"></div></div><div class="center-vertical"><img class="qrcodewechat" src="img/share/wechat-onshare.jpg"><div>' + (null == (__t = locale.outro.score.onshare) ? "" : __t) + "</div></div></div></div>";
            return __p
        }
    }
    , {
        lodash: 10
    }],
    150: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="close"><span class="icons-outro icon-close"></span></div><div class="inner"><p class="share">' + (null == (__t = locale.outro.popin.share) ? "" : __t) + '</p><div class="ctas"><div class="share-item share-fb"><span class="border"></span> <span class="icons-outro icon-fb"></span></div><div class="share-item share-twitter"><span class="border"></span> <span class="icons-outro icon-twitter"></span></div><div class="share-item share-weibo"><span class="border"></span> <span class="icons-outro icon-weibo"></span></div><img id="qrcode" src=""></div></div><div class="logo"></div>';
            return __p
        }
    }
    , {
        lodash: 10
    }],
    151: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="intro-tpack"><div class="arrow-left arrow"></div><div class="arrow-right arrow"></div><div class="intro-tpack-instruction"><div class="step1">' + (null == (__t = locale.intro.instruction) ? "" : __t) + '</div><div class="step2">' + (null == (__t = locale.intro.instruction) ? "" : __t) + '</div><div class="step3">' + (null == (__t = locale.intro.instruction) ? "" : __t) + '</div><div class="step4">' + (null == (__t = locale.intro.instruction) ? "" : __t) + '</div><div class="step5">' + (null == (__t = locale.intro.instruction) ? "" : __t) + '</div></div><canvas id="canvas" width="512" height="512" class="intro-tpack-cardboard"></canvas><div class="intro-tpack-steps"><div class="point selected" data-frame="0"><span></span></div><div class="point" data-frame="12" data-increment="0"><span></span></div><div class="point" data-frame="24" data-increment="1"><span></span></div><div class="point" data-frame="50" data-increment="2"><span></span></div><div class="point" data-frame="79" data-increment="3"><span></span></div><div class="point" data-frame="90" data-increment="4"><span></span></div></div><button><div class="button-left"></div><div class="button-right"></div><div class="button-top"></div><div class="button-bottom"></div><div class="button-text button-before">' + (null == (__t = locale.intro.skipBtn) ? "" : __t) + '</div><div class="button-text button-last">' + (null == (__t = locale.intro.launchBtn) ? "" : __t) + "</div></button></div>";
            return __p
        }
    }
    , {
        lodash: 10
    }],
    152: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="intro-tuto"><div class="square" id="scene"><div class="square1"></div><div class="square2"></div><div class="square3"></div></div><div class="intro-cs-legals">' + (null == (__t = locale.intro.tutorial) ? "" : __t) + '</div><button><div class="button-left"></div><div class="button-right"></div><div class="button-top"></div><div class="button-bottom"></div><div class="button-text">' + (null == (__t = locale.intro.enterBtn) ? "" : __t) + '</div></button><div class="icons-intro icon-wifi"></div><div class="intro-xp-loader-bestxp">' + (null == (__t = locale.intro.bestxp) ? "" : __t) + "</div></div>";
            return __p
        }
    }
    , {
        lodash: 10
    }],
    153: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="wechat-layer"><div class="arrow-wechat"></div><div class="text"></div></div>';
            return __p
        }
    }
    , {
        lodash: 10
    }],
    154: [function(require, module, exports) {
        require("lodash");
        module.exports = function(obj) {
            var __t, __p = "";
            Array.prototype.join;
            with (obj || {})
                __p += '<div class="intro-xp-loader v-align"><div class="intro-xp-loader-wrapper"><div class="intro-xp-loader-title">' + (null == (__t = locale.intro.titleLoader) ? "" : __t) + '</div><canvas class="intro-xp-loader-canvas"></canvas><div class="intro-xp-loader-text">' + (null == (__t = locale.intro.loading) ? "" : __t) + '</div><div class="icons-intro icon-wifi"></div><div class="intro-xp-loader-bestxp">' + (null == (__t = locale.intro.bestxp) ? "" : __t) + "</div></div></div>";
            return __p
        }
    }
    , {
        lodash: 10
    }]
}, {}, [51]);
